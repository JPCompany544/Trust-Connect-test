(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var $i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function F3(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var o=!1;try{o=this instanceof r}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var sg={exports:{}},Sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1;function oD(){if(I1)return Sc;I1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var f in o)f!=="key"&&(c[f]=o[f])}else c=o;return o=c.ref,{$$typeof:t,type:r,key:u,ref:o!==void 0?o:null,props:c}}return Sc.Fragment=e,Sc.jsx=n,Sc.jsxs=n,Sc}var R1;function aD(){return R1||(R1=1,sg.exports=oD()),sg.exports}var ei=aD(),og={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1;function cD(){if(B1)return we;B1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),m=Symbol.iterator;function v(x){return x===null||typeof x!="object"?null:(x=m&&x[m]||x["@@iterator"],typeof x=="function"?x:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,A={};function N(x,B,V){this.props=x,this.context=B,this.refs=A,this.updater=V||E}N.prototype.isReactComponent={},N.prototype.setState=function(x,B){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,B,"setState")},N.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function j(){}j.prototype=N.prototype;function T(x,B,V){this.props=x,this.context=B,this.refs=A,this.updater=V||E}var $=T.prototype=new j;$.constructor=T,w($,N.prototype),$.isPureReactComponent=!0;var D=Array.isArray;function R(){}var U={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function P(x,B,V){var q=V.ref;return{$$typeof:t,type:x,key:B,ref:q!==void 0?q:null,props:V}}function W(x,B){return P(x.type,B,x.props)}function ee(x){return typeof x=="object"&&x!==null&&x.$$typeof===t}function G(x){var B={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(V){return B[V]})}var F=/\/+/g;function Y(x,B){return typeof x=="object"&&x!==null&&x.key!=null?G(""+x.key):B.toString(36)}function _(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(R,R):(x.status="pending",x.then(function(B){x.status==="pending"&&(x.status="fulfilled",x.value=B)},function(B){x.status==="pending"&&(x.status="rejected",x.reason=B)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function S(x,B,V,q,Q){var ie=typeof x;(ie==="undefined"||ie==="boolean")&&(x=null);var oe=!1;if(x===null)oe=!0;else switch(ie){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(x.$$typeof){case t:case e:oe=!0;break;case g:return oe=x._init,S(oe(x._payload),B,V,q,Q)}}if(oe)return Q=Q(x),oe=q===""?"."+Y(x,0):q,D(Q)?(V="",oe!=null&&(V=oe.replace(F,"$&/")+"/"),S(Q,B,V,"",function(ye){return ye})):Q!=null&&(ee(Q)&&(Q=W(Q,V+(Q.key==null||x&&x.key===Q.key?"":(""+Q.key).replace(F,"$&/")+"/")+oe)),B.push(Q)),1;oe=0;var de=q===""?".":q+":";if(D(x))for(var ue=0;ue<x.length;ue++)q=x[ue],ie=de+Y(q,ue),oe+=S(q,B,V,ie,Q);else if(ue=v(x),typeof ue=="function")for(x=ue.call(x),ue=0;!(q=x.next()).done;)q=q.value,ie=de+Y(q,ue++),oe+=S(q,B,V,ie,Q);else if(ie==="object"){if(typeof x.then=="function")return S(_(x),B,V,q,Q);throw B=String(x),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return oe}function C(x,B,V){if(x==null)return x;var q=[],Q=0;return S(x,q,"","",function(ie){return B.call(V,ie,Q++)}),q}function z(x){if(x._status===-1){var B=x._result;B=B(),B.then(function(V){(x._status===0||x._status===-1)&&(x._status=1,x._result=V)},function(V){(x._status===0||x._status===-1)&&(x._status=2,x._result=V)}),x._status===-1&&(x._status=0,x._result=B)}if(x._status===1)return x._result.default;throw x._result}var M=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},L={map:C,forEach:function(x,B,V){C(x,function(){B.apply(this,arguments)},V)},count:function(x){var B=0;return C(x,function(){B++}),B},toArray:function(x){return C(x,function(B){return B})||[]},only:function(x){if(!ee(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return we.Activity=b,we.Children=L,we.Component=N,we.Fragment=n,we.Profiler=o,we.PureComponent=T,we.StrictMode=r,we.Suspense=h,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,we.__COMPILER_RUNTIME={__proto__:null,c:function(x){return U.H.useMemoCache(x)}},we.cache=function(x){return function(){return x.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(x,B,V){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var q=w({},x.props),Q=x.key;if(B!=null)for(ie in B.key!==void 0&&(Q=""+B.key),B)!H.call(B,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&B.ref===void 0||(q[ie]=B[ie]);var ie=arguments.length-2;if(ie===1)q.children=V;else if(1<ie){for(var oe=Array(ie),de=0;de<ie;de++)oe[de]=arguments[de+2];q.children=oe}return P(x.type,Q,q)},we.createContext=function(x){return x={$$typeof:u,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:c,_context:x},x},we.createElement=function(x,B,V){var q,Q={},ie=null;if(B!=null)for(q in B.key!==void 0&&(ie=""+B.key),B)H.call(B,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(Q[q]=B[q]);var oe=arguments.length-2;if(oe===1)Q.children=V;else if(1<oe){for(var de=Array(oe),ue=0;ue<oe;ue++)de[ue]=arguments[ue+2];Q.children=de}if(x&&x.defaultProps)for(q in oe=x.defaultProps,oe)Q[q]===void 0&&(Q[q]=oe[q]);return P(x,ie,Q)},we.createRef=function(){return{current:null}},we.forwardRef=function(x){return{$$typeof:f,render:x}},we.isValidElement=ee,we.lazy=function(x){return{$$typeof:g,_payload:{_status:-1,_result:x},_init:z}},we.memo=function(x,B){return{$$typeof:d,type:x,compare:B===void 0?null:B}},we.startTransition=function(x){var B=U.T,V={};U.T=V;try{var q=x(),Q=U.S;Q!==null&&Q(V,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(R,M)}catch(ie){M(ie)}finally{B!==null&&V.types!==null&&(B.types=V.types),U.T=B}},we.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},we.use=function(x){return U.H.use(x)},we.useActionState=function(x,B,V){return U.H.useActionState(x,B,V)},we.useCallback=function(x,B){return U.H.useCallback(x,B)},we.useContext=function(x){return U.H.useContext(x)},we.useDebugValue=function(){},we.useDeferredValue=function(x,B){return U.H.useDeferredValue(x,B)},we.useEffect=function(x,B){return U.H.useEffect(x,B)},we.useEffectEvent=function(x){return U.H.useEffectEvent(x)},we.useId=function(){return U.H.useId()},we.useImperativeHandle=function(x,B,V){return U.H.useImperativeHandle(x,B,V)},we.useInsertionEffect=function(x,B){return U.H.useInsertionEffect(x,B)},we.useLayoutEffect=function(x,B){return U.H.useLayoutEffect(x,B)},we.useMemo=function(x,B){return U.H.useMemo(x,B)},we.useOptimistic=function(x,B){return U.H.useOptimistic(x,B)},we.useReducer=function(x,B,V){return U.H.useReducer(x,B,V)},we.useRef=function(x){return U.H.useRef(x)},we.useState=function(x){return U.H.useState(x)},we.useSyncExternalStore=function(x,B,V){return U.H.useSyncExternalStore(x,B,V)},we.useTransition=function(){return U.H.useTransition()},we.version="19.2.0",we}var U1;function P0(){return U1||(U1=1,og.exports=cD()),og.exports}var ha=P0();const uD=Oa(ha);var ag={exports:{}},_c={},cg={exports:{}},ug={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1;function lD(){return N1||(N1=1,(function(t){function e(S,C){var z=S.length;S.push(C);e:for(;0<z;){var M=z-1>>>1,L=S[M];if(0<o(L,C))S[M]=C,S[z]=L,z=M;else break e}}function n(S){return S.length===0?null:S[0]}function r(S){if(S.length===0)return null;var C=S[0],z=S.pop();if(z!==C){S[0]=z;e:for(var M=0,L=S.length,x=L>>>1;M<x;){var B=2*(M+1)-1,V=S[B],q=B+1,Q=S[q];if(0>o(V,z))q<L&&0>o(Q,V)?(S[M]=Q,S[q]=z,M=q):(S[M]=V,S[B]=z,M=B);else if(q<L&&0>o(Q,z))S[M]=Q,S[q]=z,M=q;else break e}}return C}function o(S,C){var z=S.sortIndex-C.sortIndex;return z!==0?z:S.id-C.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var h=[],d=[],g=1,b=null,m=3,v=!1,E=!1,w=!1,A=!1,N=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function $(S){for(var C=n(d);C!==null;){if(C.callback===null)r(d);else if(C.startTime<=S)r(d),C.sortIndex=C.expirationTime,e(h,C);else break;C=n(d)}}function D(S){if(w=!1,$(S),!E)if(n(h)!==null)E=!0,R||(R=!0,G());else{var C=n(d);C!==null&&_(D,C.startTime-S)}}var R=!1,U=-1,H=5,P=-1;function W(){return A?!0:!(t.unstable_now()-P<H)}function ee(){if(A=!1,R){var S=t.unstable_now();P=S;var C=!0;try{e:{E=!1,w&&(w=!1,j(U),U=-1),v=!0;var z=m;try{t:{for($(S),b=n(h);b!==null&&!(b.expirationTime>S&&W());){var M=b.callback;if(typeof M=="function"){b.callback=null,m=b.priorityLevel;var L=M(b.expirationTime<=S);if(S=t.unstable_now(),typeof L=="function"){b.callback=L,$(S),C=!0;break t}b===n(h)&&r(h),$(S)}else r(h);b=n(h)}if(b!==null)C=!0;else{var x=n(d);x!==null&&_(D,x.startTime-S),C=!1}}break e}finally{b=null,m=z,v=!1}C=void 0}}finally{C?G():R=!1}}}var G;if(typeof T=="function")G=function(){T(ee)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Y=F.port2;F.port1.onmessage=ee,G=function(){Y.postMessage(null)}}else G=function(){N(ee,0)};function _(S,C){U=N(function(){S(t.unstable_now())},C)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(S){S.callback=null},t.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<S?Math.floor(1e3/S):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(S){switch(m){case 1:case 2:case 3:var C=3;break;default:C=m}var z=m;m=C;try{return S()}finally{m=z}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(S,C){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var z=m;m=S;try{return C()}finally{m=z}},t.unstable_scheduleCallback=function(S,C,z){var M=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?M+z:M):z=M,S){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=z+L,S={id:g++,callback:C,priorityLevel:S,startTime:z,expirationTime:L,sortIndex:-1},z>M?(S.sortIndex=z,e(d,S),n(h)===null&&S===n(d)&&(w?(j(U),U=-1):w=!0,_(D,z-M))):(S.sortIndex=L,e(h,S),E||v||(E=!0,R||(R=!0,G()))),S},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(S){var C=m;return function(){var z=m;m=C;try{return S.apply(this,arguments)}finally{m=z}}}})(ug)),ug}var M1;function fD(){return M1||(M1=1,cg.exports=lD()),cg.exports}var lg={exports:{}},Lt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j1;function hD(){if(j1)return Lt;j1=1;var t=P0();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(h,d,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:h,containerInfo:d,implementation:g}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Lt.createPortal=function(h,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return c(h,d,null,g)},Lt.flushSync=function(h){var d=u.T,g=r.p;try{if(u.T=null,r.p=2,h)return h()}finally{u.T=d,r.p=g,r.d.f()}},Lt.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(h,d))},Lt.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Lt.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var g=d.as,b=f(g,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?r.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:b,integrity:m,fetchPriority:v}):g==="script"&&r.d.X(h,{crossOrigin:b,integrity:m,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Lt.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=f(d.as,d.crossOrigin);r.d.M(h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(h)},Lt.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,b=f(g,d.crossOrigin);r.d.L(h,g,{crossOrigin:b,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Lt.preloadModule=function(h,d){if(typeof h=="string")if(d){var g=f(d.as,d.crossOrigin);r.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(h)},Lt.requestFormReset=function(h){r.d.r(h)},Lt.unstable_batchedUpdates=function(h,d){return h(d)},Lt.useFormState=function(h,d,g){return u.H.useFormState(h,d,g)},Lt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Lt.version="19.2.0",Lt}var z1;function dD(){if(z1)return lg.exports;z1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),lg.exports=hD(),lg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q1;function pD(){if(q1)return _c;q1=1;var t=fD(),e=P0(),n=dD();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function c(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(c(i)!==i)throw Error(r(188))}function d(i){var s=i.alternate;if(!s){if(s=c(i),s===null)throw Error(r(188));return s!==i?null:i}for(var a=i,l=s;;){var p=a.return;if(p===null)break;var y=p.alternate;if(y===null){if(l=p.return,l!==null){a=l;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===a)return h(p),i;if(y===l)return h(p),s;y=y.sibling}throw Error(r(188))}if(a.return!==l.return)a=p,l=y;else{for(var O=!1,I=p.child;I;){if(I===a){O=!0,a=p,l=y;break}if(I===l){O=!0,l=p,a=y;break}I=I.sibling}if(!O){for(I=y.child;I;){if(I===a){O=!0,a=y,l=p;break}if(I===l){O=!0,l=y,a=p;break}I=I.sibling}if(!O)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?i:s}function g(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=g(i),s!==null)return s;i=i.sibling}return null}var b=Object.assign,m=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),T=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=ee&&i[ee]||i["@@iterator"],typeof i=="function"?i:null)}var F=Symbol.for("react.client.reference");function Y(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===F?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case N:return"Profiler";case A:return"StrictMode";case D:return"Suspense";case R:return"SuspenseList";case P:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case T:return i.displayName||"Context";case j:return(i._context.displayName||"Context")+".Consumer";case $:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return s=i.displayName||null,s!==null?s:Y(i.type)||"Memo";case H:s=i._payload,i=i._init;try{return Y(i(s))}catch{}}return null}var _=Array.isArray,S=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,C=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},M=[],L=-1;function x(i){return{current:i}}function B(i){0>L||(i.current=M[L],M[L]=null,L--)}function V(i,s){L++,M[L]=i.current,i.current=s}var q=x(null),Q=x(null),ie=x(null),oe=x(null);function de(i,s){switch(V(ie,s),V(Q,i),V(q,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?e1(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=e1(s),i=t1(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}B(q),V(q,i)}function ue(){B(q),B(Q),B(ie)}function ye(i){i.memoizedState!==null&&V(oe,i);var s=q.current,a=t1(s,i.type);s!==a&&(V(Q,i),V(q,a))}function xe(i){Q.current===i&&(B(q),B(Q)),oe.current===i&&(B(oe),bc._currentValue=z)}var ze,We;function He(i){if(ze===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);ze=s&&s[1]||"",We=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ze+i+We}var Tt=!1;function ri(i,s){if(!i||Tt)return"";Tt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(ne){var te=ne}Reflect.construct(i,[],ae)}else{try{ae.call()}catch(ne){te=ne}i.call(ae.prototype)}}else{try{throw Error()}catch(ne){te=ne}(ae=i())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=l.DetermineComponentFrameRoot(),O=y[0],I=y[1];if(O&&I){var k=O.split(`
`),J=I.split(`
`);for(p=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;p<J.length&&!J[p].includes("DetermineComponentFrameRoot");)p++;if(l===k.length||p===J.length)for(l=k.length-1,p=J.length-1;1<=l&&0<=p&&k[l]!==J[p];)p--;for(;1<=l&&0<=p;l--,p--)if(k[l]!==J[p]){if(l!==1||p!==1)do if(l--,p--,0>p||k[l]!==J[p]){var re=`
`+k[l].replace(" at new "," at ");return i.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",i.displayName)),re}while(1<=l&&0<=p);break}}}finally{Tt=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?He(a):""}function Mi(i,s){switch(i.tag){case 26:case 27:case 5:return He(i.type);case 16:return He("Lazy");case 13:return i.child!==s&&s!==null?He("Suspense Fallback"):He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return ri(i.type,!1);case 11:return ri(i.type.render,!1);case 1:return ri(i.type,!0);case 31:return He("Activity");default:return""}}function ji(i){try{var s="",a=null;do s+=Mi(i,a),a=i,i=i.return;while(i);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var uo=Object.prototype.hasOwnProperty,lo=t.unstable_scheduleCallback,ms=t.unstable_cancelCallback,Hu=t.unstable_shouldYield,ku=t.unstable_requestPaint,Pt=t.unstable_now,Fu=t.unstable_getCurrentPriorityLevel,Ca=t.unstable_ImmediatePriority,Vu=t.unstable_UserBlockingPriority,fo=t.unstable_NormalPriority,Kh=t.unstable_LowPriority,Ku=t.unstable_IdlePriority,H8=t.log,k8=t.unstable_setDisableYieldValue,$a=null,vn=null;function _r(i){if(typeof H8=="function"&&k8(i),vn&&typeof vn.setStrictMode=="function")try{vn.setStrictMode($a,i)}catch{}}var En=Math.clz32?Math.clz32:K8,F8=Math.log,V8=Math.LN2;function K8(i){return i>>>=0,i===0?32:31-(F8(i)/V8|0)|0}var Gu=256,Yu=262144,Qu=4194304;function bs(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Zu(i,s,a){var l=i.pendingLanes;if(l===0)return 0;var p=0,y=i.suspendedLanes,O=i.pingedLanes;i=i.warmLanes;var I=l&134217727;return I!==0?(l=I&~y,l!==0?p=bs(l):(O&=I,O!==0?p=bs(O):a||(a=I&~i,a!==0&&(p=bs(a))))):(I=l&~y,I!==0?p=bs(I):O!==0?p=bs(O):a||(a=l&~i,a!==0&&(p=bs(a)))),p===0?0:s!==0&&s!==p&&(s&y)===0&&(y=p&-p,a=s&-s,y>=a||y===32&&(a&4194048)!==0)?s:p}function Ia(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function G8(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nm(){var i=Qu;return Qu<<=1,(Qu&62914560)===0&&(Qu=4194304),i}function Gh(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function Ra(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Y8(i,s,a,l,p,y){var O=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,k=i.expirationTimes,J=i.hiddenUpdates;for(a=O&~a;0<a;){var re=31-En(a),ae=1<<re;I[re]=0,k[re]=-1;var te=J[re];if(te!==null)for(J[re]=null,re=0;re<te.length;re++){var ne=te[re];ne!==null&&(ne.lane&=-536870913)}a&=~ae}l!==0&&Mm(i,l,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(O&~s))}function Mm(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var l=31-En(s);i.entangledLanes|=s,i.entanglements[l]=i.entanglements[l]|1073741824|a&261930}function jm(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var l=31-En(a),p=1<<l;p&s|i[l]&s&&(i[l]|=s),a&=~p}}function zm(i,s){var a=s&-s;return a=(a&42)!==0?1:Yh(a),(a&(i.suspendedLanes|s))!==0?0:a}function Yh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Qh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function qm(){var i=C.p;return i!==0?i:(i=window.event,i===void 0?32:x1(i.type))}function Pm(i,s){var a=C.p;try{return C.p=i,s()}finally{C.p=a}}var xr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+xr,en="__reactProps$"+xr,ho="__reactContainer$"+xr,Zh="__reactEvents$"+xr,Q8="__reactListeners$"+xr,Z8="__reactHandles$"+xr,Lm="__reactResources$"+xr,Ba="__reactMarker$"+xr;function Xh(i){delete i[Ct],delete i[en],delete i[Zh],delete i[Q8],delete i[Z8]}function po(i){var s=i[Ct];if(s)return s;for(var a=i.parentNode;a;){if(s=a[ho]||a[Ct]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=c1(i);i!==null;){if(a=i[Ct])return a;i=c1(i)}return s}i=a,a=i.parentNode}return null}function go(i){if(i=i[Ct]||i[ho]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Ua(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function yo(i){var s=i[Lm];return s||(s=i[Lm]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function vt(i){i[Ba]=!0}var Hm=new Set,km={};function ws(i,s){mo(i,s),mo(i+"Capture",s)}function mo(i,s){for(km[i]=s,i=0;i<s.length;i++)Hm.add(s[i])}var X8=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fm={},Vm={};function J8(i){return uo.call(Vm,i)?!0:uo.call(Fm,i)?!1:X8.test(i)?Vm[i]=!0:(Fm[i]=!0,!1)}function Xu(i,s,a){if(J8(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function Ju(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function zi(i,s,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+l)}}function Mn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Km(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function W8(i,s,a){var l=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return p.call(this)},set:function(O){a=""+O,y.call(this,O)}}),Object.defineProperty(i,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(O){a=""+O},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Jh(i){if(!i._valueTracker){var s=Km(i)?"checked":"value";i._valueTracker=W8(i,s,""+i[s])}}function Gm(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return i&&(l=Km(i)?i.checked?"true":"false":i.value),i=l,i!==a?(s.setValue(i),!0):!1}function Wu(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var eA=/[\n"\\]/g;function jn(i){return i.replace(eA,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Wh(i,s,a,l,p,y,O,I){i.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.type=O:i.removeAttribute("type"),s!=null?O==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Mn(s)):i.value!==""+Mn(s)&&(i.value=""+Mn(s)):O!=="submit"&&O!=="reset"||i.removeAttribute("value"),s!=null?ed(i,O,Mn(s)):a!=null?ed(i,O,Mn(a)):l!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+Mn(I):i.removeAttribute("name")}function Ym(i,s,a,l,p,y,O,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),s!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){Jh(i);return}a=a!=null?""+Mn(a):"",s=s!=null?""+Mn(s):a,I||s===i.value||(i.value=s),i.defaultValue=s}l=l??p,l=typeof l!="function"&&typeof l!="symbol"&&!!l,i.checked=I?i.checked:!!l,i.defaultChecked=!!l,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(i.name=O),Jh(i)}function ed(i,s,a){s==="number"&&Wu(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function bo(i,s,a,l){if(i=i.options,s){s={};for(var p=0;p<a.length;p++)s["$"+a[p]]=!0;for(a=0;a<i.length;a++)p=s.hasOwnProperty("$"+i[a].value),i[a].selected!==p&&(i[a].selected=p),p&&l&&(i[a].defaultSelected=!0)}else{for(a=""+Mn(a),s=null,p=0;p<i.length;p++){if(i[p].value===a){i[p].selected=!0,l&&(i[p].defaultSelected=!0);return}s!==null||i[p].disabled||(s=i[p])}s!==null&&(s.selected=!0)}}function Qm(i,s,a){if(s!=null&&(s=""+Mn(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+Mn(a):""}function Zm(i,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(_(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=Mn(s),i.defaultValue=a,l=i.textContent,l===a&&l!==""&&l!==null&&(i.value=l),Jh(i)}function wo(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var tA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xm(i,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":l?i.setProperty(s,a):typeof a!="number"||a===0||tA.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function Jm(i,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="");for(var p in s)l=s[p],s.hasOwnProperty(p)&&a[p]!==l&&Xm(i,p,l)}else for(var y in s)s.hasOwnProperty(y)&&Xm(i,y,s[y])}function td(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),iA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function el(i){return iA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function qi(){}var nd=null;function id(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vo=null,Eo=null;function Wm(i){var s=go(i);if(s&&(i=s.stateNode)){var a=i[en]||null;e:switch(i=s.stateNode,s.type){case"input":if(Wh(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+jn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==i&&l.form===i.form){var p=l[en]||null;if(!p)throw Error(r(90));Wh(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===i.form&&Gm(l)}break e;case"textarea":Qm(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&bo(i,!!a.multiple,s,!1)}}}var rd=!1;function eb(i,s,a){if(rd)return i(s,a);rd=!0;try{var l=i(s);return l}finally{if(rd=!1,(vo!==null||Eo!==null)&&(Ll(),vo&&(s=vo,i=Eo,Eo=vo=null,Wm(s),i)))for(s=0;s<i.length;s++)Wm(i[s])}}function Na(i,s){var a=i.stateNode;if(a===null)return null;var l=a[en]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(i=i.type,l=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!l;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sd=!1;if(Pi)try{var Ma={};Object.defineProperty(Ma,"passive",{get:function(){sd=!0}}),window.addEventListener("test",Ma,Ma),window.removeEventListener("test",Ma,Ma)}catch{sd=!1}var Or=null,od=null,tl=null;function tb(){if(tl)return tl;var i,s=od,a=s.length,l,p="value"in Or?Or.value:Or.textContent,y=p.length;for(i=0;i<a&&s[i]===p[i];i++);var O=a-i;for(l=1;l<=O&&s[a-l]===p[y-l];l++);return tl=p.slice(i,1<l?1-l:void 0)}function nl(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function il(){return!0}function nb(){return!1}function tn(i){function s(a,l,p,y,O){this._reactName=a,this._targetInst=p,this.type=l,this.nativeEvent=y,this.target=O,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?il:nb,this.isPropagationStopped=nb,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=il)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=il)},persist:function(){},isPersistent:il}),s}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rl=tn(vs),ja=b({},vs,{view:0,detail:0}),rA=tn(ja),ad,cd,za,sl=b({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ld,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==za&&(za&&i.type==="mousemove"?(ad=i.screenX-za.screenX,cd=i.screenY-za.screenY):cd=ad=0,za=i),ad)},movementY:function(i){return"movementY"in i?i.movementY:cd}}),ib=tn(sl),sA=b({},sl,{dataTransfer:0}),oA=tn(sA),aA=b({},ja,{relatedTarget:0}),ud=tn(aA),cA=b({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),uA=tn(cA),lA=b({},vs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),fA=tn(lA),hA=b({},vs,{data:0}),rb=tn(hA),dA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yA(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=gA[i])?!!s[i]:!1}function ld(){return yA}var mA=b({},ja,{key:function(i){if(i.key){var s=dA[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=nl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?pA[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ld,charCode:function(i){return i.type==="keypress"?nl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?nl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),bA=tn(mA),wA=b({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sb=tn(wA),vA=b({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ld}),EA=tn(vA),SA=b({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),_A=tn(SA),xA=b({},sl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),OA=tn(xA),AA=b({},vs,{newState:0,oldState:0}),DA=tn(AA),TA=[9,13,27,32],fd=Pi&&"CompositionEvent"in window,qa=null;Pi&&"documentMode"in document&&(qa=document.documentMode);var CA=Pi&&"TextEvent"in window&&!qa,ob=Pi&&(!fd||qa&&8<qa&&11>=qa),ab=" ",cb=!1;function ub(i,s){switch(i){case"keyup":return TA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var So=!1;function $A(i,s){switch(i){case"compositionend":return lb(s);case"keypress":return s.which!==32?null:(cb=!0,ab);case"textInput":return i=s.data,i===ab&&cb?null:i;default:return null}}function IA(i,s){if(So)return i==="compositionend"||!fd&&ub(i,s)?(i=tb(),tl=od=Or=null,So=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ob&&s.locale!=="ko"?null:s.data;default:return null}}var RA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fb(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!RA[i.type]:s==="textarea"}function hb(i,s,a,l){vo?Eo?Eo.push(l):Eo=[l]:vo=l,s=Yl(s,"onChange"),0<s.length&&(a=new rl("onChange","change",null,a,l),i.push({event:a,listeners:s}))}var Pa=null,La=null;function BA(i){Yv(i,0)}function ol(i){var s=Ua(i);if(Gm(s))return i}function db(i,s){if(i==="change")return s}var pb=!1;if(Pi){var hd;if(Pi){var dd="oninput"in document;if(!dd){var gb=document.createElement("div");gb.setAttribute("oninput","return;"),dd=typeof gb.oninput=="function"}hd=dd}else hd=!1;pb=hd&&(!document.documentMode||9<document.documentMode)}function yb(){Pa&&(Pa.detachEvent("onpropertychange",mb),La=Pa=null)}function mb(i){if(i.propertyName==="value"&&ol(La)){var s=[];hb(s,La,i,id(i)),eb(BA,s)}}function UA(i,s,a){i==="focusin"?(yb(),Pa=s,La=a,Pa.attachEvent("onpropertychange",mb)):i==="focusout"&&yb()}function NA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ol(La)}function MA(i,s){if(i==="click")return ol(s)}function jA(i,s){if(i==="input"||i==="change")return ol(s)}function zA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Sn=typeof Object.is=="function"?Object.is:zA;function Ha(i,s){if(Sn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var p=a[l];if(!uo.call(s,p)||!Sn(i[p],s[p]))return!1}return!0}function bb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function wb(i,s){var a=bb(i);i=0;for(var l;a;){if(a.nodeType===3){if(l=i+a.textContent.length,i<=s&&l>=s)return{node:a,offset:s-i};i=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=bb(a)}}function vb(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?vb(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Eb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Wu(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=Wu(i.document)}return s}function pd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var qA=Pi&&"documentMode"in document&&11>=document.documentMode,_o=null,gd=null,ka=null,yd=!1;function Sb(i,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yd||_o==null||_o!==Wu(l)||(l=_o,"selectionStart"in l&&pd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ka&&Ha(ka,l)||(ka=l,l=Yl(gd,"onSelect"),0<l.length&&(s=new rl("onSelect","select",null,s,a),i.push({event:s,listeners:l}),s.target=_o)))}function Es(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var xo={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionrun:Es("Transition","TransitionRun"),transitionstart:Es("Transition","TransitionStart"),transitioncancel:Es("Transition","TransitionCancel"),transitionend:Es("Transition","TransitionEnd")},md={},_b={};Pi&&(_b=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function Ss(i){if(md[i])return md[i];if(!xo[i])return i;var s=xo[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in _b)return md[i]=s[a];return i}var xb=Ss("animationend"),Ob=Ss("animationiteration"),Ab=Ss("animationstart"),PA=Ss("transitionrun"),LA=Ss("transitionstart"),HA=Ss("transitioncancel"),Db=Ss("transitionend"),Tb=new Map,bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bd.push("scrollEnd");function si(i,s){Tb.set(i,s),ws(s,[i])}var al=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},zn=[],Oo=0,wd=0;function cl(){for(var i=Oo,s=wd=Oo=0;s<i;){var a=zn[s];zn[s++]=null;var l=zn[s];zn[s++]=null;var p=zn[s];zn[s++]=null;var y=zn[s];if(zn[s++]=null,l!==null&&p!==null){var O=l.pending;O===null?p.next=p:(p.next=O.next,O.next=p),l.pending=p}y!==0&&Cb(a,p,y)}}function ul(i,s,a,l){zn[Oo++]=i,zn[Oo++]=s,zn[Oo++]=a,zn[Oo++]=l,wd|=l,i.lanes|=l,i=i.alternate,i!==null&&(i.lanes|=l)}function vd(i,s,a,l){return ul(i,s,a,l),ll(i)}function _s(i,s){return ul(i,null,null,s),ll(i)}function Cb(i,s,a){i.lanes|=a;var l=i.alternate;l!==null&&(l.lanes|=a);for(var p=!1,y=i.return;y!==null;)y.childLanes|=a,l=y.alternate,l!==null&&(l.childLanes|=a),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,p&&s!==null&&(p=31-En(a),i=y.hiddenUpdates,l=i[p],l===null?i[p]=[s]:l.push(s),s.lane=a|536870912),y):null}function ll(i){if(50<fc)throw fc=0,Cp=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Ao={};function kA(i,s,a,l){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(i,s,a,l){return new kA(i,s,a,l)}function Ed(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Li(i,s){var a=i.alternate;return a===null?(a=_n(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function $b(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function fl(i,s,a,l,p,y){var O=0;if(l=i,typeof i=="function")Ed(i)&&(O=1);else if(typeof i=="string")O=Y6(i,a,q.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case P:return i=_n(31,a,s,p),i.elementType=P,i.lanes=y,i;case w:return xs(a.children,p,y,s);case A:O=8,p|=24;break;case N:return i=_n(12,a,s,p|2),i.elementType=N,i.lanes=y,i;case D:return i=_n(13,a,s,p),i.elementType=D,i.lanes=y,i;case R:return i=_n(19,a,s,p),i.elementType=R,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case T:O=10;break e;case j:O=9;break e;case $:O=11;break e;case U:O=14;break e;case H:O=16,l=null;break e}O=29,a=Error(r(130,i===null?"null":typeof i,"")),l=null}return s=_n(O,a,s,p),s.elementType=i,s.type=l,s.lanes=y,s}function xs(i,s,a,l){return i=_n(7,i,l,s),i.lanes=a,i}function Sd(i,s,a){return i=_n(6,i,null,s),i.lanes=a,i}function Ib(i){var s=_n(18,null,null,0);return s.stateNode=i,s}function _d(i,s,a){return s=_n(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Rb=new WeakMap;function qn(i,s){if(typeof i=="object"&&i!==null){var a=Rb.get(i);return a!==void 0?a:(s={value:i,source:s,stack:ji(s)},Rb.set(i,s),s)}return{value:i,source:s,stack:ji(s)}}var Do=[],To=0,hl=null,Fa=0,Pn=[],Ln=0,Ar=null,bi=1,wi="";function Hi(i,s){Do[To++]=Fa,Do[To++]=hl,hl=i,Fa=s}function Bb(i,s,a){Pn[Ln++]=bi,Pn[Ln++]=wi,Pn[Ln++]=Ar,Ar=i;var l=bi;i=wi;var p=32-En(l)-1;l&=~(1<<p),a+=1;var y=32-En(s)+p;if(30<y){var O=p-p%5;y=(l&(1<<O)-1).toString(32),l>>=O,p-=O,bi=1<<32-En(s)+p|a<<p|l,wi=y+i}else bi=1<<y|a<<p|l,wi=i}function xd(i){i.return!==null&&(Hi(i,1),Bb(i,1,0))}function Od(i){for(;i===hl;)hl=Do[--To],Do[To]=null,Fa=Do[--To],Do[To]=null;for(;i===Ar;)Ar=Pn[--Ln],Pn[Ln]=null,wi=Pn[--Ln],Pn[Ln]=null,bi=Pn[--Ln],Pn[Ln]=null}function Ub(i,s){Pn[Ln++]=bi,Pn[Ln++]=wi,Pn[Ln++]=Ar,bi=s.id,wi=s.overflow,Ar=i}var $t=null,Ze=null,Ce=!1,Dr=null,Hn=!1,Ad=Error(r(519));function Tr(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Va(qn(s,i)),Ad}function Nb(i){var s=i.stateNode,a=i.type,l=i.memoizedProps;switch(s[Ct]=i,s[en]=l,a){case"dialog":Ae("cancel",s),Ae("close",s);break;case"iframe":case"object":case"embed":Ae("load",s);break;case"video":case"audio":for(a=0;a<dc.length;a++)Ae(dc[a],s);break;case"source":Ae("error",s);break;case"img":case"image":case"link":Ae("error",s),Ae("load",s);break;case"details":Ae("toggle",s);break;case"input":Ae("invalid",s),Ym(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ae("invalid",s);break;case"textarea":Ae("invalid",s),Zm(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Jv(s.textContent,a)?(l.popover!=null&&(Ae("beforetoggle",s),Ae("toggle",s)),l.onScroll!=null&&Ae("scroll",s),l.onScrollEnd!=null&&Ae("scrollend",s),l.onClick!=null&&(s.onclick=qi),s=!0):s=!1,s||Tr(i,!0)}function Mb(i){for($t=i.return;$t;)switch($t.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:$t=$t.return}}function Co(i){if(i!==$t)return!1;if(!Ce)return Mb(i),Ce=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Fp(i.type,i.memoizedProps)),a=!a),a&&Ze&&Tr(i),Mb(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Ze=a1(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Ze=a1(i)}else s===27?(s=Ze,Hr(i.type)?(i=Qp,Qp=null,Ze=i):Ze=s):Ze=$t?Fn(i.stateNode.nextSibling):null;return!0}function Os(){Ze=$t=null,Ce=!1}function Dd(){var i=Dr;return i!==null&&(on===null?on=i:on.push.apply(on,i),Dr=null),i}function Va(i){Dr===null?Dr=[i]:Dr.push(i)}var Td=x(null),As=null,ki=null;function Cr(i,s,a){V(Td,s._currentValue),s._currentValue=a}function Fi(i){i._currentValue=Td.current,B(Td)}function Cd(i,s,a){for(;i!==null;){var l=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),i===a)break;i=i.return}}function $d(i,s,a,l){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var O=p.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=p;for(var k=0;k<s.length;k++)if(I.context===s[k]){y.lanes|=a,I=y.alternate,I!==null&&(I.lanes|=a),Cd(y.return,a,i),l||(O=null);break e}y=I.next}}else if(p.tag===18){if(O=p.return,O===null)throw Error(r(341));O.lanes|=a,y=O.alternate,y!==null&&(y.lanes|=a),Cd(O,a,i),O=null}else O=p.child;if(O!==null)O.return=p;else for(O=p;O!==null;){if(O===i){O=null;break}if(p=O.sibling,p!==null){p.return=O.return,O=p;break}O=O.return}p=O}}function $o(i,s,a,l){i=null;for(var p=s,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var O=p.alternate;if(O===null)throw Error(r(387));if(O=O.memoizedProps,O!==null){var I=p.type;Sn(p.pendingProps.value,O.value)||(i!==null?i.push(I):i=[I])}}else if(p===oe.current){if(O=p.alternate,O===null)throw Error(r(387));O.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(bc):i=[bc])}p=p.return}i!==null&&$d(s,i,a,l),s.flags|=262144}function dl(i){for(i=i.firstContext;i!==null;){if(!Sn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ds(i){As=i,ki=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function It(i){return jb(As,i)}function pl(i,s){return As===null&&Ds(i),jb(i,s)}function jb(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ki===null){if(i===null)throw Error(r(308));ki=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ki=ki.next=s;return a}var FA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,l){i.push(l)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},VA=t.unstable_scheduleCallback,KA=t.unstable_NormalPriority,ut={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Id(){return{controller:new FA,data:new Map,refCount:0}}function Ka(i){i.refCount--,i.refCount===0&&VA(KA,function(){i.controller.abort()})}var Ga=null,Rd=0,Io=0,Ro=null;function GA(i,s){if(Ga===null){var a=Ga=[];Rd=0,Io=Np(),Ro={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Rd++,s.then(zb,zb),s}function zb(){if(--Rd===0&&Ga!==null){Ro!==null&&(Ro.status="fulfilled");var i=Ga;Ga=null,Io=0,Ro=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function YA(i,s){var a=[],l={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return i.then(function(){l.status="fulfilled",l.value=s;for(var p=0;p<a.length;p++)(0,a[p])(s)},function(p){for(l.status="rejected",l.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),l}var qb=S.S;S.S=function(i,s){Sv=Pt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&GA(i,s),qb!==null&&qb(i,s)};var Ts=x(null);function Bd(){var i=Ts.current;return i!==null?i:Ke.pooledCache}function gl(i,s){s===null?V(Ts,Ts.current):V(Ts,s.pool)}function Pb(){var i=Bd();return i===null?null:{parent:ut._currentValue,pool:i}}var Bo=Error(r(460)),Ud=Error(r(474)),yl=Error(r(542)),ml={then:function(){}};function Lb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Hb(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(qi,qi),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Fb(i),i;default:if(typeof s.status=="string")s.then(qi,qi);else{if(i=Ke,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(l){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=l}},function(l){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Fb(i),i}throw $s=s,Bo}}function Cs(i){try{var s=i._init;return s(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?($s=a,Bo):a}}var $s=null;function kb(){if($s===null)throw Error(r(459));var i=$s;return $s=null,i}function Fb(i){if(i===Bo||i===yl)throw Error(r(483))}var Uo=null,Ya=0;function bl(i){var s=Ya;return Ya+=1,Uo===null&&(Uo=[]),Hb(Uo,i,s)}function Qa(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function wl(i,s){throw s.$$typeof===m?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Vb(i){function s(Z,K){if(i){var X=Z.deletions;X===null?(Z.deletions=[K],Z.flags|=16):X.push(K)}}function a(Z,K){if(!i)return null;for(;K!==null;)s(Z,K),K=K.sibling;return null}function l(Z){for(var K=new Map;Z!==null;)Z.key!==null?K.set(Z.key,Z):K.set(Z.index,Z),Z=Z.sibling;return K}function p(Z,K){return Z=Li(Z,K),Z.index=0,Z.sibling=null,Z}function y(Z,K,X){return Z.index=X,i?(X=Z.alternate,X!==null?(X=X.index,X<K?(Z.flags|=67108866,K):X):(Z.flags|=67108866,K)):(Z.flags|=1048576,K)}function O(Z){return i&&Z.alternate===null&&(Z.flags|=67108866),Z}function I(Z,K,X,se){return K===null||K.tag!==6?(K=Sd(X,Z.mode,se),K.return=Z,K):(K=p(K,X),K.return=Z,K)}function k(Z,K,X,se){var me=X.type;return me===w?re(Z,K,X.props.children,se,X.key):K!==null&&(K.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===H&&Cs(me)===K.type)?(K=p(K,X.props),Qa(K,X),K.return=Z,K):(K=fl(X.type,X.key,X.props,null,Z.mode,se),Qa(K,X),K.return=Z,K)}function J(Z,K,X,se){return K===null||K.tag!==4||K.stateNode.containerInfo!==X.containerInfo||K.stateNode.implementation!==X.implementation?(K=_d(X,Z.mode,se),K.return=Z,K):(K=p(K,X.children||[]),K.return=Z,K)}function re(Z,K,X,se,me){return K===null||K.tag!==7?(K=xs(X,Z.mode,se,me),K.return=Z,K):(K=p(K,X),K.return=Z,K)}function ae(Z,K,X){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Sd(""+K,Z.mode,X),K.return=Z,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case v:return X=fl(K.type,K.key,K.props,null,Z.mode,X),Qa(X,K),X.return=Z,X;case E:return K=_d(K,Z.mode,X),K.return=Z,K;case H:return K=Cs(K),ae(Z,K,X)}if(_(K)||G(K))return K=xs(K,Z.mode,X,null),K.return=Z,K;if(typeof K.then=="function")return ae(Z,bl(K),X);if(K.$$typeof===T)return ae(Z,pl(Z,K),X);wl(Z,K)}return null}function te(Z,K,X,se){var me=K!==null?K.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return me!==null?null:I(Z,K,""+X,se);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case v:return X.key===me?k(Z,K,X,se):null;case E:return X.key===me?J(Z,K,X,se):null;case H:return X=Cs(X),te(Z,K,X,se)}if(_(X)||G(X))return me!==null?null:re(Z,K,X,se,null);if(typeof X.then=="function")return te(Z,K,bl(X),se);if(X.$$typeof===T)return te(Z,K,pl(Z,X),se);wl(Z,X)}return null}function ne(Z,K,X,se,me){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Z=Z.get(X)||null,I(K,Z,""+se,me);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case v:return Z=Z.get(se.key===null?X:se.key)||null,k(K,Z,se,me);case E:return Z=Z.get(se.key===null?X:se.key)||null,J(K,Z,se,me);case H:return se=Cs(se),ne(Z,K,X,se,me)}if(_(se)||G(se))return Z=Z.get(X)||null,re(K,Z,se,me,null);if(typeof se.then=="function")return ne(Z,K,X,bl(se),me);if(se.$$typeof===T)return ne(Z,K,X,pl(K,se),me);wl(K,se)}return null}function pe(Z,K,X,se){for(var me=null,Re=null,ge=K,Se=K=0,Te=null;ge!==null&&Se<X.length;Se++){ge.index>Se?(Te=ge,ge=null):Te=ge.sibling;var Be=te(Z,ge,X[Se],se);if(Be===null){ge===null&&(ge=Te);break}i&&ge&&Be.alternate===null&&s(Z,ge),K=y(Be,K,Se),Re===null?me=Be:Re.sibling=Be,Re=Be,ge=Te}if(Se===X.length)return a(Z,ge),Ce&&Hi(Z,Se),me;if(ge===null){for(;Se<X.length;Se++)ge=ae(Z,X[Se],se),ge!==null&&(K=y(ge,K,Se),Re===null?me=ge:Re.sibling=ge,Re=ge);return Ce&&Hi(Z,Se),me}for(ge=l(ge);Se<X.length;Se++)Te=ne(ge,Z,Se,X[Se],se),Te!==null&&(i&&Te.alternate!==null&&ge.delete(Te.key===null?Se:Te.key),K=y(Te,K,Se),Re===null?me=Te:Re.sibling=Te,Re=Te);return i&&ge.forEach(function(Gr){return s(Z,Gr)}),Ce&&Hi(Z,Se),me}function be(Z,K,X,se){if(X==null)throw Error(r(151));for(var me=null,Re=null,ge=K,Se=K=0,Te=null,Be=X.next();ge!==null&&!Be.done;Se++,Be=X.next()){ge.index>Se?(Te=ge,ge=null):Te=ge.sibling;var Gr=te(Z,ge,Be.value,se);if(Gr===null){ge===null&&(ge=Te);break}i&&ge&&Gr.alternate===null&&s(Z,ge),K=y(Gr,K,Se),Re===null?me=Gr:Re.sibling=Gr,Re=Gr,ge=Te}if(Be.done)return a(Z,ge),Ce&&Hi(Z,Se),me;if(ge===null){for(;!Be.done;Se++,Be=X.next())Be=ae(Z,Be.value,se),Be!==null&&(K=y(Be,K,Se),Re===null?me=Be:Re.sibling=Be,Re=Be);return Ce&&Hi(Z,Se),me}for(ge=l(ge);!Be.done;Se++,Be=X.next())Be=ne(ge,Z,Se,Be.value,se),Be!==null&&(i&&Be.alternate!==null&&ge.delete(Be.key===null?Se:Be.key),K=y(Be,K,Se),Re===null?me=Be:Re.sibling=Be,Re=Be);return i&&ge.forEach(function(sD){return s(Z,sD)}),Ce&&Hi(Z,Se),me}function Ve(Z,K,X,se){if(typeof X=="object"&&X!==null&&X.type===w&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case v:e:{for(var me=X.key;K!==null;){if(K.key===me){if(me=X.type,me===w){if(K.tag===7){a(Z,K.sibling),se=p(K,X.props.children),se.return=Z,Z=se;break e}}else if(K.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===H&&Cs(me)===K.type){a(Z,K.sibling),se=p(K,X.props),Qa(se,X),se.return=Z,Z=se;break e}a(Z,K);break}else s(Z,K);K=K.sibling}X.type===w?(se=xs(X.props.children,Z.mode,se,X.key),se.return=Z,Z=se):(se=fl(X.type,X.key,X.props,null,Z.mode,se),Qa(se,X),se.return=Z,Z=se)}return O(Z);case E:e:{for(me=X.key;K!==null;){if(K.key===me)if(K.tag===4&&K.stateNode.containerInfo===X.containerInfo&&K.stateNode.implementation===X.implementation){a(Z,K.sibling),se=p(K,X.children||[]),se.return=Z,Z=se;break e}else{a(Z,K);break}else s(Z,K);K=K.sibling}se=_d(X,Z.mode,se),se.return=Z,Z=se}return O(Z);case H:return X=Cs(X),Ve(Z,K,X,se)}if(_(X))return pe(Z,K,X,se);if(G(X)){if(me=G(X),typeof me!="function")throw Error(r(150));return X=me.call(X),be(Z,K,X,se)}if(typeof X.then=="function")return Ve(Z,K,bl(X),se);if(X.$$typeof===T)return Ve(Z,K,pl(Z,X),se);wl(Z,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,K!==null&&K.tag===6?(a(Z,K.sibling),se=p(K,X),se.return=Z,Z=se):(a(Z,K),se=Sd(X,Z.mode,se),se.return=Z,Z=se),O(Z)):a(Z,K)}return function(Z,K,X,se){try{Ya=0;var me=Ve(Z,K,X,se);return Uo=null,me}catch(ge){if(ge===Bo||ge===yl)throw ge;var Re=_n(29,ge,null,Z.mode);return Re.lanes=se,Re.return=Z,Re}finally{}}}var Is=Vb(!0),Kb=Vb(!1),$r=!1;function Nd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Md(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ir(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Rr(i,s,a){var l=i.updateQueue;if(l===null)return null;if(l=l.shared,(Me&2)!==0){var p=l.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),l.pending=s,s=ll(i),Cb(i,null,a),s}return ul(i,l,s,a),ll(i)}function Za(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=i.pendingLanes,a|=l,s.lanes=a,jm(i,a)}}function jd(i,s){var a=i.updateQueue,l=i.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var p=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var O={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?p=y=O:y=y.next=O,a=a.next}while(a!==null);y===null?p=y=s:y=y.next=s}else p=y=s;a={baseState:l.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:l.shared,callbacks:l.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var zd=!1;function Xa(){if(zd){var i=Ro;if(i!==null)throw i}}function Ja(i,s,a,l){zd=!1;var p=i.updateQueue;$r=!1;var y=p.firstBaseUpdate,O=p.lastBaseUpdate,I=p.shared.pending;if(I!==null){p.shared.pending=null;var k=I,J=k.next;k.next=null,O===null?y=J:O.next=J,O=k;var re=i.alternate;re!==null&&(re=re.updateQueue,I=re.lastBaseUpdate,I!==O&&(I===null?re.firstBaseUpdate=J:I.next=J,re.lastBaseUpdate=k))}if(y!==null){var ae=p.baseState;O=0,re=J=k=null,I=y;do{var te=I.lane&-536870913,ne=te!==I.lane;if(ne?(De&te)===te:(l&te)===te){te!==0&&te===Io&&(zd=!0),re!==null&&(re=re.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var pe=i,be=I;te=s;var Ve=a;switch(be.tag){case 1:if(pe=be.payload,typeof pe=="function"){ae=pe.call(Ve,ae,te);break e}ae=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=be.payload,te=typeof pe=="function"?pe.call(Ve,ae,te):pe,te==null)break e;ae=b({},ae,te);break e;case 2:$r=!0}}te=I.callback,te!==null&&(i.flags|=64,ne&&(i.flags|=8192),ne=p.callbacks,ne===null?p.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:I.tag,payload:I.payload,callback:I.callback,next:null},re===null?(J=re=ne,k=ae):re=re.next=ne,O|=te;if(I=I.next,I===null){if(I=p.shared.pending,I===null)break;ne=I,I=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);re===null&&(k=ae),p.baseState=k,p.firstBaseUpdate=J,p.lastBaseUpdate=re,y===null&&(p.shared.lanes=0),jr|=O,i.lanes=O,i.memoizedState=ae}}function Gb(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function Yb(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Gb(a[i],s)}var No=x(null),vl=x(0);function Qb(i,s){i=Wi,V(vl,i),V(No,s),Wi=i|s.baseLanes}function qd(){V(vl,Wi),V(No,No.current)}function Pd(){Wi=vl.current,B(No),B(vl)}var xn=x(null),kn=null;function Br(i){var s=i.alternate;V(st,st.current&1),V(xn,i),kn===null&&(s===null||No.current!==null||s.memoizedState!==null)&&(kn=i)}function Ld(i){V(st,st.current),V(xn,i),kn===null&&(kn=i)}function Zb(i){i.tag===22?(V(st,st.current),V(xn,i),kn===null&&(kn=i)):Ur()}function Ur(){V(st,st.current),V(xn,xn.current)}function On(i){B(xn),kn===i&&(kn=null),B(st)}var st=x(0);function El(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gp(a)||Yp(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Vi=0,Ee=null,ke=null,lt=null,Sl=!1,Mo=!1,Rs=!1,_l=0,Wa=0,jo=null,QA=0;function it(){throw Error(r(321))}function Hd(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!Sn(i[a],s[a]))return!1;return!0}function kd(i,s,a,l,p,y){return Vi=y,Ee=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,S.H=i===null||i.memoizedState===null?Bw:rp,Rs=!1,y=a(l,p),Rs=!1,Mo&&(y=Jb(s,a,l,p)),Xb(i),y}function Xb(i){S.H=nc;var s=ke!==null&&ke.next!==null;if(Vi=0,lt=ke=Ee=null,Sl=!1,Wa=0,jo=null,s)throw Error(r(300));i===null||ft||(i=i.dependencies,i!==null&&dl(i)&&(ft=!0))}function Jb(i,s,a,l){Ee=i;var p=0;do{if(Mo&&(jo=null),Wa=0,Mo=!1,25<=p)throw Error(r(301));if(p+=1,lt=ke=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}S.H=Uw,y=s(a,l)}while(Mo);return y}function ZA(){var i=S.H,s=i.useState()[0];return s=typeof s.then=="function"?ec(s):s,i=i.useState()[0],(ke!==null?ke.memoizedState:null)!==i&&(Ee.flags|=1024),s}function Fd(){var i=_l!==0;return _l=0,i}function Vd(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function Kd(i){if(Sl){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Sl=!1}Vi=0,lt=ke=Ee=null,Mo=!1,Wa=_l=0,jo=null}function Yt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Ee.memoizedState=lt=i:lt=lt.next=i,lt}function ot(){if(ke===null){var i=Ee.alternate;i=i!==null?i.memoizedState:null}else i=ke.next;var s=lt===null?Ee.memoizedState:lt.next;if(s!==null)lt=s,ke=i;else{if(i===null)throw Ee.alternate===null?Error(r(467)):Error(r(310));ke=i,i={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},lt===null?Ee.memoizedState=lt=i:lt=lt.next=i}return lt}function xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(i){var s=Wa;return Wa+=1,jo===null&&(jo=[]),i=Hb(jo,i,s),s=Ee,(lt===null?s.memoizedState:lt.next)===null&&(s=s.alternate,S.H=s===null||s.memoizedState===null?Bw:rp),i}function Ol(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ec(i);if(i.$$typeof===T)return It(i)}throw Error(r(438,String(i)))}function Gd(i){var s=null,a=Ee.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Ee.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=xl(),Ee.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),l=0;l<i;l++)a[l]=W;return s.index++,a}function Ki(i,s){return typeof s=="function"?s(i):s}function Al(i){var s=ot();return Yd(s,ke,i)}function Yd(i,s,a){var l=i.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var p=i.baseQueue,y=l.pending;if(y!==null){if(p!==null){var O=p.next;p.next=y.next,y.next=O}s.baseQueue=p=y,l.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{s=p.next;var I=O=null,k=null,J=s,re=!1;do{var ae=J.lane&-536870913;if(ae!==J.lane?(De&ae)===ae:(Vi&ae)===ae){var te=J.revertLane;if(te===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ae===Io&&(re=!0);else if((Vi&te)===te){J=J.next,te===Io&&(re=!0);continue}else ae={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(I=k=ae,O=y):k=k.next=ae,Ee.lanes|=te,jr|=te;ae=J.action,Rs&&a(y,ae),y=J.hasEagerState?J.eagerState:a(y,ae)}else te={lane:ae,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(I=k=te,O=y):k=k.next=te,Ee.lanes|=ae,jr|=ae;J=J.next}while(J!==null&&J!==s);if(k===null?O=y:k.next=I,!Sn(y,i.memoizedState)&&(ft=!0,re&&(a=Ro,a!==null)))throw a;i.memoizedState=y,i.baseState=O,i.baseQueue=k,l.lastRenderedState=y}return p===null&&(l.lanes=0),[i.memoizedState,l.dispatch]}function Qd(i){var s=ot(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=i;var l=a.dispatch,p=a.pending,y=s.memoizedState;if(p!==null){a.pending=null;var O=p=p.next;do y=i(y,O.action),O=O.next;while(O!==p);Sn(y,s.memoizedState)||(ft=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,l]}function Wb(i,s,a){var l=Ee,p=ot(),y=Ce;if(y){if(a===void 0)throw Error(r(407));a=a()}else a=s();var O=!Sn((ke||p).memoizedState,a);if(O&&(p.memoizedState=a,ft=!0),p=p.queue,Jd(nw.bind(null,l,p,i),[i]),p.getSnapshot!==s||O||lt!==null&&lt.memoizedState.tag&1){if(l.flags|=2048,zo(9,{destroy:void 0},tw.bind(null,l,p,a,s),null),Ke===null)throw Error(r(349));y||(Vi&127)!==0||ew(l,s,a)}return a}function ew(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=Ee.updateQueue,s===null?(s=xl(),Ee.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function tw(i,s,a,l){s.value=a,s.getSnapshot=l,iw(s)&&rw(i)}function nw(i,s,a){return a(function(){iw(s)&&rw(i)})}function iw(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!Sn(i,a)}catch{return!0}}function rw(i){var s=_s(i,2);s!==null&&an(s,i,2)}function Zd(i){var s=Yt();if(typeof i=="function"){var a=i;if(i=a(),Rs){_r(!0);try{a()}finally{_r(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:i},s}function sw(i,s,a,l){return i.baseState=a,Yd(i,ke,typeof l=="function"?l:Ki)}function XA(i,s,a,l,p){if(Cl(i))throw Error(r(485));if(i=s.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){y.listeners.push(O)}};S.T!==null?a(!0):y.isTransition=!1,l(y),a=s.pending,a===null?(y.next=s.pending=y,ow(s,y)):(y.next=a.next,s.pending=a.next=y)}}function ow(i,s){var a=s.action,l=s.payload,p=i.state;if(s.isTransition){var y=S.T,O={};S.T=O;try{var I=a(p,l),k=S.S;k!==null&&k(O,I),aw(i,s,I)}catch(J){Xd(i,s,J)}finally{y!==null&&O.types!==null&&(y.types=O.types),S.T=y}}else try{y=a(p,l),aw(i,s,y)}catch(J){Xd(i,s,J)}}function aw(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){cw(i,s,l)},function(l){return Xd(i,s,l)}):cw(i,s,a)}function cw(i,s,a){s.status="fulfilled",s.value=a,uw(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,ow(i,a)))}function Xd(i,s,a){var l=i.pending;if(i.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,uw(s),s=s.next;while(s!==l)}i.action=null}function uw(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function lw(i,s){return s}function fw(i,s){if(Ce){var a=Ke.formState;if(a!==null){e:{var l=Ee;if(Ce){if(Ze){t:{for(var p=Ze,y=Hn;p.nodeType!==8;){if(!y){p=null;break t}if(p=Fn(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Ze=Fn(p.nextSibling),l=p.data==="F!";break e}}Tr(l)}l=!1}l&&(s=a[0])}}return a=Yt(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lw,lastRenderedState:s},a.queue=l,a=$w.bind(null,Ee,l),l.dispatch=a,l=Zd(!1),y=ip.bind(null,Ee,!1,l.queue),l=Yt(),p={state:s,dispatch:null,action:i,pending:null},l.queue=p,a=XA.bind(null,Ee,p,y,a),p.dispatch=a,l.memoizedState=i,[s,a,!1]}function hw(i){var s=ot();return dw(s,ke,i)}function dw(i,s,a){if(s=Yd(i,s,lw)[0],i=Al(Ki)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=ec(s)}catch(O){throw O===Bo?yl:O}else l=s;s=ot();var p=s.queue,y=p.dispatch;return a!==s.memoizedState&&(Ee.flags|=2048,zo(9,{destroy:void 0},JA.bind(null,p,a),null)),[l,y,i]}function JA(i,s){i.action=s}function pw(i){var s=ot(),a=ke;if(a!==null)return dw(s,a,i);ot(),s=s.memoizedState,a=ot();var l=a.queue.dispatch;return a.memoizedState=i,[s,l,!1]}function zo(i,s,a,l){return i={tag:i,create:a,deps:l,inst:s,next:null},s=Ee.updateQueue,s===null&&(s=xl(),Ee.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(l=a.next,a.next=i,i.next=l,s.lastEffect=i),i}function gw(){return ot().memoizedState}function Dl(i,s,a,l){var p=Yt();Ee.flags|=i,p.memoizedState=zo(1|s,{destroy:void 0},a,l===void 0?null:l)}function Tl(i,s,a,l){var p=ot();l=l===void 0?null:l;var y=p.memoizedState.inst;ke!==null&&l!==null&&Hd(l,ke.memoizedState.deps)?p.memoizedState=zo(s,y,a,l):(Ee.flags|=i,p.memoizedState=zo(1|s,y,a,l))}function yw(i,s){Dl(8390656,8,i,s)}function Jd(i,s){Tl(2048,8,i,s)}function WA(i){Ee.flags|=4;var s=Ee.updateQueue;if(s===null)s=xl(),Ee.updateQueue=s,s.events=[i];else{var a=s.events;a===null?s.events=[i]:a.push(i)}}function mw(i){var s=ot().memoizedState;return WA({ref:s,nextImpl:i}),function(){if((Me&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function bw(i,s){return Tl(4,2,i,s)}function ww(i,s){return Tl(4,4,i,s)}function vw(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Ew(i,s,a){a=a!=null?a.concat([i]):null,Tl(4,4,vw.bind(null,s,i),a)}function Wd(){}function Sw(i,s){var a=ot();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Hd(s,l[1])?l[0]:(a.memoizedState=[i,s],i)}function _w(i,s){var a=ot();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Hd(s,l[1]))return l[0];if(l=i(),Rs){_r(!0);try{i()}finally{_r(!1)}}return a.memoizedState=[l,s],l}function ep(i,s,a){return a===void 0||(Vi&1073741824)!==0&&(De&261930)===0?i.memoizedState=s:(i.memoizedState=a,i=xv(),Ee.lanes|=i,jr|=i,a)}function xw(i,s,a,l){return Sn(a,s)?a:No.current!==null?(i=ep(i,a,l),Sn(i,s)||(ft=!0),i):(Vi&42)===0||(Vi&1073741824)!==0&&(De&261930)===0?(ft=!0,i.memoizedState=a):(i=xv(),Ee.lanes|=i,jr|=i,s)}function Ow(i,s,a,l,p){var y=C.p;C.p=y!==0&&8>y?y:8;var O=S.T,I={};S.T=I,ip(i,!1,s,a);try{var k=p(),J=S.S;if(J!==null&&J(I,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var re=YA(k,l);tc(i,s,re,Tn(i))}else tc(i,s,l,Tn(i))}catch(ae){tc(i,s,{then:function(){},status:"rejected",reason:ae},Tn())}finally{C.p=y,O!==null&&I.types!==null&&(O.types=I.types),S.T=O}}function e6(){}function tp(i,s,a,l){if(i.tag!==5)throw Error(r(476));var p=Aw(i).queue;Ow(i,p,s,z,a===null?e6:function(){return Dw(i),a(l)})}function Aw(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:z},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Dw(i){var s=Aw(i);s.next===null&&(s=i.alternate.memoizedState),tc(i,s.next.queue,{},Tn())}function np(){return It(bc)}function Tw(){return ot().memoizedState}function Cw(){return ot().memoizedState}function t6(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=Tn();i=Ir(a);var l=Rr(s,i,a);l!==null&&(an(l,s,a),Za(l,s,a)),s={cache:Id()},i.payload=s;return}s=s.return}}function n6(i,s,a){var l=Tn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Cl(i)?Iw(s,a):(a=vd(i,s,a,l),a!==null&&(an(a,i,l),Rw(a,s,l)))}function $w(i,s,a){var l=Tn();tc(i,s,a,l)}function tc(i,s,a,l){var p={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cl(i))Iw(s,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var O=s.lastRenderedState,I=y(O,a);if(p.hasEagerState=!0,p.eagerState=I,Sn(I,O))return ul(i,s,p,0),Ke===null&&cl(),!1}catch{}finally{}if(a=vd(i,s,p,l),a!==null)return an(a,i,l),Rw(a,s,l),!0}return!1}function ip(i,s,a,l){if(l={lane:2,revertLane:Np(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Cl(i)){if(s)throw Error(r(479))}else s=vd(i,a,l,2),s!==null&&an(s,i,2)}function Cl(i){var s=i.alternate;return i===Ee||s!==null&&s===Ee}function Iw(i,s){Mo=Sl=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function Rw(i,s,a){if((a&4194048)!==0){var l=s.lanes;l&=i.pendingLanes,a|=l,s.lanes=a,jm(i,a)}}var nc={readContext:It,use:Ol,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};nc.useEffectEvent=it;var Bw={readContext:It,use:Ol,useCallback:function(i,s){return Yt().memoizedState=[i,s===void 0?null:s],i},useContext:It,useEffect:yw,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Dl(4194308,4,vw.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Dl(4194308,4,i,s)},useInsertionEffect:function(i,s){Dl(4,2,i,s)},useMemo:function(i,s){var a=Yt();s=s===void 0?null:s;var l=i();if(Rs){_r(!0);try{i()}finally{_r(!1)}}return a.memoizedState=[l,s],l},useReducer:function(i,s,a){var l=Yt();if(a!==void 0){var p=a(s);if(Rs){_r(!0);try{a(s)}finally{_r(!1)}}}else p=s;return l.memoizedState=l.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},l.queue=i,i=i.dispatch=n6.bind(null,Ee,i),[l.memoizedState,i]},useRef:function(i){var s=Yt();return i={current:i},s.memoizedState=i},useState:function(i){i=Zd(i);var s=i.queue,a=$w.bind(null,Ee,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:Wd,useDeferredValue:function(i,s){var a=Yt();return ep(a,i,s)},useTransition:function(){var i=Zd(!1);return i=Ow.bind(null,Ee,i.queue,!0,!1),Yt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var l=Ee,p=Yt();if(Ce){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),Ke===null)throw Error(r(349));(De&127)!==0||ew(l,s,a)}p.memoizedState=a;var y={value:a,getSnapshot:s};return p.queue=y,yw(nw.bind(null,l,y,i),[i]),l.flags|=2048,zo(9,{destroy:void 0},tw.bind(null,l,y,a,s),null),a},useId:function(){var i=Yt(),s=Ke.identifierPrefix;if(Ce){var a=wi,l=bi;a=(l&~(1<<32-En(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=_l++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=QA++,s="_"+s+"r_"+a.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:np,useFormState:fw,useActionState:fw,useOptimistic:function(i){var s=Yt();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=ip.bind(null,Ee,!0,a),a.dispatch=s,[i,s]},useMemoCache:Gd,useCacheRefresh:function(){return Yt().memoizedState=t6.bind(null,Ee)},useEffectEvent:function(i){var s=Yt(),a={impl:i};return s.memoizedState=a,function(){if((Me&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},rp={readContext:It,use:Ol,useCallback:Sw,useContext:It,useEffect:Jd,useImperativeHandle:Ew,useInsertionEffect:bw,useLayoutEffect:ww,useMemo:_w,useReducer:Al,useRef:gw,useState:function(){return Al(Ki)},useDebugValue:Wd,useDeferredValue:function(i,s){var a=ot();return xw(a,ke.memoizedState,i,s)},useTransition:function(){var i=Al(Ki)[0],s=ot().memoizedState;return[typeof i=="boolean"?i:ec(i),s]},useSyncExternalStore:Wb,useId:Tw,useHostTransitionStatus:np,useFormState:hw,useActionState:hw,useOptimistic:function(i,s){var a=ot();return sw(a,ke,i,s)},useMemoCache:Gd,useCacheRefresh:Cw};rp.useEffectEvent=mw;var Uw={readContext:It,use:Ol,useCallback:Sw,useContext:It,useEffect:Jd,useImperativeHandle:Ew,useInsertionEffect:bw,useLayoutEffect:ww,useMemo:_w,useReducer:Qd,useRef:gw,useState:function(){return Qd(Ki)},useDebugValue:Wd,useDeferredValue:function(i,s){var a=ot();return ke===null?ep(a,i,s):xw(a,ke.memoizedState,i,s)},useTransition:function(){var i=Qd(Ki)[0],s=ot().memoizedState;return[typeof i=="boolean"?i:ec(i),s]},useSyncExternalStore:Wb,useId:Tw,useHostTransitionStatus:np,useFormState:pw,useActionState:pw,useOptimistic:function(i,s){var a=ot();return ke!==null?sw(a,ke,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Gd,useCacheRefresh:Cw};Uw.useEffectEvent=mw;function sp(i,s,a,l){s=i.memoizedState,a=a(l,s),a=a==null?s:b({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var op={enqueueSetState:function(i,s,a){i=i._reactInternals;var l=Tn(),p=Ir(l);p.payload=s,a!=null&&(p.callback=a),s=Rr(i,p,l),s!==null&&(an(s,i,l),Za(s,i,l))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var l=Tn(),p=Ir(l);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=Rr(i,p,l),s!==null&&(an(s,i,l),Za(s,i,l))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Tn(),l=Ir(a);l.tag=2,s!=null&&(l.callback=s),s=Rr(i,l,a),s!==null&&(an(s,i,a),Za(s,i,a))}};function Nw(i,s,a,l,p,y,O){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(l,y,O):s.prototype&&s.prototype.isPureReactComponent?!Ha(a,l)||!Ha(p,y):!0}function Mw(i,s,a,l){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==i&&op.enqueueReplaceState(s,s.state,null)}function Bs(i,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(i=i.defaultProps){a===s&&(a=b({},a));for(var p in i)a[p]===void 0&&(a[p]=i[p])}return a}function jw(i){al(i)}function zw(i){console.error(i)}function qw(i){al(i)}function $l(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Pw(i,s,a){try{var l=i.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function ap(i,s,a){return a=Ir(a),a.tag=3,a.payload={element:null},a.callback=function(){$l(i,s)},a}function Lw(i){return i=Ir(i),i.tag=3,i}function Hw(i,s,a,l){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var y=l.value;i.payload=function(){return p(y)},i.callback=function(){Pw(s,a,l)}}var O=a.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(i.callback=function(){Pw(s,a,l),typeof p!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var I=l.stack;this.componentDidCatch(l.value,{componentStack:I!==null?I:""})})}function i6(i,s,a,l,p){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&$o(s,a,p,!0),a=xn.current,a!==null){switch(a.tag){case 31:case 13:return kn===null?Hl():a.alternate===null&&rt===0&&(rt=3),a.flags&=-257,a.flags|=65536,a.lanes=p,l===ml?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Rp(i,l,p)),!1;case 22:return a.flags|=65536,l===ml?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Rp(i,l,p)),!1}throw Error(r(435,a.tag))}return Rp(i,l,p),Hl(),!1}if(Ce)return s=xn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,l!==Ad&&(i=Error(r(422),{cause:l}),Va(qn(i,a)))):(l!==Ad&&(s=Error(r(423),{cause:l}),Va(qn(s,a))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,l=qn(l,a),p=ap(i.stateNode,l,p),jd(i,p),rt!==4&&(rt=2)),!1;var y=Error(r(520),{cause:l});if(y=qn(y,a),lc===null?lc=[y]:lc.push(y),rt!==4&&(rt=2),s===null)return!0;l=qn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=p&-p,a.lanes|=i,i=ap(a.stateNode,l,i),jd(a,i),!1;case 1:if(s=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(zr===null||!zr.has(y))))return a.flags|=65536,p&=-p,a.lanes|=p,p=Lw(p),Hw(p,i,a,l),jd(a,p),!1}a=a.return}while(a!==null);return!1}var cp=Error(r(461)),ft=!1;function Rt(i,s,a,l){s.child=i===null?Kb(s,null,a,l):Is(s,i.child,a,l)}function kw(i,s,a,l,p){a=a.render;var y=s.ref;if("ref"in l){var O={};for(var I in l)I!=="ref"&&(O[I]=l[I])}else O=l;return Ds(s),l=kd(i,s,a,O,y,p),I=Fd(),i!==null&&!ft?(Vd(i,s,p),Gi(i,s,p)):(Ce&&I&&xd(s),s.flags|=1,Rt(i,s,l,p),s.child)}function Fw(i,s,a,l,p){if(i===null){var y=a.type;return typeof y=="function"&&!Ed(y)&&y.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=y,Vw(i,s,y,l,p)):(i=fl(a.type,null,l,s,s.mode,p),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,!yp(i,p)){var O=y.memoizedProps;if(a=a.compare,a=a!==null?a:Ha,a(O,l)&&i.ref===s.ref)return Gi(i,s,p)}return s.flags|=1,i=Li(y,l),i.ref=s.ref,i.return=s,s.child=i}function Vw(i,s,a,l,p){if(i!==null){var y=i.memoizedProps;if(Ha(y,l)&&i.ref===s.ref)if(ft=!1,s.pendingProps=l=y,yp(i,p))(i.flags&131072)!==0&&(ft=!0);else return s.lanes=i.lanes,Gi(i,s,p)}return up(i,s,a,l,p)}function Kw(i,s,a,l){var p=l.children,y=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|a:a,i!==null){for(l=s.child=i.child,p=0;l!==null;)p=p|l.lanes|l.childLanes,l=l.sibling;l=p&~y}else l=0,s.child=null;return Gw(i,s,y,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&gl(s,y!==null?y.cachePool:null),y!==null?Qb(s,y):qd(),Zb(s);else return l=s.lanes=536870912,Gw(i,s,y!==null?y.baseLanes|a:a,a,l)}else y!==null?(gl(s,y.cachePool),Qb(s,y),Ur(),s.memoizedState=null):(i!==null&&gl(s,null),qd(),Ur());return Rt(i,s,p,a),s.child}function ic(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Gw(i,s,a,l,p){var y=Bd();return y=y===null?null:{parent:ut._currentValue,pool:y},s.memoizedState={baseLanes:a,cachePool:y},i!==null&&gl(s,null),qd(),Zb(s),i!==null&&$o(i,s,l,!0),s.childLanes=p,null}function Il(i,s){return s=Bl({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function Yw(i,s,a){return Is(s,i.child,null,a),i=Il(s,s.pendingProps),i.flags|=2,On(s),s.memoizedState=null,i}function r6(i,s,a){var l=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Ce){if(l.mode==="hidden")return i=Il(s,l),s.lanes=536870912,ic(null,i);if(Ld(s),(i=Ze)?(i=o1(i,Hn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Ar!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=Ib(i),a.return=s,s.child=a,$t=s,Ze=null)):i=null,i===null)throw Tr(s);return s.lanes=536870912,null}return Il(s,l)}var y=i.memoizedState;if(y!==null){var O=y.dehydrated;if(Ld(s),p)if(s.flags&256)s.flags&=-257,s=Yw(i,s,a);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(ft||$o(i,s,a,!1),p=(a&i.childLanes)!==0,ft||p){if(l=Ke,l!==null&&(O=zm(l,a),O!==0&&O!==y.retryLane))throw y.retryLane=O,_s(i,O),an(l,i,O),cp;Hl(),s=Yw(i,s,a)}else i=y.treeContext,Ze=Fn(O.nextSibling),$t=s,Ce=!0,Dr=null,Hn=!1,i!==null&&Ub(s,i),s=Il(s,l),s.flags|=4096;return s}return i=Li(i.child,{mode:l.mode,children:l.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Rl(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function up(i,s,a,l,p){return Ds(s),a=kd(i,s,a,l,void 0,p),l=Fd(),i!==null&&!ft?(Vd(i,s,p),Gi(i,s,p)):(Ce&&l&&xd(s),s.flags|=1,Rt(i,s,a,p),s.child)}function Qw(i,s,a,l,p,y){return Ds(s),s.updateQueue=null,a=Jb(s,l,a,p),Xb(i),l=Fd(),i!==null&&!ft?(Vd(i,s,y),Gi(i,s,y)):(Ce&&l&&xd(s),s.flags|=1,Rt(i,s,a,y),s.child)}function Zw(i,s,a,l,p){if(Ds(s),s.stateNode===null){var y=Ao,O=a.contextType;typeof O=="object"&&O!==null&&(y=It(O)),y=new a(l,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=op,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=l,y.state=s.memoizedState,y.refs={},Nd(s),O=a.contextType,y.context=typeof O=="object"&&O!==null?It(O):Ao,y.state=s.memoizedState,O=a.getDerivedStateFromProps,typeof O=="function"&&(sp(s,a,O,l),y.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(O=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),O!==y.state&&op.enqueueReplaceState(y,y.state,null),Ja(s,l,y,p),Xa(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(i===null){y=s.stateNode;var I=s.memoizedProps,k=Bs(a,I);y.props=k;var J=y.context,re=a.contextType;O=Ao,typeof re=="object"&&re!==null&&(O=It(re));var ae=a.getDerivedStateFromProps;re=typeof ae=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,re||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||J!==O)&&Mw(s,y,l,O),$r=!1;var te=s.memoizedState;y.state=te,Ja(s,l,y,p),Xa(),J=s.memoizedState,I||te!==J||$r?(typeof ae=="function"&&(sp(s,a,ae,l),J=s.memoizedState),(k=$r||Nw(s,a,k,l,te,J,O))?(re||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=J),y.props=l,y.state=J,y.context=O,l=k):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{y=s.stateNode,Md(i,s),O=s.memoizedProps,re=Bs(a,O),y.props=re,ae=s.pendingProps,te=y.context,J=a.contextType,k=Ao,typeof J=="object"&&J!==null&&(k=It(J)),I=a.getDerivedStateFromProps,(J=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(O!==ae||te!==k)&&Mw(s,y,l,k),$r=!1,te=s.memoizedState,y.state=te,Ja(s,l,y,p),Xa();var ne=s.memoizedState;O!==ae||te!==ne||$r||i!==null&&i.dependencies!==null&&dl(i.dependencies)?(typeof I=="function"&&(sp(s,a,I,l),ne=s.memoizedState),(re=$r||Nw(s,a,re,l,te,ne,k)||i!==null&&i.dependencies!==null&&dl(i.dependencies))?(J||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,ne,k),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,ne,k)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=ne),y.props=l,y.state=ne,y.context=k,l=re):(typeof y.componentDidUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&te===i.memoizedState||(s.flags|=1024),l=!1)}return y=l,Rl(i,s),l=(s.flags&128)!==0,y||l?(y=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,i!==null&&l?(s.child=Is(s,i.child,null,p),s.child=Is(s,null,a,p)):Rt(i,s,a,p),s.memoizedState=y.state,i=s.child):i=Gi(i,s,p),i}function Xw(i,s,a,l){return Os(),s.flags|=256,Rt(i,s,a,l),s.child}var lp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fp(i){return{baseLanes:i,cachePool:Pb()}}function hp(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=Dn),i}function Jw(i,s,a){var l=s.pendingProps,p=!1,y=(s.flags&128)!==0,O;if((O=y)||(O=i!==null&&i.memoizedState===null?!1:(st.current&2)!==0),O&&(p=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,i===null){if(Ce){if(p?Br(s):Ur(),(i=Ze)?(i=o1(i,Hn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Ar!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=Ib(i),a.return=s,s.child=a,$t=s,Ze=null)):i=null,i===null)throw Tr(s);return Yp(i)?s.lanes=32:s.lanes=536870912,null}var I=l.children;return l=l.fallback,p?(Ur(),p=s.mode,I=Bl({mode:"hidden",children:I},p),l=xs(l,p,a,null),I.return=s,l.return=s,I.sibling=l,s.child=I,l=s.child,l.memoizedState=fp(a),l.childLanes=hp(i,O,a),s.memoizedState=lp,ic(null,l)):(Br(s),dp(s,I))}var k=i.memoizedState;if(k!==null&&(I=k.dehydrated,I!==null)){if(y)s.flags&256?(Br(s),s.flags&=-257,s=pp(i,s,a)):s.memoizedState!==null?(Ur(),s.child=i.child,s.flags|=128,s=null):(Ur(),I=l.fallback,p=s.mode,l=Bl({mode:"visible",children:l.children},p),I=xs(I,p,a,null),I.flags|=2,l.return=s,I.return=s,l.sibling=I,s.child=l,Is(s,i.child,null,a),l=s.child,l.memoizedState=fp(a),l.childLanes=hp(i,O,a),s.memoizedState=lp,s=ic(null,l));else if(Br(s),Yp(I)){if(O=I.nextSibling&&I.nextSibling.dataset,O)var J=O.dgst;O=J,l=Error(r(419)),l.stack="",l.digest=O,Va({value:l,source:null,stack:null}),s=pp(i,s,a)}else if(ft||$o(i,s,a,!1),O=(a&i.childLanes)!==0,ft||O){if(O=Ke,O!==null&&(l=zm(O,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,_s(i,l),an(O,i,l),cp;Gp(I)||Hl(),s=pp(i,s,a)}else Gp(I)?(s.flags|=192,s.child=i.child,s=null):(i=k.treeContext,Ze=Fn(I.nextSibling),$t=s,Ce=!0,Dr=null,Hn=!1,i!==null&&Ub(s,i),s=dp(s,l.children),s.flags|=4096);return s}return p?(Ur(),I=l.fallback,p=s.mode,k=i.child,J=k.sibling,l=Li(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,J!==null?I=Li(J,I):(I=xs(I,p,a,null),I.flags|=2),I.return=s,l.return=s,l.sibling=I,s.child=l,ic(null,l),l=s.child,I=i.child.memoizedState,I===null?I=fp(a):(p=I.cachePool,p!==null?(k=ut._currentValue,p=p.parent!==k?{parent:k,pool:k}:p):p=Pb(),I={baseLanes:I.baseLanes|a,cachePool:p}),l.memoizedState=I,l.childLanes=hp(i,O,a),s.memoizedState=lp,ic(i.child,l)):(Br(s),a=i.child,i=a.sibling,a=Li(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,i!==null&&(O=s.deletions,O===null?(s.deletions=[i],s.flags|=16):O.push(i)),s.child=a,s.memoizedState=null,a)}function dp(i,s){return s=Bl({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Bl(i,s){return i=_n(22,i,null,s),i.lanes=0,i}function pp(i,s,a){return Is(s,i.child,null,a),i=dp(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Ww(i,s,a){i.lanes|=s;var l=i.alternate;l!==null&&(l.lanes|=s),Cd(i.return,s,a)}function gp(i,s,a,l,p,y){var O=i.memoizedState;O===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:p,treeForkCount:y}:(O.isBackwards=s,O.rendering=null,O.renderingStartTime=0,O.last=l,O.tail=a,O.tailMode=p,O.treeForkCount=y)}function ev(i,s,a){var l=s.pendingProps,p=l.revealOrder,y=l.tail;l=l.children;var O=st.current,I=(O&2)!==0;if(I?(O=O&1|2,s.flags|=128):O&=1,V(st,O),Rt(i,s,l,a),l=Ce?Fa:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ww(i,a,s);else if(i.tag===19)Ww(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(a=s.child,p=null;a!==null;)i=a.alternate,i!==null&&El(i)===null&&(p=a),a=a.sibling;a=p,a===null?(p=s.child,s.child=null):(p=a.sibling,a.sibling=null),gp(s,!1,p,a,y,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,p=s.child,s.child=null;p!==null;){if(i=p.alternate,i!==null&&El(i)===null){s.child=p;break}i=p.sibling,p.sibling=a,a=p,p=i}gp(s,!0,a,null,y,l);break;case"together":gp(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Gi(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),jr|=s.lanes,(a&s.childLanes)===0)if(i!==null){if($o(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,a=Li(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=Li(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function yp(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&dl(i)))}function s6(i,s,a){switch(s.tag){case 3:de(s,s.stateNode.containerInfo),Cr(s,ut,i.memoizedState.cache),Os();break;case 27:case 5:ye(s);break;case 4:de(s,s.stateNode.containerInfo);break;case 10:Cr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ld(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Br(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Jw(i,s,a):(Br(s),i=Gi(i,s,a),i!==null?i.sibling:null);Br(s);break;case 19:var p=(i.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||($o(i,s,a,!1),l=(a&s.childLanes)!==0),p){if(l)return ev(i,s,a);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),V(st,st.current),l)break;return null;case 22:return s.lanes=0,Kw(i,s,a,s.pendingProps);case 24:Cr(s,ut,i.memoizedState.cache)}return Gi(i,s,a)}function tv(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)ft=!0;else{if(!yp(i,a)&&(s.flags&128)===0)return ft=!1,s6(i,s,a);ft=(i.flags&131072)!==0}else ft=!1,Ce&&(s.flags&1048576)!==0&&Bb(s,Fa,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(i=Cs(s.elementType),s.type=i,typeof i=="function")Ed(i)?(l=Bs(i,l),s.tag=1,s=Zw(null,s,i,l,a)):(s.tag=0,s=up(null,s,i,l,a));else{if(i!=null){var p=i.$$typeof;if(p===$){s.tag=11,s=kw(null,s,i,l,a);break e}else if(p===U){s.tag=14,s=Fw(null,s,i,l,a);break e}}throw s=Y(i)||i,Error(r(306,s,""))}}return s;case 0:return up(i,s,s.type,s.pendingProps,a);case 1:return l=s.type,p=Bs(l,s.pendingProps),Zw(i,s,l,p,a);case 3:e:{if(de(s,s.stateNode.containerInfo),i===null)throw Error(r(387));l=s.pendingProps;var y=s.memoizedState;p=y.element,Md(i,s),Ja(s,l,null,a);var O=s.memoizedState;if(l=O.cache,Cr(s,ut,l),l!==y.cache&&$d(s,[ut],a,!0),Xa(),l=O.element,y.isDehydrated)if(y={element:l,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=Xw(i,s,l,a);break e}else if(l!==p){p=qn(Error(r(424)),s),Va(p),s=Xw(i,s,l,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ze=Fn(i.firstChild),$t=s,Ce=!0,Dr=null,Hn=!0,a=Kb(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Os(),l===p){s=Gi(i,s,a);break e}Rt(i,s,l,a)}s=s.child}return s;case 26:return Rl(i,s),i===null?(a=h1(s.type,null,s.pendingProps,null))?s.memoizedState=a:Ce||(a=s.type,i=s.pendingProps,l=Ql(ie.current).createElement(a),l[Ct]=s,l[en]=i,Bt(l,a,i),vt(l),s.stateNode=l):s.memoizedState=h1(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ye(s),i===null&&Ce&&(l=s.stateNode=u1(s.type,s.pendingProps,ie.current),$t=s,Hn=!0,p=Ze,Hr(s.type)?(Qp=p,Ze=Fn(l.firstChild)):Ze=p),Rt(i,s,s.pendingProps.children,a),Rl(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Ce&&((p=l=Ze)&&(l=N6(l,s.type,s.pendingProps,Hn),l!==null?(s.stateNode=l,$t=s,Ze=Fn(l.firstChild),Hn=!1,p=!0):p=!1),p||Tr(s)),ye(s),p=s.type,y=s.pendingProps,O=i!==null?i.memoizedProps:null,l=y.children,Fp(p,y)?l=null:O!==null&&Fp(p,O)&&(s.flags|=32),s.memoizedState!==null&&(p=kd(i,s,ZA,null,null,a),bc._currentValue=p),Rl(i,s),Rt(i,s,l,a),s.child;case 6:return i===null&&Ce&&((i=a=Ze)&&(a=M6(a,s.pendingProps,Hn),a!==null?(s.stateNode=a,$t=s,Ze=null,i=!0):i=!1),i||Tr(s)),null;case 13:return Jw(i,s,a);case 4:return de(s,s.stateNode.containerInfo),l=s.pendingProps,i===null?s.child=Is(s,null,l,a):Rt(i,s,l,a),s.child;case 11:return kw(i,s,s.type,s.pendingProps,a);case 7:return Rt(i,s,s.pendingProps,a),s.child;case 8:return Rt(i,s,s.pendingProps.children,a),s.child;case 12:return Rt(i,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Cr(s,s.type,l.value),Rt(i,s,l.children,a),s.child;case 9:return p=s.type._context,l=s.pendingProps.children,Ds(s),p=It(p),l=l(p),s.flags|=1,Rt(i,s,l,a),s.child;case 14:return Fw(i,s,s.type,s.pendingProps,a);case 15:return Vw(i,s,s.type,s.pendingProps,a);case 19:return ev(i,s,a);case 31:return r6(i,s,a);case 22:return Kw(i,s,a,s.pendingProps);case 24:return Ds(s),l=It(ut),i===null?(p=Bd(),p===null&&(p=Ke,y=Id(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=a),p=y),s.memoizedState={parent:l,cache:p},Nd(s),Cr(s,ut,p)):((i.lanes&a)!==0&&(Md(i,s),Ja(s,null,null,a),Xa()),p=i.memoizedState,y=s.memoizedState,p.parent!==l?(p={parent:l,cache:l},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),Cr(s,ut,l)):(l=y.cache,Cr(s,ut,l),l!==p.cache&&$d(s,[ut],a,!0))),Rt(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Yi(i){i.flags|=4}function mp(i,s,a,l,p){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(Tv())i.flags|=8192;else throw $s=ml,Ud}else i.flags&=-16777217}function nv(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!m1(s))if(Tv())i.flags|=8192;else throw $s=ml,Ud}function Ul(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Nm():536870912,i.lanes|=s,Ho|=s)}function rc(i,s){if(!Ce)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:l.sibling=null}}function Xe(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,l=0;if(s)for(var p=i.child;p!==null;)a|=p.lanes|p.childLanes,l|=p.subtreeFlags&65011712,l|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)a|=p.lanes|p.childLanes,l|=p.subtreeFlags,l|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=l,i.childLanes=a,s}function o6(i,s,a){var l=s.pendingProps;switch(Od(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(s),null;case 1:return Xe(s),null;case 3:return a=s.stateNode,l=null,i!==null&&(l=i.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Fi(ut),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Co(s)?Yi(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Dd())),Xe(s),null;case 26:var p=s.type,y=s.memoizedState;return i===null?(Yi(s),y!==null?(Xe(s),nv(s,y)):(Xe(s),mp(s,p,null,l,a))):y?y!==i.memoizedState?(Yi(s),Xe(s),nv(s,y)):(Xe(s),s.flags&=-16777217):(i=i.memoizedProps,i!==l&&Yi(s),Xe(s),mp(s,p,i,l,a)),null;case 27:if(xe(s),a=ie.current,p=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==l&&Yi(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Xe(s),null}i=q.current,Co(s)?Nb(s):(i=u1(p,l,a),s.stateNode=i,Yi(s))}return Xe(s),null;case 5:if(xe(s),p=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==l&&Yi(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Xe(s),null}if(y=q.current,Co(s))Nb(s);else{var O=Ql(ie.current);switch(y){case 1:y=O.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=O.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=O.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=O.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=O.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof l.is=="string"?O.createElement("select",{is:l.is}):O.createElement("select"),l.multiple?y.multiple=!0:l.size&&(y.size=l.size);break;default:y=typeof l.is=="string"?O.createElement(p,{is:l.is}):O.createElement(p)}}y[Ct]=s,y[en]=l;e:for(O=s.child;O!==null;){if(O.tag===5||O.tag===6)y.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===s)break e;for(;O.sibling===null;){if(O.return===null||O.return===s)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}s.stateNode=y;e:switch(Bt(y,p,l),p){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Yi(s)}}return Xe(s),mp(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,a),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==l&&Yi(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(i=ie.current,Co(s)){if(i=s.stateNode,a=s.memoizedProps,l=null,p=$t,p!==null)switch(p.tag){case 27:case 5:l=p.memoizedProps}i[Ct]=s,i=!!(i.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Jv(i.nodeValue,a)),i||Tr(s,!0)}else i=Ql(i).createTextNode(l),i[Ct]=s,s.stateNode=i}return Xe(s),null;case 31:if(a=s.memoizedState,i===null||i.memoizedState!==null){if(l=Co(s),a!==null){if(i===null){if(!l)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[Ct]=s}else Os(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Xe(s),i=!1}else a=Dd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return s.flags&256?(On(s),s):(On(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Xe(s),null;case 13:if(l=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=Co(s),l!==null&&l.dehydrated!==null){if(i===null){if(!p)throw Error(r(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Ct]=s}else Os(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Xe(s),p=!1}else p=Dd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(On(s),s):(On(s),null)}return On(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,i=i!==null&&i.memoizedState!==null,a&&(l=s.child,p=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(p=l.alternate.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==p&&(l.flags|=2048)),a!==i&&a&&(s.child.flags|=8192),Ul(s,s.updateQueue),Xe(s),null);case 4:return ue(),i===null&&qp(s.stateNode.containerInfo),Xe(s),null;case 10:return Fi(s.type),Xe(s),null;case 19:if(B(st),l=s.memoizedState,l===null)return Xe(s),null;if(p=(s.flags&128)!==0,y=l.rendering,y===null)if(p)rc(l,!1);else{if(rt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(y=El(i),y!==null){for(s.flags|=128,rc(l,!1),i=y.updateQueue,s.updateQueue=i,Ul(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)$b(a,i),a=a.sibling;return V(st,st.current&1|2),Ce&&Hi(s,l.treeForkCount),s.child}i=i.sibling}l.tail!==null&&Pt()>ql&&(s.flags|=128,p=!0,rc(l,!1),s.lanes=4194304)}else{if(!p)if(i=El(y),i!==null){if(s.flags|=128,p=!0,i=i.updateQueue,s.updateQueue=i,Ul(s,i),rc(l,!0),l.tail===null&&l.tailMode==="hidden"&&!y.alternate&&!Ce)return Xe(s),null}else 2*Pt()-l.renderingStartTime>ql&&a!==536870912&&(s.flags|=128,p=!0,rc(l,!1),s.lanes=4194304);l.isBackwards?(y.sibling=s.child,s.child=y):(i=l.last,i!==null?i.sibling=y:s.child=y,l.last=y)}return l.tail!==null?(i=l.tail,l.rendering=i,l.tail=i.sibling,l.renderingStartTime=Pt(),i.sibling=null,a=st.current,V(st,p?a&1|2:a&1),Ce&&Hi(s,l.treeForkCount),i):(Xe(s),null);case 22:case 23:return On(s),Pd(),l=s.memoizedState!==null,i!==null?i.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Xe(s),s.subtreeFlags&6&&(s.flags|=8192)):Xe(s),a=s.updateQueue,a!==null&&Ul(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),i!==null&&B(Ts),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Fi(ut),Xe(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function a6(i,s){switch(Od(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Fi(ut),ue(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return xe(s),null;case 31:if(s.memoizedState!==null){if(On(s),s.alternate===null)throw Error(r(340));Os()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(On(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Os()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return B(st),null;case 4:return ue(),null;case 10:return Fi(s.type),null;case 22:case 23:return On(s),Pd(),i!==null&&B(Ts),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Fi(ut),null;case 25:return null;default:return null}}function iv(i,s){switch(Od(s),s.tag){case 3:Fi(ut),ue();break;case 26:case 27:case 5:xe(s);break;case 4:ue();break;case 31:s.memoizedState!==null&&On(s);break;case 13:On(s);break;case 19:B(st);break;case 10:Fi(s.type);break;case 22:case 23:On(s),Pd(),i!==null&&B(Ts);break;case 24:Fi(ut)}}function sc(i,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var p=l.next;a=p;do{if((a.tag&i)===i){l=void 0;var y=a.create,O=a.inst;l=y(),O.destroy=l}a=a.next}while(a!==p)}}catch(I){Pe(s,s.return,I)}}function Nr(i,s,a){try{var l=s.updateQueue,p=l!==null?l.lastEffect:null;if(p!==null){var y=p.next;l=y;do{if((l.tag&i)===i){var O=l.inst,I=O.destroy;if(I!==void 0){O.destroy=void 0,p=s;var k=a,J=I;try{J()}catch(re){Pe(p,k,re)}}}l=l.next}while(l!==y)}}catch(re){Pe(s,s.return,re)}}function rv(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{Yb(s,a)}catch(l){Pe(i,i.return,l)}}}function sv(i,s,a){a.props=Bs(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(l){Pe(i,s,l)}}function oc(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var l=i.stateNode;break;case 30:l=i.stateNode;break;default:l=i.stateNode}typeof a=="function"?i.refCleanup=a(l):a.current=l}}catch(p){Pe(i,s,p)}}function vi(i,s){var a=i.ref,l=i.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(p){Pe(i,s,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(p){Pe(i,s,p)}else a.current=null}function ov(i){var s=i.type,a=i.memoizedProps,l=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(p){Pe(i,i.return,p)}}function bp(i,s,a){try{var l=i.stateNode;C6(l,i.type,a,s),l[en]=s}catch(p){Pe(i,i.return,p)}}function av(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Hr(i.type)||i.tag===4}function wp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||av(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Hr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vp(i,s,a){var l=i.tag;if(l===5||l===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=qi));else if(l!==4&&(l===27&&Hr(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(vp(i,s,a),i=i.sibling;i!==null;)vp(i,s,a),i=i.sibling}function Nl(i,s,a){var l=i.tag;if(l===5||l===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(l!==4&&(l===27&&Hr(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Nl(i,s,a),i=i.sibling;i!==null;)Nl(i,s,a),i=i.sibling}function cv(i){var s=i.stateNode,a=i.memoizedProps;try{for(var l=i.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);Bt(s,l,a),s[Ct]=i,s[en]=a}catch(y){Pe(i,i.return,y)}}var Qi=!1,ht=!1,Ep=!1,uv=typeof WeakSet=="function"?WeakSet:Set,Et=null;function c6(i,s){if(i=i.containerInfo,Hp=nf,i=Eb(i),pd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var p=l.anchorOffset,y=l.focusNode;l=l.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var O=0,I=-1,k=-1,J=0,re=0,ae=i,te=null;t:for(;;){for(var ne;ae!==a||p!==0&&ae.nodeType!==3||(I=O+p),ae!==y||l!==0&&ae.nodeType!==3||(k=O+l),ae.nodeType===3&&(O+=ae.nodeValue.length),(ne=ae.firstChild)!==null;)te=ae,ae=ne;for(;;){if(ae===i)break t;if(te===a&&++J===p&&(I=O),te===y&&++re===l&&(k=O),(ne=ae.nextSibling)!==null)break;ae=te,te=ae.parentNode}ae=ne}a=I===-1||k===-1?null:{start:I,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(kp={focusedElem:i,selectionRange:a},nf=!1,Et=s;Et!==null;)if(s=Et,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Et=i;else for(;Et!==null;){switch(s=Et,y=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)p=i[a],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,a=s,p=y.memoizedProps,y=y.memoizedState,l=a.stateNode;try{var pe=Bs(a.type,p);i=l.getSnapshotBeforeUpdate(pe,y),l.__reactInternalSnapshotBeforeUpdate=i}catch(be){Pe(a,a.return,be)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)Kp(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Kp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,Et=i;break}Et=s.return}}function lv(i,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Xi(i,a),l&4&&sc(5,a);break;case 1:if(Xi(i,a),l&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(O){Pe(a,a.return,O)}else{var p=Bs(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(p,s,i.__reactInternalSnapshotBeforeUpdate)}catch(O){Pe(a,a.return,O)}}l&64&&rv(a),l&512&&oc(a,a.return);break;case 3:if(Xi(i,a),l&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Yb(i,s)}catch(O){Pe(a,a.return,O)}}break;case 27:s===null&&l&4&&cv(a);case 26:case 5:Xi(i,a),s===null&&l&4&&ov(a),l&512&&oc(a,a.return);break;case 12:Xi(i,a);break;case 31:Xi(i,a),l&4&&dv(i,a);break;case 13:Xi(i,a),l&4&&pv(i,a),l&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=m6.bind(null,a),j6(i,a))));break;case 22:if(l=a.memoizedState!==null||Qi,!l){s=s!==null&&s.memoizedState!==null||ht,p=Qi;var y=ht;Qi=l,(ht=s)&&!y?Ji(i,a,(a.subtreeFlags&8772)!==0):Xi(i,a),Qi=p,ht=y}break;case 30:break;default:Xi(i,a)}}function fv(i){var s=i.alternate;s!==null&&(i.alternate=null,fv(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Xh(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var et=null,nn=!1;function Zi(i,s,a){for(a=a.child;a!==null;)hv(i,s,a),a=a.sibling}function hv(i,s,a){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount($a,a)}catch{}switch(a.tag){case 26:ht||vi(a,s),Zi(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ht||vi(a,s);var l=et,p=nn;Hr(a.type)&&(et=a.stateNode,nn=!1),Zi(i,s,a),gc(a.stateNode),et=l,nn=p;break;case 5:ht||vi(a,s);case 6:if(l=et,p=nn,et=null,Zi(i,s,a),et=l,nn=p,et!==null)if(nn)try{(et.nodeType===9?et.body:et.nodeName==="HTML"?et.ownerDocument.body:et).removeChild(a.stateNode)}catch(y){Pe(a,s,y)}else try{et.removeChild(a.stateNode)}catch(y){Pe(a,s,y)}break;case 18:et!==null&&(nn?(i=et,r1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Zo(i)):r1(et,a.stateNode));break;case 4:l=et,p=nn,et=a.stateNode.containerInfo,nn=!0,Zi(i,s,a),et=l,nn=p;break;case 0:case 11:case 14:case 15:Nr(2,a,s),ht||Nr(4,a,s),Zi(i,s,a);break;case 1:ht||(vi(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&sv(a,s,l)),Zi(i,s,a);break;case 21:Zi(i,s,a);break;case 22:ht=(l=ht)||a.memoizedState!==null,Zi(i,s,a),ht=l;break;default:Zi(i,s,a)}}function dv(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Zo(i)}catch(a){Pe(s,s.return,a)}}}function pv(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Zo(i)}catch(a){Pe(s,s.return,a)}}function u6(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new uv),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new uv),s;default:throw Error(r(435,i.tag))}}function Ml(i,s){var a=u6(i);s.forEach(function(l){if(!a.has(l)){a.add(l);var p=b6.bind(null,i,l);l.then(p,p)}})}function rn(i,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var p=a[l],y=i,O=s,I=O;e:for(;I!==null;){switch(I.tag){case 27:if(Hr(I.type)){et=I.stateNode,nn=!1;break e}break;case 5:et=I.stateNode,nn=!1;break e;case 3:case 4:et=I.stateNode.containerInfo,nn=!0;break e}I=I.return}if(et===null)throw Error(r(160));hv(y,O,p),et=null,nn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)gv(s,i),s=s.sibling}var oi=null;function gv(i,s){var a=i.alternate,l=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:rn(s,i),sn(i),l&4&&(Nr(3,i,i.return),sc(3,i),Nr(5,i,i.return));break;case 1:rn(s,i),sn(i),l&512&&(ht||a===null||vi(a,a.return)),l&64&&Qi&&(i=i.updateQueue,i!==null&&(l=i.callbacks,l!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var p=oi;if(rn(s,i),sn(i),l&512&&(ht||a===null||vi(a,a.return)),l&4){var y=a!==null?a.memoizedState:null;if(l=i.memoizedState,a===null)if(l===null)if(i.stateNode===null){e:{l=i.type,a=i.memoizedProps,p=p.ownerDocument||p;t:switch(l){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Ba]||y[Ct]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(l),p.head.insertBefore(y,p.querySelector("head > title"))),Bt(y,l,a),y[Ct]=i,vt(y),l=y;break e;case"link":var O=g1("link","href",p).get(l+(a.href||""));if(O){for(var I=0;I<O.length;I++)if(y=O[I],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){O.splice(I,1);break t}}y=p.createElement(l),Bt(y,l,a),p.head.appendChild(y);break;case"meta":if(O=g1("meta","content",p).get(l+(a.content||""))){for(I=0;I<O.length;I++)if(y=O[I],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){O.splice(I,1);break t}}y=p.createElement(l),Bt(y,l,a),p.head.appendChild(y);break;default:throw Error(r(468,l))}y[Ct]=i,vt(y),l=y}i.stateNode=l}else y1(p,i.type,i.stateNode);else i.stateNode=p1(p,l,i.memoizedProps);else y!==l?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,l===null?y1(p,i.type,i.stateNode):p1(p,l,i.memoizedProps)):l===null&&i.stateNode!==null&&bp(i,i.memoizedProps,a.memoizedProps)}break;case 27:rn(s,i),sn(i),l&512&&(ht||a===null||vi(a,a.return)),a!==null&&l&4&&bp(i,i.memoizedProps,a.memoizedProps);break;case 5:if(rn(s,i),sn(i),l&512&&(ht||a===null||vi(a,a.return)),i.flags&32){p=i.stateNode;try{wo(p,"")}catch(pe){Pe(i,i.return,pe)}}l&4&&i.stateNode!=null&&(p=i.memoizedProps,bp(i,p,a!==null?a.memoizedProps:p)),l&1024&&(Ep=!0);break;case 6:if(rn(s,i),sn(i),l&4){if(i.stateNode===null)throw Error(r(162));l=i.memoizedProps,a=i.stateNode;try{a.nodeValue=l}catch(pe){Pe(i,i.return,pe)}}break;case 3:if(Jl=null,p=oi,oi=Zl(s.containerInfo),rn(s,i),oi=p,sn(i),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Zo(s.containerInfo)}catch(pe){Pe(i,i.return,pe)}Ep&&(Ep=!1,yv(i));break;case 4:l=oi,oi=Zl(i.stateNode.containerInfo),rn(s,i),sn(i),oi=l;break;case 12:rn(s,i),sn(i);break;case 31:rn(s,i),sn(i),l&4&&(l=i.updateQueue,l!==null&&(i.updateQueue=null,Ml(i,l)));break;case 13:rn(s,i),sn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zl=Pt()),l&4&&(l=i.updateQueue,l!==null&&(i.updateQueue=null,Ml(i,l)));break;case 22:p=i.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,J=Qi,re=ht;if(Qi=J||p,ht=re||k,rn(s,i),ht=re,Qi=J,sn(i),l&8192)e:for(s=i.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(a===null||k||Qi||ht||Us(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){k=a=s;try{if(y=k.stateNode,p)O=y.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{I=k.stateNode;var ae=k.memoizedProps.style,te=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;I.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(pe){Pe(k,k.return,pe)}}}else if(s.tag===6){if(a===null){k=s;try{k.stateNode.nodeValue=p?"":k.memoizedProps}catch(pe){Pe(k,k.return,pe)}}}else if(s.tag===18){if(a===null){k=s;try{var ne=k.stateNode;p?s1(ne,!0):s1(k.stateNode,!1)}catch(pe){Pe(k,k.return,pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=i.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ml(i,a))));break;case 19:rn(s,i),sn(i),l&4&&(l=i.updateQueue,l!==null&&(i.updateQueue=null,Ml(i,l)));break;case 30:break;case 21:break;default:rn(s,i),sn(i)}}function sn(i){var s=i.flags;if(s&2){try{for(var a,l=i.return;l!==null;){if(av(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var p=a.stateNode,y=wp(i);Nl(i,y,p);break;case 5:var O=a.stateNode;a.flags&32&&(wo(O,""),a.flags&=-33);var I=wp(i);Nl(i,I,O);break;case 3:case 4:var k=a.stateNode.containerInfo,J=wp(i);vp(i,J,k);break;default:throw Error(r(161))}}catch(re){Pe(i,i.return,re)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function yv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;yv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Xi(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)lv(i,s.alternate,s),s=s.sibling}function Us(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Nr(4,s,s.return),Us(s);break;case 1:vi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&sv(s,s.return,a),Us(s);break;case 27:gc(s.stateNode);case 26:case 5:vi(s,s.return),Us(s);break;case 22:s.memoizedState===null&&Us(s);break;case 30:Us(s);break;default:Us(s)}i=i.sibling}}function Ji(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,p=i,y=s,O=y.flags;switch(y.tag){case 0:case 11:case 15:Ji(p,y,a),sc(4,y);break;case 1:if(Ji(p,y,a),l=y,p=l.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(J){Pe(l,l.return,J)}if(l=y,p=l.updateQueue,p!==null){var I=l.stateNode;try{var k=p.shared.hiddenCallbacks;if(k!==null)for(p.shared.hiddenCallbacks=null,p=0;p<k.length;p++)Gb(k[p],I)}catch(J){Pe(l,l.return,J)}}a&&O&64&&rv(y),oc(y,y.return);break;case 27:cv(y);case 26:case 5:Ji(p,y,a),a&&l===null&&O&4&&ov(y),oc(y,y.return);break;case 12:Ji(p,y,a);break;case 31:Ji(p,y,a),a&&O&4&&dv(p,y);break;case 13:Ji(p,y,a),a&&O&4&&pv(p,y);break;case 22:y.memoizedState===null&&Ji(p,y,a),oc(y,y.return);break;case 30:break;default:Ji(p,y,a)}s=s.sibling}}function Sp(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Ka(a))}function _p(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ka(i))}function ai(i,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)mv(i,s,a,l),s=s.sibling}function mv(i,s,a,l){var p=s.flags;switch(s.tag){case 0:case 11:case 15:ai(i,s,a,l),p&2048&&sc(9,s);break;case 1:ai(i,s,a,l);break;case 3:ai(i,s,a,l),p&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ka(i)));break;case 12:if(p&2048){ai(i,s,a,l),i=s.stateNode;try{var y=s.memoizedProps,O=y.id,I=y.onPostCommit;typeof I=="function"&&I(O,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(k){Pe(s,s.return,k)}}else ai(i,s,a,l);break;case 31:ai(i,s,a,l);break;case 13:ai(i,s,a,l);break;case 23:break;case 22:y=s.stateNode,O=s.alternate,s.memoizedState!==null?y._visibility&2?ai(i,s,a,l):ac(i,s):y._visibility&2?ai(i,s,a,l):(y._visibility|=2,qo(i,s,a,l,(s.subtreeFlags&10256)!==0||!1)),p&2048&&Sp(O,s);break;case 24:ai(i,s,a,l),p&2048&&_p(s.alternate,s);break;default:ai(i,s,a,l)}}function qo(i,s,a,l,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=i,O=s,I=a,k=l,J=O.flags;switch(O.tag){case 0:case 11:case 15:qo(y,O,I,k,p),sc(8,O);break;case 23:break;case 22:var re=O.stateNode;O.memoizedState!==null?re._visibility&2?qo(y,O,I,k,p):ac(y,O):(re._visibility|=2,qo(y,O,I,k,p)),p&&J&2048&&Sp(O.alternate,O);break;case 24:qo(y,O,I,k,p),p&&J&2048&&_p(O.alternate,O);break;default:qo(y,O,I,k,p)}s=s.sibling}}function ac(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,l=s,p=l.flags;switch(l.tag){case 22:ac(a,l),p&2048&&Sp(l.alternate,l);break;case 24:ac(a,l),p&2048&&_p(l.alternate,l);break;default:ac(a,l)}s=s.sibling}}var cc=8192;function Po(i,s,a){if(i.subtreeFlags&cc)for(i=i.child;i!==null;)bv(i,s,a),i=i.sibling}function bv(i,s,a){switch(i.tag){case 26:Po(i,s,a),i.flags&cc&&i.memoizedState!==null&&Q6(a,oi,i.memoizedState,i.memoizedProps);break;case 5:Po(i,s,a);break;case 3:case 4:var l=oi;oi=Zl(i.stateNode.containerInfo),Po(i,s,a),oi=l;break;case 22:i.memoizedState===null&&(l=i.alternate,l!==null&&l.memoizedState!==null?(l=cc,cc=16777216,Po(i,s,a),cc=l):Po(i,s,a));break;default:Po(i,s,a)}}function wv(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function uc(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Et=l,Ev(l,i)}wv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)vv(i),i=i.sibling}function vv(i){switch(i.tag){case 0:case 11:case 15:uc(i),i.flags&2048&&Nr(9,i,i.return);break;case 3:uc(i);break;case 12:uc(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,jl(i)):uc(i);break;default:uc(i)}}function jl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Et=l,Ev(l,i)}wv(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Nr(8,s,s.return),jl(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,jl(s));break;default:jl(s)}i=i.sibling}}function Ev(i,s){for(;Et!==null;){var a=Et;switch(a.tag){case 0:case 11:case 15:Nr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ka(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Et=l;else e:for(a=i;Et!==null;){l=Et;var p=l.sibling,y=l.return;if(fv(l),l===a){Et=null;break e}if(p!==null){p.return=y,Et=p;break e}Et=y}}}var l6={getCacheForType:function(i){var s=It(ut),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a},cacheSignal:function(){return It(ut).controller.signal}},f6=typeof WeakMap=="function"?WeakMap:Map,Me=0,Ke=null,Oe=null,De=0,qe=0,An=null,Mr=!1,Lo=!1,xp=!1,Wi=0,rt=0,jr=0,Ns=0,Op=0,Dn=0,Ho=0,lc=null,on=null,Ap=!1,zl=0,Sv=0,ql=1/0,Pl=null,zr=null,yt=0,qr=null,ko=null,er=0,Dp=0,Tp=null,_v=null,fc=0,Cp=null;function Tn(){return(Me&2)!==0&&De!==0?De&-De:S.T!==null?Np():qm()}function xv(){if(Dn===0)if((De&536870912)===0||Ce){var i=Yu;Yu<<=1,(Yu&3932160)===0&&(Yu=262144),Dn=i}else Dn=536870912;return i=xn.current,i!==null&&(i.flags|=32),Dn}function an(i,s,a){(i===Ke&&(qe===2||qe===9)||i.cancelPendingCommit!==null)&&(Fo(i,0),Pr(i,De,Dn,!1)),Ra(i,a),((Me&2)===0||i!==Ke)&&(i===Ke&&((Me&2)===0&&(Ns|=a),rt===4&&Pr(i,De,Dn,!1)),Ei(i))}function Ov(i,s,a){if((Me&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&i.expiredLanes)===0||Ia(i,s),p=l?p6(i,s):Ip(i,s,!0),y=l;do{if(p===0){Lo&&!l&&Pr(i,s,0,!1);break}else{if(a=i.current.alternate,y&&!h6(a)){p=Ip(i,s,!1),y=!1;continue}if(p===2){if(y=s,i.errorRecoveryDisabledLanes&y)var O=0;else O=i.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;e:{var I=i;p=lc;var k=I.current.memoizedState.isDehydrated;if(k&&(Fo(I,O).flags|=256),O=Ip(I,O,!1),O!==2){if(xp&&!k){I.errorRecoveryDisabledLanes|=y,Ns|=y,p=4;break e}y=on,on=p,y!==null&&(on===null?on=y:on.push.apply(on,y))}p=O}if(y=!1,p!==2)continue}}if(p===1){Fo(i,0),Pr(i,s,0,!0);break}e:{switch(l=i,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Pr(l,s,Dn,!Mr);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(p=zl+300-Pt(),10<p)){if(Pr(l,s,Dn,!Mr),Zu(l,0,!0)!==0)break e;er=s,l.timeoutHandle=n1(Av.bind(null,l,a,on,Pl,Ap,s,Dn,Ns,Ho,Mr,y,"Throttled",-0,0),p);break e}Av(l,a,on,Pl,Ap,s,Dn,Ns,Ho,Mr,y,null,-0,0)}}break}while(!0);Ei(i)}function Av(i,s,a,l,p,y,O,I,k,J,re,ae,te,ne){if(i.timeoutHandle=-1,ae=s.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qi},bv(s,y,ae);var pe=(y&62914560)===y?zl-Pt():(y&4194048)===y?Sv-Pt():0;if(pe=Z6(ae,pe),pe!==null){er=y,i.cancelPendingCommit=pe(Uv.bind(null,i,s,y,a,l,p,O,I,k,re,ae,null,te,ne)),Pr(i,y,O,!J);return}}Uv(i,s,y,a,l,p,O,I,k)}function h6(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var p=a[l],y=p.getSnapshot;p=p.value;try{if(!Sn(y(),p))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Pr(i,s,a,l){s&=~Op,s&=~Ns,i.suspendedLanes|=s,i.pingedLanes&=~s,l&&(i.warmLanes|=s),l=i.expirationTimes;for(var p=s;0<p;){var y=31-En(p),O=1<<y;l[y]=-1,p&=~O}a!==0&&Mm(i,a,s)}function Ll(){return(Me&6)===0?(hc(0),!1):!0}function $p(){if(Oe!==null){if(qe===0)var i=Oe.return;else i=Oe,ki=As=null,Kd(i),Uo=null,Ya=0,i=Oe;for(;i!==null;)iv(i.alternate,i),i=i.return;Oe=null}}function Fo(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,R6(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),er=0,$p(),Ke=i,Oe=a=Li(i.current,null),De=s,qe=0,An=null,Mr=!1,Lo=Ia(i,s),xp=!1,Ho=Dn=Op=Ns=jr=rt=0,on=lc=null,Ap=!1,(s&8)!==0&&(s|=s&32);var l=i.entangledLanes;if(l!==0)for(i=i.entanglements,l&=s;0<l;){var p=31-En(l),y=1<<p;s|=i[p],l&=~y}return Wi=s,cl(),a}function Dv(i,s){Ee=null,S.H=nc,s===Bo||s===yl?(s=kb(),qe=3):s===Ud?(s=kb(),qe=4):qe=s===cp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,An=s,Oe===null&&(rt=1,$l(i,qn(s,i.current)))}function Tv(){var i=xn.current;return i===null?!0:(De&4194048)===De?kn===null:(De&62914560)===De||(De&536870912)!==0?i===kn:!1}function Cv(){var i=S.H;return S.H=nc,i===null?nc:i}function $v(){var i=S.A;return S.A=l6,i}function Hl(){rt=4,Mr||(De&4194048)!==De&&xn.current!==null||(Lo=!0),(jr&134217727)===0&&(Ns&134217727)===0||Ke===null||Pr(Ke,De,Dn,!1)}function Ip(i,s,a){var l=Me;Me|=2;var p=Cv(),y=$v();(Ke!==i||De!==s)&&(Pl=null,Fo(i,s)),s=!1;var O=rt;e:do try{if(qe!==0&&Oe!==null){var I=Oe,k=An;switch(qe){case 8:$p(),O=6;break e;case 3:case 2:case 9:case 6:xn.current===null&&(s=!0);var J=qe;if(qe=0,An=null,Vo(i,I,k,J),a&&Lo){O=0;break e}break;default:J=qe,qe=0,An=null,Vo(i,I,k,J)}}d6(),O=rt;break}catch(re){Dv(i,re)}while(!0);return s&&i.shellSuspendCounter++,ki=As=null,Me=l,S.H=p,S.A=y,Oe===null&&(Ke=null,De=0,cl()),O}function d6(){for(;Oe!==null;)Iv(Oe)}function p6(i,s){var a=Me;Me|=2;var l=Cv(),p=$v();Ke!==i||De!==s?(Pl=null,ql=Pt()+500,Fo(i,s)):Lo=Ia(i,s);e:do try{if(qe!==0&&Oe!==null){s=Oe;var y=An;t:switch(qe){case 1:qe=0,An=null,Vo(i,s,y,1);break;case 2:case 9:if(Lb(y)){qe=0,An=null,Rv(s);break}s=function(){qe!==2&&qe!==9||Ke!==i||(qe=7),Ei(i)},y.then(s,s);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:Lb(y)?(qe=0,An=null,Rv(s)):(qe=0,An=null,Vo(i,s,y,7));break;case 5:var O=null;switch(Oe.tag){case 26:O=Oe.memoizedState;case 5:case 27:var I=Oe;if(O?m1(O):I.stateNode.complete){qe=0,An=null;var k=I.sibling;if(k!==null)Oe=k;else{var J=I.return;J!==null?(Oe=J,kl(J)):Oe=null}break t}}qe=0,An=null,Vo(i,s,y,5);break;case 6:qe=0,An=null,Vo(i,s,y,6);break;case 8:$p(),rt=6;break e;default:throw Error(r(462))}}g6();break}catch(re){Dv(i,re)}while(!0);return ki=As=null,S.H=l,S.A=p,Me=a,Oe!==null?0:(Ke=null,De=0,cl(),rt)}function g6(){for(;Oe!==null&&!Hu();)Iv(Oe)}function Iv(i){var s=tv(i.alternate,i,Wi);i.memoizedProps=i.pendingProps,s===null?kl(i):Oe=s}function Rv(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=Qw(a,s,s.pendingProps,s.type,void 0,De);break;case 11:s=Qw(a,s,s.pendingProps,s.type.render,s.ref,De);break;case 5:Kd(s);default:iv(a,s),s=Oe=$b(s,Wi),s=tv(a,s,Wi)}i.memoizedProps=i.pendingProps,s===null?kl(i):Oe=s}function Vo(i,s,a,l){ki=As=null,Kd(s),Uo=null,Ya=0;var p=s.return;try{if(i6(i,p,s,a,De)){rt=1,$l(i,qn(a,i.current)),Oe=null;return}}catch(y){if(p!==null)throw Oe=p,y;rt=1,$l(i,qn(a,i.current)),Oe=null;return}s.flags&32768?(Ce||l===1?i=!0:Lo||(De&536870912)!==0?i=!1:(Mr=i=!0,(l===2||l===9||l===3||l===6)&&(l=xn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Bv(s,i)):kl(s)}function kl(i){var s=i;do{if((s.flags&32768)!==0){Bv(s,Mr);return}i=s.return;var a=o6(s.alternate,s,Wi);if(a!==null){Oe=a;return}if(s=s.sibling,s!==null){Oe=s;return}Oe=s=i}while(s!==null);rt===0&&(rt=5)}function Bv(i,s){do{var a=a6(i.alternate,i);if(a!==null){a.flags&=32767,Oe=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){Oe=i;return}Oe=i=a}while(i!==null);rt=6,Oe=null}function Uv(i,s,a,l,p,y,O,I,k){i.cancelPendingCommit=null;do Fl();while(yt!==0);if((Me&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(y=s.lanes|s.childLanes,y|=wd,Y8(i,a,y,O,I,k),i===Ke&&(Oe=Ke=null,De=0),ko=s,qr=i,er=a,Dp=y,Tp=p,_v=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,w6(fo,function(){return qv(),null})):(i.callbackNode=null,i.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=S.T,S.T=null,p=C.p,C.p=2,O=Me,Me|=4;try{c6(i,s,a)}finally{Me=O,C.p=p,S.T=l}}yt=1,Nv(),Mv(),jv()}}function Nv(){if(yt===1){yt=0;var i=qr,s=ko,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=S.T,S.T=null;var l=C.p;C.p=2;var p=Me;Me|=4;try{gv(s,i);var y=kp,O=Eb(i.containerInfo),I=y.focusedElem,k=y.selectionRange;if(O!==I&&I&&I.ownerDocument&&vb(I.ownerDocument.documentElement,I)){if(k!==null&&pd(I)){var J=k.start,re=k.end;if(re===void 0&&(re=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(re,I.value.length);else{var ae=I.ownerDocument||document,te=ae&&ae.defaultView||window;if(te.getSelection){var ne=te.getSelection(),pe=I.textContent.length,be=Math.min(k.start,pe),Ve=k.end===void 0?be:Math.min(k.end,pe);!ne.extend&&be>Ve&&(O=Ve,Ve=be,be=O);var Z=wb(I,be),K=wb(I,Ve);if(Z&&K&&(ne.rangeCount!==1||ne.anchorNode!==Z.node||ne.anchorOffset!==Z.offset||ne.focusNode!==K.node||ne.focusOffset!==K.offset)){var X=ae.createRange();X.setStart(Z.node,Z.offset),ne.removeAllRanges(),be>Ve?(ne.addRange(X),ne.extend(K.node,K.offset)):(X.setEnd(K.node,K.offset),ne.addRange(X))}}}}for(ae=[],ne=I;ne=ne.parentNode;)ne.nodeType===1&&ae.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ae.length;I++){var se=ae[I];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}nf=!!Hp,kp=Hp=null}finally{Me=p,C.p=l,S.T=a}}i.current=s,yt=2}}function Mv(){if(yt===2){yt=0;var i=qr,s=ko,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=S.T,S.T=null;var l=C.p;C.p=2;var p=Me;Me|=4;try{lv(i,s.alternate,s)}finally{Me=p,C.p=l,S.T=a}}yt=3}}function jv(){if(yt===4||yt===3){yt=0,ku();var i=qr,s=ko,a=er,l=_v;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?yt=5:(yt=0,ko=qr=null,zv(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(zr=null),Qh(a),s=s.stateNode,vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot($a,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=S.T,p=C.p,C.p=2,S.T=null;try{for(var y=i.onRecoverableError,O=0;O<l.length;O++){var I=l[O];y(I.value,{componentStack:I.stack})}}finally{S.T=s,C.p=p}}(er&3)!==0&&Fl(),Ei(i),p=i.pendingLanes,(a&261930)!==0&&(p&42)!==0?i===Cp?fc++:(fc=0,Cp=i):fc=0,hc(0)}}function zv(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Ka(s)))}function Fl(){return Nv(),Mv(),jv(),qv()}function qv(){if(yt!==5)return!1;var i=qr,s=Dp;Dp=0;var a=Qh(er),l=S.T,p=C.p;try{C.p=32>a?32:a,S.T=null,a=Tp,Tp=null;var y=qr,O=er;if(yt=0,ko=qr=null,er=0,(Me&6)!==0)throw Error(r(331));var I=Me;if(Me|=4,vv(y.current),mv(y,y.current,O,a),Me=I,hc(0,!1),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot($a,y)}catch{}return!0}finally{C.p=p,S.T=l,zv(i,s)}}function Pv(i,s,a){s=qn(a,s),s=ap(i.stateNode,s,2),i=Rr(i,s,2),i!==null&&(Ra(i,2),Ei(i))}function Pe(i,s,a){if(i.tag===3)Pv(i,i,a);else for(;s!==null;){if(s.tag===3){Pv(s,i,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(zr===null||!zr.has(l))){i=qn(a,i),a=Lw(2),l=Rr(s,a,2),l!==null&&(Hw(a,l,s,i),Ra(l,2),Ei(l));break}}s=s.return}}function Rp(i,s,a){var l=i.pingCache;if(l===null){l=i.pingCache=new f6;var p=new Set;l.set(s,p)}else p=l.get(s),p===void 0&&(p=new Set,l.set(s,p));p.has(a)||(xp=!0,p.add(a),i=y6.bind(null,i,s,a),s.then(i,i))}function y6(i,s,a){var l=i.pingCache;l!==null&&l.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,Ke===i&&(De&a)===a&&(rt===4||rt===3&&(De&62914560)===De&&300>Pt()-zl?(Me&2)===0&&Fo(i,0):Op|=a,Ho===De&&(Ho=0)),Ei(i)}function Lv(i,s){s===0&&(s=Nm()),i=_s(i,s),i!==null&&(Ra(i,s),Ei(i))}function m6(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),Lv(i,a)}function b6(i,s){var a=0;switch(i.tag){case 31:case 13:var l=i.stateNode,p=i.memoizedState;p!==null&&(a=p.retryLane);break;case 19:l=i.stateNode;break;case 22:l=i.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),Lv(i,a)}function w6(i,s){return lo(i,s)}var Vl=null,Ko=null,Bp=!1,Kl=!1,Up=!1,Lr=0;function Ei(i){i!==Ko&&i.next===null&&(Ko===null?Vl=Ko=i:Ko=Ko.next=i),Kl=!0,Bp||(Bp=!0,E6())}function hc(i,s){if(!Up&&Kl){Up=!0;do for(var a=!1,l=Vl;l!==null;){if(i!==0){var p=l.pendingLanes;if(p===0)var y=0;else{var O=l.suspendedLanes,I=l.pingedLanes;y=(1<<31-En(42|i)+1)-1,y&=p&~(O&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,Vv(l,y))}else y=De,y=Zu(l,l===Ke?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(y&3)===0||Ia(l,y)||(a=!0,Vv(l,y));l=l.next}while(a);Up=!1}}function v6(){Hv()}function Hv(){Kl=Bp=!1;var i=0;Lr!==0&&I6()&&(i=Lr);for(var s=Pt(),a=null,l=Vl;l!==null;){var p=l.next,y=kv(l,s);y===0?(l.next=null,a===null?Vl=p:a.next=p,p===null&&(Ko=a)):(a=l,(i!==0||(y&3)!==0)&&(Kl=!0)),l=p}yt!==0&&yt!==5||hc(i),Lr!==0&&(Lr=0)}function kv(i,s){for(var a=i.suspendedLanes,l=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var O=31-En(y),I=1<<O,k=p[O];k===-1?((I&a)===0||(I&l)!==0)&&(p[O]=G8(I,s)):k<=s&&(i.expiredLanes|=I),y&=~I}if(s=Ke,a=De,a=Zu(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),l=i.callbackNode,a===0||i===s&&(qe===2||qe===9)||i.cancelPendingCommit!==null)return l!==null&&l!==null&&ms(l),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Ia(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(l!==null&&ms(l),Qh(a)){case 2:case 8:a=Vu;break;case 32:a=fo;break;case 268435456:a=Ku;break;default:a=fo}return l=Fv.bind(null,i),a=lo(a,l),i.callbackPriority=s,i.callbackNode=a,s}return l!==null&&l!==null&&ms(l),i.callbackPriority=2,i.callbackNode=null,2}function Fv(i,s){if(yt!==0&&yt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Fl()&&i.callbackNode!==a)return null;var l=De;return l=Zu(i,i===Ke?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),l===0?null:(Ov(i,l,s),kv(i,Pt()),i.callbackNode!=null&&i.callbackNode===a?Fv.bind(null,i):null)}function Vv(i,s){if(Fl())return null;Ov(i,s,!0)}function E6(){B6(function(){(Me&6)!==0?lo(Ca,v6):Hv()})}function Np(){if(Lr===0){var i=Io;i===0&&(i=Gu,Gu<<=1,(Gu&261888)===0&&(Gu=256)),Lr=i}return Lr}function Kv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:el(""+i)}function Gv(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function S6(i,s,a,l,p){if(s==="submit"&&a&&a.stateNode===p){var y=Kv((p[en]||null).action),O=l.submitter;O&&(s=(s=O[en]||null)?Kv(s.formAction):O.getAttribute("formAction"),s!==null&&(y=s,O=null));var I=new rl("action","action",null,l,p);i.push({event:I,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Lr!==0){var k=O?Gv(p,O):new FormData(p);tp(a,{pending:!0,data:k,method:p.method,action:y},null,k)}}else typeof y=="function"&&(I.preventDefault(),k=O?Gv(p,O):new FormData(p),tp(a,{pending:!0,data:k,method:p.method,action:y},y,k))},currentTarget:p}]})}}for(var Mp=0;Mp<bd.length;Mp++){var jp=bd[Mp],_6=jp.toLowerCase(),x6=jp[0].toUpperCase()+jp.slice(1);si(_6,"on"+x6)}si(xb,"onAnimationEnd"),si(Ob,"onAnimationIteration"),si(Ab,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(PA,"onTransitionRun"),si(LA,"onTransitionStart"),si(HA,"onTransitionCancel"),si(Db,"onTransitionEnd"),mo("onMouseEnter",["mouseout","mouseover"]),mo("onMouseLeave",["mouseout","mouseover"]),mo("onPointerEnter",["pointerout","pointerover"]),mo("onPointerLeave",["pointerout","pointerover"]),ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ws("onBeforeInput",["compositionend","keypress","textInput","paste"]),ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dc));function Yv(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var l=i[a],p=l.event;l=l.listeners;e:{var y=void 0;if(s)for(var O=l.length-1;0<=O;O--){var I=l[O],k=I.instance,J=I.currentTarget;if(I=I.listener,k!==y&&p.isPropagationStopped())break e;y=I,p.currentTarget=J;try{y(p)}catch(re){al(re)}p.currentTarget=null,y=k}else for(O=0;O<l.length;O++){if(I=l[O],k=I.instance,J=I.currentTarget,I=I.listener,k!==y&&p.isPropagationStopped())break e;y=I,p.currentTarget=J;try{y(p)}catch(re){al(re)}p.currentTarget=null,y=k}}}}function Ae(i,s){var a=s[Zh];a===void 0&&(a=s[Zh]=new Set);var l=i+"__bubble";a.has(l)||(Qv(s,i,2,!1),a.add(l))}function zp(i,s,a){var l=0;s&&(l|=4),Qv(a,i,l,s)}var Gl="_reactListening"+Math.random().toString(36).slice(2);function qp(i){if(!i[Gl]){i[Gl]=!0,Hm.forEach(function(a){a!=="selectionchange"&&(O6.has(a)||zp(a,!1,i),zp(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Gl]||(s[Gl]=!0,zp("selectionchange",!1,s))}}function Qv(i,s,a,l){switch(x1(s)){case 2:var p=W6;break;case 8:p=eD;break;default:p=eg}a=p.bind(null,s,a,i),p=void 0,!sd||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),l?p!==void 0?i.addEventListener(s,a,{capture:!0,passive:p}):i.addEventListener(s,a,!0):p!==void 0?i.addEventListener(s,a,{passive:p}):i.addEventListener(s,a,!1)}function Pp(i,s,a,l,p){var y=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var O=l.tag;if(O===3||O===4){var I=l.stateNode.containerInfo;if(I===p)break;if(O===4)for(O=l.return;O!==null;){var k=O.tag;if((k===3||k===4)&&O.stateNode.containerInfo===p)return;O=O.return}for(;I!==null;){if(O=po(I),O===null)return;if(k=O.tag,k===5||k===6||k===26||k===27){l=y=O;continue e}I=I.parentNode}}l=l.return}eb(function(){var J=y,re=id(a),ae=[];e:{var te=Tb.get(i);if(te!==void 0){var ne=rl,pe=i;switch(i){case"keypress":if(nl(a)===0)break e;case"keydown":case"keyup":ne=bA;break;case"focusin":pe="focus",ne=ud;break;case"focusout":pe="blur",ne=ud;break;case"beforeblur":case"afterblur":ne=ud;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=ib;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=oA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=EA;break;case xb:case Ob:case Ab:ne=uA;break;case Db:ne=_A;break;case"scroll":case"scrollend":ne=rA;break;case"wheel":ne=OA;break;case"copy":case"cut":case"paste":ne=fA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=sb;break;case"toggle":case"beforetoggle":ne=DA}var be=(s&4)!==0,Ve=!be&&(i==="scroll"||i==="scrollend"),Z=be?te!==null?te+"Capture":null:te;be=[];for(var K=J,X;K!==null;){var se=K;if(X=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||X===null||Z===null||(se=Na(K,Z),se!=null&&be.push(pc(K,se,X))),Ve)break;K=K.return}0<be.length&&(te=new ne(te,pe,null,a,re),ae.push({event:te,listeners:be}))}}if((s&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ne=i==="mouseout"||i==="pointerout",te&&a!==nd&&(pe=a.relatedTarget||a.fromElement)&&(po(pe)||pe[ho]))break e;if((ne||te)&&(te=re.window===re?re:(te=re.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(pe=a.relatedTarget||a.toElement,ne=J,pe=pe?po(pe):null,pe!==null&&(Ve=c(pe),be=pe.tag,pe!==Ve||be!==5&&be!==27&&be!==6)&&(pe=null)):(ne=null,pe=J),ne!==pe)){if(be=ib,se="onMouseLeave",Z="onMouseEnter",K="mouse",(i==="pointerout"||i==="pointerover")&&(be=sb,se="onPointerLeave",Z="onPointerEnter",K="pointer"),Ve=ne==null?te:Ua(ne),X=pe==null?te:Ua(pe),te=new be(se,K+"leave",ne,a,re),te.target=Ve,te.relatedTarget=X,se=null,po(re)===J&&(be=new be(Z,K+"enter",pe,a,re),be.target=X,be.relatedTarget=Ve,se=be),Ve=se,ne&&pe)t:{for(be=A6,Z=ne,K=pe,X=0,se=Z;se;se=be(se))X++;se=0;for(var me=K;me;me=be(me))se++;for(;0<X-se;)Z=be(Z),X--;for(;0<se-X;)K=be(K),se--;for(;X--;){if(Z===K||K!==null&&Z===K.alternate){be=Z;break t}Z=be(Z),K=be(K)}be=null}else be=null;ne!==null&&Zv(ae,te,ne,be,!1),pe!==null&&Ve!==null&&Zv(ae,Ve,pe,be,!0)}}e:{if(te=J?Ua(J):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var Re=db;else if(fb(te))if(pb)Re=jA;else{Re=NA;var ge=UA}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&td(J.elementType)&&(Re=db):Re=MA;if(Re&&(Re=Re(i,J))){hb(ae,Re,a,re);break e}ge&&ge(i,te,J),i==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&ed(te,"number",te.value)}switch(ge=J?Ua(J):window,i){case"focusin":(fb(ge)||ge.contentEditable==="true")&&(_o=ge,gd=J,ka=null);break;case"focusout":ka=gd=_o=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,Sb(ae,a,re);break;case"selectionchange":if(qA)break;case"keydown":case"keyup":Sb(ae,a,re)}var Se;if(fd)e:{switch(i){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else So?ub(i,a)&&(Te="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(ob&&a.locale!=="ko"&&(So||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&So&&(Se=tb()):(Or=re,od="value"in Or?Or.value:Or.textContent,So=!0)),ge=Yl(J,Te),0<ge.length&&(Te=new rb(Te,i,null,a,re),ae.push({event:Te,listeners:ge}),Se?Te.data=Se:(Se=lb(a),Se!==null&&(Te.data=Se)))),(Se=CA?$A(i,a):IA(i,a))&&(Te=Yl(J,"onBeforeInput"),0<Te.length&&(ge=new rb("onBeforeInput","beforeinput",null,a,re),ae.push({event:ge,listeners:Te}),ge.data=Se)),S6(ae,i,J,a,re)}Yv(ae,s)})}function pc(i,s,a){return{instance:i,listener:s,currentTarget:a}}function Yl(i,s){for(var a=s+"Capture",l=[];i!==null;){var p=i,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Na(i,a),p!=null&&l.unshift(pc(i,p,y)),p=Na(i,s),p!=null&&l.push(pc(i,p,y))),i.tag===3)return l;i=i.return}return[]}function A6(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Zv(i,s,a,l,p){for(var y=s._reactName,O=[];a!==null&&a!==l;){var I=a,k=I.alternate,J=I.stateNode;if(I=I.tag,k!==null&&k===l)break;I!==5&&I!==26&&I!==27||J===null||(k=J,p?(J=Na(a,y),J!=null&&O.unshift(pc(a,J,k))):p||(J=Na(a,y),J!=null&&O.push(pc(a,J,k)))),a=a.return}O.length!==0&&i.push({event:s,listeners:O})}var D6=/\r\n?/g,T6=/\u0000|\uFFFD/g;function Xv(i){return(typeof i=="string"?i:""+i).replace(D6,`
`).replace(T6,"")}function Jv(i,s){return s=Xv(s),Xv(i)===s}function Fe(i,s,a,l,p,y){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||wo(i,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&wo(i,""+l);break;case"className":Ju(i,"class",l);break;case"tabIndex":Ju(i,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ju(i,a,l);break;case"style":Jm(i,l,y);break;case"data":if(s!=="object"){Ju(i,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){i.removeAttribute(a);break}l=el(""+l),i.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(s!=="input"&&Fe(i,s,"name",p.name,p,null),Fe(i,s,"formEncType",p.formEncType,p,null),Fe(i,s,"formMethod",p.formMethod,p,null),Fe(i,s,"formTarget",p.formTarget,p,null)):(Fe(i,s,"encType",p.encType,p,null),Fe(i,s,"method",p.method,p,null),Fe(i,s,"target",p.target,p,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){i.removeAttribute(a);break}l=el(""+l),i.setAttribute(a,l);break;case"onClick":l!=null&&(i.onclick=qi);break;case"onScroll":l!=null&&Ae("scroll",i);break;case"onScrollEnd":l!=null&&Ae("scrollend",i);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"multiple":i.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":i.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){i.removeAttribute("xlink:href");break}a=el(""+l),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(a,""+l):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":l===!0?i.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(a,l):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?i.setAttribute(a,l):i.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?i.removeAttribute(a):i.setAttribute(a,l);break;case"popover":Ae("beforetoggle",i),Ae("toggle",i),Xu(i,"popover",l);break;case"xlinkActuate":zi(i,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zi(i,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zi(i,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zi(i,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zi(i,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zi(i,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zi(i,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zi(i,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zi(i,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xu(i,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=nA.get(a)||a,Xu(i,a,l))}}function Lp(i,s,a,l,p,y){switch(a){case"style":Jm(i,l,y);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"children":typeof l=="string"?wo(i,l):(typeof l=="number"||typeof l=="bigint")&&wo(i,""+l);break;case"onScroll":l!=null&&Ae("scroll",i);break;case"onScrollEnd":l!=null&&Ae("scrollend",i);break;case"onClick":l!=null&&(i.onclick=qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!km.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),s=a.slice(2,p?a.length-7:void 0),y=i[en]||null,y=y!=null?y[a]:null,typeof y=="function"&&i.removeEventListener(s,y,p),typeof l=="function")){typeof y!="function"&&y!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,l,p);break e}a in i?i[a]=l:l===!0?i.setAttribute(a,""):Xu(i,a,l)}}}function Bt(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",i),Ae("load",i);var l=!1,p=!1,y;for(y in a)if(a.hasOwnProperty(y)){var O=a[y];if(O!=null)switch(y){case"src":l=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Fe(i,s,y,O,a,null)}}p&&Fe(i,s,"srcSet",a.srcSet,a,null),l&&Fe(i,s,"src",a.src,a,null);return;case"input":Ae("invalid",i);var I=y=O=p=null,k=null,J=null;for(l in a)if(a.hasOwnProperty(l)){var re=a[l];if(re!=null)switch(l){case"name":p=re;break;case"type":O=re;break;case"checked":k=re;break;case"defaultChecked":J=re;break;case"value":y=re;break;case"defaultValue":I=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,s));break;default:Fe(i,s,l,re,a,null)}}Ym(i,y,I,k,J,O,p,!1);return;case"select":Ae("invalid",i),l=O=y=null;for(p in a)if(a.hasOwnProperty(p)&&(I=a[p],I!=null))switch(p){case"value":y=I;break;case"defaultValue":O=I;break;case"multiple":l=I;default:Fe(i,s,p,I,a,null)}s=y,a=O,i.multiple=!!l,s!=null?bo(i,!!l,s,!1):a!=null&&bo(i,!!l,a,!0);return;case"textarea":Ae("invalid",i),y=p=l=null;for(O in a)if(a.hasOwnProperty(O)&&(I=a[O],I!=null))switch(O){case"value":l=I;break;case"defaultValue":p=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:Fe(i,s,O,I,a,null)}Zm(i,l,p,y);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":i.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Fe(i,s,k,l,a,null)}return;case"dialog":Ae("beforetoggle",i),Ae("toggle",i),Ae("cancel",i),Ae("close",i);break;case"iframe":case"object":Ae("load",i);break;case"video":case"audio":for(l=0;l<dc.length;l++)Ae(dc[l],i);break;case"image":Ae("error",i),Ae("load",i);break;case"details":Ae("toggle",i);break;case"embed":case"source":case"link":Ae("error",i),Ae("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(l=a[J],l!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Fe(i,s,J,l,a,null)}return;default:if(td(s)){for(re in a)a.hasOwnProperty(re)&&(l=a[re],l!==void 0&&Lp(i,s,re,l,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(l=a[I],l!=null&&Fe(i,s,I,l,a,null))}function C6(i,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,O=null,I=null,k=null,J=null,re=null;for(ne in a){var ae=a[ne];if(a.hasOwnProperty(ne)&&ae!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":k=ae;default:l.hasOwnProperty(ne)||Fe(i,s,ne,null,l,ae)}}for(var te in l){var ne=l[te];if(ae=a[te],l.hasOwnProperty(te)&&(ne!=null||ae!=null))switch(te){case"type":y=ne;break;case"name":p=ne;break;case"checked":J=ne;break;case"defaultChecked":re=ne;break;case"value":O=ne;break;case"defaultValue":I=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,s));break;default:ne!==ae&&Fe(i,s,te,ne,l,ae)}}Wh(i,O,I,k,J,re,y,p);return;case"select":ne=O=I=te=null;for(y in a)if(k=a[y],a.hasOwnProperty(y)&&k!=null)switch(y){case"value":break;case"multiple":ne=k;default:l.hasOwnProperty(y)||Fe(i,s,y,null,l,k)}for(p in l)if(y=l[p],k=a[p],l.hasOwnProperty(p)&&(y!=null||k!=null))switch(p){case"value":te=y;break;case"defaultValue":I=y;break;case"multiple":O=y;default:y!==k&&Fe(i,s,p,y,l,k)}s=I,a=O,l=ne,te!=null?bo(i,!!a,te,!1):!!l!=!!a&&(s!=null?bo(i,!!a,s,!0):bo(i,!!a,a?[]:"",!1));return;case"textarea":ne=te=null;for(I in a)if(p=a[I],a.hasOwnProperty(I)&&p!=null&&!l.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Fe(i,s,I,null,l,p)}for(O in l)if(p=l[O],y=a[O],l.hasOwnProperty(O)&&(p!=null||y!=null))switch(O){case"value":te=p;break;case"defaultValue":ne=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&Fe(i,s,O,p,l,y)}Qm(i,te,ne);return;case"option":for(var pe in a)if(te=a[pe],a.hasOwnProperty(pe)&&te!=null&&!l.hasOwnProperty(pe))switch(pe){case"selected":i.selected=!1;break;default:Fe(i,s,pe,null,l,te)}for(k in l)if(te=l[k],ne=a[k],l.hasOwnProperty(k)&&te!==ne&&(te!=null||ne!=null))switch(k){case"selected":i.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Fe(i,s,k,te,l,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)te=a[be],a.hasOwnProperty(be)&&te!=null&&!l.hasOwnProperty(be)&&Fe(i,s,be,null,l,te);for(J in l)if(te=l[J],ne=a[J],l.hasOwnProperty(J)&&te!==ne&&(te!=null||ne!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:Fe(i,s,J,te,l,ne)}return;default:if(td(s)){for(var Ve in a)te=a[Ve],a.hasOwnProperty(Ve)&&te!==void 0&&!l.hasOwnProperty(Ve)&&Lp(i,s,Ve,void 0,l,te);for(re in l)te=l[re],ne=a[re],!l.hasOwnProperty(re)||te===ne||te===void 0&&ne===void 0||Lp(i,s,re,te,l,ne);return}}for(var Z in a)te=a[Z],a.hasOwnProperty(Z)&&te!=null&&!l.hasOwnProperty(Z)&&Fe(i,s,Z,null,l,te);for(ae in l)te=l[ae],ne=a[ae],!l.hasOwnProperty(ae)||te===ne||te==null&&ne==null||Fe(i,s,ae,te,l,ne)}function Wv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $6(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var p=a[l],y=p.transferSize,O=p.initiatorType,I=p.duration;if(y&&I&&Wv(O)){for(O=0,I=p.responseEnd,l+=1;l<a.length;l++){var k=a[l],J=k.startTime;if(J>I)break;var re=k.transferSize,ae=k.initiatorType;re&&Wv(ae)&&(k=k.responseEnd,O+=re*(k<I?1:(I-J)/(k-J)))}if(--l,s+=8*(y+O)/(p.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Hp=null,kp=null;function Ql(i){return i.nodeType===9?i:i.ownerDocument}function e1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t1(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Fp(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Vp=null;function I6(){var i=window.event;return i&&i.type==="popstate"?i===Vp?!1:(Vp=i,!0):(Vp=null,!1)}var n1=typeof setTimeout=="function"?setTimeout:void 0,R6=typeof clearTimeout=="function"?clearTimeout:void 0,i1=typeof Promise=="function"?Promise:void 0,B6=typeof queueMicrotask=="function"?queueMicrotask:typeof i1<"u"?function(i){return i1.resolve(null).then(i).catch(U6)}:n1;function U6(i){setTimeout(function(){throw i})}function Hr(i){return i==="head"}function r1(i,s){var a=s,l=0;do{var p=a.nextSibling;if(i.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"||a==="/&"){if(l===0){i.removeChild(p),Zo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")gc(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,gc(a);for(var y=a.firstChild;y;){var O=y.nextSibling,I=y.nodeName;y[Ba]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=O}}else a==="body"&&gc(i.ownerDocument.body);a=p}while(a);Zo(s)}function s1(i,s){var a=i;i=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=l}while(a)}function Kp(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Kp(a),Xh(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function N6(i,s,a,l){for(;i.nodeType===1;){var p=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(l){if(!i[Ba])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Fn(i.nextSibling),i===null)break}return null}function M6(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Fn(i.nextSibling),i===null))return null;return i}function o1(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=Fn(i.nextSibling),i===null))return null;return i}function Gp(i){return i.data==="$?"||i.data==="$~"}function Yp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function j6(i,s){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),i._reactRetry=l}}function Fn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Qp=null;function a1(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(s===0)return Fn(i.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}i=i.nextSibling}return null}function c1(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return i;s--}else a!=="/$"&&a!=="/&"||s++}i=i.previousSibling}return null}function u1(i,s,a){switch(s=Ql(a),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function gc(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Xh(i)}var Vn=new Map,l1=new Set;function Zl(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var tr=C.d;C.d={f:z6,r:q6,D:P6,C:L6,L:H6,m:k6,X:V6,S:F6,M:K6};function z6(){var i=tr.f(),s=Ll();return i||s}function q6(i){var s=go(i);s!==null&&s.tag===5&&s.type==="form"?Dw(s):tr.r(i)}var Go=typeof document>"u"?null:document;function f1(i,s,a){var l=Go;if(l&&typeof s=="string"&&s){var p=jn(s);p='link[rel="'+i+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),l1.has(p)||(l1.add(p),i={rel:i,crossOrigin:a,href:s},l.querySelector(p)===null&&(s=l.createElement("link"),Bt(s,"link",i),vt(s),l.head.appendChild(s)))}}function P6(i){tr.D(i),f1("dns-prefetch",i,null)}function L6(i,s){tr.C(i,s),f1("preconnect",i,s)}function H6(i,s,a){tr.L(i,s,a);var l=Go;if(l&&i&&s){var p='link[rel="preload"][as="'+jn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+jn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+jn(a.imageSizes)+'"]')):p+='[href="'+jn(i)+'"]';var y=p;switch(s){case"style":y=Yo(i);break;case"script":y=Qo(i)}Vn.has(y)||(i=b({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),Vn.set(y,i),l.querySelector(p)!==null||s==="style"&&l.querySelector(yc(y))||s==="script"&&l.querySelector(mc(y))||(s=l.createElement("link"),Bt(s,"link",i),vt(s),l.head.appendChild(s)))}}function k6(i,s){tr.m(i,s);var a=Go;if(a&&i){var l=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+jn(l)+'"][href="'+jn(i)+'"]',y=p;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Qo(i)}if(!Vn.has(y)&&(i=b({rel:"modulepreload",href:i},s),Vn.set(y,i),a.querySelector(p)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(mc(y)))return}l=a.createElement("link"),Bt(l,"link",i),vt(l),a.head.appendChild(l)}}}function F6(i,s,a){tr.S(i,s,a);var l=Go;if(l&&i){var p=yo(l).hoistableStyles,y=Yo(i);s=s||"default";var O=p.get(y);if(!O){var I={loading:0,preload:null};if(O=l.querySelector(yc(y)))I.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":s},a),(a=Vn.get(y))&&Zp(i,a);var k=O=l.createElement("link");vt(k),Bt(k,"link",i),k._p=new Promise(function(J,re){k.onload=J,k.onerror=re}),k.addEventListener("load",function(){I.loading|=1}),k.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Xl(O,s,l)}O={type:"stylesheet",instance:O,count:1,state:I},p.set(y,O)}}}function V6(i,s){tr.X(i,s);var a=Go;if(a&&i){var l=yo(a).hoistableScripts,p=Qo(i),y=l.get(p);y||(y=a.querySelector(mc(p)),y||(i=b({src:i,async:!0},s),(s=Vn.get(p))&&Xp(i,s),y=a.createElement("script"),vt(y),Bt(y,"link",i),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(p,y))}}function K6(i,s){tr.M(i,s);var a=Go;if(a&&i){var l=yo(a).hoistableScripts,p=Qo(i),y=l.get(p);y||(y=a.querySelector(mc(p)),y||(i=b({src:i,async:!0,type:"module"},s),(s=Vn.get(p))&&Xp(i,s),y=a.createElement("script"),vt(y),Bt(y,"link",i),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(p,y))}}function h1(i,s,a,l){var p=(p=ie.current)?Zl(p):null;if(!p)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Yo(a.href),a=yo(p).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Yo(a.href);var y=yo(p).hoistableStyles,O=y.get(i);if(O||(p=p.ownerDocument||p,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,O),(y=p.querySelector(yc(i)))&&!y._p&&(O.instance=y,O.state.loading=5),Vn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Vn.set(i,a),y||G6(p,i,a,O.state))),s&&l===null)throw Error(r(528,""));return O}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Qo(a),a=yo(p).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Yo(i){return'href="'+jn(i)+'"'}function yc(i){return'link[rel="stylesheet"]['+i+"]"}function d1(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function G6(i,s,a,l){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Bt(s,"link",a),vt(s),i.head.appendChild(s))}function Qo(i){return'[src="'+jn(i)+'"]'}function mc(i){return"script[async]"+i}function p1(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=i.querySelector('style[data-href~="'+jn(a.href)+'"]');if(l)return s.instance=l,vt(l),l;var p=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(i.ownerDocument||i).createElement("style"),vt(l),Bt(l,"style",p),Xl(l,a.precedence,i),s.instance=l;case"stylesheet":p=Yo(a.href);var y=i.querySelector(yc(p));if(y)return s.state.loading|=4,s.instance=y,vt(y),y;l=d1(a),(p=Vn.get(p))&&Zp(l,p),y=(i.ownerDocument||i).createElement("link"),vt(y);var O=y;return O._p=new Promise(function(I,k){O.onload=I,O.onerror=k}),Bt(y,"link",l),s.state.loading|=4,Xl(y,a.precedence,i),s.instance=y;case"script":return y=Qo(a.src),(p=i.querySelector(mc(y)))?(s.instance=p,vt(p),p):(l=a,(p=Vn.get(y))&&(l=b({},a),Xp(l,p)),i=i.ownerDocument||i,p=i.createElement("script"),vt(p),Bt(p,"link",l),i.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Xl(l,a.precedence,i));return s.instance}function Xl(i,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=l.length?l[l.length-1]:null,y=p,O=0;O<l.length;O++){var I=l[O];if(I.dataset.precedence===s)y=I;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function Zp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Xp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Jl=null;function g1(i,s,a){if(Jl===null){var l=new Map,p=Jl=new Map;p.set(a,l)}else p=Jl,l=p.get(a),l||(l=new Map,p.set(a,l));if(l.has(i))return l;for(l.set(i,null),a=a.getElementsByTagName(i),p=0;p<a.length;p++){var y=a[p];if(!(y[Ba]||y[Ct]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var O=y.getAttribute(s)||"";O=i+O;var I=l.get(O);I?I.push(y):l.set(O,[y])}}return l}function y1(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function Y6(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function m1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Q6(i,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Yo(l.href),y=s.querySelector(yc(p));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Wl.bind(i),s.then(i,i)),a.state.loading|=4,a.instance=y,vt(y);return}y=s.ownerDocument||s,l=d1(l),(p=Vn.get(p))&&Zp(l,p),y=y.createElement("link"),vt(y);var O=y;O._p=new Promise(function(I,k){O.onload=I,O.onerror=k}),Bt(y,"link",l),a.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Wl.bind(i),s.addEventListener("load",a),s.addEventListener("error",a))}}var Jp=0;function Z6(i,s){return i.stylesheets&&i.count===0&&tf(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var l=setTimeout(function(){if(i.stylesheets&&tf(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+s);0<i.imgBytes&&Jp===0&&(Jp=62500*$6());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&tf(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Jp?50:800)+s);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l),clearTimeout(p)}}:null}function Wl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ef=null;function tf(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ef=new Map,s.forEach(X6,i),ef=null,Wl.call(i))}function X6(i,s){if(!(s.state.loading&4)){var a=ef.get(i);if(a)var l=a.get(null);else{a=new Map,ef.set(i,a);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var O=p[y];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(a.set(O.dataset.precedence,O),l=O)}l&&a.set(null,l)}p=s.instance,O=p.getAttribute("data-precedence"),y=a.get(O)||l,y===l&&a.set(null,p),a.set(O,p),this.count++,l=Wl.bind(this),p.addEventListener("load",l),p.addEventListener("error",l),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),s.state.loading|=4}}var bc={$$typeof:T,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function J6(i,s,a,l,p,y,O,I,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gh(0),this.hiddenUpdates=Gh(null),this.identifierPrefix=l,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function b1(i,s,a,l,p,y,O,I,k,J,re,ae){return i=new J6(i,s,a,O,k,J,re,ae,I),s=1,y===!0&&(s|=24),y=_n(3,null,null,s),i.current=y,y.stateNode=i,s=Id(),s.refCount++,i.pooledCache=s,s.refCount++,y.memoizedState={element:l,isDehydrated:a,cache:s},Nd(y),i}function w1(i){return i?(i=Ao,i):Ao}function v1(i,s,a,l,p,y){p=w1(p),l.context===null?l.context=p:l.pendingContext=p,l=Ir(s),l.payload={element:a},y=y===void 0?null:y,y!==null&&(l.callback=y),a=Rr(i,l,s),a!==null&&(an(a,i,s),Za(a,i,s))}function E1(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Wp(i,s){E1(i,s),(i=i.alternate)&&E1(i,s)}function S1(i){if(i.tag===13||i.tag===31){var s=_s(i,67108864);s!==null&&an(s,i,67108864),Wp(i,67108864)}}function _1(i){if(i.tag===13||i.tag===31){var s=Tn();s=Yh(s);var a=_s(i,s);a!==null&&an(a,i,s),Wp(i,s)}}var nf=!0;function W6(i,s,a,l){var p=S.T;S.T=null;var y=C.p;try{C.p=2,eg(i,s,a,l)}finally{C.p=y,S.T=p}}function eD(i,s,a,l){var p=S.T;S.T=null;var y=C.p;try{C.p=8,eg(i,s,a,l)}finally{C.p=y,S.T=p}}function eg(i,s,a,l){if(nf){var p=tg(l);if(p===null)Pp(i,s,l,rf,a),O1(i,l);else if(nD(p,i,s,a,l))l.stopPropagation();else if(O1(i,l),s&4&&-1<tD.indexOf(i)){for(;p!==null;){var y=go(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var O=bs(y.pendingLanes);if(O!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;O;){var k=1<<31-En(O);I.entanglements[1]|=k,O&=~k}Ei(y),(Me&6)===0&&(ql=Pt()+500,hc(0))}}break;case 31:case 13:I=_s(y,2),I!==null&&an(I,y,2),Ll(),Wp(y,2)}if(y=tg(l),y===null&&Pp(i,s,l,rf,a),y===p)break;p=y}p!==null&&l.stopPropagation()}else Pp(i,s,l,null,a)}}function tg(i){return i=id(i),ng(i)}var rf=null;function ng(i){if(rf=null,i=po(i),i!==null){var s=c(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=u(s),i!==null)return i;i=null}else if(a===31){if(i=f(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return rf=i,null}function x1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fu()){case Ca:return 2;case Vu:return 8;case fo:case Kh:return 32;case Ku:return 268435456;default:return 32}default:return 32}}var ig=!1,kr=null,Fr=null,Vr=null,wc=new Map,vc=new Map,Kr=[],tD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O1(i,s){switch(i){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":wc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(s.pointerId)}}function Ec(i,s,a,l,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:y,targetContainers:[p]},s!==null&&(s=go(s),s!==null&&S1(s)),i):(i.eventSystemFlags|=l,s=i.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),i)}function nD(i,s,a,l,p){switch(s){case"focusin":return kr=Ec(kr,i,s,a,l,p),!0;case"dragenter":return Fr=Ec(Fr,i,s,a,l,p),!0;case"mouseover":return Vr=Ec(Vr,i,s,a,l,p),!0;case"pointerover":var y=p.pointerId;return wc.set(y,Ec(wc.get(y)||null,i,s,a,l,p)),!0;case"gotpointercapture":return y=p.pointerId,vc.set(y,Ec(vc.get(y)||null,i,s,a,l,p)),!0}return!1}function A1(i){var s=po(i.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){i.blockedOn=s,Pm(i.priority,function(){_1(a)});return}}else if(s===31){if(s=f(a),s!==null){i.blockedOn=s,Pm(i.priority,function(){_1(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function sf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=tg(i.nativeEvent);if(a===null){a=i.nativeEvent;var l=new a.constructor(a.type,a);nd=l,a.target.dispatchEvent(l),nd=null}else return s=go(a),s!==null&&S1(s),i.blockedOn=a,!1;s.shift()}return!0}function D1(i,s,a){sf(i)&&a.delete(s)}function iD(){ig=!1,kr!==null&&sf(kr)&&(kr=null),Fr!==null&&sf(Fr)&&(Fr=null),Vr!==null&&sf(Vr)&&(Vr=null),wc.forEach(D1),vc.forEach(D1)}function of(i,s){i.blockedOn===s&&(i.blockedOn=null,ig||(ig=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,iD)))}var af=null;function T1(i){af!==i&&(af=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){af===i&&(af=null);for(var s=0;s<i.length;s+=3){var a=i[s],l=i[s+1],p=i[s+2];if(typeof l!="function"){if(ng(l||a)===null)continue;break}var y=go(a);y!==null&&(i.splice(s,3),s-=3,tp(y,{pending:!0,data:p,method:a.method,action:l},l,p))}}))}function Zo(i){function s(k){return of(k,i)}kr!==null&&of(kr,i),Fr!==null&&of(Fr,i),Vr!==null&&of(Vr,i),wc.forEach(s),vc.forEach(s);for(var a=0;a<Kr.length;a++){var l=Kr[a];l.blockedOn===i&&(l.blockedOn=null)}for(;0<Kr.length&&(a=Kr[0],a.blockedOn===null);)A1(a),a.blockedOn===null&&Kr.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var p=a[l],y=a[l+1],O=p[en]||null;if(typeof y=="function")O||T1(a);else if(O){var I=null;if(y&&y.hasAttribute("formAction")){if(p=y,O=y[en]||null)I=O.formAction;else if(ng(p)!==null)continue}else I=O.action;typeof I=="function"?a[l+1]=I:(a.splice(l,3),l-=3),T1(a)}}}function C1(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(O){return p=O})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function rg(i){this._internalRoot=i}cf.prototype.render=rg.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=Tn();v1(a,l,i,s,null,null)},cf.prototype.unmount=rg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;v1(i.current,2,null,i,null,null),Ll(),s[ho]=null}};function cf(i){this._internalRoot=i}cf.prototype.unstable_scheduleHydration=function(i){if(i){var s=qm();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Kr.length&&s!==0&&s<Kr[a].priority;a++);Kr.splice(a,0,i),a===0&&A1(i)}};var $1=e.version;if($1!=="19.2.0")throw Error(r(527,$1,"19.2.0"));C.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(s),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var rD={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uf.isDisabled&&uf.supportsFiber)try{$a=uf.inject(rD),vn=uf}catch{}}return _c.createRoot=function(i,s){if(!o(i))throw Error(r(299));var a=!1,l="",p=jw,y=zw,O=qw;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError)),s=b1(i,1,!1,null,null,a,l,null,p,y,O,C1),i[ho]=s.current,qp(i),new rg(s)},_c.hydrateRoot=function(i,s,a){if(!o(i))throw Error(r(299));var l=!1,p="",y=jw,O=zw,I=qw,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(O=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),s=b1(i,1,!0,s,a??null,l,p,k,y,O,I,C1),s.context=w1(null),a=s.current,l=Tn(),l=Yh(l),p=Ir(l),p.callback=null,Rr(a,p,l),a=l,s.current.lanes=a,Ra(s,a),Ei(s),i[ho]=s.current,qp(i),new cf(s)},_c.version="19.2.0",_c}var P1;function gD(){if(P1)return ag.exports;P1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ag.exports=pD(),ag.exports}var yD=gD();const mD=Oa(yD);var fg={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1;function bD(){if(L1)return ve;L1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),m=Symbol.iterator;function v(x){return x===null||typeof x!="object"?null:(x=m&&x[m]||x["@@iterator"],typeof x=="function"?x:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,A={};function N(x,B,V){this.props=x,this.context=B,this.refs=A,this.updater=V||E}N.prototype.isReactComponent={},N.prototype.setState=function(x,B){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,B,"setState")},N.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function j(){}j.prototype=N.prototype;function T(x,B,V){this.props=x,this.context=B,this.refs=A,this.updater=V||E}var $=T.prototype=new j;$.constructor=T,w($,N.prototype),$.isPureReactComponent=!0;var D=Array.isArray;function R(){}var U={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function P(x,B,V){var q=V.ref;return{$$typeof:t,type:x,key:B,ref:q!==void 0?q:null,props:V}}function W(x,B){return P(x.type,B,x.props)}function ee(x){return typeof x=="object"&&x!==null&&x.$$typeof===t}function G(x){var B={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(V){return B[V]})}var F=/\/+/g;function Y(x,B){return typeof x=="object"&&x!==null&&x.key!=null?G(""+x.key):B.toString(36)}function _(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(R,R):(x.status="pending",x.then(function(B){x.status==="pending"&&(x.status="fulfilled",x.value=B)},function(B){x.status==="pending"&&(x.status="rejected",x.reason=B)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function S(x,B,V,q,Q){var ie=typeof x;(ie==="undefined"||ie==="boolean")&&(x=null);var oe=!1;if(x===null)oe=!0;else switch(ie){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(x.$$typeof){case t:case e:oe=!0;break;case g:return oe=x._init,S(oe(x._payload),B,V,q,Q)}}if(oe)return Q=Q(x),oe=q===""?"."+Y(x,0):q,D(Q)?(V="",oe!=null&&(V=oe.replace(F,"$&/")+"/"),S(Q,B,V,"",function(ye){return ye})):Q!=null&&(ee(Q)&&(Q=W(Q,V+(Q.key==null||x&&x.key===Q.key?"":(""+Q.key).replace(F,"$&/")+"/")+oe)),B.push(Q)),1;oe=0;var de=q===""?".":q+":";if(D(x))for(var ue=0;ue<x.length;ue++)q=x[ue],ie=de+Y(q,ue),oe+=S(q,B,V,ie,Q);else if(ue=v(x),typeof ue=="function")for(x=ue.call(x),ue=0;!(q=x.next()).done;)q=q.value,ie=de+Y(q,ue++),oe+=S(q,B,V,ie,Q);else if(ie==="object"){if(typeof x.then=="function")return S(_(x),B,V,q,Q);throw B=String(x),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return oe}function C(x,B,V){if(x==null)return x;var q=[],Q=0;return S(x,q,"","",function(ie){return B.call(V,ie,Q++)}),q}function z(x){if(x._status===-1){var B=x._result;B=B(),B.then(function(V){(x._status===0||x._status===-1)&&(x._status=1,x._result=V)},function(V){(x._status===0||x._status===-1)&&(x._status=2,x._result=V)}),x._status===-1&&(x._status=0,x._result=B)}if(x._status===1)return x._result.default;throw x._result}var M=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},L={map:C,forEach:function(x,B,V){C(x,function(){B.apply(this,arguments)},V)},count:function(x){var B=0;return C(x,function(){B++}),B},toArray:function(x){return C(x,function(B){return B})||[]},only:function(x){if(!ee(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return ve.Activity=b,ve.Children=L,ve.Component=N,ve.Fragment=n,ve.Profiler=o,ve.PureComponent=T,ve.StrictMode=r,ve.Suspense=h,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,ve.__COMPILER_RUNTIME={__proto__:null,c:function(x){return U.H.useMemoCache(x)}},ve.cache=function(x){return function(){return x.apply(null,arguments)}},ve.cacheSignal=function(){return null},ve.cloneElement=function(x,B,V){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var q=w({},x.props),Q=x.key;if(B!=null)for(ie in B.key!==void 0&&(Q=""+B.key),B)!H.call(B,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&B.ref===void 0||(q[ie]=B[ie]);var ie=arguments.length-2;if(ie===1)q.children=V;else if(1<ie){for(var oe=Array(ie),de=0;de<ie;de++)oe[de]=arguments[de+2];q.children=oe}return P(x.type,Q,q)},ve.createContext=function(x){return x={$$typeof:u,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:c,_context:x},x},ve.createElement=function(x,B,V){var q,Q={},ie=null;if(B!=null)for(q in B.key!==void 0&&(ie=""+B.key),B)H.call(B,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(Q[q]=B[q]);var oe=arguments.length-2;if(oe===1)Q.children=V;else if(1<oe){for(var de=Array(oe),ue=0;ue<oe;ue++)de[ue]=arguments[ue+2];Q.children=de}if(x&&x.defaultProps)for(q in oe=x.defaultProps,oe)Q[q]===void 0&&(Q[q]=oe[q]);return P(x,ie,Q)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(x){return{$$typeof:f,render:x}},ve.isValidElement=ee,ve.lazy=function(x){return{$$typeof:g,_payload:{_status:-1,_result:x},_init:z}},ve.memo=function(x,B){return{$$typeof:d,type:x,compare:B===void 0?null:B}},ve.startTransition=function(x){var B=U.T,V={};U.T=V;try{var q=x(),Q=U.S;Q!==null&&Q(V,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(R,M)}catch(ie){M(ie)}finally{B!==null&&V.types!==null&&(B.types=V.types),U.T=B}},ve.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},ve.use=function(x){return U.H.use(x)},ve.useActionState=function(x,B,V){return U.H.useActionState(x,B,V)},ve.useCallback=function(x,B){return U.H.useCallback(x,B)},ve.useContext=function(x){return U.H.useContext(x)},ve.useDebugValue=function(){},ve.useDeferredValue=function(x,B){return U.H.useDeferredValue(x,B)},ve.useEffect=function(x,B){return U.H.useEffect(x,B)},ve.useEffectEvent=function(x){return U.H.useEffectEvent(x)},ve.useId=function(){return U.H.useId()},ve.useImperativeHandle=function(x,B,V){return U.H.useImperativeHandle(x,B,V)},ve.useInsertionEffect=function(x,B){return U.H.useInsertionEffect(x,B)},ve.useLayoutEffect=function(x,B){return U.H.useLayoutEffect(x,B)},ve.useMemo=function(x,B){return U.H.useMemo(x,B)},ve.useOptimistic=function(x,B){return U.H.useOptimistic(x,B)},ve.useReducer=function(x,B,V){return U.H.useReducer(x,B,V)},ve.useRef=function(x){return U.H.useRef(x)},ve.useState=function(x){return U.H.useState(x)},ve.useSyncExternalStore=function(x,B,V){return U.H.useSyncExternalStore(x,B,V)},ve.useTransition=function(){return U.H.useTransition()},ve.version="19.2.0",ve}var H1;function L0(){return H1||(H1=1,fg.exports=bD()),fg.exports}var At=L0();function H0(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function k1(t){return H0(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const V3="2.38.1";let hg={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${V3}`},mi=class Iy extends Error{constructor(e,n={}){const r=n.cause instanceof Iy?n.cause.details:n.cause?.message?n.cause.message:n.details,o=n.cause instanceof Iy&&n.cause.docsPath||n.docsPath,c=hg.getDocsUrl?.({...n,docsPath:o}),u=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...c?[`Docs: ${c}`]:[],...r?[`Details: ${r}`]:[],...hg.version?[`Version: ${hg.version}`]:[]].join(`
`);super(u,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=o,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=V3}walk(e){return K3(this,e)}};function K3(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?K3(t.cause,e):e?null:t}let wD=class extends mi{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},G3=class extends mi{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};function Tu(t,{dir:e,size:n=32}={}){return typeof t=="string"?vD(t,{dir:e,size:n}):ED(t,{dir:e,size:n})}function vD(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new G3({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function ED(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new G3({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let o=0;o<n;o++){const c=e==="right";r[c?o:n-o-1]=t[c?o:t.length-o-1]}return r}let SD=class extends mi{constructor({max:e,min:n,signed:r,size:o,value:c}){super(`Number "${c}" is not in safe ${o?`${o*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},_D=class extends mi{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function wh(t,{size:e}){if(k1(t)>e)throw new _D({givenSize:k1(t),maxSize:e})}const xD=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function OD(t,e={}){let n="";for(let o=0;o<t.length;o++)n+=xD[t[o]];const r=`0x${n}`;return typeof e.size=="number"?(wh(r,{size:e.size}),Tu(r,{dir:"right",size:e.size})):r}function Ry(t,e={}){const{signed:n,size:r}=e,o=BigInt(t);let c;r?n?c=(1n<<BigInt(r)*8n-1n)-1n:c=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(c=BigInt(Number.MAX_SAFE_INTEGER));const u=typeof c=="bigint"&&n?-c-1n:0;if(c&&o>c||o<u){const h=typeof t=="bigint"?"n":"";throw new SD({max:c?`${c}${h}`:void 0,min:`${u}${h}`,signed:n,size:r,value:`${t}${h}`})}const f=`0x${(n&&o<0?(1n<<BigInt(r*8))+BigInt(o):o).toString(16)}`;return r?Tu(f,{size:r}):f}const AD=new TextEncoder;function DD(t,e={}){const n=AD.encode(t);return OD(n,e)}const TD=new TextEncoder;function CD(t,e={}){return typeof t=="number"||typeof t=="bigint"?ID(t,e):typeof t=="boolean"?$D(t,e):H0(t)?Y3(t,e):Q3(t,e)}function $D(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(wh(n,{size:e.size}),Tu(n,{size:e.size})):n}const nr={zero:48,nine:57,A:65,F:70,a:97,f:102};function F1(t){if(t>=nr.zero&&t<=nr.nine)return t-nr.zero;if(t>=nr.A&&t<=nr.F)return t-(nr.A-10);if(t>=nr.a&&t<=nr.f)return t-(nr.a-10)}function Y3(t,e={}){let n=t;e.size&&(wh(n,{size:e.size}),n=Tu(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const o=r.length/2,c=new Uint8Array(o);for(let u=0,f=0;u<o;u++){const h=F1(r.charCodeAt(f++)),d=F1(r.charCodeAt(f++));if(h===void 0||d===void 0)throw new mi(`Invalid byte sequence ("${r[f-2]}${r[f-1]}" in "${r}").`);c[u]=h*16+d}return c}function ID(t,e){const n=Ry(t,e);return Y3(n)}function Q3(t,e={}){const n=TD.encode(t);return typeof e.size=="number"?(wh(n,{size:e.size}),Tu(n,{dir:"right",size:e.size})):n}const lf=BigInt(2**32-1),V1=BigInt(32);function RD(t,e=!1){return e?{h:Number(t&lf),l:Number(t>>V1&lf)}:{h:Number(t>>V1&lf)|0,l:Number(t&lf)|0}}function BD(t,e=!1){const n=t.length;let r=new Uint32Array(n),o=new Uint32Array(n);for(let c=0;c<n;c++){const{h:u,l:f}=RD(t[c],e);[r[c],o[c]]=[u,f]}return[r,o]}const UD=(t,e,n)=>t<<n|e>>>32-n,ND=(t,e,n)=>e<<n|t>>>32-n,MD=(t,e,n)=>e<<n-32|t>>>64-n,jD=(t,e,n)=>t<<n-32|e>>>64-n;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zD(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function K1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Xf(t,...e){if(!zD(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function G1(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function qD(t,e){Xf(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function PD(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Z3(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const LD=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function HD(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function kD(t){for(let e=0;e<t.length;e++)t[e]=HD(t[e]);return t}const Y1=LD?t=>t:kD;function FD(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function X3(t){return typeof t=="string"&&(t=FD(t)),Xf(t),t}let VD=class{};function KD(t){const e=r=>t().update(X3(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const GD=BigInt(0),xc=BigInt(1),YD=BigInt(2),QD=BigInt(7),ZD=BigInt(256),XD=BigInt(113),J3=[],W3=[],e_=[];for(let t=0,e=xc,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],J3.push(2*(5*r+n)),W3.push((t+1)*(t+2)/2%64);let o=GD;for(let c=0;c<7;c++)e=(e<<xc^(e>>QD)*XD)%ZD,e&YD&&(o^=xc<<(xc<<BigInt(c))-xc);e_.push(o)}const t_=BD(e_,!0),JD=t_[0],WD=t_[1],Q1=(t,e,n)=>n>32?MD(t,e,n):UD(t,e,n),Z1=(t,e,n)=>n>32?jD(t,e,n):ND(t,e,n);function e4(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let u=0;u<10;u++)n[u]=t[u]^t[u+10]^t[u+20]^t[u+30]^t[u+40];for(let u=0;u<10;u+=2){const f=(u+8)%10,h=(u+2)%10,d=n[h],g=n[h+1],b=Q1(d,g,1)^n[f],m=Z1(d,g,1)^n[f+1];for(let v=0;v<50;v+=10)t[u+v]^=b,t[u+v+1]^=m}let o=t[2],c=t[3];for(let u=0;u<24;u++){const f=W3[u],h=Q1(o,c,f),d=Z1(o,c,f),g=J3[u];o=t[g],c=t[g+1],t[g]=h,t[g+1]=d}for(let u=0;u<50;u+=10){for(let f=0;f<10;f++)n[f]=t[u+f];for(let f=0;f<10;f++)t[u+f]^=~n[(f+2)%10]&n[(f+4)%10]}t[0]^=JD[r],t[1]^=WD[r]}Z3(n)}let t4=class n_ extends VD{constructor(e,n,r,o=!1,c=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=o,this.rounds=c,K1(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=PD(this.state)}clone(){return this._cloneInto()}keccak(){Y1(this.state32),e4(this.state32,this.rounds),Y1(this.state32),this.posOut=0,this.pos=0}update(e){G1(this),e=X3(e),Xf(e);const{blockLen:n,state:r}=this,o=e.length;for(let c=0;c<o;){const u=Math.min(n-this.pos,o-c);for(let f=0;f<u;f++)r[this.pos++]^=e[c++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:o}=this;e[r]^=n,(n&128)!==0&&r===o-1&&this.keccak(),e[o-1]^=128,this.keccak()}writeInto(e){G1(this,!1),Xf(e),this.finish();const n=this.state,{blockLen:r}=this;for(let o=0,c=e.length;o<c;){this.posOut>=r&&this.keccak();const u=Math.min(r-this.posOut,c-o);e.set(n.subarray(this.posOut,this.posOut+u),o),this.posOut+=u,o+=u}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return K1(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(qD(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Z3(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:o,rounds:c,enableXOF:u}=this;return e||(e=new n_(n,r,o,u,c)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=c,e.suffix=r,e.outputLen=o,e.enableXOF=u,e.destroyed=this.destroyed,e}};const n4=(t,e,n)=>KD(()=>new t4(e,t,n)),i4=n4(1,136,256/8);function r4(t,e){return i4(H0(t,{strict:!1})?CD(t):t)}let k0=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const s4=/^0x[a-fA-F0-9]{40}$/,dg=new k0(8192);function o4(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(dg.has(r))return dg.get(r);const o=s4.test(t)?t.toLowerCase()===t?!0:n?i_(t)===t:!0:!1;return dg.set(r,o),o}const pg=new k0(8192);function i_(t,e){if(pg.has(`${t}.${e}`))return pg.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=r4(Q3(n)),o=n.split("");for(let u=0;u<40;u+=2)r[u>>1]>>4>=8&&o[u]&&(o[u]=o[u].toUpperCase()),(r[u>>1]&15)>=8&&o[u+1]&&(o[u+1]=o[u+1].toUpperCase());const c=`0x${o.join("")}`;return pg.set(`${t}.${e}`,c),c}function ff(t,e){if(!o4(t,{strict:!1}))throw new wD({address:t});return i_(t,e)}function a4(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const Xs=(t,e,n)=>JSON.stringify(t,(r,o)=>typeof o=="bigint"?o.toString():o,n),F0=t=>t;class Vc extends mi{constructor({body:e,cause:n,details:r,headers:o,status:c,url:u}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[c&&`Status: ${c}`,`URL: ${F0(u)}`,e&&`Request body: ${Xs(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=o,this.status=c,this.url=u}}class r_ extends mi{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${F0(r)}`,`Request body: ${Xs(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class X1 extends mi{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${F0(n)}`,`Request body: ${Xs(e)}`],name:"TimeoutError"})}}const c4=-1;class bn extends mi{constructor(e,{code:n,docsPath:r,metaMessages:o,name:c,shortMessage:u}){super(u,{cause:e,docsPath:r,metaMessages:o||e?.metaMessages,name:c||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=c||e.name,this.code=e instanceof r_?e.code:n??c4}}class Un extends bn{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Jc extends bn{constructor(e){super(e,{code:Jc.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Jc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Wc extends bn{constructor(e){super(e,{code:Wc.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Wc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class eu extends bn{constructor(e,{method:n}={}){super(e,{code:eu.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(eu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class tu extends bn{constructor(e){super(e,{code:tu.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(tu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class ba extends bn{constructor(e){super(e,{code:ba.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(ba,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class nu extends bn{constructor(e){super(e,{code:nu.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(nu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class iu extends bn{constructor(e){super(e,{code:iu.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(iu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class fs extends bn{constructor(e){super(e,{code:fs.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(fs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ru extends bn{constructor(e){super(e,{code:ru.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(ru,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Vs extends bn{constructor(e,{method:n}={}){super(e,{code:Vs.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Vs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class wa extends bn{constructor(e){super(e,{code:wa.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(wa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class su extends bn{constructor(e){super(e,{code:su.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(su,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Qt extends Un{constructor(e){super(e,{code:Qt.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Qt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class ou extends Un{constructor(e){super(e,{code:ou.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(ou,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class au extends Un{constructor(e,{method:n}={}){super(e,{code:au.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(au,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class cu extends Un{constructor(e){super(e,{code:cu.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(cu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class uu extends Un{constructor(e){super(e,{code:uu.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(uu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ws extends Un{constructor(e){super(e,{code:Ws.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ws,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class lu extends Un{constructor(e){super(e,{code:lu.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(lu,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class fu extends Un{constructor(e){super(e,{code:fu.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(fu,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class hu extends Un{constructor(e){super(e,{code:hu.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(hu,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class du extends Un{constructor(e){super(e,{code:du.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(du,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class pu extends Un{constructor(e){super(e,{code:pu.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(pu,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class gu extends Un{constructor(e){super(e,{code:gu.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(gu,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class yu extends Un{constructor(e){super(e,{code:yu.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(yu,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class u4 extends bn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function l4(){let t=()=>{},e=()=>{};return{promise:new Promise((r,o)=>{t=r,e=o}),resolve:t,reject:e}}const gg=new Map;function f4({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:o}){const c=async()=>{const g=h();u();const b=g.map(({args:m})=>m);b.length!==0&&t(b).then(m=>{o&&Array.isArray(m)&&m.sort(o);for(let v=0;v<g.length;v++){const{resolve:E}=g[v];E?.([m[v],m])}}).catch(m=>{for(let v=0;v<g.length;v++){const{reject:E}=g[v];E?.(m)}})},u=()=>gg.delete(e),f=()=>h().map(({args:g})=>g),h=()=>gg.get(e)||[],d=g=>gg.set(e,[...h(),g]);return{flush:u,async schedule(g){const{promise:b,resolve:m,reject:v}=l4();return n?.([...f(),g])&&c(),h().length>0?(d({args:g,resolve:m,reject:v}),b):(d({args:g,resolve:m,reject:v}),setTimeout(c,r),b)}}}const hf=new k0(8192);function h4(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(hf.get(n))return hf.get(n);const r=t().finally(()=>hf.delete(n));return hf.set(n,r),r}async function d4(t){return new Promise(e=>setTimeout(e,t))}function s_(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((o,c)=>{const u=async({count:f=0}={})=>{const h=async({error:d})=>{const g=typeof e=="function"?e({count:f,error:d}):e;g&&await d4(g),u({count:f+1})};try{const d=await t();o(d)}catch(d){if(f<n&&await r({count:f,error:d}))return h({error:d});c(d)}};u()})}function p4(t,e={}){return async(n,r={})=>{const{dedupe:o=!1,methods:c,retryDelay:u=150,retryCount:f=3,uid:h}={...e,...r},{method:d}=n;if(c?.exclude?.includes(d))throw new Vs(new Error("method not supported"),{method:d});if(c?.include&&!c.include.includes(d))throw new Vs(new Error("method not supported"),{method:d});const g=o?DD(`${h}.${Xs(n)}`):void 0;return h4(()=>s_(async()=>{try{return await t(n)}catch(b){const m=b;switch(m.code){case Jc.code:throw new Jc(m);case Wc.code:throw new Wc(m);case eu.code:throw new eu(m,{method:n.method});case tu.code:throw new tu(m);case ba.code:throw new ba(m);case nu.code:throw new nu(m);case iu.code:throw new iu(m);case fs.code:throw new fs(m);case ru.code:throw new ru(m);case Vs.code:throw new Vs(m,{method:n.method});case wa.code:throw new wa(m);case su.code:throw new su(m);case Qt.code:throw new Qt(m);case ou.code:throw new ou(m);case au.code:throw new au(m);case cu.code:throw new cu(m);case uu.code:throw new uu(m);case Ws.code:throw new Ws(m);case lu.code:throw new lu(m);case fu.code:throw new fu(m);case hu.code:throw new hu(m);case du.code:throw new du(m);case pu.code:throw new pu(m);case gu.code:throw new gu(m);case yu.code:throw new yu(m);case 5e3:throw new Qt(m);default:throw b instanceof mi?b:new u4(m)}}},{delay:({count:b,error:m})=>{if(m&&m instanceof Vc){const v=m?.headers?.get("Retry-After");if(v?.match(/\d/))return Number.parseInt(v,10)*1e3}return~~(1<<b)*u},retryCount:f,shouldRetry:({error:b})=>g4(b)}),{enabled:o,id:g})}}function g4(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===wa.code||t.code===ba.code:t instanceof Vc&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function y4(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function o_(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((o,c)=>{(async()=>{let u;try{const f=new AbortController;n>0&&(u=setTimeout(()=>{r?f.abort():c(e)},n)),o(await t({signal:f?.signal||null}))}catch(f){f?.name==="AbortError"&&c(e),c(f)}finally{clearTimeout(u)}})()})}function m4(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const J1=m4();function b4(t,e={}){return{async request(n){const{body:r,fetchFn:o=e.fetchFn??fetch,onRequest:c=e.onRequest,onResponse:u=e.onResponse,timeout:f=e.timeout??1e4}=n,h={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:d,method:g,signal:b}=h;try{const m=await o_(async({signal:E})=>{const w={...h,body:Array.isArray(r)?Xs(r.map(T=>({jsonrpc:"2.0",id:T.id??J1.take(),...T}))):Xs({jsonrpc:"2.0",id:r.id??J1.take(),...r}),headers:{"Content-Type":"application/json",...d},method:g||"POST",signal:b||(f>0?E:null)},A=new Request(t,w),N=await c?.(A,w)??{...w,url:t};return await o(N.url??t,N)},{errorInstance:new X1({body:r,url:t}),timeout:f,signal:!0});u&&await u(m);let v;if(m.headers.get("Content-Type")?.startsWith("application/json"))v=await m.json();else{v=await m.text();try{v=JSON.parse(v||"{}")}catch(E){if(m.ok)throw E;v={error:v}}}if(!m.ok)throw new Vc({body:r,details:Xs(v.error)||m.statusText,headers:m.headers,status:m.status,url:t});return v}catch(m){throw m instanceof Vc||m instanceof X1?m:new Vc({body:r,cause:m,url:t})}}}}const Hf="2.22.0",w4=()=>`@wagmi/core@${Hf}`;var a_=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Jf,c_;let vh=class By extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return w4()}constructor(e,n={}){super(),Jf.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof By?n.cause.details:n.cause?.message?n.cause.message:n.details,o=n.cause instanceof By&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${this.docsBaseUrl}${o}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=o,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return a_(this,Jf,"m",c_).call(this,this,e)}};Jf=new WeakSet,c_=function t(e,n){return n?.(e)?e:e.cause?a_(this,Jf,"m",t).call(this,e.cause,n):e};class Uy extends vh{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class v4 extends vh{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}async function E4(t,e){let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new v4;try{t.setState(u=>({...u,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:r,...o}=e,c=await n.connect(o);return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await t.storage?.setItem("recentConnectorId",n.id),t.setState(u=>({...u,connections:new Map(u.connections).set(n.uid,{accounts:o.withCapabilities?c.accounts.map(f=>typeof f=="object"?f.address:f):c.accounts,chainId:c.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:o.withCapabilities?c.accounts.map(u=>typeof u=="object"?u:{address:u,capabilities:{}}):c.accounts,chainId:c.chainId}}catch(r){throw t.setState(o=>({...o,status:o.current?"connected":"disconnected"})),r}}const Ny=256;let df=Ny,pf;function u_(t=11){if(!pf||df+t>Ny*2){pf="",df=0;for(let e=0;e<Ny;e++)pf+=(256+Math.random()*256|0).toString(16).substring(1)}return pf.substring(df,df+++t)}function S4(t){const{batch:e,chain:n,ccipRead:r,key:o="base",name:c="Base Client",type:u="base"}=t,f=t.experimental_blockTag??(typeof n?.experimental_preconfirmationTime=="number"?"pending":void 0),h=n?.blockTime??12e3,d=Math.min(Math.max(Math.floor(h/2),500),4e3),g=t.pollingInterval??d,b=t.cacheTime??g,m=t.account?a4(t.account):void 0,{config:v,request:E,value:w}=t.transport({chain:n,pollingInterval:g}),A={...v,...w},N={account:m,batch:e,cacheTime:b,ccipRead:r,chain:n,key:o,name:c,pollingInterval:g,request:E,transport:A,type:u,uid:u_(),...f?{experimental_blockTag:f}:{}};function j(T){return $=>{const D=$(T);for(const U in N)delete D[U];const R={...T,...D};return Object.assign(R,{extend:j(R)})}}return Object.assign(N,{extend:j(N)})}function _4({key:t,methods:e,name:n,request:r,retryCount:o=3,retryDelay:c=150,timeout:u,type:f},h){const d=u_();return{config:{key:t,methods:e,name:n,request:r,retryCount:o,retryDelay:c,timeout:u,type:f},request:p4(r,{methods:e,retryCount:o,retryDelay:c,uid:d}),value:h}}class x4 extends mi{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function O4(t,e={}){const{batch:n,fetchFn:r,fetchOptions:o,key:c="http",methods:u,name:f="HTTP JSON-RPC",onFetchRequest:h,onFetchResponse:d,retryDelay:g,raw:b}=e;return({chain:m,retryCount:v,timeout:E})=>{const{batchSize:w=1e3,wait:A=0}=typeof n=="object"?n:{},N=e.retryCount??v,j=E??e.timeout??1e4,T=m?.rpcUrls.default.http[0];if(!T)throw new x4;const $=b4(T,{fetchFn:r,fetchOptions:o,onRequest:h,onResponse:d,timeout:j});return _4({key:c,methods:u,name:f,async request({method:D,params:R}){const U={method:D,params:R},{schedule:H}=f4({id:T,wait:A,shouldSplitBatch(G){return G.length>w},fn:G=>$.request({body:G}),sort:(G,F)=>G.id-F.id}),P=async G=>n?H(G):[await $.request({body:G})],[{error:W,result:ee}]=await P(U);if(b)return{error:W,result:ee};if(W)throw new r_({body:U,error:W,url:T});return ee},retryCount:N,retryDelay:g,timeout:j,type:"http"},{fetchOptions:o,url:T})}}async function A4(t,e={}){let n;if(e.connector)n=e.connector;else{const{connections:o,current:c}=t.state;n=o.get(c)?.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const c=r.values().next().value;return{...o,connections:new Map(r),current:c.connector.uid}});{const o=t.state.current;if(!o)return;const c=t.state.connections.get(o)?.connector;if(!c)return;await t.storage?.setItem("recentConnectorId",c.id)}}function l_(t){const e=t.state.current,n=t.state.connections.get(e),r=n?.accounts,o=r?.[0],c=t.chains.find(f=>f.id===n?.chainId),u=t.state.status;switch(u){case"connected":return{address:o,addresses:r,chain:c,chainId:n?.chainId,connector:n?.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:u};case"reconnecting":return{address:o,addresses:r,chain:c,chainId:n?.chainId,connector:n?.connector,isConnected:!!o,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:u};case"connecting":return{address:o,addresses:r,chain:c,chainId:n?.chainId,connector:n?.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:u};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:u}}}function va(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!va(t[r],e[r]))return!1;return!0}if(typeof t.valueOf=="function"&&t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString)return t.toString()===e.toString();const o=Object.keys(t);if(n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.hasOwn(e,o[r]))return!1;for(r=n;r--!==0;){const c=o[r];if(c&&!va(t[c],e[c]))return!1}return!0}return t!==t&&e!==e}let gf=[];function My(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||va(gf,e)?gf:(gf=e,e)}let yf=[];function W1(t){const e=t.connectors;return yf.length===e.length&&yf.every((n,r)=>n===e[r])?yf:(yf=e,e)}let yg=!1;async function D4(t,e={}){if(yg)return[];yg=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if(e.connectors?.length)for(const d of e.connectors){let g;typeof d=="function"?g=t._internal.connectors.setup(d):g=d,n.push(g)}else n.push(...t.connectors);let r;try{r=await t.storage?.getItem("recentConnectorId")}catch{}const o={};for(const[,d]of t.state.connections)o[d.connector.id]=1;r&&(o[r]=0);const c=Object.keys(o).length>0?[...n].sort((d,g)=>(o[d.id]??10)-(o[g.id]??10)):n;let u=!1;const f=[],h=[];for(const d of c){const g=await d.getProvider().catch(()=>{});if(!g||h.some(v=>v===g)||!await d.isAuthorized())continue;const m=await d.connect({isReconnecting:!0}).catch(()=>null);m&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(v=>{const E=new Map(u?v.connections:new Map).set(d.uid,{accounts:m.accounts,chainId:m.chainId,connector:d});return{...v,current:u?v.current:d.uid,connections:E}}),f.push({accounts:m.accounts,chainId:m.chainId,connector:d}),h.push(g),u=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(u?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),yg=!1,f}class Xo extends vh{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}function T4(t,e){const{onChange:n}=e;return t.subscribe(()=>l_(t),n,{equalityFn(r,o){const{connector:c,...u}=r,{connector:f,...h}=o;return va(u,h)&&c?.id===f?.id&&c?.uid===f?.uid}})}function C4(t,e){const{onChange:n}=e;return t.subscribe(()=>My(t),n,{equalityFn:va})}function $4(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,o)=>{n(Object.values(r),o)})}Eh.type="injected";function Eh(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const h=t.target;if(typeof h=="function"){const d=h();if(d)return d}return typeof h=="object"?h:typeof h=="string"?{...I4[h]??{id:h,name:`${h[0].toUpperCase()}${h.slice(1)}`,provider:`is${h[0].toUpperCase()}${h.slice(1)}`}}:{id:"injected",name:"Injected",provider(d){return d?.ethereum}}}let o,c,u,f;return h=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:Eh.type,async setup(){const d=await this.getProvider();d?.on&&t.target&&(u||(u=this.onConnect.bind(this),d.on("connect",u)),o||(o=this.onAccountsChanged.bind(this),d.on("accountsChanged",o)))},async connect({chainId:d,isReconnecting:g,withCapabilities:b}={}){const m=await this.getProvider();if(!m)throw new Xo;let v=[];if(g)v=await this.getAccounts().catch(()=>[]);else if(e)try{v=(await m.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0]?.caveats?.[0]?.value?.map(w=>ff(w)),v.length>0&&(v=await this.getAccounts())}catch(E){const w=E;if(w.code===Qt.code)throw new Qt(w);if(w.code===fs.code)throw w}try{!v?.length&&!g&&(v=(await m.request({method:"eth_requestAccounts"})).map(A=>ff(A))),u&&(m.removeListener("connect",u),u=void 0),o||(o=this.onAccountsChanged.bind(this),m.on("accountsChanged",o)),c||(c=this.onChainChanged.bind(this),m.on("chainChanged",c)),f||(f=this.onDisconnect.bind(this),m.on("disconnect",f));let E=await this.getChainId();return d&&E!==d&&(E=(await this.switchChain({chainId:d}).catch(A=>{if(A.code===Qt.code)throw A;return{id:E}}))?.id??E),e&&await h.storage?.removeItem(`${this.id}.disconnected`),t.target||await h.storage?.setItem("injected.connected",!0),{accounts:b?v.map(w=>({address:w,capabilities:{}})):v,chainId:E}}catch(E){const w=E;throw w.code===Qt.code?new Qt(w):w.code===fs.code?new fs(w):w}},async disconnect(){const d=await this.getProvider();if(!d)throw new Xo;c&&(d.removeListener("chainChanged",c),c=void 0),f&&(d.removeListener("disconnect",f),f=void 0),u||(u=this.onConnect.bind(this),d.on("connect",u));try{await o_(()=>d.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await h.storage?.setItem(`${this.id}.disconnected`,!0),t.target||await h.storage?.removeItem("injected.connected")},async getAccounts(){const d=await this.getProvider();if(!d)throw new Xo;return(await d.request({method:"eth_accounts"})).map(b=>ff(b))},async getChainId(){const d=await this.getProvider();if(!d)throw new Xo;const g=await d.request({method:"eth_chainId"});return Number(g)},async getProvider(){if(typeof window>"u")return;let d;const g=r();return typeof g.provider=="function"?d=g.provider(window):typeof g.provider=="string"?d=kf(window,g.provider):d=g.provider,d&&!d.removeListener&&("off"in d&&typeof d.off=="function"?d.removeListener=d.off:d.removeListener=()=>{}),d},async isAuthorized(){try{if(e&&await h.storage?.getItem(`${this.id}.disconnected`)||!t.target&&!await h.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const m=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",m),!!await this.getProvider()),v=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(w=>window.addEventListener("ethereum#initialized",()=>w(m()),{once:!0}))]:[],new Promise(w=>setTimeout(()=>w(m()),v))]))return!0}throw new Xo}return!!(await s_(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:g}){const b=await this.getProvider();if(!b)throw new Xo;const m=h.chains.find(E=>E.id===g);if(!m)throw new Ws(new Uy);const v=new Promise(E=>{const w=(A=>{"chainId"in A&&A.chainId===g&&(h.emitter.off("change",w),E())});h.emitter.on("change",w)});try{return await Promise.all([b.request({method:"wallet_switchEthereumChain",params:[{chainId:Ry(g)}]}).then(async()=>{await this.getChainId()===g&&h.emitter.emit("change",{chainId:g})}),v]),m}catch(E){const w=E;if(w.code===4902||w?.data?.originalError?.code===4902)try{const{default:A,...N}=m.blockExplorers??{};let j;d?.blockExplorerUrls?j=d.blockExplorerUrls:A&&(j=[A.url,...Object.values(N).map(D=>D.url)]);let T;d?.rpcUrls?.length?T=d.rpcUrls:T=[m.rpcUrls.default?.http[0]??""];const $={blockExplorerUrls:j,chainId:Ry(g),chainName:d?.chainName??m.name,iconUrls:d?.iconUrls,nativeCurrency:d?.nativeCurrency??m.nativeCurrency,rpcUrls:T};return await Promise.all([b.request({method:"wallet_addEthereumChain",params:[$]}).then(async()=>{if(await this.getChainId()===g)h.emitter.emit("change",{chainId:g});else throw new Qt(new Error("User rejected switch after adding network."))}),v]),m}catch(A){throw new Qt(A)}throw w.code===Qt.code?new Qt(w):new Ws(w)}},async onAccountsChanged(d){if(d.length===0)this.onDisconnect();else if(h.emitter.listenerCount("connect")){const g=(await this.getChainId()).toString();this.onConnect({chainId:g}),e&&await h.storage?.removeItem(`${this.id}.disconnected`)}else h.emitter.emit("change",{accounts:d.map(g=>ff(g))})},onChainChanged(d){const g=Number(d);h.emitter.emit("change",{chainId:g})},async onConnect(d){const g=await this.getAccounts();if(g.length===0)return;const b=Number(d.chainId);h.emitter.emit("connect",{accounts:g,chainId:b});const m=await this.getProvider();m&&(u&&(m.removeListener("connect",u),u=void 0),o||(o=this.onAccountsChanged.bind(this),m.on("accountsChanged",o)),c||(c=this.onChainChanged.bind(this),m.on("chainChanged",c)),f||(f=this.onDisconnect.bind(this),m.on("disconnect",f)))},async onDisconnect(d){const g=await this.getProvider();d&&d.code===1013&&g&&(await this.getAccounts()).length||(h.emitter.emit("disconnect"),g&&(c&&(g.removeListener("chainChanged",c),c=void 0),f&&(g.removeListener("disconnect",f),f=void 0),u||(u=this.onConnect.bind(this),g.on("connect",u))))}})}const I4={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t?.coinbaseWalletExtension?t.coinbaseWalletExtension:kf(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return kf(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){return t?.phantom?.ethereum?t.phantom?.ethereum:kf(t,"isPhantom")}}};function kf(t,e){function n(o){return typeof e=="function"?e(o):typeof e=="string"?o[e]:!0}const r=t.ethereum;if(r?.providers)return r.providers.find(o=>n(o));if(r&&n(r))return r}function R4(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function B4(){const t=new Set;let e=[];const n=()=>R4(o=>{e.some(({info:c})=>c.uuid===o.info.uuid)||(e=[...e,o],t.forEach(c=>c(e,{added:[o]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(o=>o([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r?.()},findProvider({rdns:o}){return e.find(c=>c.info.rdns===o)},getProviders(){return e},reset(){this.clear(),r?.(),r=n()},subscribe(o,{emitImmediately:c}={}){return t.add(o),c&&o(e,{added:e}),()=>t.delete(o)}}}const U4=t=>(e,n,r)=>{const o=r.subscribe;return r.subscribe=(u,f,h)=>{let d=u;if(f){const g=h?.equalityFn||Object.is;let b=u(r.getState());d=m=>{const v=u(m);if(!g(b,v)){const E=b;f(b=v,E)}},h?.fireImmediately&&f(b,b)}return o(d)},t(e,n,r)},N4=U4;function M4(t,e){let n;try{n=t()}catch{return}return{getItem:o=>{var c;const u=h=>h===null?null:JSON.parse(h,void 0),f=(c=n.getItem(o))!=null?c:null;return f instanceof Promise?f.then(u):u(f)},setItem:(o,c)=>n.setItem(o,JSON.stringify(c,void 0)),removeItem:o=>n.removeItem(o)}}const jy=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return jy(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return jy(r)(n)}}}},j4=(t,e)=>(n,r,o)=>{let c={storage:M4(()=>localStorage),partialize:w=>w,version:0,merge:(w,A)=>({...A,...w}),...e},u=!1;const f=new Set,h=new Set;let d=c.storage;if(!d)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),n(...w)},r,o);const g=()=>{const w=c.partialize({...r()});return d.setItem(c.name,{state:w,version:c.version})},b=o.setState;o.setState=(w,A)=>{b(w,A),g()};const m=t((...w)=>{n(...w),g()},r,o);o.getInitialState=()=>m;let v;const E=()=>{var w,A;if(!d)return;u=!1,f.forEach(j=>{var T;return j((T=r())!=null?T:m)});const N=((A=c.onRehydrateStorage)==null?void 0:A.call(c,(w=r())!=null?w:m))||void 0;return jy(d.getItem.bind(d))(c.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==c.version){if(c.migrate)return[!0,c.migrate(j.state,j.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var T;const[$,D]=j;if(v=c.merge(D,(T=r())!=null?T:m),n(v,!0),$)return g()}).then(()=>{N?.(v,void 0),v=r(),u=!0,h.forEach(j=>j(v))}).catch(j=>{N?.(void 0,j)})};return o.persist={setOptions:w=>{c={...c,...w},w.storage&&(d=w.storage)},clearStorage:()=>{d?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>E(),hasHydrated:()=>u,onHydrate:w=>(f.add(w),()=>{f.delete(w)}),onFinishHydration:w=>(h.add(w),()=>{h.delete(w)})},c.skipHydration||E(),v||m},z4=j4,e2=t=>{let e;const n=new Set,r=(d,g)=>{const b=typeof d=="function"?d(e):d;if(!Object.is(b,e)){const m=e;e=g??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(v=>v(e,m))}},o=()=>e,f={setState:r,getState:o,getInitialState:()=>h,subscribe:d=>(n.add(d),()=>n.delete(d))},h=e=t(r,o,f);return f},mg=t=>t?e2(t):e2;var bg={exports:{}},t2;function q4(){return t2||(t2=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(h,d,g){this.fn=h,this.context=d,this.once=g||!1}function c(h,d,g,b,m){if(typeof g!="function")throw new TypeError("The listener must be a function");var v=new o(g,b||h,m),E=n?n+d:d;return h._events[E]?h._events[E].fn?h._events[E]=[h._events[E],v]:h._events[E].push(v):(h._events[E]=v,h._eventsCount++),h}function u(h,d){--h._eventsCount===0?h._events=new r:delete h._events[d]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var d=[],g,b;if(this._eventsCount===0)return d;for(b in g=this._events)e.call(g,b)&&d.push(n?b.slice(1):b);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(g)):d},f.prototype.listeners=function(d){var g=n?n+d:d,b=this._events[g];if(!b)return[];if(b.fn)return[b.fn];for(var m=0,v=b.length,E=new Array(v);m<v;m++)E[m]=b[m].fn;return E},f.prototype.listenerCount=function(d){var g=n?n+d:d,b=this._events[g];return b?b.fn?1:b.length:0},f.prototype.emit=function(d,g,b,m,v,E){var w=n?n+d:d;if(!this._events[w])return!1;var A=this._events[w],N=arguments.length,j,T;if(A.fn){switch(A.once&&this.removeListener(d,A.fn,void 0,!0),N){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,g),!0;case 3:return A.fn.call(A.context,g,b),!0;case 4:return A.fn.call(A.context,g,b,m),!0;case 5:return A.fn.call(A.context,g,b,m,v),!0;case 6:return A.fn.call(A.context,g,b,m,v,E),!0}for(T=1,j=new Array(N-1);T<N;T++)j[T-1]=arguments[T];A.fn.apply(A.context,j)}else{var $=A.length,D;for(T=0;T<$;T++)switch(A[T].once&&this.removeListener(d,A[T].fn,void 0,!0),N){case 1:A[T].fn.call(A[T].context);break;case 2:A[T].fn.call(A[T].context,g);break;case 3:A[T].fn.call(A[T].context,g,b);break;case 4:A[T].fn.call(A[T].context,g,b,m);break;default:if(!j)for(D=1,j=new Array(N-1);D<N;D++)j[D-1]=arguments[D];A[T].fn.apply(A[T].context,j)}}return!0},f.prototype.on=function(d,g,b){return c(this,d,g,b,!1)},f.prototype.once=function(d,g,b){return c(this,d,g,b,!0)},f.prototype.removeListener=function(d,g,b,m){var v=n?n+d:d;if(!this._events[v])return this;if(!g)return u(this,v),this;var E=this._events[v];if(E.fn)E.fn===g&&(!m||E.once)&&(!b||E.context===b)&&u(this,v);else{for(var w=0,A=[],N=E.length;w<N;w++)(E[w].fn!==g||m&&!E[w].once||b&&E[w].context!==b)&&A.push(E[w]);A.length?this._events[v]=A.length===1?A[0]:A:u(this,v)}return this},f.prototype.removeAllListeners=function(d){var g;return d?(g=n?n+d:d,this._events[g]&&u(this,g)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=n,f.EventEmitter=f,t.exports=f})(bg)),bg.exports}var P4=q4();const L4=Oa(P4);class H4{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new L4})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function k4(t){return new H4(t)}function F4(t,e){return JSON.parse(t,(n,r)=>{let o=r;return o?.__type==="bigint"&&(o=BigInt(o.value)),o?.__type==="Map"&&(o=new Map(o.value)),e?.(n,o)??o})}function n2(t,e){return t.slice(0,e).join(".")||"."}function i2(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function V4(t,e){const n=typeof t=="function",r=typeof e=="function",o=[],c=[];return function(f,h){if(typeof h=="object")if(o.length){const d=i2(o,this);d===0?o[o.length]=this:(o.splice(d),c.splice(d)),c[c.length]=f;const g=i2(o,h);if(g!==0)return r?e.call(this,f,h,n2(c,g)):`[ref=${n2(c,g)}]`}else o[0]=h,c[0]=f;return n?t.call(this,f,h):h}}function K4(t,e,n,r){return JSON.stringify(t,V4((o,c)=>{let u=c;return typeof u=="bigint"&&(u={__type:"bigint",value:c.toString()}),u instanceof Map&&(u={__type:"Map",value:Array.from(c.entries())}),e?.(o,u)??u},r),n??void 0)}function G4(t){const{deserialize:e=F4,key:n="wagmi",serialize:r=K4,storage:o=f_}=t;function c(u){return u instanceof Promise?u.then(f=>f).catch(()=>null):u}return{...o,key:n,async getItem(u,f){const h=o.getItem(`${n}.${u}`),d=await c(h);return d?e(d)??null:f??null},async setItem(u,f){const h=`${n}.${u}`;f===null?await c(o.removeItem(h)):await c(o.setItem(h,r(f)))},async removeItem(u){await c(o.removeItem(`${n}.${u}`))}}}const f_={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Y4(){const t=typeof window<"u"&&window.localStorage?window.localStorage:f_;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const zy=256;let mf=zy,bf;function Q4(t=11){if(!bf||mf+t>zy*2){bf="",mf=0;for(let e=0;e<zy;e++)bf+=(256+Math.random()*256|0).toString(16).substring(1)}return bf.substring(mf,mf+++t)}function Z4(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=G4({storage:Y4()}),syncConnectedChain:r=!0,ssr:o=!1,...c}=t,u=typeof window<"u"&&e?B4():void 0,f=mg(()=>c.chains),h=mg(()=>{const D=[],R=new Set;for(const U of c.connectors??[]){const H=d(U);if(D.push(H),!o&&H.rdns){const P=typeof H.rdns=="string"?[H.rdns]:H.rdns;for(const W of P)R.add(W)}}if(!o&&u){const U=u.getProviders();for(const H of U)R.has(H.info.rdns)||D.push(d(g(H)))}return D});function d(D){const R=k4(Q4()),U={...D({emitter:R,chains:f.getState(),storage:n,transports:c.transports}),emitter:R,uid:R.uid};return R.on("connect",T),U.setup?.(),U}function g(D){const{info:R}=D,U=D.provider;return Eh({target:{...R,id:R.rdns,provider:U}})}const b=new Map;function m(D={}){const R=D.chainId??A.getState().chainId,U=f.getState().find(P=>P.id===R);if(D.chainId&&!U)throw new Uy;{const P=b.get(A.getState().chainId);if(P&&!U)return P;if(!U)throw new Uy}{const P=b.get(R);if(P)return P}let H;if(c.client)H=c.client({chain:U});else{const P=U.id,W=f.getState().map(F=>F.id),ee={},G=Object.entries(c);for(const[F,Y]of G)if(!(F==="chains"||F==="client"||F==="connectors"||F==="transports"))if(typeof Y=="object")if(P in Y)ee[F]=Y[P];else{if(W.some(S=>S in Y))continue;ee[F]=Y}else ee[F]=Y;H=S4({...ee,chain:U,batch:ee.batch??{multicall:!0},transport:F=>c.transports[P]({...F,connectors:h})})}return b.set(R,H),H}function v(){return{chainId:f.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let E;const w="0.0.0-canary-";Hf.startsWith(w)?E=Number.parseInt(Hf.replace(w,""),10):E=Number.parseInt(Hf.split(".")[0]??"0",10);const A=mg(N4(n?z4(v,{migrate(D,R){if(R===E)return D;const U=v(),H=N(D,U.chainId);return{...U,chainId:H}},name:"store",partialize(D){return{connections:{__type:"Map",value:Array.from(D.connections.entries()).map(([R,U])=>{const{id:H,name:P,type:W,uid:ee}=U.connector;return[R,{...U,connector:{id:H,name:P,type:W,uid:ee}}]})},chainId:D.chainId,current:D.current}},merge(D,R){typeof D=="object"&&D&&"status"in D&&delete D.status;const U=N(D,R.chainId);return{...R,...D,chainId:U}},skipHydration:o,storage:n,version:E}):v));A.setState(v());function N(D,R){return D&&typeof D=="object"&&"chainId"in D&&typeof D.chainId=="number"&&f.getState().some(U=>U.id===D.chainId)?D.chainId:R}r&&A.subscribe(({connections:D,current:R})=>R?D.get(R)?.chainId:void 0,D=>{if(f.getState().some(U=>U.id===D))return A.setState(U=>({...U,chainId:D??U.chainId}))}),u?.subscribe(D=>{const R=new Set,U=new Set;for(const P of h.getState())if(R.add(P.id),P.rdns){const W=typeof P.rdns=="string"?[P.rdns]:P.rdns;for(const ee of W)U.add(ee)}const H=[];for(const P of D){if(U.has(P.info.rdns))continue;const W=d(g(P));R.has(W.id)||H.push(W)}n&&!A.persist.hasHydrated()||h.setState(P=>[...P,...H],!0)});function j(D){A.setState(R=>{const U=R.connections.get(D.uid);return U?{...R,connections:new Map(R.connections).set(D.uid,{accounts:D.accounts??U.accounts,chainId:D.chainId??U.chainId,connector:U.connector})}:R})}function T(D){A.getState().status==="connecting"||A.getState().status==="reconnecting"||A.setState(R=>{const U=h.getState().find(H=>H.uid===D.uid);return U?(U.emitter.listenerCount("connect")&&U.emitter.off("connect",j),U.emitter.listenerCount("change")||U.emitter.on("change",j),U.emitter.listenerCount("disconnect")||U.emitter.on("disconnect",$),{...R,connections:new Map(R.connections).set(D.uid,{accounts:D.accounts,chainId:D.chainId,connector:U}),current:D.uid,status:"connected"}):R})}function $(D){A.setState(R=>{const U=R.connections.get(D.uid);if(U){const P=U.connector;P.emitter.listenerCount("change")&&U.connector.emitter.off("change",j),P.emitter.listenerCount("disconnect")&&U.connector.emitter.off("disconnect",$),P.emitter.listenerCount("connect")||U.connector.emitter.on("connect",T)}if(R.connections.delete(D.uid),R.connections.size===0)return{...R,connections:new Map,current:null,status:"disconnected"};const H=R.connections.values().next().value;return{...R,connections:new Map(R.connections),current:H.connector.uid}})}return{get chains(){return f.getState()},get connectors(){return h.getState()},storage:n,getClient:m,get state(){return A.getState()},setState(D){let R;typeof D=="function"?R=D(A.getState()):R=D;const U=v();typeof R!="object"&&(R=U),Object.keys(U).some(P=>!(P in R))&&(R=U),A.setState(R,!0)},subscribe(D,R,U){return A.subscribe(D,R,U?{...U,fireImmediately:U.emitImmediately}:void 0)},_internal:{mipd:u,async revalidate(){const D=A.getState(),R=D.connections;let U=D.current;for(const[,H]of R){const P=H.connector;P.isAuthorized&&await P.isAuthorized()||(R.delete(P.uid),U===P.uid&&(U=null))}A.setState(H=>({...H,connections:R,current:U}))},store:A,ssr:!!o,syncConnectedChain:r,transports:c.transports,chains:{setState(D){const R=typeof D=="function"?D(f.getState()):D;if(R.length!==0)return f.setState(R,!0)},subscribe(D){return f.subscribe(D)}},connectors:{providerDetailToConnector:g,setup:d,setState(D){return h.setState(typeof D=="function"?D(h.getState()):D,!0)},subscribe(D){return h.subscribe(D)}},events:{change:j,connect:T,disconnect:$}}}}function X4(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(o=>o.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(o=>{const c=new Set;for(const h of o??[])if(h.rdns){const d=Array.isArray(h.rdns)?h.rdns:[h.rdns];for(const g of d)c.add(g)}const u=[],f=t._internal.mipd?.getProviders()??[];for(const h of f){if(c.has(h.info.rdns))continue;const d=t._internal.connectors.providerDetailToConnector(h),g=t._internal.connectors.setup(d);u.push(g)}return[...o,...u]})),r?D4(t):t.storage&&t.setState(o=>({...o,connections:new Map}))}}}function J4(t){const{children:e,config:n,initialState:r,reconnectOnMount:o=!0}=t,{onMount:c}=X4(n,{initialState:r,reconnectOnMount:o});n._internal.ssr||c();const u=At.useRef(!0);return At.useEffect(()=>{if(u.current&&n._internal.ssr)return c(),()=>{u.current=!1}},[]),e}const h_=At.createContext(void 0);function W4(t){const{children:e,config:n}=t,r={value:n};return At.createElement(J4,t,At.createElement(h_.Provider,r,e))}const eT="2.18.0",tT=()=>`wagmi@${eT}`;let nT=class extends vh{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return tT()}};class iT extends nT{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Cu(t={}){const e=t.config??At.useContext(h_);if(!e)throw new iT;return e}var wg={exports:{}},vg={},Eg={exports:{}},Sg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r2;function rT(){if(r2)return Sg;r2=1;var t=L0();function e(b,m){return b===m&&(b!==0||1/b===1/m)||b!==b&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,c=t.useLayoutEffect,u=t.useDebugValue;function f(b,m){var v=m(),E=r({inst:{value:v,getSnapshot:m}}),w=E[0].inst,A=E[1];return c(function(){w.value=v,w.getSnapshot=m,h(w)&&A({inst:w})},[b,v,m]),o(function(){return h(w)&&A({inst:w}),b(function(){h(w)&&A({inst:w})})},[b]),u(v),v}function h(b){var m=b.getSnapshot;b=b.value;try{var v=m();return!n(b,v)}catch{return!0}}function d(b,m){return m()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:f;return Sg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,Sg}var s2;function sT(){return s2||(s2=1,Eg.exports=rT()),Eg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o2;function oT(){if(o2)return vg;o2=1;var t=L0(),e=sT();function n(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,c=t.useRef,u=t.useEffect,f=t.useMemo,h=t.useDebugValue;return vg.useSyncExternalStoreWithSelector=function(d,g,b,m,v){var E=c(null);if(E.current===null){var w={hasValue:!1,value:null};E.current=w}else w=E.current;E=f(function(){function N(R){if(!j){if(j=!0,T=R,R=m(R),v!==void 0&&w.hasValue){var U=w.value;if(v(U,R))return $=U}return $=R}if(U=$,r(T,R))return U;var H=m(R);return v!==void 0&&v(U,H)?(T=R,U):(T=R,$=H)}var j=!1,T,$,D=b===void 0?null:b;return[function(){return N(g())},D===null?void 0:function(){return N(D())}]},[g,b,m,v]);var A=o(d,E[0],E[1]);return u(function(){w.hasValue=!0,w.value=A},[A]),h(A),A},vg}var a2;function aT(){return a2||(a2=1,wg.exports=oT()),wg.exports}var cT=aT();const _g=t=>typeof t=="object"&&!Array.isArray(t);function uT(t,e,n=e,r=va){const o=At.useRef([]),c=cT.useSyncExternalStoreWithSelector(t,e,n,u=>u,(u,f)=>{if(_g(u)&&_g(f)&&o.current.length){for(const h of o.current)if(!r(u[h],f[h]))return!1;return!0}return r(u,f)});return At.useMemo(()=>{if(_g(c)){const u={...c};let f={};for(const[h,d]of Object.entries(u))f={...f,[h]:{configurable:!1,enumerable:!0,get:()=>(o.current.includes(h)||o.current.push(h),d)}};return Object.defineProperties(u,f),u}return c},[c])}function lT(t={}){const e=Cu(t);return uT(n=>T4(e,{onChange:n}),()=>l_(e))}var fT=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};function hT(){}function c2(t){return JSON.stringify(t,(e,n)=>pT(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function dT(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function pT(t){if(!u2(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!u2(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function u2(t){return Object.prototype.toString.call(t)==="[object Object]"}function gT(t,e){return typeof t=="function"?t(...e):!!t}var yT=t=>setTimeout(t,0);function mT(){let t=[],e=0,n=f=>{f()},r=f=>{f()},o=yT;const c=f=>{e?t.push(f):o(()=>{n(f)})},u=()=>{const f=t;t=[],f.length&&o(()=>{r(()=>{f.forEach(h=>{n(h)})})})};return{batch:f=>{let h;e++;try{h=f()}finally{e--,e||u()}return h},batchCalls:f=>(...h)=>{c(()=>{f(...h)})},schedule:c,setNotifyFunction:f=>{n=f},setBatchNotifyFunction:f=>{r=f},setScheduler:f=>{o=f}}}var d_=mT();function bT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wT=class extends fT{#e;#n=void 0;#t;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),dT(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#t,observer:this}),n?.mutationKey&&this.options.mutationKey&&c2(n.mutationKey)!==c2(this.options.mutationKey)?this.reset():this.#t?.state.status==="pending"&&this.#t.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#t?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#o(e)}getCurrentResult(){return this.#n}reset(){this.#t?.removeObserver(this),this.#t=void 0,this.#i(),this.#o()}mutate(e,n){return this.#r=n,this.#t?.removeObserver(this),this.#t=this.#e.getMutationCache().build(this.#e,this.options),this.#t.addObserver(this),this.#t.execute(e)}#i(){const e=this.#t?.state??bT();this.#n={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#o(e){d_.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#n.variables,r=this.#n.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#n)})})}};function vT(t){return{mutationFn(e){return E4(t,e)},mutationKey:["connect"]}}function ET(t){return{mutationFn(e){return A4(t,e)},mutationKey:["disconnect"]}}var xg={exports:{}},Oc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2;function ST(){if(l2)return Oc;l2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var f in o)f!=="key"&&(c[f]=o[f])}else c=o;return o=c.ref,{$$typeof:t,type:r,key:u,ref:o!==void 0?o:null,props:c}}return Oc.Fragment=e,Oc.jsx=n,Oc.jsxs=n,Oc}var f2;function _T(){return f2||(f2=1,xg.exports=ST()),xg.exports}_T();var xT=At.createContext(void 0),OT=t=>{const e=At.useContext(xT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e};function p_(t,e){const n=OT(),[r]=At.useState(()=>new wT(n,t));At.useEffect(()=>{r.setOptions(t)},[r,t]);const o=At.useSyncExternalStore(At.useCallback(u=>r.subscribe(d_.batchCalls(u)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c=At.useCallback((u,f)=>{r.mutate(u,f).catch(hT)},[r]);if(o.error&&gT(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:c,mutateAsync:o.mutate}}function AT(t={}){const e=Cu(t);return At.useSyncExternalStore(n=>$4(e,{onChange:n}),()=>W1(e),()=>W1(e))}function DT(t={}){const{mutation:e}=t,n=Cu(t),r=vT(n),{mutate:o,mutateAsync:c,...u}=p_({...e,...r});return At.useEffect(()=>n.subscribe(({status:f})=>f,(f,h)=>{h==="connected"&&f==="disconnected"&&u.reset()}),[n,u.reset]),{...u,connect:o,connectAsync:c,connectors:AT({config:n})}}function TT(t={}){const e=Cu(t);return At.useSyncExternalStore(n=>C4(e,{onChange:n}),()=>My(e),()=>My(e))}function CT(t={}){const{mutation:e}=t,n=Cu(t),r=ET(n),{mutate:o,mutateAsync:c,...u}=p_({...e,...r});return{...u,connectors:TT({config:n}).map(f=>f.connector),disconnect:o,disconnectAsync:c}}function $T(){if(typeof navigator>"u")return!1;const t=navigator.userAgent||navigator.vendor||window.opera||"",e=navigator.maxTouchPoints>0;return/android|iphone|ipad|ipod|iemobile|opera mini/i.test(t)||e}function IT(){if(typeof navigator>"u")return!1;const t=(navigator.userAgent||"").toLowerCase();return t.includes("trust")||t.includes("trustwallet")||t.includes("wv")||t.includes("webview")}function RT(t){try{window.location.assign(t),setTimeout(()=>{try{window.open(t,"_self")}catch{}},500)}catch{try{window.location.href=t}catch{window.open(t,"_self")}}}function BT(){const{connectAsync:t,connectors:e,status:n}=DT(),{address:r,isConnected:o}=lT(),{disconnectAsync:c}=CT(),[u,f]=ha.useState(!1);ha.useEffect(()=>{const m=$T(),v=IT();f(m&&!v)},[]);const h=ha.useMemo(()=>u?e.find(m=>m.id==="walletConnect"||m.name.includes("WalletConnect"))||e[0]:e.find(m=>m.name==="Trust Wallet")??e[0],[e,u]);function d(m){return m?`${m.slice(0,6)}...${m.slice(-4)}`:""}const g=async()=>{if(h)try{await t({connector:h})}catch{}},b=async()=>{try{await c()}catch{}try{localStorage.removeItem("wagmi.store"),localStorage.removeItem("injected.connected"),localStorage.removeItem("walletconnect"),Object.keys(localStorage).forEach(m=>{if(m.toLowerCase().includes("walletconnect")||m.toLowerCase().includes("wc@"))try{localStorage.removeItem(m)}catch{}})}catch{}};return ei.jsxs("div",{className:"w-screen h-[100dvh] bg-white flex flex-col items-center justify-center",children:[ei.jsx("button",{onClick:o?b:g,disabled:n==="pending",className:"px-8 py-4 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-bold rounded-xl hover:from-blue-600 hover:to-blue-800 transition-all duration-300 text-lg",children:o?"Disconnect Wallet":"Connect Wallet"}),n==="pending"&&ei.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Waiting for approval..."}),o&&ei.jsxs("div",{className:"mt-4 text-center",children:[ei.jsx("p",{className:"text-gray-700",children:"Wallet Connected "}),ei.jsx("p",{className:"text-gray-500 mt-1",children:d(r)})]})]})}function UT(){return ei.jsx(BT,{})}var Sh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},NT={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},MT=class{#e=NT;#n=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},qy=new MT;function jT(t){setTimeout(t,0)}var _h=typeof window>"u"||"Deno"in globalThis;function di(){}function zT(t,e){return typeof t=="function"?t(e):t}function qT(t){return typeof t=="number"&&t>=0&&t!==1/0}function PT(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Py(t,e){return typeof t=="function"?t(e):t}function LT(t,e){return typeof t=="function"?t(e):t}function h2(t,e){const{type:n="all",exact:r,fetchStatus:o,predicate:c,queryKey:u,stale:f}=t;if(u){if(r){if(e.queryHash!==V0(u,e.options))return!1}else if(!bu(e.queryKey,u))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof f=="boolean"&&e.isStale()!==f||o&&o!==e.state.fetchStatus||c&&!c(e))}function d2(t,e){const{exact:n,status:r,predicate:o,mutationKey:c}=t;if(c){if(!e.options.mutationKey)return!1;if(n){if(mu(e.options.mutationKey)!==mu(c))return!1}else if(!bu(e.options.mutationKey,c))return!1}return!(r&&e.state.status!==r||o&&!o(e))}function V0(t,e){return(e?.queryKeyHashFn||mu)(t)}function mu(t){return JSON.stringify(t,(e,n)=>Ly(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function bu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>bu(t[n],e[n])):!1}var HT=Object.prototype.hasOwnProperty;function g_(t,e){if(t===e)return t;const n=p2(t)&&p2(e);if(!n&&!(Ly(t)&&Ly(e)))return e;const o=(n?t:Object.keys(t)).length,c=n?e:Object.keys(e),u=c.length,f=n?new Array(u):{};let h=0;for(let d=0;d<u;d++){const g=n?d:c[d],b=t[g],m=e[g];if(b===m){f[g]=b,(n?d<o:HT.call(t,g))&&h++;continue}if(b===null||m===null||typeof b!="object"||typeof m!="object"){f[g]=m;continue}const v=g_(b,m);f[g]=v,v===b&&h++}return o===u&&h===o?t:f}function p2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ly(t){if(!g2(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!g2(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function g2(t){return Object.prototype.toString.call(t)==="[object Object]"}function kT(t){return new Promise(e=>{qy.setTimeout(e,t)})}function FT(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?g_(t,e):e}function VT(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function KT(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var K0=Symbol();function y_(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===K0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var GT=class extends Sh{#e;#n;#t;constructor(){super(),this.#t=t=>{if(!_h&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#n||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(t){this.#t=t,this.#n?.(),this.#n=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},m_=new GT;function YT(){let t,e;const n=new Promise((o,c)=>{t=o,e=c});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),t(o)},n.reject=o=>{r({status:"rejected",reason:o}),e(o)},n}var QT=jT;function ZT(){let t=[],e=0,n=f=>{f()},r=f=>{f()},o=QT;const c=f=>{e?t.push(f):o(()=>{n(f)})},u=()=>{const f=t;t=[],f.length&&o(()=>{r(()=>{f.forEach(h=>{n(h)})})})};return{batch:f=>{let h;e++;try{h=f()}finally{e--,e||u()}return h},batchCalls:f=>(...h)=>{c(()=>{f(...h)})},schedule:c,setNotifyFunction:f=>{n=f},setBatchNotifyFunction:f=>{r=f},setScheduler:f=>{o=f}}}var Zt=ZT(),XT=class extends Sh{#e=!0;#n;#t;constructor(){super(),this.#t=t=>{if(!_h&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#n||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(t){this.#t=t,this.#n?.(),this.#n=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Wf=new XT;function JT(t){return Math.min(1e3*2**t,3e4)}function b_(t){return(t??"online")==="online"?Wf.isOnline():!0}var Hy=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function w_(t){let e=!1,n=0,r;const o=YT(),c=()=>o.status!=="pending",u=w=>{if(!c()){const A=new Hy(w);m(A),t.onCancel?.(A)}},f=()=>{e=!0},h=()=>{e=!1},d=()=>m_.isFocused()&&(t.networkMode==="always"||Wf.isOnline())&&t.canRun(),g=()=>b_(t.networkMode)&&t.canRun(),b=w=>{c()||(r?.(),o.resolve(w))},m=w=>{c()||(r?.(),o.reject(w))},v=()=>new Promise(w=>{r=A=>{(c()||d())&&w(A)},t.onPause?.()}).then(()=>{r=void 0,c()||t.onContinue?.()}),E=()=>{if(c())return;let w;const A=n===0?t.initialPromise:void 0;try{w=A??t.fn()}catch(N){w=Promise.reject(N)}Promise.resolve(w).then(b).catch(N=>{if(c())return;const j=t.retry??(_h?0:3),T=t.retryDelay??JT,$=typeof T=="function"?T(n,N):T,D=j===!0||typeof j=="number"&&n<j||typeof j=="function"&&j(n,N);if(e||!D){m(N);return}n++,t.onFail?.(n,N),kT($).then(()=>d()?void 0:v()).then(()=>{e?m(N):E()})})};return{promise:o,status:()=>o.status,cancel:u,continue:()=>(r?.(),o),cancelRetry:f,continueRetry:h,canStart:g,start:()=>(g()?E():v().then(E),o)}}var v_=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qT(this.gcTime)&&(this.#e=qy.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(_h?1/0:300*1e3))}clearGcTimeout(){this.#e&&(qy.clearTimeout(this.#e),this.#e=void 0)}},WT=class extends v_{#e;#n;#t;#r;#i;#o;#a;constructor(t){super(),this.#a=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#t=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=y2(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=y2(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#t.remove(this)}setData(t,e){const n=FT(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#i?.promise;return this.#i?.cancel(t),e?e.then(di).catch(di):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>LT(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===K0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Py(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!PT(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#t.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,r=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},o=()=>{const f=y_(this.options,e),d=(()=>{const g={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(g),g})();return this.#a=!1,this.options.persister?this.options.persister(f,d,this):f(d)},u=(()=>{const f={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:o};return r(f),f})();this.options.behavior?.onFetch(u,this),this.#n=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==u.fetchOptions?.meta)&&this.#s({type:"fetch",meta:u.fetchOptions?.meta}),this.#i=w_({initialPromise:e?.initialPromise,fn:u.fetchFn,onCancel:f=>{f instanceof Hy&&f.revert&&this.setState({...this.#n,fetchStatus:"idle"}),n.abort()},onFail:(f,h)=>{this.#s({type:"failed",failureCount:f,error:h})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0});try{const f=await this.#i.start();if(f===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(f),this.#t.config.onSuccess?.(f,this),this.#t.config.onSettled?.(f,this.state.error,this),f}catch(f){if(f instanceof Hy){if(f.silent)return this.#i.promise;if(f.revert){if(this.state.data===void 0)throw f;return this.state.data}}throw this.#s({type:"error",error:f}),this.#t.config.onError?.(f,this),this.#t.config.onSettled?.(this.state.data,f,this),f}finally{this.scheduleGc()}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...e5(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#n=t.manual?r:void 0,r;case"error":const o=t.error;return{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Zt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#t.notify({query:this,type:"updated",action:t})})}};function e5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:b_(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function y2(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function m2(t){return{onFetch:(e,n)=>{const r=e.options,o=e.fetchOptions?.meta?.fetchMore?.direction,c=e.state.data?.pages||[],u=e.state.data?.pageParams||[];let f={pages:[],pageParams:[]},h=0;const d=async()=>{let g=!1;const b=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},m=y_(e.options,e.fetchOptions),v=async(E,w,A)=>{if(g)return Promise.reject();if(w==null&&E.pages.length)return Promise.resolve(E);const j=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:w,direction:A?"backward":"forward",meta:e.options.meta};return b(R),R})(),T=await m(j),{maxPages:$}=e.options,D=A?KT:VT;return{pages:D(E.pages,T,$),pageParams:D(E.pageParams,w,$)}};if(o&&c.length){const E=o==="backward",w=E?t5:b2,A={pages:c,pageParams:u},N=w(r,A);f=await v(A,N,E)}else{const E=t??c.length;do{const w=h===0?u[0]??r.initialPageParam:b2(r,f);if(h>0&&w==null)break;f=await v(f,w),h++}while(h<E)}return f};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function b2(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function t5(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var n5=class extends v_{#e;#n;#t;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#n=[],this.state=t.state||i5(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#n.includes(t)||(this.#n.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#n=this.#n.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#n.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#i({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=w_({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(c,u)=>{this.#i({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const r=this.state.status==="pending",o=!this.#r.canStart();try{if(r)e();else{this.#i({type:"pending",variables:t,isPaused:o}),await this.#t.config.onMutate?.(t,this,n);const u=await this.options.onMutate?.(t,n);u!==this.state.context&&this.#i({type:"pending",context:u,variables:t,isPaused:o})}const c=await this.#r.start();return await this.#t.config.onSuccess?.(c,t,this.state.context,this,n),await this.options.onSuccess?.(c,t,this.state.context,n),await this.#t.config.onSettled?.(c,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(c,null,t,this.state.context,n),this.#i({type:"success",data:c}),c}catch(c){try{throw await this.#t.config.onError?.(c,t,this.state.context,this,n),await this.options.onError?.(c,t,this.state.context,n),await this.#t.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,c,t,this.state.context,n),c}finally{this.#i({type:"error",error:c})}}finally{this.#t.runNext(this)}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Zt.batch(()=>{this.#n.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function i5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var r5=class extends Sh{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#n=new Map,this.#t=0}#e;#n;#t;build(t,e,n){const r=new n5({client:t,mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=wf(t);if(typeof e=="string"){const n=this.#n.get(e);n?n.push(t):this.#n.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=wf(t);if(typeof e=="string"){const n=this.#n.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#n.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=wf(t);if(typeof e=="string"){const r=this.#n.get(e)?.find(o=>o.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=wf(t);return typeof e=="string"?this.#n.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Zt.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#n.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>d2(e,n))}findAll(t={}){return this.getAll().filter(e=>d2(t,e))}notify(t){Zt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Zt.batch(()=>Promise.all(t.map(e=>e.continue().catch(di))))}};function wf(t){return t.options.scope?.id}var s5=class extends Sh{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,o=e.queryHash??V0(r,e);let c=this.get(o);return c||(c=new WT({client:t,queryKey:r,queryHash:o,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(c)),c}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Zt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>h2(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>h2(t,n)):e}notify(t){Zt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Zt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Zt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},o5=class{#e;#n;#t;#r;#i;#o;#a;#s;constructor(t={}){this.#e=t.queryCache||new s5,this.#n=t.mutationCache||new r5,this.#t=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=m_.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Wf.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#n.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Py(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),c=this.#e.get(r.queryHash)?.state.data,u=zT(e,c);if(u!==void 0)return this.#e.build(this,r).setData(u,{...n,manual:!0})}setQueriesData(t,e,n){return Zt.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Zt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Zt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Zt.batch(()=>this.#e.findAll(t).map(o=>o.cancel(n)));return Promise.all(r).then(di).catch(di)}invalidateQueries(t,e={}){return Zt.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Zt.batch(()=>this.#e.findAll(t).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let c=o.fetch(void 0,n);return n.throwOnError||(c=c.catch(di)),o.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(r).then(di)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Py(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(di).catch(di)}fetchInfiniteQuery(t){return t.behavior=m2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(di).catch(di)}ensureInfiniteQueryData(t){return t.behavior=m2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Wf.isOnline()?this.#n.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#n}getDefaultOptions(){return this.#t}setDefaultOptions(t){this.#t=t}setQueryDefaults(t,e){this.#r.set(mu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{bu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(mu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(r=>{bu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#t.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=V0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===K0&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#t.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#n.clear()}},a5=ha.createContext(void 0),c5=({client:t,children:e})=>(ha.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),ei.jsx(a5.Provider,{value:t,children:e}));const w2=y4({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});var vf={exports:{}},v2;function u5(){if(v2)return vf.exports;v2=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(D,R,U){return Function.prototype.apply.call(D,R,U)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:n=function(D){return Object.getOwnPropertyNames(D)};function r($){console&&console.warn&&console.warn($)}var o=Number.isNaN||function(D){return D!==D};function c(){c.init.call(this)}vf.exports=c,vf.exports.once=N,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var u=10;function f($){if(typeof $!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function($){if(typeof $!="number"||$<0||o($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");u=$}}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||o(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this};function h($){return $._maxListeners===void 0?c.defaultMaxListeners:$._maxListeners}c.prototype.getMaxListeners=function(){return h(this)},c.prototype.emit=function(D){for(var R=[],U=1;U<arguments.length;U++)R.push(arguments[U]);var H=D==="error",P=this._events;if(P!==void 0)H=H&&P.error===void 0;else if(!H)return!1;if(H){var W;if(R.length>0&&(W=R[0]),W instanceof Error)throw W;var ee=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw ee.context=W,ee}var G=P[D];if(G===void 0)return!1;if(typeof G=="function")e(G,this,R);else for(var F=G.length,Y=E(G,F),U=0;U<F;++U)e(Y[U],this,R);return!0};function d($,D,R,U){var H,P,W;if(f(R),P=$._events,P===void 0?(P=$._events=Object.create(null),$._eventsCount=0):(P.newListener!==void 0&&($.emit("newListener",D,R.listener?R.listener:R),P=$._events),W=P[D]),W===void 0)W=P[D]=R,++$._eventsCount;else if(typeof W=="function"?W=P[D]=U?[R,W]:[W,R]:U?W.unshift(R):W.push(R),H=h($),H>0&&W.length>H&&!W.warned){W.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(D)+" listeners added. Use emitter.setMaxListeners() to increase limit");ee.name="MaxListenersExceededWarning",ee.emitter=$,ee.type=D,ee.count=W.length,r(ee)}return $}c.prototype.addListener=function(D,R){return d(this,D,R,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(D,R){return d(this,D,R,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b($,D,R){var U={fired:!1,wrapFn:void 0,target:$,type:D,listener:R},H=g.bind(U);return H.listener=R,U.wrapFn=H,H}c.prototype.once=function(D,R){return f(R),this.on(D,b(this,D,R)),this},c.prototype.prependOnceListener=function(D,R){return f(R),this.prependListener(D,b(this,D,R)),this},c.prototype.removeListener=function(D,R){var U,H,P,W,ee;if(f(R),H=this._events,H===void 0)return this;if(U=H[D],U===void 0)return this;if(U===R||U.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete H[D],H.removeListener&&this.emit("removeListener",D,U.listener||R));else if(typeof U!="function"){for(P=-1,W=U.length-1;W>=0;W--)if(U[W]===R||U[W].listener===R){ee=U[W].listener,P=W;break}if(P<0)return this;P===0?U.shift():w(U,P),U.length===1&&(H[D]=U[0]),H.removeListener!==void 0&&this.emit("removeListener",D,ee||R)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(D){var R,U,H;if(U=this._events,U===void 0)return this;if(U.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):U[D]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete U[D]),this;if(arguments.length===0){var P=Object.keys(U),W;for(H=0;H<P.length;++H)W=P[H],W!=="removeListener"&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=U[D],typeof R=="function")this.removeListener(D,R);else if(R!==void 0)for(H=R.length-1;H>=0;H--)this.removeListener(D,R[H]);return this};function m($,D,R){var U=$._events;if(U===void 0)return[];var H=U[D];return H===void 0?[]:typeof H=="function"?R?[H.listener||H]:[H]:R?A(H):E(H,H.length)}c.prototype.listeners=function(D){return m(this,D,!0)},c.prototype.rawListeners=function(D){return m(this,D,!1)},c.listenerCount=function($,D){return typeof $.listenerCount=="function"?$.listenerCount(D):v.call($,D)},c.prototype.listenerCount=v;function v($){var D=this._events;if(D!==void 0){var R=D[$];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}c.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function E($,D){for(var R=new Array(D),U=0;U<D;++U)R[U]=$[U];return R}function w($,D){for(;D+1<$.length;D++)$[D]=$[D+1];$.pop()}function A($){for(var D=new Array($.length),R=0;R<D.length;++R)D[R]=$[R].listener||$[R];return D}function N($,D){return new Promise(function(R,U){function H(W){$.removeListener(D,P),U(W)}function P(){typeof $.removeListener=="function"&&$.removeListener("error",H),R([].slice.call(arguments))}T($,D,P,{once:!0}),D!=="error"&&j($,H,{once:!0})})}function j($,D,R){typeof $.on=="function"&&T($,"error",D,R)}function T($,D,R,U){if(typeof $.on=="function")U.once?$.once(D,R):$.on(D,R);else if(typeof $.addEventListener=="function")$.addEventListener(D,function H(P){U.once&&$.removeEventListener(D,H),R(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $)}return vf.exports}var ii=u5();const G0=Oa(ii);var Og={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ky=function(t,e){return ky=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},ky(t,e)};function l5(t,e){ky(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Fy=function(){return Fy=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},Fy.apply(this,arguments)};function f5(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function h5(t,e,n,r){var o=arguments.length,c=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,r);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(c=(o<3?u(c):o>3?u(e,n,c):u(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function d5(t,e){return function(n,r){e(n,r,t)}}function p5(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function g5(t,e,n,r){function o(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function f(g){try{d(r.next(g))}catch(b){u(b)}}function h(g){try{d(r.throw(g))}catch(b){u(b)}}function d(g){g.done?c(g.value):o(g.value).then(f,h)}d((r=r.apply(t,e||[])).next())})}function y5(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},r,o,c,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(d){return function(g){return h([d,g])}}function h(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(c=d[0]&2?o.return:d[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,d[1])).done)return c;switch(o=0,c&&(d=[d[0]&2,c.value]),d[0]){case 0:case 1:c=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,o=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!c||d[1]>c[0]&&d[1]<c[3])){n.label=d[1];break}if(d[0]===6&&n.label<c[1]){n.label=c[1],c=d;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(d);break}c[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(g){d=[6,g],o=0}finally{r=c=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function m5(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function b5(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Vy(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function E_(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,c=[],u;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)c.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return c}function w5(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(E_(arguments[e]));return t}function v5(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var c=arguments[e],u=0,f=c.length;u<f;u++,o++)r[o]=c[u];return r}function wu(t){return this instanceof wu?(this.v=t,this):new wu(t)}function E5(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,c=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(m){r[m]&&(o[m]=function(v){return new Promise(function(E,w){c.push([m,v,E,w])>1||f(m,v)})})}function f(m,v){try{h(r[m](v))}catch(E){b(c[0][3],E)}}function h(m){m.value instanceof wu?Promise.resolve(m.value.v).then(d,g):b(c[0][2],m)}function d(m){f("next",m)}function g(m){f("throw",m)}function b(m,v){m(v),c.shift(),c.length&&f(c[0][0],c[0][1])}}function S5(t){var e,n;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,c){e[o]=t[o]?function(u){return(n=!n)?{value:wu(t[o](u)),done:o==="return"}:c?c(u):u}:c}}function _5(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Vy=="function"?Vy(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(c){n[c]=t[c]&&function(u){return new Promise(function(f,h){u=t[c](u),o(f,h,u.done,u.value)})}}function o(c,u,f,h){Promise.resolve(h).then(function(d){c({value:d,done:f})},u)}}function x5(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function O5(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function A5(t){return t&&t.__esModule?t:{default:t}}function D5(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function T5(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const C5=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Fy},__asyncDelegator:S5,__asyncGenerator:E5,__asyncValues:_5,__await:wu,__awaiter:g5,__classPrivateFieldGet:D5,__classPrivateFieldSet:T5,__createBinding:m5,__decorate:h5,__exportStar:b5,__extends:l5,__generator:y5,__importDefault:A5,__importStar:O5,__makeTemplateObject:x5,__metadata:p5,__param:d5,__read:E_,__rest:f5,__spread:w5,__spreadArrays:v5,__values:Vy},Symbol.toStringTag,{value:"Module"})),xh=F3(C5);var Ag={},Ac={},E2;function $5(){if(E2)return Ac;E2=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Ac.delay=t,Ac}var Ms={},Dg={},js={},S2;function I5(){return S2||(S2=1,Object.defineProperty(js,"__esModule",{value:!0}),js.ONE_THOUSAND=js.ONE_HUNDRED=void 0,js.ONE_HUNDRED=100,js.ONE_THOUSAND=1e3),js}var Tg={},_2;function R5(){return _2||(_2=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365})(Tg)),Tg}var x2;function S_(){return x2||(x2=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=xh;e.__exportStar(I5(),t),e.__exportStar(R5(),t)})(Dg)),Dg}var O2;function B5(){if(O2)return Ms;O2=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.fromMiliseconds=Ms.toMiliseconds=void 0;const t=S_();function e(r){return r*t.ONE_THOUSAND}Ms.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Ms.fromMiliseconds=n,Ms}var A2;function U5(){return A2||(A2=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=xh;e.__exportStar($5(),t),e.__exportStar(B5(),t)})(Ag)),Ag}var Jo={},D2;function N5(){if(D2)return Jo;D2=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const o=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:o})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Jo.Watch=t,Jo.default=t,Jo}var Cg={},Dc={},T2;function M5(){if(T2)return Dc;T2=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.IWatch=void 0;class t{}return Dc.IWatch=t,Dc}var C2;function j5(){return C2||(C2=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),xh.__exportStar(M5(),t)})(Cg)),Cg}var $2;function z5(){return $2||($2=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=xh;e.__exportStar(U5(),t),e.__exportStar(N5(),t),e.__exportStar(j5(),t),e.__exportStar(S_(),t)})(Og)),Og}var fe=z5();class ro{}let q5=class extends ro{constructor(e){super()}};const I2=fe.FIVE_SECONDS,so={pulse:"heartbeat_pulse"};let P5=class __ extends q5{constructor(e){super(e),this.events=new ii.EventEmitter,this.interval=I2,this.interval=e?.interval||I2}static async init(e){const n=new __(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),fe.toMiliseconds(this.interval))}pulse(){this.events.emit(so.pulse)}};const L5=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,H5=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,k5=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function F5(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){V5(t);return}return e}function V5(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ef(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!k5.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(L5.test(t)||H5.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,F5)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function K5(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function xt(t,...e){try{return K5(t(...e))}catch(n){return Promise.reject(n)}}function G5(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Y5(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Ff(t){if(G5(t))return String(t);if(Y5(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Ff(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Ky="base64:";function Q5(t){return typeof t=="string"?t:Ky+J5(t)}function Z5(t){return typeof t!="string"||!t.startsWith(Ky)?t:X5(t.slice(Ky.length))}function X5(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function J5(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function ln(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function W5(...t){return ln(t.join(":"))}function Sf(t){return t=ln(t),t?t+":":""}function eC(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function tC(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const nC="memory",iC=()=>{const t=new Map;return{name:nC,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function rC(t={}){const e={mounts:{"":t.driver||iC()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=d=>{for(const g of e.mountpoints)if(d.startsWith(g))return{base:g,relativeKey:d.slice(g.length),driver:e.mounts[g]};return{base:"",relativeKey:d,driver:e.mounts[""]}},r=(d,g)=>e.mountpoints.filter(b=>b.startsWith(d)||g&&d.startsWith(b)).map(b=>({relativeBase:d.length>b.length?d.slice(b.length):void 0,mountpoint:b,driver:e.mounts[b]})),o=(d,g)=>{if(e.watching){g=ln(g);for(const b of e.watchListeners)b(d,g)}},c=async()=>{if(!e.watching){e.watching=!0;for(const d in e.mounts)e.unwatch[d]=await R2(e.mounts[d],o,d)}},u=async()=>{if(e.watching){for(const d in e.unwatch)await e.unwatch[d]();e.unwatch={},e.watching=!1}},f=(d,g,b)=>{const m=new Map,v=E=>{let w=m.get(E.base);return w||(w={driver:E.driver,base:E.base,items:[]},m.set(E.base,w)),w};for(const E of d){const w=typeof E=="string",A=ln(w?E:E.key),N=w?void 0:E.value,j=w||!E.options?g:{...g,...E.options},T=n(A);v(T).items.push({key:A,value:N,relativeKey:T.relativeKey,options:j})}return Promise.all([...m.values()].map(E=>b(E))).then(E=>E.flat())},h={hasItem(d,g={}){d=ln(d);const{relativeKey:b,driver:m}=n(d);return xt(m.hasItem,b,g)},getItem(d,g={}){d=ln(d);const{relativeKey:b,driver:m}=n(d);return xt(m.getItem,b,g).then(v=>Ef(v))},getItems(d,g={}){return f(d,g,b=>b.driver.getItems?xt(b.driver.getItems,b.items.map(m=>({key:m.relativeKey,options:m.options})),g).then(m=>m.map(v=>({key:W5(b.base,v.key),value:Ef(v.value)}))):Promise.all(b.items.map(m=>xt(b.driver.getItem,m.relativeKey,m.options).then(v=>({key:m.key,value:Ef(v)})))))},getItemRaw(d,g={}){d=ln(d);const{relativeKey:b,driver:m}=n(d);return m.getItemRaw?xt(m.getItemRaw,b,g):xt(m.getItem,b,g).then(v=>Z5(v))},async setItem(d,g,b={}){if(g===void 0)return h.removeItem(d);d=ln(d);const{relativeKey:m,driver:v}=n(d);v.setItem&&(await xt(v.setItem,m,Ff(g),b),v.watch||o("update",d))},async setItems(d,g){await f(d,g,async b=>{if(b.driver.setItems)return xt(b.driver.setItems,b.items.map(m=>({key:m.relativeKey,value:Ff(m.value),options:m.options})),g);b.driver.setItem&&await Promise.all(b.items.map(m=>xt(b.driver.setItem,m.relativeKey,Ff(m.value),m.options)))})},async setItemRaw(d,g,b={}){if(g===void 0)return h.removeItem(d,b);d=ln(d);const{relativeKey:m,driver:v}=n(d);if(v.setItemRaw)await xt(v.setItemRaw,m,g,b);else if(v.setItem)await xt(v.setItem,m,Q5(g),b);else return;v.watch||o("update",d)},async removeItem(d,g={}){typeof g=="boolean"&&(g={removeMeta:g}),d=ln(d);const{relativeKey:b,driver:m}=n(d);m.removeItem&&(await xt(m.removeItem,b,g),(g.removeMeta||g.removeMata)&&await xt(m.removeItem,b+"$",g),m.watch||o("remove",d))},async getMeta(d,g={}){typeof g=="boolean"&&(g={nativeOnly:g}),d=ln(d);const{relativeKey:b,driver:m}=n(d),v=Object.create(null);if(m.getMeta&&Object.assign(v,await xt(m.getMeta,b,g)),!g.nativeOnly){const E=await xt(m.getItem,b+"$",g).then(w=>Ef(w));E&&typeof E=="object"&&(typeof E.atime=="string"&&(E.atime=new Date(E.atime)),typeof E.mtime=="string"&&(E.mtime=new Date(E.mtime)),Object.assign(v,E))}return v},setMeta(d,g,b={}){return this.setItem(d+"$",g,b)},removeMeta(d,g={}){return this.removeItem(d+"$",g)},async getKeys(d,g={}){d=Sf(d);const b=r(d,!0);let m=[];const v=[];let E=!0;for(const A of b){A.driver.flags?.maxDepth||(E=!1);const N=await xt(A.driver.getKeys,A.relativeBase,g);for(const j of N){const T=A.mountpoint+ln(j);m.some($=>T.startsWith($))||v.push(T)}m=[A.mountpoint,...m.filter(j=>!j.startsWith(A.mountpoint))]}const w=g.maxDepth!==void 0&&!E;return v.filter(A=>(!w||eC(A,g.maxDepth))&&tC(A,d))},async clear(d,g={}){d=Sf(d),await Promise.all(r(d,!1).map(async b=>{if(b.driver.clear)return xt(b.driver.clear,b.relativeBase,g);if(b.driver.removeItem){const m=await b.driver.getKeys(b.relativeBase||"",g);return Promise.all(m.map(v=>b.driver.removeItem(v,g)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(d=>B2(d)))},async watch(d){return await c(),e.watchListeners.push(d),async()=>{e.watchListeners=e.watchListeners.filter(g=>g!==d),e.watchListeners.length===0&&await u()}},async unwatch(){e.watchListeners=[],await u()},mount(d,g){if(d=Sf(d),d&&e.mounts[d])throw new Error(`already mounted at ${d}`);return d&&(e.mountpoints.push(d),e.mountpoints.sort((b,m)=>m.length-b.length)),e.mounts[d]=g,e.watching&&Promise.resolve(R2(g,o,d)).then(b=>{e.unwatch[d]=b}).catch(console.error),h},async unmount(d,g=!0){d=Sf(d),!(!d||!e.mounts[d])&&(e.watching&&d in e.unwatch&&(e.unwatch[d]?.(),delete e.unwatch[d]),g&&await B2(e.mounts[d]),e.mountpoints=e.mountpoints.filter(b=>b!==d),delete e.mounts[d])},getMount(d=""){d=ln(d)+":";const g=n(d);return{driver:g.driver,base:g.base}},getMounts(d="",g={}){return d=ln(d),r(d,g.parents).map(m=>({driver:m.driver,base:m.mountpoint}))},keys:(d,g={})=>h.getKeys(d,g),get:(d,g={})=>h.getItem(d,g),set:(d,g,b={})=>h.setItem(d,g,b),has:(d,g={})=>h.hasItem(d,g),del:(d,g={})=>h.removeItem(d,g),remove:(d,g={})=>h.removeItem(d,g)};return h}function R2(t,e,n){return t.watch?t.watch((r,o)=>e(r,n+o)):()=>{}}async function B2(t){typeof t.dispose=="function"&&await xt(t.dispose)}function oo(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function x_(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=oo(n);return(o,c)=>r.then(u=>c(u.transaction(e,o).objectStore(e)))}let $g;function $u(){return $g||($g=x_("keyval-store","keyval")),$g}function U2(t,e=$u()){return e("readonly",n=>oo(n.get(t)))}function sC(t,e,n=$u()){return n("readwrite",r=>(r.put(e,t),oo(r.transaction)))}function oC(t,e=$u()){return e("readwrite",n=>(n.delete(t),oo(n.transaction)))}function aC(t=$u()){return t("readwrite",e=>(e.clear(),oo(e.transaction)))}function cC(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},oo(t.transaction)}function uC(t=$u()){return t("readonly",e=>{if(e.getAllKeys)return oo(e.getAllKeys());const n=[];return cC(e,r=>n.push(r.key)).then(()=>n)})}const lC=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),fC=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function eo(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return fC(t)}catch{return t}}function vr(t){return typeof t=="string"?t:lC(t)||""}const hC="idb-keyval";var dC=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=o=>e+o;let r;return t.dbName&&t.storeName&&(r=x_(t.dbName,t.storeName)),{name:hC,options:t,async hasItem(o){return!(typeof await U2(n(o),r)>"u")},async getItem(o){return await U2(n(o),r)??null},setItem(o,c){return sC(n(o),c,r)},removeItem(o){return oC(n(o),r)},getKeys(){return uC(r)},clear(){return aC(r)}}};const pC="WALLET_CONNECT_V2_INDEXED_DB",gC="keyvaluestorage";let yC=class{constructor(){this.indexedDb=rC({driver:dC({dbName:pC,storeName:gC})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,vr(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vf={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ig<"u"&&Ig.localStorage?Vf.exports=Ig.localStorage:typeof window<"u"&&window.localStorage?Vf.exports=window.localStorage:Vf.exports=new e})();function mC(t){var e;return[t[0],eo((e=t[1])!=null?e:"")]}let bC=class{constructor(){this.localStorage=Vf.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(mC)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return eo(n)}async setItem(e,n){this.localStorage.setItem(e,vr(n))}async removeItem(e){this.localStorage.removeItem(e)}};const wC="wc_storage_version",N2=1,vC=async(t,e,n)=>{const r=wC,o=await e.getItem(r);if(o&&o>=N2){n(e);return}const c=await t.getKeys();if(!c.length){n(e);return}const u=[];for(;c.length;){const f=c.shift();if(!f)continue;const h=f.toLowerCase();if(h.includes("wc@")||h.includes("walletconnect")||h.includes("wc_")||h.includes("wallet_connect")){const d=await t.getItem(f);await e.setItem(f,d),u.push(f)}}await e.setItem(r,N2),n(e),EC(t,u)},EC=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let SC=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new bC;this.storage=e;try{const n=new yC;vC(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var Tc={exports:{}},Rg,M2;function _C(){if(M2)return Rg;M2=1;function t(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}Rg=e;function e(n,r,o){var c=o&&o.stringify||t,u=1;if(typeof n=="object"&&n!==null){var f=r.length+u;if(f===1)return n;var h=new Array(f);h[0]=c(n);for(var d=1;d<f;d++)h[d]=c(r[d]);return h.join(" ")}if(typeof n!="string")return n;var g=r.length;if(g===0)return n;for(var b="",m=1-u,v=-1,E=n&&n.length||0,w=0;w<E;){if(n.charCodeAt(w)===37&&w+1<E){switch(v=v>-1?v:0,n.charCodeAt(w+1)){case 100:case 102:if(m>=g||r[m]==null)break;v<w&&(b+=n.slice(v,w)),b+=Number(r[m]),v=w+2,w++;break;case 105:if(m>=g||r[m]==null)break;v<w&&(b+=n.slice(v,w)),b+=Math.floor(Number(r[m])),v=w+2,w++;break;case 79:case 111:case 106:if(m>=g||r[m]===void 0)break;v<w&&(b+=n.slice(v,w));var A=typeof r[m];if(A==="string"){b+="'"+r[m]+"'",v=w+2,w++;break}if(A==="function"){b+=r[m].name||"<anonymous>",v=w+2,w++;break}b+=c(r[m]),v=w+2,w++;break;case 115:if(m>=g)break;v<w&&(b+=n.slice(v,w)),b+=String(r[m]),v=w+2,w++;break;case 37:v<w&&(b+=n.slice(v,w)),b+="%",v=w+2,w++,m--;break}++m}++w}return v===-1?n:(v<E&&(b+=n.slice(v)),b)}return Rg}var j2;function xC(){if(j2)return Tc.exports;j2=1;const t=_C();Tc.exports=g;const e=Y().console||{},n={mapHttpRequest:U,mapHttpResponse:U,wrapRequestSerializer:H,wrapResponseSerializer:H,wrapErrorSerializer:H,req:U,res:U,err:D,errWithCause:D};function r(_,S){return _==="silent"?1/0:S.levels.values[_]}const o=Symbol("pino.logFuncs"),c=Symbol("pino.hierarchy"),u={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function f(_,S){const C={logger:S,parent:_[c]};S[c]=C}function h(_,S,C){const z={};S.forEach(M=>{z[M]=C[M]?C[M]:e[M]||e[u[M]||"log"]||P}),_[o]=z}function d(_,S){return Array.isArray(_)?_.filter(function(z){return z!=="!stdSerializers.err"}):_===!0?Object.keys(S):!1}function g(_){_=_||{},_.browser=_.browser||{};const S=_.browser.transmit;if(S&&typeof S.send!="function")throw Error("pino: transmit option must have a send function");const C=_.browser.write||e;_.browser.write&&(_.browser.asObject=!0);const z=_.serializers||{},M=d(_.browser.serialize,z);let L=_.browser.serialize;Array.isArray(_.browser.serialize)&&_.browser.serialize.indexOf("!stdSerializers.err")>-1&&(L=!1);const x=Object.keys(_.customLevels||{}),B=["error","fatal","warn","info","debug","trace"].concat(x);typeof C=="function"&&B.forEach(function(ye){C[ye]=C}),(_.enabled===!1||_.browser.disabled)&&(_.level="silent");const V=_.level||"info",q=Object.create(C);q.log||(q.log=P),h(q,B,C),f({},q),Object.defineProperty(q,"levelVal",{get:ie}),Object.defineProperty(q,"level",{get:oe,set:de});const Q={transmit:S,serialize:M,asObject:_.browser.asObject,asObjectBindingsOnly:_.browser.asObjectBindingsOnly,formatters:_.browser.formatters,levels:B,timestamp:R(_),messageKey:_.messageKey||"msg",onChild:_.onChild||P};q.levels=b(_),q.level=V,q.isLevelEnabled=function(ye){return this.levels.values[ye]?this.levels.values[ye]>=this.levels.values[this.level]:!1},q.setMaxListeners=q.getMaxListeners=q.emit=q.addListener=q.on=q.prependListener=q.once=q.prependOnceListener=q.removeListener=q.removeAllListeners=q.listeners=q.listenerCount=q.eventNames=q.write=q.flush=P,q.serializers=z,q._serialize=M,q._stdErrSerialize=L,q.child=function(...ye){return ue.call(this,Q,...ye)},S&&(q._logEvent=$());function ie(){return r(this.level,this)}function oe(){return this._level}function de(ye){if(ye!=="silent"&&!this.levels.values[ye])throw Error("unknown level "+ye);this._level=ye,E(this,Q,q,"error"),E(this,Q,q,"fatal"),E(this,Q,q,"warn"),E(this,Q,q,"info"),E(this,Q,q,"debug"),E(this,Q,q,"trace"),x.forEach(xe=>{E(this,Q,q,xe)})}function ue(ye,xe,ze){if(!xe)throw new Error("missing bindings for child Pino");ze=ze||{},M&&xe.serializers&&(ze.serializers=xe.serializers);const We=ze.serializers;if(M&&We){var He=Object.assign({},z,We),Tt=_.browser.serialize===!0?Object.keys(He):M;delete xe.serializers,j([xe],Tt,He,this._stdErrSerialize)}function ri(ji){this._childLevel=(ji._childLevel|0)+1,this.bindings=xe,He&&(this.serializers=He,this._serialize=Tt),S&&(this._logEvent=$([].concat(ji._logEvent.bindings,xe)))}ri.prototype=this;const Mi=new ri(this);return f(this,Mi),Mi.child=function(...ji){return ue.call(this,ye,...ji)},Mi.level=ze.level||this.level,ye.onChild(Mi),Mi}return q}function b(_){const S=_.customLevels||{},C=Object.assign({},g.levels.values,S),z=Object.assign({},g.levels.labels,m(S));return{values:C,labels:z}}function m(_){const S={};return Object.keys(_).forEach(function(C){S[_[C]]=C}),S}g.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},g.stdSerializers=n,g.stdTimeFunctions=Object.assign({},{nullTime:W,epochTime:ee,unixTime:G,isoTime:F});function v(_){const S=[];_.bindings&&S.push(_.bindings);let C=_[c];for(;C.parent;)C=C.parent,C.logger.bindings&&S.push(C.logger.bindings);return S.reverse()}function E(_,S,C,z){if(Object.defineProperty(_,z,{value:r(_.level,C)>r(z,C)?P:C[o][z],writable:!0,enumerable:!0,configurable:!0}),_[z]===P){if(!S.transmit)return;const L=S.transmit.level||_.level,x=r(L,C);if(r(z,C)<x)return}_[z]=A(_,S,C,z);const M=v(_);M.length!==0&&(_[z]=w(M,_[z]))}function w(_,S){return function(){return S.apply(this,[..._,...arguments])}}function A(_,S,C,z){return(function(M){return function(){const x=S.timestamp(),B=new Array(arguments.length),V=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var q=0;q<B.length;q++)B[q]=arguments[q];var Q=!1;if(S.serialize&&(j(B,this._serialize,this.serializers,this._stdErrSerialize),Q=!0),S.asObject||S.formatters?M.call(V,...N(this,z,B,x,S)):M.apply(V,B),S.transmit){const ie=S.transmit.level||_._level,oe=r(ie,C),de=r(z,C);if(de<oe)return;T(this,{ts:x,methodLevel:z,methodValue:de,transmitValue:C.levels.values[S.transmit.level||_._level],send:S.transmit.send,val:r(_._level,C)},B,Q)}}})(_[o][z])}function N(_,S,C,z,M){const{level:L,log:x=ie=>ie}=M.formatters||{},B=C.slice();let V=B[0];const q={};let Q=(_._childLevel|0)+1;if(Q<1&&(Q=1),z&&(q.time=z),L){const ie=L(S,_.levels.values[S]);Object.assign(q,ie)}else q.level=_.levels.values[S];if(M.asObjectBindingsOnly){if(V!==null&&typeof V=="object")for(;Q--&&typeof B[0]=="object";)Object.assign(q,B.shift());return[x(q),...B]}else{if(V!==null&&typeof V=="object"){for(;Q--&&typeof B[0]=="object";)Object.assign(q,B.shift());V=B.length?t(B.shift(),B):void 0}else typeof V=="string"&&(V=t(B.shift(),B));return V!==void 0&&(q[M.messageKey]=V),[x(q)]}}function j(_,S,C,z){for(const M in _)if(z&&_[M]instanceof Error)_[M]=g.stdSerializers.err(_[M]);else if(typeof _[M]=="object"&&!Array.isArray(_[M])&&S)for(const L in _[M])S.indexOf(L)>-1&&L in C&&(_[M][L]=C[L](_[M][L]))}function T(_,S,C,z=!1){const M=S.send,L=S.ts,x=S.methodLevel,B=S.methodValue,V=S.val,q=_._logEvent.bindings;z||j(C,_._serialize||Object.keys(_.serializers),_.serializers,_._stdErrSerialize===void 0?!0:_._stdErrSerialize),_._logEvent.ts=L,_._logEvent.messages=C.filter(function(Q){return q.indexOf(Q)===-1}),_._logEvent.level.label=x,_._logEvent.level.value=B,M(x,_._logEvent,V),_._logEvent=$(q)}function $(_){return{ts:0,messages:[],bindings:_||[],level:{label:"",value:0}}}function D(_){const S={type:_.constructor.name,msg:_.message,stack:_.stack};for(const C in _)S[C]===void 0&&(S[C]=_[C]);return S}function R(_){return typeof _.timestamp=="function"?_.timestamp:_.timestamp===!1?W:ee}function U(){return{}}function H(_){return _}function P(){}function W(){return!1}function ee(){return Date.now()}function G(){return Math.round(Date.now()/1e3)}function F(){return new Date(Date.now()).toISOString()}function Y(){function _(S){return typeof S<"u"&&S}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return _(self)||_(window)||_(this)||{}}}return Tc.exports.default=g,Tc.exports.pino=g,Tc.exports}var aa=xC();const O_=Oa(aa),OC={level:"info"},Oh="custom_context",Y0=1e3*1024;var AC=Object.defineProperty,DC=(t,e,n)=>e in t?AC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,as=(t,e,n)=>DC(t,typeof e!="symbol"?e+"":e,n);let TC=class{constructor(e){as(this,"nodeValue"),as(this,"sizeInBytes"),as(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},z2=class{constructor(e){as(this,"lengthInNodes"),as(this,"sizeInBytes"),as(this,"head"),as(this,"tail"),as(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new TC(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}};var CC=Object.defineProperty,$C=(t,e,n)=>e in t?CC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_f=(t,e,n)=>$C(t,typeof e!="symbol"?e+"":e,n);let A_=class{constructor(e,n=Y0){_f(this,"logs"),_f(this,"level"),_f(this,"levelValue"),_f(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=aa.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new z2(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===aa.levels.values.error?console.error(e):n===aa.levels.values.warn?console.warn(e):n===aa.levels.values.debug?console.debug(e):n===aa.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(vr({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new z2(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(vr({extraMetadata:e})),new Blob(n,{type:"application/json"})}};var IC=Object.defineProperty,RC=(t,e,n)=>e in t?IC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,BC=(t,e,n)=>RC(t,e+"",n);let UC=class{constructor(e,n=Y0){BC(this,"baseChunkLogger"),this.baseChunkLogger=new A_(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}};var NC=Object.defineProperty,MC=(t,e,n)=>e in t?NC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jC=(t,e,n)=>MC(t,e+"",n);let zC=class{constructor(e,n=Y0){jC(this,"baseChunkLogger"),this.baseChunkLogger=new A_(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var qC=Object.defineProperty,PC=Object.defineProperties,LC=Object.getOwnPropertyDescriptors,q2=Object.getOwnPropertySymbols,HC=Object.prototype.hasOwnProperty,kC=Object.prototype.propertyIsEnumerable,P2=(t,e,n)=>e in t?qC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eh=(t,e)=>{for(var n in e||(e={}))HC.call(e,n)&&P2(t,n,e[n]);if(q2)for(var n of q2(e))kC.call(e,n)&&P2(t,n,e[n]);return t},th=(t,e)=>PC(t,LC(e));function FC(t){return th(eh({},t),{level:t?.level||OC.level})}function VC(t,e,n=Oh){return t[n]=e,t}function wn(t,e=Oh){return t[e]||""}function KC(t,e,n=Oh){const r=wn(t,n);return r.trim()?`${r}/${e}`:e}function Nn(t,e,n=Oh){const r=KC(t,e,n),o=t.child({context:r});return VC(o,r,n)}function GC(t){var e,n;const r=new UC((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:O_(th(eh({},t.opts),{level:"trace",browser:th(eh({},(n=t.opts)==null?void 0:n.browser),{write:o=>r.write(o)})})),chunkLoggerController:r}}function YC(t){var e;const n=new zC((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:O_(th(eh({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function D_(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?GC(t):YC(t)}var QC=Object.defineProperty,ZC=(t,e,n)=>e in t?QC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L2=(t,e,n)=>ZC(t,typeof e!="symbol"?e+"":e,n);let XC=class extends ro{constructor(e){super(),this.opts=e,L2(this,"protocol","wc"),L2(this,"version",2)}};var JC=Object.defineProperty,WC=(t,e,n)=>e in t?JC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,e$=(t,e,n)=>WC(t,e+"",n);class t$ extends ro{constructor(e,n){super(),this.core=e,this.logger=n,e$(this,"records",new Map)}}let n$=class{constructor(e,n){this.logger=e,this.core=n}},i$=class extends ro{constructor(e,n){super(),this.relayer=e,this.logger=n}},r$=class extends ro{constructor(e){super()}},s$=class{constructor(e,n,r,o){this.core=e,this.logger=n,this.name=r}},o$=class extends ro{constructor(e,n){super(),this.relayer=e,this.logger=n}},a$=class extends ro{constructor(e,n){super(),this.core=e,this.logger=n}},c$=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},u$=class{constructor(e,n){this.projectId=e,this.logger=n}},l$=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var f$=Object.defineProperty,h$=(t,e,n)=>e in t?f$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H2=(t,e,n)=>h$(t,typeof e!="symbol"?e+"":e,n);let d$=class{constructor(e){this.opts=e,H2(this,"protocol","wc"),H2(this,"version",2)}},p$=class{constructor(e){this.client=e}};function g$(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function T_(t,...e){if(!g$(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function k2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function y$(t,e){T_(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Wo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bg=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function m$(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function C_(t){return typeof t=="string"&&(t=m$(t)),T_(t),t}let b$=class{clone(){return this._cloneInto()}};function w$(t){const e=r=>t().update(C_(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function $_(t=32){if(Wo&&typeof Wo.getRandomValues=="function")return Wo.getRandomValues(new Uint8Array(t));if(Wo&&typeof Wo.randomBytes=="function")return Wo.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function v$(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const o=BigInt(32),c=BigInt(4294967295),u=Number(n>>o&c),f=Number(n&c),h=r?4:0,d=r?0:4;t.setUint32(e+h,u,r),t.setUint32(e+d,f,r)}let E$=class extends b${constructor(e,n,r,o){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Bg(this.buffer)}update(e){k2(this);const{view:n,buffer:r,blockLen:o}=this;e=C_(e);const c=e.length;for(let u=0;u<c;){const f=Math.min(o-this.pos,c-u);if(f===o){const h=Bg(e);for(;o<=c-u;u+=o)this.process(h,u);continue}r.set(e.subarray(u,u+f),this.pos),this.pos+=f,u+=f,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){k2(this),y$(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:c}=this;let{pos:u}=this;n[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>o-u&&(this.process(r,0),u=0);for(let b=u;b<o;b++)n[b]=0;v$(r,o-8,BigInt(this.length*8),c),this.process(r,0);const f=Bg(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,g=this.get();if(d>g.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<d;b++)f.setUint32(4*b,g[b],c)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:c,destroyed:u,pos:f}=this;return e.length=o,e.pos=f,e.finished=c,e.destroyed=u,o%n&&e.buffer.set(r),e}};const xf=BigInt(2**32-1),Gy=BigInt(32);function I_(t,e=!1){return e?{h:Number(t&xf),l:Number(t>>Gy&xf)}:{h:Number(t>>Gy&xf)|0,l:Number(t&xf)|0}}function S$(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let o=0;o<t.length;o++){const{h:c,l:u}=I_(t[o],e);[n[o],r[o]]=[c,u]}return[n,r]}const _$=(t,e)=>BigInt(t>>>0)<<Gy|BigInt(e>>>0),x$=(t,e,n)=>t>>>n,O$=(t,e,n)=>t<<32-n|e>>>n,A$=(t,e,n)=>t>>>n|e<<32-n,D$=(t,e,n)=>t<<32-n|e>>>n,T$=(t,e,n)=>t<<64-n|e>>>n-32,C$=(t,e,n)=>t>>>n-32|e<<64-n,$$=(t,e)=>e,I$=(t,e)=>t,R$=(t,e,n)=>t<<n|e>>>32-n,B$=(t,e,n)=>e<<n|t>>>32-n,U$=(t,e,n)=>e<<n-32|t>>>64-n,N$=(t,e,n)=>t<<n-32|e>>>64-n;function M$(t,e,n,r){const o=(e>>>0)+(r>>>0);return{h:t+n+(o/2**32|0)|0,l:o|0}}const j$=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),z$=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,q$=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),P$=(t,e,n,r,o)=>e+n+r+o+(t/2**32|0)|0,L$=(t,e,n,r,o)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(o>>>0),H$=(t,e,n,r,o,c)=>e+n+r+o+c+(t/2**32|0)|0,_e={fromBig:I_,split:S$,toBig:_$,shrSH:x$,shrSL:O$,rotrSH:A$,rotrSL:D$,rotrBH:T$,rotrBL:C$,rotr32H:$$,rotr32L:I$,rotlSH:R$,rotlSL:B$,rotlBH:U$,rotlBL:N$,add:M$,add3L:j$,add3H:z$,add4L:q$,add4H:P$,add5H:H$,add5L:L$},[k$,F$]=_e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Yr=new Uint32Array(80),Qr=new Uint32Array(80);let V$=class extends E${constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:o,Ch:c,Cl:u,Dh:f,Dl:h,Eh:d,El:g,Fh:b,Fl:m,Gh:v,Gl:E,Hh:w,Hl:A}=this;return[e,n,r,o,c,u,f,h,d,g,b,m,v,E,w,A]}set(e,n,r,o,c,u,f,h,d,g,b,m,v,E,w,A){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=o|0,this.Ch=c|0,this.Cl=u|0,this.Dh=f|0,this.Dl=h|0,this.Eh=d|0,this.El=g|0,this.Fh=b|0,this.Fl=m|0,this.Gh=v|0,this.Gl=E|0,this.Hh=w|0,this.Hl=A|0}process(e,n){for(let T=0;T<16;T++,n+=4)Yr[T]=e.getUint32(n),Qr[T]=e.getUint32(n+=4);for(let T=16;T<80;T++){const $=Yr[T-15]|0,D=Qr[T-15]|0,R=_e.rotrSH($,D,1)^_e.rotrSH($,D,8)^_e.shrSH($,D,7),U=_e.rotrSL($,D,1)^_e.rotrSL($,D,8)^_e.shrSL($,D,7),H=Yr[T-2]|0,P=Qr[T-2]|0,W=_e.rotrSH(H,P,19)^_e.rotrBH(H,P,61)^_e.shrSH(H,P,6),ee=_e.rotrSL(H,P,19)^_e.rotrBL(H,P,61)^_e.shrSL(H,P,6),G=_e.add4L(U,ee,Qr[T-7],Qr[T-16]),F=_e.add4H(G,R,W,Yr[T-7],Yr[T-16]);Yr[T]=F|0,Qr[T]=G|0}let{Ah:r,Al:o,Bh:c,Bl:u,Ch:f,Cl:h,Dh:d,Dl:g,Eh:b,El:m,Fh:v,Fl:E,Gh:w,Gl:A,Hh:N,Hl:j}=this;for(let T=0;T<80;T++){const $=_e.rotrSH(b,m,14)^_e.rotrSH(b,m,18)^_e.rotrBH(b,m,41),D=_e.rotrSL(b,m,14)^_e.rotrSL(b,m,18)^_e.rotrBL(b,m,41),R=b&v^~b&w,U=m&E^~m&A,H=_e.add5L(j,D,U,F$[T],Qr[T]),P=_e.add5H(H,N,$,R,k$[T],Yr[T]),W=H|0,ee=_e.rotrSH(r,o,28)^_e.rotrBH(r,o,34)^_e.rotrBH(r,o,39),G=_e.rotrSL(r,o,28)^_e.rotrBL(r,o,34)^_e.rotrBL(r,o,39),F=r&c^r&f^c&f,Y=o&u^o&h^u&h;N=w|0,j=A|0,w=v|0,A=E|0,v=b|0,E=m|0,{h:b,l:m}=_e.add(d|0,g|0,P|0,W|0),d=f|0,g=h|0,f=c|0,h=u|0,c=r|0,u=o|0;const _=_e.add3L(W,G,Y);r=_e.add3H(_,P,ee,F),o=_|0}({h:r,l:o}=_e.add(this.Ah|0,this.Al|0,r|0,o|0)),{h:c,l:u}=_e.add(this.Bh|0,this.Bl|0,c|0,u|0),{h:f,l:h}=_e.add(this.Ch|0,this.Cl|0,f|0,h|0),{h:d,l:g}=_e.add(this.Dh|0,this.Dl|0,d|0,g|0),{h:b,l:m}=_e.add(this.Eh|0,this.El|0,b|0,m|0),{h:v,l:E}=_e.add(this.Fh|0,this.Fl|0,v|0,E|0),{h:w,l:A}=_e.add(this.Gh|0,this.Gl|0,w|0,A|0),{h:N,l:j}=_e.add(this.Hh|0,this.Hl|0,N|0,j|0),this.set(r,o,c,u,f,h,d,g,b,m,v,E,w,A,N,j)}roundClean(){Yr.fill(0),Qr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const K$=w$(()=>new V$);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Q0=BigInt(0),R_=BigInt(1),G$=BigInt(2);function Z0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function X0(t){if(!Z0(t))throw new Error("Uint8Array expected")}function Ug(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Y$=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function J0(t){X0(t);let e="";for(let n=0;n<t.length;n++)e+=Y$[t[n]];return e}function B_(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Q0:BigInt("0x"+t)}const ir={_0:48,_9:57,A:65,F:70,a:97,f:102};function F2(t){if(t>=ir._0&&t<=ir._9)return t-ir._0;if(t>=ir.A&&t<=ir.F)return t-(ir.A-10);if(t>=ir.a&&t<=ir.f)return t-(ir.a-10)}function U_(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let o=0,c=0;o<n;o++,c+=2){const u=F2(t.charCodeAt(c)),f=F2(t.charCodeAt(c+1));if(u===void 0||f===void 0){const h=t[c]+t[c+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+c)}r[o]=u*16+f}return r}function Q$(t){return B_(J0(t))}function Kf(t){return X0(t),B_(J0(Uint8Array.from(t).reverse()))}function N_(t,e){return U_(t.toString(16).padStart(e*2,"0"))}function Yy(t,e){return N_(t,e).reverse()}function rr(t,e,n){let r;if(typeof e=="string")try{r=U_(e)}catch(c){throw new Error(t+" must be hex string or Uint8Array, cause: "+c)}else if(Z0(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(t+" of length "+n+" expected, got "+o);return r}function V2(...t){let e=0;for(let r=0;r<t.length;r++){const o=t[r];X0(o),e+=o.length}const n=new Uint8Array(e);for(let r=0,o=0;r<t.length;r++){const c=t[r];n.set(c,o),o+=c.length}return n}const Ng=t=>typeof t=="bigint"&&Q0<=t;function Z$(t,e,n){return Ng(t)&&Ng(e)&&Ng(n)&&e<=t&&t<n}function Cc(t,e,n,r){if(!Z$(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function X$(t){let e;for(e=0;t>Q0;t>>=R_,e+=1);return e}const J$=t=>(G$<<BigInt(t-1))-R_,W$={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Z0(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function W0(t,e,n={}){const r=(o,c,u)=>{const f=W$[c];if(typeof f!="function")throw new Error("invalid validator function");const h=t[o];if(!(u&&h===void 0)&&!f(h,t))throw new Error("param "+String(o)+" is invalid. Expected "+c+", got "+h)};for(const[o,c]of Object.entries(e))r(o,c,!1);for(const[o,c]of Object.entries(n))r(o,c,!0);return t}function K2(t){const e=new WeakMap;return(n,...r)=>{const o=e.get(n);if(o!==void 0)return o;const c=t(n,...r);return e.set(n,c),c}}const Dt=BigInt(0),ct=BigInt(1),Hs=BigInt(2),eI=BigInt(3),Qy=BigInt(4),G2=BigInt(5),Y2=BigInt(8);function bt(t,e){const n=t%e;return n>=Dt?n:e+n}function tI(t,e,n){if(e<Dt)throw new Error("invalid exponent, negatives unsupported");if(n<=Dt)throw new Error("invalid modulus");if(n===ct)return Dt;let r=ct;for(;e>Dt;)e&ct&&(r=r*t%n),t=t*t%n,e>>=ct;return r}function Si(t,e,n){let r=t;for(;e-- >Dt;)r*=r,r%=n;return r}function Q2(t,e){if(t===Dt)throw new Error("invert: expected non-zero number");if(e<=Dt)throw new Error("invert: expected positive modulus, got "+e);let n=bt(t,e),r=e,o=Dt,c=ct;for(;n!==Dt;){const u=r/n,f=r%n,h=o-c*u;r=n,n=f,o=c,c=h}if(r!==ct)throw new Error("invert: does not exist");return bt(o,e)}function nI(t){const e=(t-ct)/Hs;let n,r,o;for(n=t-ct,r=0;n%Hs===Dt;n/=Hs,r++);for(o=Hs;o<t&&tI(o,e,t)!==t-ct;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const u=(t+ct)/Qy;return function(f,h){const d=f.pow(h,u);if(!f.eql(f.sqr(d),h))throw new Error("Cannot find square root");return d}}const c=(n+ct)/Hs;return function(u,f){if(u.pow(f,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let h=r,d=u.pow(u.mul(u.ONE,o),n),g=u.pow(f,c),b=u.pow(f,n);for(;!u.eql(b,u.ONE);){if(u.eql(b,u.ZERO))return u.ZERO;let m=1;for(let E=u.sqr(b);m<h&&!u.eql(E,u.ONE);m++)E=u.sqr(E);const v=u.pow(d,ct<<BigInt(h-m-1));d=u.sqr(v),g=u.mul(g,v),b=u.mul(b,d),h=m}return g}}function iI(t){if(t%Qy===eI){const e=(t+ct)/Qy;return function(n,r){const o=n.pow(r,e);if(!n.eql(n.sqr(o),r))throw new Error("Cannot find square root");return o}}if(t%Y2===G2){const e=(t-G2)/Y2;return function(n,r){const o=n.mul(r,Hs),c=n.pow(o,e),u=n.mul(r,c),f=n.mul(n.mul(u,Hs),c),h=n.mul(u,n.sub(f,n.ONE));if(!n.eql(n.sqr(h),r))throw new Error("Cannot find square root");return h}}return nI(t)}const rI=(t,e)=>(bt(t,e)&ct)===ct,sI=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function oI(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=sI.reduce((r,o)=>(r[o]="function",r),e);return W0(t,n)}function aI(t,e,n){if(n<Dt)throw new Error("invalid exponent, negatives unsupported");if(n===Dt)return t.ONE;if(n===ct)return e;let r=t.ONE,o=e;for(;n>Dt;)n&ct&&(r=t.mul(r,o)),o=t.sqr(o),n>>=ct;return r}function cI(t,e){const n=new Array(e.length),r=e.reduce((c,u,f)=>t.is0(u)?c:(n[f]=c,t.mul(c,u)),t.ONE),o=t.inv(r);return e.reduceRight((c,u,f)=>t.is0(u)?c:(n[f]=t.mul(c,n[f]),t.mul(c,u)),o),n}function M_(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function j_(t,e,n=!1,r={}){if(t<=Dt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:o,nByteLength:c}=M_(t,e);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const f=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:c,MASK:J$(o),ZERO:Dt,ONE:ct,create:h=>bt(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return Dt<=h&&h<t},is0:h=>h===Dt,isOdd:h=>(h&ct)===ct,neg:h=>bt(-h,t),eql:(h,d)=>h===d,sqr:h=>bt(h*h,t),add:(h,d)=>bt(h+d,t),sub:(h,d)=>bt(h-d,t),mul:(h,d)=>bt(h*d,t),pow:(h,d)=>aI(f,h,d),div:(h,d)=>bt(h*Q2(d,t),t),sqrN:h=>h*h,addN:(h,d)=>h+d,subN:(h,d)=>h-d,mulN:(h,d)=>h*d,inv:h=>Q2(h,t),sqrt:r.sqrt||(h=>(u||(u=iI(t)),u(f,h))),invertBatch:h=>cI(f,h),cmov:(h,d,g)=>g?d:h,toBytes:h=>n?Yy(h,c):N_(h,c),fromBytes:h=>{if(h.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+h.length);return n?Kf(h):Q$(h)}});return Object.freeze(f)}const Z2=BigInt(0),Of=BigInt(1);function Mg(t,e){const n=e.negate();return t?n:e}function z_(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function jg(t,e){z_(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function uI(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function lI(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const zg=new WeakMap,q_=new WeakMap;function qg(t){return q_.get(t)||1}function fI(t,e){return{constTimeNegate:Mg,hasPrecomputes(n){return qg(n)!==1},unsafeLadder(n,r,o=t.ZERO){let c=n;for(;r>Z2;)r&Of&&(o=o.add(c)),c=c.double(),r>>=Of;return o},precomputeWindow(n,r){const{windows:o,windowSize:c}=jg(r,e),u=[];let f=n,h=f;for(let d=0;d<o;d++){h=f,u.push(h);for(let g=1;g<c;g++)h=h.add(f),u.push(h);f=h.double()}return u},wNAF(n,r,o){const{windows:c,windowSize:u}=jg(n,e);let f=t.ZERO,h=t.BASE;const d=BigInt(2**n-1),g=2**n,b=BigInt(n);for(let m=0;m<c;m++){const v=m*u;let E=Number(o&d);o>>=b,E>u&&(E-=g,o+=Of);const w=v,A=v+Math.abs(E)-1,N=m%2!==0,j=E<0;E===0?h=h.add(Mg(N,r[w])):f=f.add(Mg(j,r[A]))}return{p:f,f:h}},wNAFUnsafe(n,r,o,c=t.ZERO){const{windows:u,windowSize:f}=jg(n,e),h=BigInt(2**n-1),d=2**n,g=BigInt(n);for(let b=0;b<u;b++){const m=b*f;if(o===Z2)break;let v=Number(o&h);if(o>>=g,v>f&&(v-=d,o+=Of),v===0)continue;let E=r[m+Math.abs(v)-1];v<0&&(E=E.negate()),c=c.add(E)}return c},getPrecomputes(n,r,o){let c=zg.get(r);return c||(c=this.precomputeWindow(r,n),n!==1&&zg.set(r,o(c))),c},wNAFCached(n,r,o){const c=qg(n);return this.wNAF(c,this.getPrecomputes(c,n,o),r)},wNAFCachedUnsafe(n,r,o,c){const u=qg(n);return u===1?this.unsafeLadder(n,r,c):this.wNAFUnsafe(u,this.getPrecomputes(u,n,o),r,c)},setWindowSize(n,r){z_(r,e),q_.set(n,r),zg.delete(n)}}}function hI(t,e,n,r){if(uI(n,t),lI(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,c=X$(BigInt(n.length)),u=c>12?c-3:c>4?c-2:c?2:1,f=(1<<u)-1,h=new Array(f+1).fill(o),d=Math.floor((e.BITS-1)/u)*u;let g=o;for(let b=d;b>=0;b-=u){h.fill(o);for(let v=0;v<r.length;v++){const E=r[v],w=Number(E>>BigInt(b)&BigInt(f));h[w]=h[w].add(n[v])}let m=o;for(let v=h.length-1,E=o;v>0;v--)E=E.add(h[v]),m=m.add(E);if(g=g.add(m),b!==0)for(let v=0;v<u;v++)g=g.double()}return g}function dI(t){return oI(t.Fp),W0(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...M_(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ci=BigInt(0),cn=BigInt(1),Af=BigInt(2),pI=BigInt(8),gI={zip215:!0};function yI(t){const e=dI(t);return W0(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function mI(t){const e=yI(t),{Fp:n,n:r,prehash:o,hash:c,randomBytes:u,nByteLength:f,h}=e,d=Af<<BigInt(f*8)-cn,g=n.create,b=j_(e.n,e.nBitLength),m=e.uvRatio||((_,S)=>{try{return{isValid:!0,value:n.sqrt(_*n.inv(S))}}catch{return{isValid:!1,value:ci}}}),v=e.adjustScalarBytes||(_=>_),E=e.domain||((_,S,C)=>{if(Ug("phflag",C),S.length||C)throw new Error("Contexts/pre-hash are not supported");return _});function w(_,S){Cc("coordinate "+_,S,ci,d)}function A(_){if(!(_ instanceof T))throw new Error("ExtendedPoint expected")}const N=K2((_,S)=>{const{ex:C,ey:z,ez:M}=_,L=_.is0();S==null&&(S=L?pI:n.inv(M));const x=g(C*S),B=g(z*S),V=g(M*S);if(L)return{x:ci,y:cn};if(V!==cn)throw new Error("invZ was invalid");return{x,y:B}}),j=K2(_=>{const{a:S,d:C}=e;if(_.is0())throw new Error("bad point: ZERO");const{ex:z,ey:M,ez:L,et:x}=_,B=g(z*z),V=g(M*M),q=g(L*L),Q=g(q*q),ie=g(B*S),oe=g(q*g(ie+V)),de=g(Q+g(C*g(B*V)));if(oe!==de)throw new Error("bad point: equation left != right (1)");const ue=g(z*M),ye=g(L*x);if(ue!==ye)throw new Error("bad point: equation left != right (2)");return!0});class T{constructor(S,C,z,M){this.ex=S,this.ey=C,this.ez=z,this.et=M,w("x",S),w("y",C),w("z",z),w("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(S){if(S instanceof T)throw new Error("extended point not allowed");const{x:C,y:z}=S||{};return w("x",C),w("y",z),new T(C,z,cn,g(C*z))}static normalizeZ(S){const C=n.invertBatch(S.map(z=>z.ez));return S.map((z,M)=>z.toAffine(C[M])).map(T.fromAffine)}static msm(S,C){return hI(T,b,S,C)}_setWindowSize(S){R.setWindowSize(this,S)}assertValidity(){j(this)}equals(S){A(S);const{ex:C,ey:z,ez:M}=this,{ex:L,ey:x,ez:B}=S,V=g(C*B),q=g(L*M),Q=g(z*B),ie=g(x*M);return V===q&&Q===ie}is0(){return this.equals(T.ZERO)}negate(){return new T(g(-this.ex),this.ey,this.ez,g(-this.et))}double(){const{a:S}=e,{ex:C,ey:z,ez:M}=this,L=g(C*C),x=g(z*z),B=g(Af*g(M*M)),V=g(S*L),q=C+z,Q=g(g(q*q)-L-x),ie=V+x,oe=ie-B,de=V-x,ue=g(Q*oe),ye=g(ie*de),xe=g(Q*de),ze=g(oe*ie);return new T(ue,ye,ze,xe)}add(S){A(S);const{a:C,d:z}=e,{ex:M,ey:L,ez:x,et:B}=this,{ex:V,ey:q,ez:Q,et:ie}=S;if(C===BigInt(-1)){const uo=g((L-M)*(q+V)),lo=g((L+M)*(q-V)),ms=g(lo-uo);if(ms===ci)return this.double();const Hu=g(x*Af*ie),ku=g(B*Af*Q),Pt=ku+Hu,Fu=lo+uo,Ca=ku-Hu,Vu=g(Pt*ms),fo=g(Fu*Ca),Kh=g(Pt*Ca),Ku=g(ms*Fu);return new T(Vu,fo,Ku,Kh)}const oe=g(M*V),de=g(L*q),ue=g(B*z*ie),ye=g(x*Q),xe=g((M+L)*(V+q)-oe-de),ze=ye-ue,We=ye+ue,He=g(de-C*oe),Tt=g(xe*ze),ri=g(We*He),Mi=g(xe*He),ji=g(ze*We);return new T(Tt,ri,ji,Mi)}subtract(S){return this.add(S.negate())}wNAF(S){return R.wNAFCached(this,S,T.normalizeZ)}multiply(S){const C=S;Cc("scalar",C,cn,r);const{p:z,f:M}=this.wNAF(C);return T.normalizeZ([z,M])[0]}multiplyUnsafe(S,C=T.ZERO){const z=S;return Cc("scalar",z,ci,r),z===ci?D:this.is0()||z===cn?this:R.wNAFCachedUnsafe(this,z,T.normalizeZ,C)}isSmallOrder(){return this.multiplyUnsafe(h).is0()}isTorsionFree(){return R.unsafeLadder(this,r).is0()}toAffine(S){return N(this,S)}clearCofactor(){const{h:S}=e;return S===cn?this:this.multiplyUnsafe(S)}static fromHex(S,C=!1){const{d:z,a:M}=e,L=n.BYTES;S=rr("pointHex",S,L),Ug("zip215",C);const x=S.slice(),B=S[L-1];x[L-1]=B&-129;const V=Kf(x),q=C?d:n.ORDER;Cc("pointHex.y",V,ci,q);const Q=g(V*V),ie=g(Q-cn),oe=g(z*Q-M);let{isValid:de,value:ue}=m(ie,oe);if(!de)throw new Error("Point.fromHex: invalid y coordinate");const ye=(ue&cn)===cn,xe=(B&128)!==0;if(!C&&ue===ci&&xe)throw new Error("Point.fromHex: x=0 and x_0=1");return xe!==ye&&(ue=g(-ue)),T.fromAffine({x:ue,y:V})}static fromPrivateKey(S){return P(S).point}toRawBytes(){const{x:S,y:C}=this.toAffine(),z=Yy(C,n.BYTES);return z[z.length-1]|=S&cn?128:0,z}toHex(){return J0(this.toRawBytes())}}T.BASE=new T(e.Gx,e.Gy,cn,g(e.Gx*e.Gy)),T.ZERO=new T(ci,cn,cn,ci);const{BASE:$,ZERO:D}=T,R=fI(T,f*8);function U(_){return bt(_,r)}function H(_){return U(Kf(_))}function P(_){const S=n.BYTES;_=rr("private key",_,S);const C=rr("hashed private key",c(_),2*S),z=v(C.slice(0,S)),M=C.slice(S,2*S),L=H(z),x=$.multiply(L),B=x.toRawBytes();return{head:z,prefix:M,scalar:L,point:x,pointBytes:B}}function W(_){return P(_).pointBytes}function ee(_=new Uint8Array,...S){const C=V2(...S);return H(c(E(C,rr("context",_),!!o)))}function G(_,S,C={}){_=rr("message",_),o&&(_=o(_));const{prefix:z,scalar:M,pointBytes:L}=P(S),x=ee(C.context,z,_),B=$.multiply(x).toRawBytes(),V=ee(C.context,B,L,_),q=U(x+V*M);Cc("signature.s",q,ci,r);const Q=V2(B,Yy(q,n.BYTES));return rr("result",Q,n.BYTES*2)}const F=gI;function Y(_,S,C,z=F){const{context:M,zip215:L}=z,x=n.BYTES;_=rr("signature",_,2*x),S=rr("message",S),C=rr("publicKey",C,x),L!==void 0&&Ug("zip215",L),o&&(S=o(S));const B=Kf(_.slice(x,2*x));let V,q,Q;try{V=T.fromHex(C,L),q=T.fromHex(_.slice(0,x),L),Q=$.multiplyUnsafe(B)}catch{return!1}if(!L&&V.isSmallOrder())return!1;const ie=ee(M,q.toRawBytes(),V.toRawBytes(),S);return q.add(V.multiplyUnsafe(ie)).subtract(Q).clearCofactor().equals(T.ZERO)}return $._setWindowSize(8),{CURVE:e,getPublicKey:W,sign:G,verify:Y,ExtendedPoint:T,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>u(n.BYTES),precompute(_=8,S=T.BASE){return S._setWindowSize(_),S.multiply(BigInt(3)),S}}}}BigInt(0),BigInt(1);const em=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),X2=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const bI=BigInt(1),J2=BigInt(2);BigInt(3);const wI=BigInt(5),vI=BigInt(8);function EI(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),c=em,u=t*t%c*t%c,f=Si(u,J2,c)*u%c,h=Si(f,bI,c)*t%c,d=Si(h,wI,c)*h%c,g=Si(d,e,c)*d%c,b=Si(g,n,c)*g%c,m=Si(b,r,c)*b%c,v=Si(m,o,c)*m%c,E=Si(v,o,c)*m%c,w=Si(E,e,c)*d%c;return{pow_p_5_8:Si(w,J2,c)*t%c,b2:u}}function SI(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function _I(t,e){const n=em,r=bt(e*e*e,n),o=bt(r*r*e,n),c=EI(t*o).pow_p_5_8;let u=bt(t*r*c,n);const f=bt(e*u*u,n),h=u,d=bt(u*X2,n),g=f===t,b=f===bt(-t,n),m=f===bt(-t*X2,n);return g&&(u=h),(b||m)&&(u=d),rI(u,n)&&(u=bt(-u,n)),{isValid:g||b,value:u}}const xI=j_(em,void 0,!0),OI={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:xI,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:vI,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:K$,randomBytes:$_,adjustScalarBytes:SI,uvRatio:_I},P_=mI(OI),AI="EdDSA",DI="JWT",nh=".",Ah="base64url",L_="utf8",H_="utf8",TI=":",CI="did",$I="key",W2="base58btc",II="z",RI="K36",BI=32;function tm(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function k_(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?tm(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function F_(t,e){e||(e=t.reduce((o,c)=>o+c.length,0));const n=k_(e);let r=0;for(const o of t)n.set(o,r),r+=o.length;return tm(n)}function UI(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),u=c.charCodeAt(0);if(n[u]!==255)throw new TypeError(c+" is ambiguous");n[u]=o}var f=t.length,h=t.charAt(0),d=Math.log(f)/Math.log(256),g=Math.log(256)/Math.log(f);function b(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var w=0,A=0,N=0,j=E.length;N!==j&&E[N]===0;)N++,w++;for(var T=(j-N)*g+1>>>0,$=new Uint8Array(T);N!==j;){for(var D=E[N],R=0,U=T-1;(D!==0||R<A)&&U!==-1;U--,R++)D+=256*$[U]>>>0,$[U]=D%f>>>0,D=D/f>>>0;if(D!==0)throw new Error("Non-zero carry");A=R,N++}for(var H=T-A;H!==T&&$[H]===0;)H++;for(var P=h.repeat(w);H<T;++H)P+=t.charAt($[H]);return P}function m(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var w=0;if(E[w]!==" "){for(var A=0,N=0;E[w]===h;)A++,w++;for(var j=(E.length-w)*d+1>>>0,T=new Uint8Array(j);E[w];){var $=n[E.charCodeAt(w)];if($===255)return;for(var D=0,R=j-1;($!==0||D<N)&&R!==-1;R--,D++)$+=f*T[R]>>>0,T[R]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");N=D,w++}if(E[w]!==" "){for(var U=j-N;U!==j&&T[U]===0;)U++;for(var H=new Uint8Array(A+(j-U)),P=A;U!==j;)H[P++]=T[U++];return H}}}function v(E){var w=m(E);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:m,decode:v}}var NI=UI,MI=NI;const V_=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},jI=t=>new TextEncoder().encode(t),zI=t=>new TextDecoder().decode(t);let qI=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},PI=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return K_(this,e)}},LI=class{constructor(e){this.decoders=e}or(e){return K_(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const K_=(t,e)=>new LI({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let HI=class{constructor(e,n,r,o){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=o,this.encoder=new qI(e,n,r),this.decoder=new PI(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Dh=({name:t,prefix:e,encode:n,decode:r})=>new HI(t,e,n,r),Iu=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:o}=MI(n,e);return Dh({prefix:t,name:e,encode:r,decode:c=>V_(o(c))})},kI=(t,e,n,r)=>{const o={};for(let g=0;g<e.length;++g)o[e[g]]=g;let c=t.length;for(;t[c-1]==="=";)--c;const u=new Uint8Array(c*n/8|0);let f=0,h=0,d=0;for(let g=0;g<c;++g){const b=o[t[g]];if(b===void 0)throw new SyntaxError(`Non-${r} character`);h=h<<n|b,f+=n,f>=8&&(f-=8,u[d++]=255&h>>f)}if(f>=n||255&h<<8-f)throw new SyntaxError("Unexpected end of data");return u},FI=(t,e,n)=>{const r=e[e.length-1]==="=",o=(1<<n)-1;let c="",u=0,f=0;for(let h=0;h<t.length;++h)for(f=f<<8|t[h],u+=8;u>n;)u-=n,c+=e[o&f>>u];if(u&&(c+=e[o&f<<n-u]),r)for(;c.length*n&7;)c+="=";return c},jt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Dh({prefix:e,name:t,encode(o){return FI(o,r,n)},decode(o){return kI(o,r,n,t)}}),VI=Dh({prefix:"\0",name:"identity",encode:t=>zI(t),decode:t=>jI(t)});var KI=Object.freeze({__proto__:null,identity:VI});const GI=jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var YI=Object.freeze({__proto__:null,base2:GI});const QI=jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ZI=Object.freeze({__proto__:null,base8:QI});const XI=Iu({prefix:"9",name:"base10",alphabet:"0123456789"});var JI=Object.freeze({__proto__:null,base10:XI});const WI=jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eR=jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var tR=Object.freeze({__proto__:null,base16:WI,base16upper:eR});const nR=jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),iR=jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rR=jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sR=jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),oR=jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aR=jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cR=jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uR=jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),lR=jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var fR=Object.freeze({__proto__:null,base32:nR,base32upper:iR,base32pad:rR,base32padupper:sR,base32hex:oR,base32hexupper:aR,base32hexpad:cR,base32hexpadupper:uR,base32z:lR});const hR=Iu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dR=Iu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var pR=Object.freeze({__proto__:null,base36:hR,base36upper:dR});const gR=Iu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yR=Iu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var mR=Object.freeze({__proto__:null,base58btc:gR,base58flickr:yR});const bR=jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wR=jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vR=jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ER=jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var SR=Object.freeze({__proto__:null,base64:bR,base64pad:wR,base64url:vR,base64urlpad:ER});const G_=Array.from(""),_R=G_.reduce((t,e,n)=>(t[n]=e,t),[]),xR=G_.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function OR(t){return t.reduce((e,n)=>(e+=_R[n],e),"")}function AR(t){const e=[];for(const n of t){const r=xR[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const DR=Dh({prefix:"",name:"base256emoji",encode:OR,decode:AR});var TR=Object.freeze({__proto__:null,base256emoji:DR}),CR=Y_,eE=128,$R=-128,IR=Math.pow(2,31);function Y_(t,e,n){e=e||[],n=n||0;for(var r=n;t>=IR;)e[n++]=t&255|eE,t/=128;for(;t&$R;)e[n++]=t&255|eE,t>>>=7;return e[n]=t|0,Y_.bytes=n-r+1,e}var RR=Zy,BR=128,tE=127;function Zy(t,r){var n=0,r=r||0,o=0,c=r,u,f=t.length;do{if(c>=f)throw Zy.bytes=0,new RangeError("Could not decode varint");u=t[c++],n+=o<28?(u&tE)<<o:(u&tE)*Math.pow(2,o),o+=7}while(u>=BR);return Zy.bytes=c-r,n}var UR=Math.pow(2,7),NR=Math.pow(2,14),MR=Math.pow(2,21),jR=Math.pow(2,28),zR=Math.pow(2,35),qR=Math.pow(2,42),PR=Math.pow(2,49),LR=Math.pow(2,56),HR=Math.pow(2,63),kR=function(t){return t<UR?1:t<NR?2:t<MR?3:t<jR?4:t<zR?5:t<qR?6:t<PR?7:t<LR?8:t<HR?9:10},FR={encode:CR,decode:RR,encodingLength:kR},Q_=FR;const nE=(t,e,n=0)=>(Q_.encode(t,e,n),e),iE=t=>Q_.encodingLength(t),Xy=(t,e)=>{const n=e.byteLength,r=iE(t),o=r+iE(n),c=new Uint8Array(o+n);return nE(t,c,0),nE(n,c,r),c.set(e,o),new VR(t,n,e,c)};let VR=class{constructor(e,n,r,o){this.code=e,this.size=n,this.digest=r,this.bytes=o}};const Z_=({name:t,code:e,encode:n})=>new KR(t,e,n);let KR=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Xy(this.code,n):n.then(r=>Xy(this.code,r))}else throw Error("Unknown type, must be binary type")}};const X_=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),GR=Z_({name:"sha2-256",code:18,encode:X_("SHA-256")}),YR=Z_({name:"sha2-512",code:19,encode:X_("SHA-512")});var QR=Object.freeze({__proto__:null,sha256:GR,sha512:YR});const J_=0,ZR="identity",W_=V_,XR=t=>Xy(J_,W_(t)),JR={code:J_,name:ZR,encode:W_,digest:XR};var WR=Object.freeze({__proto__:null,identity:JR});new TextEncoder,new TextDecoder;const rE={...KI,...YI,...ZI,...JI,...tR,...fR,...pR,...mR,...SR,...TR};({...QR,...WR});function ex(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const sE=ex("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Pg=ex("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=k_(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),tx={utf8:sE,"utf-8":sE,hex:rE.base16,latin1:Pg,ascii:Pg,binary:Pg,...rE};function Th(t,e="utf8"){const n=tx[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Aa(t,e="utf8"){const n=tx[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?tm(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function oE(t){return eo(Th(Aa(t,Ah),L_))}function ih(t){return Th(Aa(vr(t),L_),Ah)}function nx(t){const e=Aa(RI,W2),n=II+Th(F_([e,t]),W2);return[CI,$I,n].join(TI)}function eB(t){return Th(t,Ah)}function tB(t){return Aa(t,Ah)}function nB(t){return Aa([ih(t.header),ih(t.payload)].join(nh),H_)}function iB(t){return[ih(t.header),ih(t.payload),eB(t.signature)].join(nh)}function Jy(t){const e=t.split(nh),n=oE(e[0]),r=oE(e[1]),o=tB(e[2]),c=Aa(e.slice(0,2).join(nh),H_);return{header:n,payload:r,signature:o,data:c}}function aE(t=$_(BI)){const e=P_.getPublicKey(t);return{secretKey:F_([t,e]),publicKey:e}}async function rB(t,e,n,r,o=fe.fromMiliseconds(Date.now())){const c={alg:AI,typ:DI},u=nx(r.publicKey),f=o+n,h={iss:u,sub:t,aud:e,iat:o,exp:f},d=nB({header:c,payload:h}),g=P_.sign(d,r.secretKey.slice(0,32));return iB({header:c,payload:h,signature:g})}var cE=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,c;r<o;r++)(c||!(r in e))&&(c||(c=Array.prototype.slice.call(e,0,r)),c[r]=e[r]);return t.concat(c||Array.prototype.slice.call(e))},sB=(function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t})(),oB=(function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t})(),aB=(function(){function t(e,n,r,o){this.name=e,this.version=n,this.os=r,this.bot=o,this.type="bot-device"}return t})(),cB=(function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t})(),uB=(function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t})(),lB=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,fB=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,uE=3,hB=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",lB]],lE=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function dB(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new uB:typeof navigator<"u"?gB(navigator.userAgent):mB()}function pB(t){return t!==""&&hB.reduce(function(e,n){var r=n[0],o=n[1];if(e)return e;var c=o.exec(t);return!!c&&[r,c]},!1)}function gB(t){var e=pB(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new cB;var o=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);o?o.length<uE&&(o=cE(cE([],o,!0),bB(uE-o.length),!0)):o=[];var c=o.join("."),u=yB(t),f=fB.exec(t);return f&&f[1]?new aB(n,c,u,f[1]):new sB(n,c,u)}function yB(t){for(var e=0,n=lE.length;e<n;e++){var r=lE[e],o=r[0],c=r[1],u=c.exec(t);if(u)return o}return null}function mB(){var t=typeof process<"u"&&process.version;return t?new oB(process.version.slice(1)):null}function bB(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Ge={},fE;function ix(){if(fE)return Ge;fE=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.getLocalStorage=Ge.getLocalStorageOrThrow=Ge.getCrypto=Ge.getCryptoOrThrow=Ge.getLocation=Ge.getLocationOrThrow=Ge.getNavigator=Ge.getNavigatorOrThrow=Ge.getDocument=Ge.getDocumentOrThrow=Ge.getFromWindowOrThrow=Ge.getFromWindow=void 0;function t(m){let v;return typeof window<"u"&&typeof window[m]<"u"&&(v=window[m]),v}Ge.getFromWindow=t;function e(m){const v=t(m);if(!v)throw new Error(`${m} is not defined in Window`);return v}Ge.getFromWindowOrThrow=e;function n(){return e("document")}Ge.getDocumentOrThrow=n;function r(){return t("document")}Ge.getDocument=r;function o(){return e("navigator")}Ge.getNavigatorOrThrow=o;function c(){return t("navigator")}Ge.getNavigator=c;function u(){return e("location")}Ge.getLocationOrThrow=u;function f(){return t("location")}Ge.getLocation=f;function h(){return e("crypto")}Ge.getCryptoOrThrow=h;function d(){return t("crypto")}Ge.getCrypto=d;function g(){return e("localStorage")}Ge.getLocalStorageOrThrow=g;function b(){return t("localStorage")}return Ge.getLocalStorage=b,Ge}var Er=ix(),$c={},hE;function wB(){if(hE)return $c;hE=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.getWindowMetadata=void 0;const t=ix();function e(){let n,r;try{n=t.getDocumentOrThrow(),r=t.getLocationOrThrow()}catch{return null}function o(){const v=n.getElementsByTagName("link"),E=[];for(let w=0;w<v.length;w++){const A=v[w],N=A.getAttribute("rel");if(N&&N.toLowerCase().indexOf("icon")>-1){const j=A.getAttribute("href");if(j)if(j.toLowerCase().indexOf("https:")===-1&&j.toLowerCase().indexOf("http:")===-1&&j.indexOf("//")!==0){let T=r.protocol+"//"+r.host;if(j.indexOf("/")===0)T+=j;else{const $=r.pathname.split("/");$.pop();const D=$.join("/");T+=D+"/"+j}E.push(T)}else if(j.indexOf("//")===0){const T=r.protocol+j;E.push(T)}else E.push(j)}}return E}function c(...v){const E=n.getElementsByTagName("meta");for(let w=0;w<E.length;w++){const A=E[w],N=["itemprop","property","name"].map(j=>A.getAttribute(j)).filter(j=>j?v.includes(j):!1);if(N.length&&N){const j=A.getAttribute("content");if(j)return j}}return""}function u(){let v=c("name","og:site_name","og:title","twitter:title");return v||(v=n.title),v}function f(){return c("description","og:description","twitter:description","keywords")}const h=u(),d=f(),g=r.origin,b=o();return{description:d,url:g,icons:b,name:h}}return $c.getWindowMetadata=e,$c}var vB=wB();const EB="0.1.1";function SB(){return EB}class nt extends Error{constructor(e,n={}){const r=(()=>{if(n.cause instanceof nt){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),o=n.cause instanceof nt&&n.cause.docsPath||n.docsPath,u=`https://oxlib.sh${o??""}`,f=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||o?["",r?`Details: ${r}`:void 0,o?`See: ${u}`:void 0]:[]].filter(h=>typeof h=="string").join(`
`);super(f,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${SB()}`}),this.cause=n.cause,this.details=r,this.docs=u,this.docsPath=o,this.shortMessage=e}walk(e){return rx(this,e)}}function rx(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?rx(t.cause,e):e?null:t}const ea=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _B(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function vu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function to(t,...e){if(!_B(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function xB(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");vu(t.outputLen),vu(t.blockLen)}function Ea(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function sx(t,e){to(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function OB(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Sa(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Lg(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function _i(t,e){return t<<32-e|t>>>e}const AB=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function DB(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function TB(t){for(let e=0;e<t.length;e++)t[e]=DB(t[e]);return t}const dE=AB?t=>t:TB;function CB(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Ch(t){return typeof t=="string"&&(t=CB(t)),to(t),t}function $B(...t){let e=0;for(let r=0;r<t.length;r++){const o=t[r];to(o),e+=o.length}const n=new Uint8Array(e);for(let r=0,o=0;r<t.length;r++){const c=t[r];n.set(c,o),o+=c.length}return n}class nm{}function ox(t){const e=r=>t().update(Ch(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function IB(t=32){if(ea&&typeof ea.getRandomValues=="function")return ea.getRandomValues(new Uint8Array(t));if(ea&&typeof ea.randomBytes=="function")return Uint8Array.from(ea.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function RB(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const o=BigInt(32),c=BigInt(4294967295),u=Number(n>>o&c),f=Number(n&c),h=r?4:0,d=r?0:4;t.setUint32(e+h,u,r),t.setUint32(e+d,f,r)}function BB(t,e,n){return t&e^~t&n}function UB(t,e,n){return t&e^t&n^e&n}class NB extends nm{constructor(e,n,r,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=o,this.buffer=new Uint8Array(e),this.view=Lg(this.buffer)}update(e){Ea(this),e=Ch(e),to(e);const{view:n,buffer:r,blockLen:o}=this,c=e.length;for(let u=0;u<c;){const f=Math.min(o-this.pos,c-u);if(f===o){const h=Lg(e);for(;o<=c-u;u+=o)this.process(h,u);continue}r.set(e.subarray(u,u+f),this.pos),this.pos+=f,u+=f,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ea(this),sx(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:c}=this;let{pos:u}=this;n[u++]=128,Sa(this.buffer.subarray(u)),this.padOffset>o-u&&(this.process(r,0),u=0);for(let b=u;b<o;b++)n[b]=0;RB(r,o-8,BigInt(this.length*8),c),this.process(r,0);const f=Lg(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,g=this.get();if(d>g.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<d;b++)f.setUint32(4*b,g[b],c)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:c,destroyed:u,pos:f}=this;return e.destroyed=u,e.finished=c,e.length=o,e.pos=f,o%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Zr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Df=BigInt(2**32-1),pE=BigInt(32);function MB(t,e=!1){return e?{h:Number(t&Df),l:Number(t>>pE&Df)}:{h:Number(t>>pE&Df)|0,l:Number(t&Df)|0}}function jB(t,e=!1){const n=t.length;let r=new Uint32Array(n),o=new Uint32Array(n);for(let c=0;c<n;c++){const{h:u,l:f}=MB(t[c],e);[r[c],o[c]]=[u,f]}return[r,o]}const zB=(t,e,n)=>t<<n|e>>>32-n,qB=(t,e,n)=>e<<n|t>>>32-n,PB=(t,e,n)=>e<<n-32|t>>>64-n,LB=(t,e,n)=>t<<n-32|e>>>64-n,HB=BigInt(0),Ic=BigInt(1),kB=BigInt(2),FB=BigInt(7),VB=BigInt(256),KB=BigInt(113),ax=[],cx=[],ux=[];for(let t=0,e=Ic,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],ax.push(2*(5*r+n)),cx.push((t+1)*(t+2)/2%64);let o=HB;for(let c=0;c<7;c++)e=(e<<Ic^(e>>FB)*KB)%VB,e&kB&&(o^=Ic<<(Ic<<BigInt(c))-Ic);ux.push(o)}const lx=jB(ux,!0),GB=lx[0],YB=lx[1],gE=(t,e,n)=>n>32?PB(t,e,n):zB(t,e,n),yE=(t,e,n)=>n>32?LB(t,e,n):qB(t,e,n);function QB(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let u=0;u<10;u++)n[u]=t[u]^t[u+10]^t[u+20]^t[u+30]^t[u+40];for(let u=0;u<10;u+=2){const f=(u+8)%10,h=(u+2)%10,d=n[h],g=n[h+1],b=gE(d,g,1)^n[f],m=yE(d,g,1)^n[f+1];for(let v=0;v<50;v+=10)t[u+v]^=b,t[u+v+1]^=m}let o=t[2],c=t[3];for(let u=0;u<24;u++){const f=cx[u],h=gE(o,c,f),d=yE(o,c,f),g=ax[u];o=t[g],c=t[g+1],t[g]=h,t[g+1]=d}for(let u=0;u<50;u+=10){for(let f=0;f<10;f++)n[f]=t[u+f];for(let f=0;f<10;f++)t[u+f]^=~n[(f+2)%10]&n[(f+4)%10]}t[0]^=GB[r],t[1]^=YB[r]}Sa(n)}class im extends nm{constructor(e,n,r,o=!1,c=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=o,this.rounds=c,vu(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=OB(this.state)}clone(){return this._cloneInto()}keccak(){dE(this.state32),QB(this.state32,this.rounds),dE(this.state32),this.posOut=0,this.pos=0}update(e){Ea(this),e=Ch(e),to(e);const{blockLen:n,state:r}=this,o=e.length;for(let c=0;c<o;){const u=Math.min(n-this.pos,o-c);for(let f=0;f<u;f++)r[this.pos++]^=e[c++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:o}=this;e[r]^=n,(n&128)!==0&&r===o-1&&this.keccak(),e[o-1]^=128,this.keccak()}writeInto(e){Ea(this,!1),to(e),this.finish();const n=this.state,{blockLen:r}=this;for(let o=0,c=e.length;o<c;){this.posOut>=r&&this.keccak();const u=Math.min(r-this.posOut,c-o);e.set(n.subarray(this.posOut,this.posOut+u),o),this.posOut+=u,o+=u}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return vu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(sx(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Sa(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:o,rounds:c,enableXOF:u}=this;return e||(e=new im(n,r,o,u,c)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=c,e.suffix=r,e.outputLen=o,e.enableXOF=u,e.destroyed=this.destroyed,e}}const ZB=(t,e,n)=>ox(()=>new im(e,t,n)),XB=ZB(1,136,256/8),JB=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xr=new Uint32Array(64);class WB extends NB{constructor(e=32){super(64,e,8,!1),this.A=Zr[0]|0,this.B=Zr[1]|0,this.C=Zr[2]|0,this.D=Zr[3]|0,this.E=Zr[4]|0,this.F=Zr[5]|0,this.G=Zr[6]|0,this.H=Zr[7]|0}get(){const{A:e,B:n,C:r,D:o,E:c,F:u,G:f,H:h}=this;return[e,n,r,o,c,u,f,h]}set(e,n,r,o,c,u,f,h){this.A=e|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=c|0,this.F=u|0,this.G=f|0,this.H=h|0}process(e,n){for(let b=0;b<16;b++,n+=4)Xr[b]=e.getUint32(n,!1);for(let b=16;b<64;b++){const m=Xr[b-15],v=Xr[b-2],E=_i(m,7)^_i(m,18)^m>>>3,w=_i(v,17)^_i(v,19)^v>>>10;Xr[b]=w+Xr[b-7]+E+Xr[b-16]|0}let{A:r,B:o,C:c,D:u,E:f,F:h,G:d,H:g}=this;for(let b=0;b<64;b++){const m=_i(f,6)^_i(f,11)^_i(f,25),v=g+m+BB(f,h,d)+JB[b]+Xr[b]|0,w=(_i(r,2)^_i(r,13)^_i(r,22))+UB(r,o,c)|0;g=d,d=h,h=f,f=u+v|0,u=c,c=o,o=r,r=v+w|0}r=r+this.A|0,o=o+this.B|0,c=c+this.C|0,u=u+this.D|0,f=f+this.E|0,h=h+this.F|0,d=d+this.G|0,g=g+this.H|0,this.set(r,o,c,u,f,h,d,g)}roundClean(){Sa(Xr)}destroy(){this.set(0,0,0,0,0,0,0,0),Sa(this.buffer)}}const eU=ox(()=>new WB);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rm=BigInt(0),Wy=BigInt(1);function Ru(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sm(t){if(!Ru(t))throw new Error("Uint8Array expected")}function Eu(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Tf(t){const e=t.toString(16);return e.length&1?"0"+e:e}function fx(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?rm:BigInt("0x"+t)}const hx=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",tU=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Su(t){if(sm(t),hx)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=tU[t[n]];return e}const sr={_0:48,_9:57,A:65,F:70,a:97,f:102};function mE(t){if(t>=sr._0&&t<=sr._9)return t-sr._0;if(t>=sr.A&&t<=sr.F)return t-(sr.A-10);if(t>=sr.a&&t<=sr.f)return t-(sr.a-10)}function rh(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(hx)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let o=0,c=0;o<n;o++,c+=2){const u=mE(t.charCodeAt(c)),f=mE(t.charCodeAt(c+1));if(u===void 0||f===void 0){const h=t[c]+t[c+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+c)}r[o]=u*16+f}return r}function Js(t){return fx(Su(t))}function dx(t){return sm(t),fx(Su(Uint8Array.from(t).reverse()))}function Bu(t,e){return rh(t.toString(16).padStart(e*2,"0"))}function px(t,e){return Bu(t,e).reverse()}function Xn(t,e,n){let r;if(typeof e=="string")try{r=rh(e)}catch(c){throw new Error(t+" must be hex string or Uint8Array, cause: "+c)}else if(Ru(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(t+" of length "+n+" expected, got "+o);return r}function sh(...t){let e=0;for(let r=0;r<t.length;r++){const o=t[r];sm(o),e+=o.length}const n=new Uint8Array(e);for(let r=0,o=0;r<t.length;r++){const c=t[r];n.set(c,o),o+=c.length}return n}const Hg=t=>typeof t=="bigint"&&rm<=t;function om(t,e,n){return Hg(t)&&Hg(e)&&Hg(n)&&e<=t&&t<n}function da(t,e,n,r){if(!om(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function nU(t){let e;for(e=0;t>rm;t>>=Wy,e+=1);return e}const $h=t=>(Wy<<BigInt(t))-Wy,kg=t=>new Uint8Array(t),bE=t=>Uint8Array.from(t);function iU(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=kg(t),o=kg(t),c=0;const u=()=>{r.fill(1),o.fill(0),c=0},f=(...b)=>n(o,r,...b),h=(b=kg(0))=>{o=f(bE([0]),b),r=f(),b.length!==0&&(o=f(bE([1]),b),r=f())},d=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const m=[];for(;b<e;){r=f();const v=r.slice();m.push(v),b+=r.length}return sh(...m)};return(b,m)=>{u(),h(b);let v;for(;!(v=m(d()));)h();return u(),v}}const rU={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ru(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Ih(t,e,n={}){const r=(o,c,u)=>{const f=rU[c];if(typeof f!="function")throw new Error("invalid validator function");const h=t[o];if(!(u&&h===void 0)&&!f(h,t))throw new Error("param "+String(o)+" is invalid. Expected "+c+", got "+h)};for(const[o,c]of Object.entries(e))r(o,c,!1);for(const[o,c]of Object.entries(n))r(o,c,!0);return t}function wE(t){const e=new WeakMap;return(n,...r)=>{const o=e.get(n);if(o!==void 0)return o;const c=t(n,...r);return e.set(n,c),c}}function sU(t,e){if(_E(t)>e)throw new AU({givenSize:_E(t),maxSize:e})}const or={zero:48,nine:57,A:65,F:70,a:97,f:102};function vE(t){if(t>=or.zero&&t<=or.nine)return t-or.zero;if(t>=or.A&&t<=or.F)return t-(or.A-10);if(t>=or.a&&t<=or.f)return t-(or.a-10)}function oU(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new DU({size:t.length,targetSize:r,type:"Bytes"});const o=new Uint8Array(r);for(let c=0;c<r;c++){const u=n==="right";o[u?c:r-c-1]=t[u?c:t.length-c-1]}return o}function gx(t,e){if(ds(t)>e)throw new yU({givenSize:ds(t),maxSize:e})}function aU(t,e){if(typeof e=="number"&&e>0&&e>ds(t)-1)throw new bx({offset:e,position:"start",size:ds(t)})}function cU(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ds(t)!==n-e)throw new bx({offset:n,position:"end",size:ds(t)})}function yx(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const o=t.replace("0x","");if(o.length>r*2)throw new mU({size:Math.ceil(o.length/2),targetSize:r,type:"Hex"});return`0x${o[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const uU="#__bigint";function am(t,e,n){return JSON.stringify(t,(r,o)=>typeof o=="bigint"?o.toString()+uU:o,n)}const lU=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function fU(t,e={}){const{strict:n=!1}=e;if(!t)throw new EE(t);if(typeof t!="string")throw new EE(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new SE(t);if(!t.startsWith("0x"))throw new SE(t)}function hU(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function cm(t){return t instanceof Uint8Array?oh(t):Array.isArray(t)?oh(new Uint8Array(t)):t}function oh(t,e={}){let n="";for(let o=0;o<t.length;o++)n+=lU[t[o]];const r=`0x${n}`;return typeof e.size=="number"?(gx(r,e.size),mx(r,e.size)):r}function Fg(t,e={}){const{signed:n,size:r}=e,o=BigInt(t);let c;r?n?c=(1n<<BigInt(r)*8n-1n)-1n:c=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(c=BigInt(Number.MAX_SAFE_INTEGER));const u=typeof c=="bigint"&&n?-c-1n:0;if(c&&o>c||o<u){const d=typeof t=="bigint"?"n":"";throw new gU({max:c?`${c}${d}`:void 0,min:`${u}${d}`,signed:n,size:r,value:`${t}${d}`})}const h=`0x${(n&&o<0?(1n<<BigInt(r*8))+BigInt(o):o).toString(16)}`;return r?dU(h,r):h}function dU(t,e){return yx(t,{dir:"left",size:e})}function mx(t,e){return yx(t,{dir:"right",size:e})}function hr(t,e,n,r={}){const{strict:o}=r;aU(t,e);const c=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return o&&cU(c,e,n),c}function ds(t){return Math.ceil((t.length-2)/2)}function pU(t,e={}){const{strict:n=!1}=e;try{return fU(t,{strict:n}),!0}catch{return!1}}class gU extends nt{constructor({max:e,min:n,signed:r,size:o,value:c}){super(`Number \`${c}\` is not in safe${o?` ${o*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class EE extends nt{constructor(e){super(`Value \`${typeof e=="object"?am(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class SE extends nt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let yU=class extends nt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class bx extends nt{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let mU=class extends nt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const bU=new TextEncoder;function wU(t){if(!(t instanceof Uint8Array)){if(!t)throw new Cf(t);if(typeof t!="object")throw new Cf(t);if(!("BYTES_PER_ELEMENT"in t))throw new Cf(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new Cf(t)}}function vU(t){return t instanceof Uint8Array?t:typeof t=="string"?SU(t):EU(t)}function EU(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function SU(t,e={}){const{size:n}=e;let r=t;n&&(gx(t,n),r=mx(t,n));let o=r.slice(2);o.length%2&&(o=`0${o}`);const c=o.length/2,u=new Uint8Array(c);for(let f=0,h=0;f<c;f++){const d=vE(o.charCodeAt(h++)),g=vE(o.charCodeAt(h++));if(d===void 0||g===void 0)throw new nt(`Invalid byte sequence ("${o[h-2]}${o[h-1]}" in "${o}").`);u[f]=d*16+g}return u}function _U(t,e={}){const{size:n}=e,r=bU.encode(t);return typeof n=="number"?(sU(r,n),xU(r,n)):r}function xU(t,e){return oU(t,{dir:"right",size:e})}function _E(t){return t.length}function OU(t){try{return wU(t),!0}catch{return!1}}class Cf extends nt{constructor(e){super(`Value \`${typeof e=="object"?am(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class AU extends nt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class DU extends nt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function wx(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=XB(vU(t));return n==="Bytes"?r:oh(r)}class TU extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const CU={checksum:new TU(8192)},Vg=CU.checksum;function vx(t,e={}){const{compressed:n}=e,{prefix:r,x:o,y:c}=t;if(n===!1||typeof o=="bigint"&&typeof c=="bigint"){if(r!==4)throw new xE({prefix:r,cause:new NU});return}if(n===!0||typeof o=="bigint"&&typeof c>"u"){if(r!==3&&r!==2)throw new xE({prefix:r,cause:new UU});return}throw new BU({publicKey:t})}function $U(t){const e=(()=>{if(pU(t))return Ex(t);if(OU(t))return IU(t);const{prefix:n,x:r,y:o}=t;return typeof r=="bigint"&&typeof o=="bigint"?{prefix:n??4,x:r,y:o}:{prefix:n,x:r}})();return vx(e),e}function IU(t){return Ex(oh(t))}function Ex(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new MU({publicKey:t});if(t.length===130){const r=BigInt(hr(t,0,32)),o=BigInt(hr(t,32,64));return{prefix:4,x:r,y:o}}if(t.length===132){const r=Number(hr(t,0,1)),o=BigInt(hr(t,1,33)),c=BigInt(hr(t,33,65));return{prefix:r,x:o,y:c}}const e=Number(hr(t,0,1)),n=BigInt(hr(t,1,33));return{prefix:e,x:n}}function RU(t,e={}){vx(t);const{prefix:n,x:r,y:o}=t,{includePrefix:c=!0}=e;return hU(c?Fg(n,{size:1}):"0x",Fg(r,{size:32}),typeof o=="bigint"?Fg(o,{size:32}):"0x")}class BU extends nt{constructor({publicKey:e}){super(`Value \`${am(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class xE extends nt{constructor({prefix:e,cause:n}){super(`Prefix "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class UU extends nt{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class NU extends nt{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let MU=class extends nt{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${ds(cm(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const jU=/^0x[a-fA-F0-9]{40}$/;function Sx(t,e={}){const{strict:n=!0}=e;if(!jU.test(t))throw new OE({address:t,cause:new PU});if(n){if(t.toLowerCase()===t)return;if(_x(t)!==t)throw new OE({address:t,cause:new LU})}}function _x(t){if(Vg.has(t))return Vg.get(t);Sx(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=wx(_U(e),{as:"Bytes"}),r=e.split("");for(let c=0;c<40;c+=2)n[c>>1]>>4>=8&&r[c]&&(r[c]=r[c].toUpperCase()),(n[c>>1]&15)>=8&&r[c+1]&&(r[c+1]=r[c+1].toUpperCase());const o=`0x${r.join("")}`;return Vg.set(t,o),o}function zU(t,e={}){const{checksum:n=!1}=e;return Sx(t),n?_x(t):t}function qU(t,e={}){const n=wx(`0x${RU(t).slice(4)}`).substring(26);return zU(`0x${n}`,e)}class OE extends nt{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class PU extends nt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class LU extends nt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}class xx extends nm{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,xB(e);const r=Ch(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,c=new Uint8Array(o);c.set(r.length>o?e.create().update(r).digest():r);for(let u=0;u<c.length;u++)c[u]^=54;this.iHash.update(c),this.oHash=e.create();for(let u=0;u<c.length;u++)c[u]^=106;this.oHash.update(c),Sa(c)}update(e){return Ea(this),this.iHash.update(e),this}digestInto(e){Ea(this),to(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:c,blockLen:u,outputLen:f}=this;return e=e,e.finished=o,e.destroyed=c,e.blockLen=u,e.outputLen=f,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ox=(t,e,n)=>new xx(t,e).update(n).digest();Ox.create=(t,e)=>new xx(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gn=BigInt(0),Xt=BigInt(1),Ks=BigInt(2),HU=BigInt(3),Ax=BigInt(4),Dx=BigInt(5),Tx=BigInt(8);function hn(t,e){const n=t%e;return n>=gn?n:e+n}function Kn(t,e,n){let r=t;for(;e-- >gn;)r*=r,r%=n;return r}function e0(t,e){if(t===gn)throw new Error("invert: expected non-zero number");if(e<=gn)throw new Error("invert: expected positive modulus, got "+e);let n=hn(t,e),r=e,o=gn,c=Xt;for(;n!==gn;){const f=r/n,h=r%n,d=o-c*f;r=n,n=h,o=c,c=d}if(r!==Xt)throw new Error("invert: does not exist");return hn(o,e)}function Cx(t,e){const n=(t.ORDER+Xt)/Ax,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function kU(t,e){const n=(t.ORDER-Dx)/Tx,r=t.mul(e,Ks),o=t.pow(r,n),c=t.mul(e,o),u=t.mul(t.mul(c,Ks),o),f=t.mul(c,t.sub(u,t.ONE));if(!t.eql(t.sqr(f),e))throw new Error("Cannot find square root");return f}function FU(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Xt,n=0;for(;e%Ks===gn;)e/=Ks,n++;let r=Ks;const o=um(t);for(;AE(o,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Cx;let c=o.pow(r,e);const u=(e+Xt)/Ks;return function(h,d){if(h.is0(d))return d;if(AE(h,d)!==1)throw new Error("Cannot find square root");let g=n,b=h.mul(h.ONE,c),m=h.pow(d,e),v=h.pow(d,u);for(;!h.eql(m,h.ONE);){if(h.is0(m))return h.ZERO;let E=1,w=h.sqr(m);for(;!h.eql(w,h.ONE);)if(E++,w=h.sqr(w),E===g)throw new Error("Cannot find square root");const A=Xt<<BigInt(g-E-1),N=h.pow(b,A);g=E,b=h.sqr(N),m=h.mul(m,b),v=h.mul(v,N)}return v}}function VU(t){return t%Ax===HU?Cx:t%Tx===Dx?kU:FU(t)}const KU=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function GU(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=KU.reduce((r,o)=>(r[o]="function",r),e);return Ih(t,n)}function YU(t,e,n){if(n<gn)throw new Error("invalid exponent, negatives unsupported");if(n===gn)return t.ONE;if(n===Xt)return e;let r=t.ONE,o=e;for(;n>gn;)n&Xt&&(r=t.mul(r,o)),o=t.sqr(o),n>>=Xt;return r}function $x(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),o=e.reduce((u,f,h)=>t.is0(f)?u:(r[h]=u,t.mul(u,f)),t.ONE),c=t.inv(o);return e.reduceRight((u,f,h)=>t.is0(f)?u:(r[h]=t.mul(u,r[h]),t.mul(u,f)),c),r}function AE(t,e){const n=(t.ORDER-Xt)/Ks,r=t.pow(e,n),o=t.eql(r,t.ONE),c=t.eql(r,t.ZERO),u=t.eql(r,t.neg(t.ONE));if(!o&&!c&&!u)throw new Error("invalid Legendre symbol result");return o?1:c?0:-1}function Ix(t,e){e!==void 0&&vu(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function um(t,e,n=!1,r={}){if(t<=gn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:o,nByteLength:c}=Ix(t,e);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const f=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:c,MASK:$h(o),ZERO:gn,ONE:Xt,create:h=>hn(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return gn<=h&&h<t},is0:h=>h===gn,isOdd:h=>(h&Xt)===Xt,neg:h=>hn(-h,t),eql:(h,d)=>h===d,sqr:h=>hn(h*h,t),add:(h,d)=>hn(h+d,t),sub:(h,d)=>hn(h-d,t),mul:(h,d)=>hn(h*d,t),pow:(h,d)=>YU(f,h,d),div:(h,d)=>hn(h*e0(d,t),t),sqrN:h=>h*h,addN:(h,d)=>h+d,subN:(h,d)=>h-d,mulN:(h,d)=>h*d,inv:h=>e0(h,t),sqrt:r.sqrt||(h=>(u||(u=VU(t)),u(f,h))),toBytes:h=>n?px(h,c):Bu(h,c),fromBytes:h=>{if(h.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+h.length);return n?dx(h):Js(h)},invertBatch:h=>$x(f,h),cmov:(h,d,g)=>g?d:h});return Object.freeze(f)}function Rx(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Bx(t){const e=Rx(t);return e+Math.ceil(e/2)}function QU(t,e,n=!1){const r=t.length,o=Rx(e),c=Bx(e);if(r<16||r<c||r>1024)throw new Error("expected "+c+"-1024 bytes of input, got "+r);const u=n?dx(t):Js(t),f=hn(u,e-Xt)+Xt;return n?px(f,o):Bu(f,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const DE=BigInt(0),t0=BigInt(1);function Kg(t,e){const n=e.negate();return t?n:e}function Ux(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Gg(t,e){Ux(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),o=2**t,c=$h(t),u=BigInt(t);return{windows:n,windowSize:r,mask:c,maxNumber:o,shiftBy:u}}function TE(t,e,n){const{windowSize:r,mask:o,maxNumber:c,shiftBy:u}=n;let f=Number(t&o),h=t>>u;f>r&&(f-=c,h+=t0);const d=e*r,g=d+Math.abs(f)-1,b=f===0,m=f<0,v=e%2!==0;return{nextN:h,offset:g,isZero:b,isNeg:m,isNegF:v,offsetF:d}}function ZU(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function XU(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Yg=new WeakMap,Nx=new WeakMap;function Qg(t){return Nx.get(t)||1}function JU(t,e){return{constTimeNegate:Kg,hasPrecomputes(n){return Qg(n)!==1},unsafeLadder(n,r,o=t.ZERO){let c=n;for(;r>DE;)r&t0&&(o=o.add(c)),c=c.double(),r>>=t0;return o},precomputeWindow(n,r){const{windows:o,windowSize:c}=Gg(r,e),u=[];let f=n,h=f;for(let d=0;d<o;d++){h=f,u.push(h);for(let g=1;g<c;g++)h=h.add(f),u.push(h);f=h.double()}return u},wNAF(n,r,o){let c=t.ZERO,u=t.BASE;const f=Gg(n,e);for(let h=0;h<f.windows;h++){const{nextN:d,offset:g,isZero:b,isNeg:m,isNegF:v,offsetF:E}=TE(o,h,f);o=d,b?u=u.add(Kg(v,r[E])):c=c.add(Kg(m,r[g]))}return{p:c,f:u}},wNAFUnsafe(n,r,o,c=t.ZERO){const u=Gg(n,e);for(let f=0;f<u.windows&&o!==DE;f++){const{nextN:h,offset:d,isZero:g,isNeg:b}=TE(o,f,u);if(o=h,!g){const m=r[d];c=c.add(b?m.negate():m)}}return c},getPrecomputes(n,r,o){let c=Yg.get(r);return c||(c=this.precomputeWindow(r,n),n!==1&&Yg.set(r,o(c))),c},wNAFCached(n,r,o){const c=Qg(n);return this.wNAF(c,this.getPrecomputes(c,n,o),r)},wNAFCachedUnsafe(n,r,o,c){const u=Qg(n);return u===1?this.unsafeLadder(n,r,c):this.wNAFUnsafe(u,this.getPrecomputes(u,n,o),r,c)},setWindowSize(n,r){Ux(r,e),Nx.set(n,r),Yg.delete(n)}}}function WU(t,e,n,r){ZU(n,t),XU(r,e);const o=n.length,c=r.length;if(o!==c)throw new Error("arrays of points and scalars must have equal length");const u=t.ZERO,f=nU(BigInt(o));let h=1;f>12?h=f-3:f>4?h=f-2:f>0&&(h=2);const d=$h(h),g=new Array(Number(d)+1).fill(u),b=Math.floor((e.BITS-1)/h)*h;let m=u;for(let v=b;v>=0;v-=h){g.fill(u);for(let w=0;w<c;w++){const A=r[w],N=Number(A>>BigInt(v)&d);g[N]=g[N].add(n[w])}let E=u;for(let w=g.length-1,A=u;w>0;w--)A=A.add(g[w]),E=E.add(A);if(m=m.add(E),v!==0)for(let w=0;w<h;w++)m=m.double()}return m}function Mx(t){return GU(t.Fp),Ih(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ix(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function CE(t){t.lowS!==void 0&&Eu("lowS",t.lowS),t.prehash!==void 0&&Eu("prehash",t.prehash)}function eN(t){const e=Mx(t);Ih(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:o}=e;if(n){if(!r.eql(o,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class tN extends Error{constructor(e=""){super(e)}}const dr={Err:tN,_tlv:{encode:(t,e)=>{const{Err:n}=dr;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,o=Tf(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const c=r>127?Tf(o.length/2|128):"";return Tf(t)+c+o+e},decode(t,e){const{Err:n}=dr;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const o=e[r++],c=!!(o&128);let u=0;if(!c)u=o;else{const h=o&127;if(!h)throw new n("tlv.decode(long): indefinite length not supported");if(h>4)throw new n("tlv.decode(long): byte length is too big");const d=e.subarray(r,r+h);if(d.length!==h)throw new n("tlv.decode: length bytes not complete");if(d[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const g of d)u=u<<8|g;if(r+=h,u<128)throw new n("tlv.decode(long): not minimal encoding")}const f=e.subarray(r,r+u);if(f.length!==u)throw new n("tlv.decode: wrong value length");return{v:f,l:e.subarray(r+u)}}},_int:{encode(t){const{Err:e}=dr;if(t<gr)throw new e("integer: negative integers are not allowed");let n=Tf(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=dr;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Js(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=dr,o=Xn("signature",t),{v:c,l:u}=r.decode(48,o);if(u.length)throw new e("invalid signature: left bytes after parsing");const{v:f,l:h}=r.decode(2,c),{v:d,l:g}=r.decode(2,h);if(g.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(f),s:n.decode(d)}},hexFromSig(t){const{_tlv:e,_int:n}=dr,r=e.encode(2,n.encode(t.r)),o=e.encode(2,n.encode(t.s)),c=r+o;return e.encode(48,c)}};function Zg(t,e){return Su(Bu(t,e))}const gr=BigInt(0),Ot=BigInt(1);BigInt(2);const Xg=BigInt(3),nN=BigInt(4);function iN(t){const e=eN(t),{Fp:n}=e,r=um(e.n,e.nBitLength),o=e.toBytes||((T,$,D)=>{const R=$.toAffine();return sh(Uint8Array.from([4]),n.toBytes(R.x),n.toBytes(R.y))}),c=e.fromBytes||(T=>{const $=T.subarray(1),D=n.fromBytes($.subarray(0,n.BYTES)),R=n.fromBytes($.subarray(n.BYTES,2*n.BYTES));return{x:D,y:R}});function u(T){const{a:$,b:D}=e,R=n.sqr(T),U=n.mul(R,T);return n.add(n.add(U,n.mul(T,$)),D)}function f(T,$){const D=n.sqr($),R=u(T);return n.eql(D,R)}if(!f(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const h=n.mul(n.pow(e.a,Xg),nN),d=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(h,d)))throw new Error("bad curve params: a or b");function g(T){return om(T,Ot,e.n)}function b(T){const{allowedPrivateKeyLengths:$,nByteLength:D,wrapPrivateKey:R,n:U}=e;if($&&typeof T!="bigint"){if(Ru(T)&&(T=Su(T)),typeof T!="string"||!$.includes(T.length))throw new Error("invalid private key");T=T.padStart(D*2,"0")}let H;try{H=typeof T=="bigint"?T:Js(Xn("private key",T,D))}catch{throw new Error("invalid private key, expected hex or "+D+" bytes, got "+typeof T)}return R&&(H=hn(H,U)),da("private key",H,Ot,U),H}function m(T){if(!(T instanceof w))throw new Error("ProjectivePoint expected")}const v=wE((T,$)=>{const{px:D,py:R,pz:U}=T;if(n.eql(U,n.ONE))return{x:D,y:R};const H=T.is0();$==null&&($=H?n.ONE:n.inv(U));const P=n.mul(D,$),W=n.mul(R,$),ee=n.mul(U,$);if(H)return{x:n.ZERO,y:n.ZERO};if(!n.eql(ee,n.ONE))throw new Error("invZ was invalid");return{x:P,y:W}}),E=wE(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:$,y:D}=T.toAffine();if(!n.isValid($)||!n.isValid(D))throw new Error("bad point: x or y not FE");if(!f($,D))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class w{constructor($,D,R){if($==null||!n.isValid($))throw new Error("x required");if(D==null||!n.isValid(D)||n.is0(D))throw new Error("y required");if(R==null||!n.isValid(R))throw new Error("z required");this.px=$,this.py=D,this.pz=R,Object.freeze(this)}static fromAffine($){const{x:D,y:R}=$||{};if(!$||!n.isValid(D)||!n.isValid(R))throw new Error("invalid affine point");if($ instanceof w)throw new Error("projective point not allowed");const U=H=>n.eql(H,n.ZERO);return U(D)&&U(R)?w.ZERO:new w(D,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ($){const D=$x(n,$.map(R=>R.pz));return $.map((R,U)=>R.toAffine(D[U])).map(w.fromAffine)}static fromHex($){const D=w.fromAffine(c(Xn("pointHex",$)));return D.assertValidity(),D}static fromPrivateKey($){return w.BASE.multiply(b($))}static msm($,D){return WU(w,r,$,D)}_setWindowSize($){j.setWindowSize(this,$)}assertValidity(){E(this)}hasEvenY(){const{y:$}=this.toAffine();if(n.isOdd)return!n.isOdd($);throw new Error("Field doesn't support isOdd")}equals($){m($);const{px:D,py:R,pz:U}=this,{px:H,py:P,pz:W}=$,ee=n.eql(n.mul(D,W),n.mul(H,U)),G=n.eql(n.mul(R,W),n.mul(P,U));return ee&&G}negate(){return new w(this.px,n.neg(this.py),this.pz)}double(){const{a:$,b:D}=e,R=n.mul(D,Xg),{px:U,py:H,pz:P}=this;let W=n.ZERO,ee=n.ZERO,G=n.ZERO,F=n.mul(U,U),Y=n.mul(H,H),_=n.mul(P,P),S=n.mul(U,H);return S=n.add(S,S),G=n.mul(U,P),G=n.add(G,G),W=n.mul($,G),ee=n.mul(R,_),ee=n.add(W,ee),W=n.sub(Y,ee),ee=n.add(Y,ee),ee=n.mul(W,ee),W=n.mul(S,W),G=n.mul(R,G),_=n.mul($,_),S=n.sub(F,_),S=n.mul($,S),S=n.add(S,G),G=n.add(F,F),F=n.add(G,F),F=n.add(F,_),F=n.mul(F,S),ee=n.add(ee,F),_=n.mul(H,P),_=n.add(_,_),F=n.mul(_,S),W=n.sub(W,F),G=n.mul(_,Y),G=n.add(G,G),G=n.add(G,G),new w(W,ee,G)}add($){m($);const{px:D,py:R,pz:U}=this,{px:H,py:P,pz:W}=$;let ee=n.ZERO,G=n.ZERO,F=n.ZERO;const Y=e.a,_=n.mul(e.b,Xg);let S=n.mul(D,H),C=n.mul(R,P),z=n.mul(U,W),M=n.add(D,R),L=n.add(H,P);M=n.mul(M,L),L=n.add(S,C),M=n.sub(M,L),L=n.add(D,U);let x=n.add(H,W);return L=n.mul(L,x),x=n.add(S,z),L=n.sub(L,x),x=n.add(R,U),ee=n.add(P,W),x=n.mul(x,ee),ee=n.add(C,z),x=n.sub(x,ee),F=n.mul(Y,L),ee=n.mul(_,z),F=n.add(ee,F),ee=n.sub(C,F),F=n.add(C,F),G=n.mul(ee,F),C=n.add(S,S),C=n.add(C,S),z=n.mul(Y,z),L=n.mul(_,L),C=n.add(C,z),z=n.sub(S,z),z=n.mul(Y,z),L=n.add(L,z),S=n.mul(C,L),G=n.add(G,S),S=n.mul(x,L),ee=n.mul(M,ee),ee=n.sub(ee,S),S=n.mul(M,C),F=n.mul(x,F),F=n.add(F,S),new w(ee,G,F)}subtract($){return this.add($.negate())}is0(){return this.equals(w.ZERO)}wNAF($){return j.wNAFCached(this,$,w.normalizeZ)}multiplyUnsafe($){const{endo:D,n:R}=e;da("scalar",$,gr,R);const U=w.ZERO;if($===gr)return U;if(this.is0()||$===Ot)return this;if(!D||j.hasPrecomputes(this))return j.wNAFCachedUnsafe(this,$,w.normalizeZ);let{k1neg:H,k1:P,k2neg:W,k2:ee}=D.splitScalar($),G=U,F=U,Y=this;for(;P>gr||ee>gr;)P&Ot&&(G=G.add(Y)),ee&Ot&&(F=F.add(Y)),Y=Y.double(),P>>=Ot,ee>>=Ot;return H&&(G=G.negate()),W&&(F=F.negate()),F=new w(n.mul(F.px,D.beta),F.py,F.pz),G.add(F)}multiply($){const{endo:D,n:R}=e;da("scalar",$,Ot,R);let U,H;if(D){const{k1neg:P,k1:W,k2neg:ee,k2:G}=D.splitScalar($);let{p:F,f:Y}=this.wNAF(W),{p:_,f:S}=this.wNAF(G);F=j.constTimeNegate(P,F),_=j.constTimeNegate(ee,_),_=new w(n.mul(_.px,D.beta),_.py,_.pz),U=F.add(_),H=Y.add(S)}else{const{p:P,f:W}=this.wNAF($);U=P,H=W}return w.normalizeZ([U,H])[0]}multiplyAndAddUnsafe($,D,R){const U=w.BASE,H=(W,ee)=>ee===gr||ee===Ot||!W.equals(U)?W.multiplyUnsafe(ee):W.multiply(ee),P=H(this,D).add(H($,R));return P.is0()?void 0:P}toAffine($){return v(this,$)}isTorsionFree(){const{h:$,isTorsionFree:D}=e;if($===Ot)return!0;if(D)return D(w,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:$,clearCofactor:D}=e;return $===Ot?this:D?D(w,this):this.multiplyUnsafe(e.h)}toRawBytes($=!0){return Eu("isCompressed",$),this.assertValidity(),o(w,this,$)}toHex($=!0){return Eu("isCompressed",$),Su(this.toRawBytes($))}}w.BASE=new w(e.Gx,e.Gy,n.ONE),w.ZERO=new w(n.ZERO,n.ONE,n.ZERO);const{endo:A,nBitLength:N}=e,j=JU(w,A?Math.ceil(N/2):N);return{CURVE:e,ProjectivePoint:w,normPrivateKeyToScalar:b,weierstrassEquation:u,isWithinCurveOrder:g}}function rN(t){const e=Mx(t);return Ih(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function sN(t){const e=rN(t),{Fp:n,n:r,nByteLength:o,nBitLength:c}=e,u=n.BYTES+1,f=2*n.BYTES+1;function h(_){return hn(_,r)}function d(_){return e0(_,r)}const{ProjectivePoint:g,normPrivateKeyToScalar:b,weierstrassEquation:m,isWithinCurveOrder:v}=iN({...e,toBytes(_,S,C){const z=S.toAffine(),M=n.toBytes(z.x),L=sh;return Eu("isCompressed",C),C?L(Uint8Array.from([S.hasEvenY()?2:3]),M):L(Uint8Array.from([4]),M,n.toBytes(z.y))},fromBytes(_){const S=_.length,C=_[0],z=_.subarray(1);if(S===u&&(C===2||C===3)){const M=Js(z);if(!om(M,Ot,n.ORDER))throw new Error("Point is not on curve");const L=m(M);let x;try{x=n.sqrt(L)}catch(q){const Q=q instanceof Error?": "+q.message:"";throw new Error("Point is not on curve"+Q)}const B=(x&Ot)===Ot;return(C&1)===1!==B&&(x=n.neg(x)),{x:M,y:x}}else if(S===f&&C===4){const M=n.fromBytes(z.subarray(0,n.BYTES)),L=n.fromBytes(z.subarray(n.BYTES,2*n.BYTES));return{x:M,y:L}}else{const M=u,L=f;throw new Error("invalid Point, expected length of "+M+", or uncompressed "+L+", got "+S)}}});function E(_){const S=r>>Ot;return _>S}function w(_){return E(_)?h(-_):_}const A=(_,S,C)=>Js(_.slice(S,C));class N{constructor(S,C,z){da("r",S,Ot,r),da("s",C,Ot,r),this.r=S,this.s=C,z!=null&&(this.recovery=z),Object.freeze(this)}static fromCompact(S){const C=o;return S=Xn("compactSignature",S,C*2),new N(A(S,0,C),A(S,C,2*C))}static fromDER(S){const{r:C,s:z}=dr.toSig(Xn("DER",S));return new N(C,z)}assertValidity(){}addRecoveryBit(S){return new N(this.r,this.s,S)}recoverPublicKey(S){const{r:C,s:z,recovery:M}=this,L=U(Xn("msgHash",S));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const x=M===2||M===3?C+e.n:C;if(x>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const B=(M&1)===0?"02":"03",V=g.fromHex(B+Zg(x,n.BYTES)),q=d(x),Q=h(-L*q),ie=h(z*q),oe=g.BASE.multiplyAndAddUnsafe(V,Q,ie);if(!oe)throw new Error("point at infinify");return oe.assertValidity(),oe}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,h(-this.s),this.recovery):this}toDERRawBytes(){return rh(this.toDERHex())}toDERHex(){return dr.hexFromSig(this)}toCompactRawBytes(){return rh(this.toCompactHex())}toCompactHex(){const S=o;return Zg(this.r,S)+Zg(this.s,S)}}const j={isValidPrivateKey(_){try{return b(_),!0}catch{return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const _=Bx(e.n);return QU(e.randomBytes(_),e.n)},precompute(_=8,S=g.BASE){return S._setWindowSize(_),S.multiply(BigInt(3)),S}};function T(_,S=!0){return g.fromPrivateKey(_).toRawBytes(S)}function $(_){if(typeof _=="bigint")return!1;if(_ instanceof g)return!0;const C=Xn("key",_).length,z=n.BYTES,M=z+1,L=2*z+1;if(!(e.allowedPrivateKeyLengths||o===M))return C===M||C===L}function D(_,S,C=!0){if($(_)===!0)throw new Error("first arg must be private key");if($(S)===!1)throw new Error("second arg must be public key");return g.fromHex(S).multiply(b(_)).toRawBytes(C)}const R=e.bits2int||function(_){if(_.length>8192)throw new Error("input is too large");const S=Js(_),C=_.length*8-c;return C>0?S>>BigInt(C):S},U=e.bits2int_modN||function(_){return h(R(_))},H=$h(c);function P(_){return da("num < 2^"+c,_,gr,H),Bu(_,o)}function W(_,S,C=ee){if(["recovered","canonical"].some(ue=>ue in C))throw new Error("sign() legacy options not supported");const{hash:z,randomBytes:M}=e;let{lowS:L,prehash:x,extraEntropy:B}=C;L==null&&(L=!0),_=Xn("msgHash",_),CE(C),x&&(_=Xn("prehashed msgHash",z(_)));const V=U(_),q=b(S),Q=[P(q),P(V)];if(B!=null&&B!==!1){const ue=B===!0?M(n.BYTES):B;Q.push(Xn("extraEntropy",ue))}const ie=sh(...Q),oe=V;function de(ue){const ye=R(ue);if(!v(ye))return;const xe=d(ye),ze=g.BASE.multiply(ye).toAffine(),We=h(ze.x);if(We===gr)return;const He=h(xe*h(oe+We*q));if(He===gr)return;let Tt=(ze.x===We?0:2)|Number(ze.y&Ot),ri=He;return L&&E(He)&&(ri=w(He),Tt^=1),new N(We,ri,Tt)}return{seed:ie,k2sig:de}}const ee={lowS:e.lowS,prehash:!1},G={lowS:e.lowS,prehash:!1};function F(_,S,C=ee){const{seed:z,k2sig:M}=W(_,S,C),L=e;return iU(L.hash.outputLen,L.nByteLength,L.hmac)(z,M)}g.BASE._setWindowSize(8);function Y(_,S,C,z=G){const M=_;S=Xn("msgHash",S),C=Xn("publicKey",C);const{lowS:L,prehash:x,format:B}=z;if(CE(z),"strict"in z)throw new Error("options.strict was renamed to lowS");if(B!==void 0&&B!=="compact"&&B!=="der")throw new Error("format must be compact or der");const V=typeof M=="string"||Ru(M),q=!V&&!B&&typeof M=="object"&&M!==null&&typeof M.r=="bigint"&&typeof M.s=="bigint";if(!V&&!q)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Q,ie;try{if(q&&(Q=new N(M.r,M.s)),V){try{B!=="compact"&&(Q=N.fromDER(M))}catch(Tt){if(!(Tt instanceof dr.Err))throw Tt}!Q&&B!=="der"&&(Q=N.fromCompact(M))}ie=g.fromHex(C)}catch{return!1}if(!Q||L&&Q.hasHighS())return!1;x&&(S=e.hash(S));const{r:oe,s:de}=Q,ue=U(S),ye=d(de),xe=h(ue*ye),ze=h(oe*ye),We=g.BASE.multiplyAndAddUnsafe(ie,xe,ze)?.toAffine();return We?h(We.x)===oe:!1}return{CURVE:e,getPublicKey:T,getSharedSecret:D,sign:F,verify:Y,ProjectivePoint:g,Signature:N,utils:j}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function oN(t){return{hash:t,hmac:(e,...n)=>Ox(t,e,$B(...n)),randomBytes:IB}}function aN(t,e){const n=r=>sN({...t,...oN(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jx=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),$E=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),cN=BigInt(0),uN=BigInt(1),n0=BigInt(2),IE=(t,e)=>(t+e/n0)/e;function lN(t){const e=jx,n=BigInt(3),r=BigInt(6),o=BigInt(11),c=BigInt(22),u=BigInt(23),f=BigInt(44),h=BigInt(88),d=t*t*t%e,g=d*d*t%e,b=Kn(g,n,e)*g%e,m=Kn(b,n,e)*g%e,v=Kn(m,n0,e)*d%e,E=Kn(v,o,e)*v%e,w=Kn(E,c,e)*E%e,A=Kn(w,f,e)*w%e,N=Kn(A,h,e)*A%e,j=Kn(N,f,e)*w%e,T=Kn(j,n,e)*g%e,$=Kn(T,u,e)*E%e,D=Kn($,r,e)*d%e,R=Kn(D,n0,e);if(!i0.eql(i0.sqr(R),t))throw new Error("Cannot find square root");return R}const i0=um(jx,void 0,void 0,{sqrt:lN}),fN=aN({a:cN,b:BigInt(7),Fp:i0,n:$E,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=$E,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-uN*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),c=n,u=BigInt("0x100000000000000000000000000000000"),f=IE(c*t,e),h=IE(-r*t,e);let d=hn(t-f*n-h*o,e),g=hn(-f*r-h*c,e);const b=d>u,m=g>u;if(b&&(d=e-d),m&&(g=e-g),d>u||g>u)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:b,k1:d,k2neg:m,k2:g}}}},eU);function hN(t){if(t.length!==130&&t.length!==132)throw new pN({signature:t});const e=BigInt(hr(t,0,32)),n=BigInt(hr(t,32,64)),r=(()=>{const o=+`0x${t.slice(130)}`;if(!Number.isNaN(o))try{return dN(o)}catch{throw new gN({value:o})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function dN(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new yN({value:t})}class pN extends nt{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${ds(cm(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class gN extends nt{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class yN extends nt{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mN(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function zx(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function ah(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function lm(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function r0(t){if(!Array.isArray(t))throw new Error("array expected")}function ch(t,e){if(!zx(!0,e))throw new Error(`${t}: array of strings expected`)}function bN(t,e){if(!zx(!1,e))throw new Error(`${t}: array of numbers expected`)}function wN(...t){const e=c=>c,n=(c,u)=>f=>c(u(f)),r=t.map(c=>c.encode).reduceRight(n,e),o=t.map(c=>c.decode).reduce(n,e);return{encode:r,decode:o}}function vN(t){const e=typeof t=="string"?t.split(""):t,n=e.length;ch("alphabet",e);const r=new Map(e.map((o,c)=>[o,c]));return{encode:o=>(r0(o),o.map(c=>{if(!Number.isSafeInteger(c)||c<0||c>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${c}". Allowed: ${t}`);return e[c]})),decode:o=>(r0(o),o.map(c=>{ah("alphabet.decode",c);const u=r.get(c);if(u===void 0)throw new Error(`Unknown letter: "${c}". Allowed: ${t}`);return u}))}}function EN(t=""){return ah("join",t),{encode:e=>(ch("join.decode",e),e.join(t)),decode:e=>(ah("join.decode",e),e.split(t))}}function SN(t,e="="){return lm(t),ah("padding",e),{encode(n){for(ch("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){ch("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const qx=(t,e)=>e===0?t:qx(e,t%e),uh=(t,e)=>t+(e-qx(t,e)),Jg=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function RE(t,e,n,r){if(r0(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(uh(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${uh(e,n)}`);let o=0,c=0;const u=Jg[e],f=Jg[n]-1,h=[];for(const d of t){if(lm(d),d>=u)throw new Error(`convertRadix2: invalid data word=${d} from=${e}`);if(o=o<<e|d,c+e>32)throw new Error(`convertRadix2: carry overflow pos=${c} from=${e}`);for(c+=e;c>=n;c-=n)h.push((o>>c-n&f)>>>0);const g=Jg[c];if(g===void 0)throw new Error("invalid carry");o&=g-1}if(o=o<<n-c&f,!r&&c>=e)throw new Error("Excess padding");if(!r&&o>0)throw new Error(`Non-zero padding: ${o}`);return r&&c>0&&h.push(o>>>0),h}function _N(t,e=!1){if(lm(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(uh(8,t)>32||uh(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!mN(n))throw new Error("radix2.encode input should be Uint8Array");return RE(Array.from(n),8,t,!e)},decode:n=>(bN("radix2.decode",n),Uint8Array.from(RE(n,t,8,e)))}}const xN=wN(_N(5),vN("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),SN(5),EN(""));function ON(t){return qU(AN(t))}function AN(t){const{payload:e,signature:n}=t,{r,s:o,yParity:c}=n,f=new fN.Signature(BigInt(r),BigInt(o)).addRecoveryBit(c).recoverPublicKey(cm(e).substring(2));return $U(f)}function DN(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<t.length;d++){const g=t.charAt(d),b=g.charCodeAt(0);if(e[b]!==255)throw new TypeError(g+" is ambiguous");e[b]=d}const n=t.length,r=t.charAt(0),o=Math.log(n)/Math.log(256),c=Math.log(256)/Math.log(n);function u(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let g=0,b=0,m=0;const v=d.length;for(;m!==v&&d[m]===0;)m++,g++;const E=(v-m)*c+1>>>0,w=new Uint8Array(E);for(;m!==v;){let j=d[m],T=0;for(let $=E-1;(j!==0||T<b)&&$!==-1;$--,T++)j+=256*w[$]>>>0,w[$]=j%n>>>0,j=j/n>>>0;if(j!==0)throw new Error("Non-zero carry");b=T,m++}let A=E-b;for(;A!==E&&w[A]===0;)A++;let N=r.repeat(g);for(;A<E;++A)N+=t.charAt(w[A]);return N}function f(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let g=0,b=0,m=0;for(;d[g]===r;)b++,g++;const v=(d.length-g)*o+1>>>0,E=new Uint8Array(v);for(;g<d.length;){const j=d.charCodeAt(g);if(j>255)return;let T=e[j];if(T===255)return;let $=0;for(let D=v-1;(T!==0||$<m)&&D!==-1;D--,$++)T+=n*E[D]>>>0,E[D]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");m=$,g++}let w=v-m;for(;w!==v&&E[w]===0;)w++;const A=new Uint8Array(b+(v-w));let N=b;for(;w!==v;)A[N++]=E[w++];return A}function h(d){const g=f(d);if(g)return g;throw new Error("Non-base"+n+" character")}return{encode:u,decodeUnsafe:f,decode:h}}var TN="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Uu=DN(TN);function CN(t){const e=t.length;let n=0,r=0;for(;r<e;){let o=t.charCodeAt(r++);if((o&4294967168)===0){n++;continue}else if((o&4294965248)===0)n+=2;else{if(o>=55296&&o<=56319&&r<e){const c=t.charCodeAt(r);(c&64512)===56320&&(++r,o=((o&1023)<<10)+(c&1023)+65536)}(o&4294901760)===0?n+=3:n+=4}}return n}function $N(t,e,n){const r=t.length;let o=n,c=0;for(;c<r;){let u=t.charCodeAt(c++);if((u&4294967168)===0){e[o++]=u;continue}else if((u&4294965248)===0)e[o++]=u>>6&31|192;else{if(u>=55296&&u<=56319&&c<r){const f=t.charCodeAt(c);(f&64512)===56320&&(++c,u=((u&1023)<<10)+(f&1023)+65536)}(u&4294901760)===0?(e[o++]=u>>12&15|224,e[o++]=u>>6&63|128):(e[o++]=u>>18&7|240,e[o++]=u>>12&63|128,e[o++]=u>>6&63|128)}e[o++]=u&63|128}}const IN=new TextEncoder,RN=50;function BN(t,e,n){IN.encodeInto(t,e.subarray(n))}function UN(t,e,n){t.length>RN?BN(t,e,n):$N(t,e,n)}const NN=4096;function Px(t,e,n){let r=e;const o=r+n,c=[];let u="";for(;r<o;){const f=t[r++];if((f&128)===0)c.push(f);else if((f&224)===192){const h=t[r++]&63;c.push((f&31)<<6|h)}else if((f&240)===224){const h=t[r++]&63,d=t[r++]&63;c.push((f&31)<<12|h<<6|d)}else if((f&248)===240){const h=t[r++]&63,d=t[r++]&63,g=t[r++]&63;let b=(f&7)<<18|h<<12|d<<6|g;b>65535&&(b-=65536,c.push(b>>>10&1023|55296),b=56320|b&1023),c.push(b)}else c.push(f);c.length>=NN&&(u+=String.fromCharCode(...c),c.length=0)}return c.length>0&&(u+=String.fromCharCode(...c)),u}const MN=new TextDecoder,jN=200;function zN(t,e,n){const r=t.subarray(e,e+n);return MN.decode(r)}function qN(t,e,n){return n>jN?zN(t,e,n):Px(t,e,n)}class $f{constructor(e,n){this.type=e,this.data=n}}class In extends Error{constructor(e){super(e);const n=Object.create(In.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:In.name})}}const Rc=4294967295;function PN(t,e,n){const r=n/4294967296,o=n;t.setUint32(e,r),t.setUint32(e+4,o)}function Lx(t,e,n){const r=Math.floor(n/4294967296),o=n;t.setUint32(e,r),t.setUint32(e+4,o)}function Hx(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function LN(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const HN=-1,kN=4294967296-1,FN=17179869184-1;function VN({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=FN)if(e===0&&t<=kN){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,o=new Uint8Array(8),c=new DataView(o.buffer);return c.setUint32(0,e<<2|n&3),c.setUint32(4,r),o}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),Lx(r,4,t),n}}function KN(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,o=Math.floor(r/1e9);return{sec:n+o,nsec:r-o*1e9}}function GN(t){if(t instanceof Date){const e=KN(t);return VN(e)}else return null}function YN(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),o=(n&3)*4294967296+r,c=n>>>2;return{sec:o,nsec:c}}case 12:{const n=Hx(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new In(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function QN(t){const e=YN(t);return new Date(e.sec*1e3+e.nsec/1e6)}const ZN={type:HN,encode:GN,decode:QN};class lh{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(ZN)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const o=-1-e;this.builtInEncoders[o]=n,this.builtInDecoders[o]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const o=this.builtInEncoders[r];if(o!=null){const c=o(e,n);if(c!=null){const u=-1-r;return new $f(u,c)}}}for(let r=0;r<this.encoders.length;r++){const o=this.encoders[r];if(o!=null){const c=o(e,n);if(c!=null){const u=r;return new $f(u,c)}}}return e instanceof $f?e:null}decode(e,n,r){const o=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return o?o(e,n,r):new $f(n,e)}}lh.defaultCodec=new lh;function XN(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function s0(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):XN(t)?new Uint8Array(t):Uint8Array.from(t)}const JN=100,WN=2048;let eM=class kx{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??lh.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??JN,this.initialBufferSize=e?.initialBufferSize??WN,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new kx({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),o=new DataView(n);r.set(this.bytes),this.view=o,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=CN(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),UN(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=s0(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const o of e)this.doEncode(o,n+1)}countWithoutUndefined(e,n){let r=0;for(const o of n)e[o]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const o=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(o<16)this.writeU8(128+o);else if(o<65536)this.writeU8(222),this.writeU16(o);else if(o<4294967296)this.writeU8(223),this.writeU32(o);else throw new Error(`Too large map object: ${o}`);for(const c of r){const u=e[c];this.ignoreUndefined&&u===void 0||(this.encodeString(c),this.doEncode(u,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),o=r.length;if(o>=4294967296)throw new Error(`Too large extension object: ${o}`);this.writeU8(201),this.writeU32(o),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),PN(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),Lx(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function tM(t,e){return new eM(e).encodeSharedRef(t)}function Wg(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const nM=16,iM=16;class rM{constructor(e=nM,n=iM){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const o=this.caches[r-1];e:for(const c of o){const u=c.bytes;for(let f=0;f<r;f++)if(u[f]!==e[n+f])continue e;return c.str}return null}store(e,n){const r=this.caches[e.length-1],o={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=o:r.push(o)}decode(e,n,r){const o=this.find(e,n,r);if(o!=null)return this.hit++,o;this.miss++;const c=Px(e,n,r),u=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(u,c),c}}const o0="array",Kc="map_key",Fx="map_value",sM=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new In("The type of key must be string or number but "+typeof t)};class oM{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=o0,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=Kc,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===o0){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===Kc||e.type===Fx){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Bc=-1,fm=new DataView(new ArrayBuffer(0)),aM=new Uint8Array(fm.buffer);try{fm.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const BE=new RangeError("Insufficient data"),cM=new rM;let uM=class Vx{constructor(e){this.totalPos=0,this.pos=0,this.view=fm,this.bytes=aM,this.headByte=Bc,this.stack=new oM,this.entered=!1,this.extensionCodec=e?.extensionCodec??lh.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??Rc,this.maxBinLength=e?.maxBinLength??Rc,this.maxArrayLength=e?.maxArrayLength??Rc,this.maxMapLength=e?.maxMapLength??Rc,this.maxExtLength=e?.maxExtLength??Rc,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:cM,this.mapKeyConverter=e?.mapKeyConverter??sM}clone(){return new Vx({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Bc,this.stack.reset()}setBuffer(e){const n=s0(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Bc&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=s0(e),o=new Uint8Array(n.length+r.length);o.set(n),o.set(r,n.length),this.setBuffer(o)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const f of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(f);try{r=this.doDecodeSync(),n=!0}catch(h){if(!(h instanceof RangeError))throw h}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:o,pos:c,totalPos:u}=this;throw new RangeError(`Insufficient data in parsing ${Wg(o)} at ${u} (${c} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,o=-1;for await(const c of e){if(n&&o===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(c),r&&(o=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--o!==0;);}catch(u){if(!(u instanceof RangeError))throw u}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const o=e-128;if(o!==0){this.pushMapState(o),this.complete();continue e}else n={}}else if(e<160){const o=e-144;if(o!==0){this.pushArrayState(o),this.complete();continue e}else n=[]}else{const o=e-160;n=this.decodeString(o,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const o=this.lookU8();n=this.decodeString(o,1)}else if(e===218){const o=this.lookU16();n=this.decodeString(o,2)}else if(e===219){const o=this.lookU32();n=this.decodeString(o,4)}else if(e===220){const o=this.readU16();if(o!==0){this.pushArrayState(o),this.complete();continue e}else n=[]}else if(e===221){const o=this.readU32();if(o!==0){this.pushArrayState(o),this.complete();continue e}else n=[]}else if(e===222){const o=this.readU16();if(o!==0){this.pushMapState(o),this.complete();continue e}else n={}}else if(e===223){const o=this.readU32();if(o!==0){this.pushMapState(o),this.complete();continue e}else n={}}else if(e===196){const o=this.lookU8();n=this.decodeBinary(o,1)}else if(e===197){const o=this.lookU16();n=this.decodeBinary(o,2)}else if(e===198){const o=this.lookU32();n=this.decodeBinary(o,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const o=this.lookU8();n=this.decodeExtension(o,1)}else if(e===200){const o=this.lookU16();n=this.decodeExtension(o,2)}else if(e===201){const o=this.lookU32();n=this.decodeExtension(o,4)}else throw new In(`Unrecognized type byte: ${Wg(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const o=r.top();if(o.type===o0)if(o.array[o.position]=n,o.position++,o.position===o.size)n=o.array,r.release(o);else continue e;else if(o.type===Kc){if(n==="__proto__")throw new In("The key __proto__ is not allowed");o.key=this.mapKeyConverter(n),o.type=Fx;continue e}else if(o.map[o.key]=n,o.readCount++,o.readCount===o.size)n=o.map,r.release(o);else{o.key=null,o.type=Kc;continue e}}return n}}readHeadByte(){return this.headByte===Bc&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Bc}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new In(`Unrecognized array type byte: ${Wg(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new In(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new In(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new In(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw BE;const r=this.pos+n;let o;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?o=this.keyDecoder.decode(this.bytes,r,e):o=qN(this.bytes,r,e),this.pos+=n+e,o}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Kc:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new In(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw BE;const r=this.pos+n,o=this.bytes.subarray(r,r+e);return this.pos+=n+e,o}decodeExtension(e,n){if(e>this.maxExtLength)throw new In(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),o=this.decodeBinary(e,n+1);return this.extensionCodec.decode(o,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=LN(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Hx(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function lM(t,e){return new uM(e).decode(t)}function hm(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Kx(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?hm(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Gc(t,e){e||(e=t.reduce((o,c)=>o+c.length,0));const n=Kx(e);let r=0;for(const o of t)n.set(o,r),r+=o.length;return hm(n)}function fM(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),u=c.charCodeAt(0);if(n[u]!==255)throw new TypeError(c+" is ambiguous");n[u]=o}var f=t.length,h=t.charAt(0),d=Math.log(f)/Math.log(256),g=Math.log(256)/Math.log(f);function b(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var w=0,A=0,N=0,j=E.length;N!==j&&E[N]===0;)N++,w++;for(var T=(j-N)*g+1>>>0,$=new Uint8Array(T);N!==j;){for(var D=E[N],R=0,U=T-1;(D!==0||R<A)&&U!==-1;U--,R++)D+=256*$[U]>>>0,$[U]=D%f>>>0,D=D/f>>>0;if(D!==0)throw new Error("Non-zero carry");A=R,N++}for(var H=T-A;H!==T&&$[H]===0;)H++;for(var P=h.repeat(w);H<T;++H)P+=t.charAt($[H]);return P}function m(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var w=0;if(E[w]!==" "){for(var A=0,N=0;E[w]===h;)A++,w++;for(var j=(E.length-w)*d+1>>>0,T=new Uint8Array(j);E[w];){var $=n[E.charCodeAt(w)];if($===255)return;for(var D=0,R=j-1;($!==0||D<N)&&R!==-1;R--,D++)$+=f*T[R]>>>0,T[R]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");N=D,w++}if(E[w]!==" "){for(var U=j-N;U!==j&&T[U]===0;)U++;for(var H=new Uint8Array(A+(j-U)),P=A;U!==j;)H[P++]=T[U++];return H}}}function v(E){var w=m(E);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:m,decode:v}}var hM=fM,dM=hM;const pM=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},gM=t=>new TextEncoder().encode(t),yM=t=>new TextDecoder().decode(t);class mM{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class bM{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Gx(this,e)}}class wM{constructor(e){this.decoders=e}or(e){return Gx(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Gx=(t,e)=>new wM({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class vM{constructor(e,n,r,o){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=o,this.encoder=new mM(e,n,r),this.decoder=new bM(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Rh=({name:t,prefix:e,encode:n,decode:r})=>new vM(t,e,n,r),Nu=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:o}=dM(n,e);return Rh({prefix:t,name:e,encode:r,decode:c=>pM(o(c))})},EM=(t,e,n,r)=>{const o={};for(let g=0;g<e.length;++g)o[e[g]]=g;let c=t.length;for(;t[c-1]==="=";)--c;const u=new Uint8Array(c*n/8|0);let f=0,h=0,d=0;for(let g=0;g<c;++g){const b=o[t[g]];if(b===void 0)throw new SyntaxError(`Non-${r} character`);h=h<<n|b,f+=n,f>=8&&(f-=8,u[d++]=255&h>>f)}if(f>=n||255&h<<8-f)throw new SyntaxError("Unexpected end of data");return u},SM=(t,e,n)=>{const r=e[e.length-1]==="=",o=(1<<n)-1;let c="",u=0,f=0;for(let h=0;h<t.length;++h)for(f=f<<8|t[h],u+=8;u>n;)u-=n,c+=e[o&f>>u];if(u&&(c+=e[o&f<<n-u]),r)for(;c.length*n&7;)c+="=";return c},zt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Rh({prefix:e,name:t,encode(o){return SM(o,r,n)},decode(o){return EM(o,r,n,t)}}),_M=Rh({prefix:"\0",name:"identity",encode:t=>yM(t),decode:t=>gM(t)}),xM=Object.freeze(Object.defineProperty({__proto__:null,identity:_M},Symbol.toStringTag,{value:"Module"})),OM=zt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),AM=Object.freeze(Object.defineProperty({__proto__:null,base2:OM},Symbol.toStringTag,{value:"Module"})),DM=zt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),TM=Object.freeze(Object.defineProperty({__proto__:null,base8:DM},Symbol.toStringTag,{value:"Module"})),CM=Nu({prefix:"9",name:"base10",alphabet:"0123456789"}),$M=Object.freeze(Object.defineProperty({__proto__:null,base10:CM},Symbol.toStringTag,{value:"Module"})),IM=zt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),RM=zt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),BM=Object.freeze(Object.defineProperty({__proto__:null,base16:IM,base16upper:RM},Symbol.toStringTag,{value:"Module"})),UM=zt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),NM=zt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),MM=zt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jM=zt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),zM=zt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),qM=zt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),PM=zt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),LM=zt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),HM=zt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),kM=Object.freeze(Object.defineProperty({__proto__:null,base32:UM,base32hex:zM,base32hexpad:PM,base32hexpadupper:LM,base32hexupper:qM,base32pad:MM,base32padupper:jM,base32upper:NM,base32z:HM},Symbol.toStringTag,{value:"Module"})),FM=Nu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),VM=Nu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),KM=Object.freeze(Object.defineProperty({__proto__:null,base36:FM,base36upper:VM},Symbol.toStringTag,{value:"Module"})),GM=Nu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),YM=Nu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),QM=Object.freeze(Object.defineProperty({__proto__:null,base58btc:GM,base58flickr:YM},Symbol.toStringTag,{value:"Module"})),ZM=zt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),XM=zt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),JM=zt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),WM=zt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),e9=Object.freeze(Object.defineProperty({__proto__:null,base64:ZM,base64pad:XM,base64url:JM,base64urlpad:WM},Symbol.toStringTag,{value:"Module"})),Yx=Array.from(""),t9=Yx.reduce((t,e,n)=>(t[n]=e,t),[]),n9=Yx.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function i9(t){return t.reduce((e,n)=>(e+=t9[n],e),"")}function r9(t){const e=[];for(const n of t){const r=n9[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const s9=Rh({prefix:"",name:"base256emoji",encode:i9,decode:r9}),o9=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:s9},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const UE={...xM,...AM,...TM,...$M,...BM,...kM,...KM,...QM,...e9,...o9};function Qx(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const NE=Qx("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ey=Qx("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Kx(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Zx={utf8:NE,"utf-8":NE,hex:UE.base16,latin1:ey,ascii:ey,binary:ey,...UE};function ti(t,e="utf8"){const n=Zx[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?hm(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function mn(t,e="utf8"){const n=Zx[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const a9={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var ty,ME;function Xx(){if(ME)return ty;ME=1;const t="Input must be an string, Buffer or Uint8Array";function e(u){let f;if(u instanceof Uint8Array)f=u;else if(typeof u=="string")f=new TextEncoder().encode(u);else throw new Error(t);return f}function n(u){return Array.prototype.map.call(u,function(f){return(f<16?"0":"")+f.toString(16)}).join("")}function r(u){return(4294967296+u).toString(16).substring(1)}function o(u,f,h){let d=`
`+u+" = ";for(let g=0;g<f.length;g+=2){if(h===32)d+=r(f[g]).toUpperCase(),d+=" ",d+=r(f[g+1]).toUpperCase();else if(h===64)d+=r(f[g+1]).toUpperCase(),d+=r(f[g]).toUpperCase();else throw new Error("Invalid size "+h);g%6===4?d+=`
`+new Array(u.length+4).join(" "):g<f.length-2&&(d+=" ")}console.log(d)}function c(u,f,h){let d=new Date().getTime();const g=new Uint8Array(f);for(let m=0;m<f;m++)g[m]=m%256;const b=new Date().getTime();console.log("Generated random input in "+(b-d)+"ms"),d=b;for(let m=0;m<h;m++){const v=u(g),E=new Date().getTime(),w=E-d;d=E,console.log("Hashed in "+w+"ms: "+v.substring(0,20)+"..."),console.log(Math.round(f/(1<<20)/(w/1e3)*100)/100+" MB PER SECOND")}}return ty={normalizeInput:e,toHex:n,debugPrint:o,testSpeed:c},ty}var ny,jE;function c9(){if(jE)return ny;jE=1;const t=Xx();function e(N,j,T){const $=N[j]+N[T];let D=N[j+1]+N[T+1];$>=4294967296&&D++,N[j]=$,N[j+1]=D}function n(N,j,T,$){let D=N[j]+T;T<0&&(D+=4294967296);let R=N[j+1]+$;D>=4294967296&&R++,N[j]=D,N[j+1]=R}function r(N,j){return N[j]^N[j+1]<<8^N[j+2]<<16^N[j+3]<<24}function o(N,j,T,$,D,R){const U=d[D],H=d[D+1],P=d[R],W=d[R+1];e(h,N,j),n(h,N,U,H);let ee=h[$]^h[N],G=h[$+1]^h[N+1];h[$]=G,h[$+1]=ee,e(h,T,$),ee=h[j]^h[T],G=h[j+1]^h[T+1],h[j]=ee>>>24^G<<8,h[j+1]=G>>>24^ee<<8,e(h,N,j),n(h,N,P,W),ee=h[$]^h[N],G=h[$+1]^h[N+1],h[$]=ee>>>16^G<<16,h[$+1]=G>>>16^ee<<16,e(h,T,$),ee=h[j]^h[T],G=h[j+1]^h[T+1],h[j]=G>>>31^ee<<1,h[j+1]=ee>>>31^G<<1}const c=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],f=new Uint8Array(u.map(function(N){return N*2})),h=new Uint32Array(32),d=new Uint32Array(32);function g(N,j){let T=0;for(T=0;T<16;T++)h[T]=N.h[T],h[T+16]=c[T];for(h[24]=h[24]^N.t,h[25]=h[25]^N.t/4294967296,j&&(h[28]=~h[28],h[29]=~h[29]),T=0;T<32;T++)d[T]=r(N.b,4*T);for(T=0;T<12;T++)o(0,8,16,24,f[T*16+0],f[T*16+1]),o(2,10,18,26,f[T*16+2],f[T*16+3]),o(4,12,20,28,f[T*16+4],f[T*16+5]),o(6,14,22,30,f[T*16+6],f[T*16+7]),o(0,10,20,30,f[T*16+8],f[T*16+9]),o(2,12,22,24,f[T*16+10],f[T*16+11]),o(4,14,16,26,f[T*16+12],f[T*16+13]),o(6,8,18,28,f[T*16+14],f[T*16+15]);for(T=0;T<16;T++)N.h[T]=N.h[T]^h[T]^h[T+16]}const b=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function m(N,j,T,$){if(N===0||N>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(j&&j.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(T&&T.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if($&&$.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const D={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:N};b.fill(0),b[0]=N,j&&(b[1]=j.length),b[2]=1,b[3]=1,T&&b.set(T,32),$&&b.set($,48);for(let R=0;R<16;R++)D.h[R]=c[R]^r(b,R*4);return j&&(v(D,j),D.c=128),D}function v(N,j){for(let T=0;T<j.length;T++)N.c===128&&(N.t+=N.c,g(N,!1),N.c=0),N.b[N.c++]=j[T]}function E(N){for(N.t+=N.c;N.c<128;)N.b[N.c++]=0;g(N,!0);const j=new Uint8Array(N.outlen);for(let T=0;T<N.outlen;T++)j[T]=N.h[T>>2]>>8*(T&3);return j}function w(N,j,T,$,D){T=T||64,N=t.normalizeInput(N),$&&($=t.normalizeInput($)),D&&(D=t.normalizeInput(D));const R=m(T,j,$,D);return v(R,N),E(R)}function A(N,j,T,$,D){const R=w(N,j,T,$,D);return t.toHex(R)}return ny={blake2b:w,blake2bHex:A,blake2bInit:m,blake2bUpdate:v,blake2bFinal:E},ny}var iy,zE;function u9(){if(zE)return iy;zE=1;const t=Xx();function e(E,w){return E[w]^E[w+1]<<8^E[w+2]<<16^E[w+3]<<24}function n(E,w,A,N,j,T){u[E]=u[E]+u[w]+j,u[N]=r(u[N]^u[E],16),u[A]=u[A]+u[N],u[w]=r(u[w]^u[A],12),u[E]=u[E]+u[w]+T,u[N]=r(u[N]^u[E],8),u[A]=u[A]+u[N],u[w]=r(u[w]^u[A],7)}function r(E,w){return E>>>w^E<<32-w}const o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),u=new Uint32Array(16),f=new Uint32Array(16);function h(E,w){let A=0;for(A=0;A<8;A++)u[A]=E.h[A],u[A+8]=o[A];for(u[12]^=E.t,u[13]^=E.t/4294967296,w&&(u[14]=~u[14]),A=0;A<16;A++)f[A]=e(E.b,4*A);for(A=0;A<10;A++)n(0,4,8,12,f[c[A*16+0]],f[c[A*16+1]]),n(1,5,9,13,f[c[A*16+2]],f[c[A*16+3]]),n(2,6,10,14,f[c[A*16+4]],f[c[A*16+5]]),n(3,7,11,15,f[c[A*16+6]],f[c[A*16+7]]),n(0,5,10,15,f[c[A*16+8]],f[c[A*16+9]]),n(1,6,11,12,f[c[A*16+10]],f[c[A*16+11]]),n(2,7,8,13,f[c[A*16+12]],f[c[A*16+13]]),n(3,4,9,14,f[c[A*16+14]],f[c[A*16+15]]);for(A=0;A<8;A++)E.h[A]^=u[A]^u[A+8]}function d(E,w){if(!(E>0&&E<=32))throw new Error("Incorrect output length, should be in [1, 32]");const A=w?w.length:0;if(w&&!(A>0&&A<=32))throw new Error("Incorrect key length, should be in [1, 32]");const N={h:new Uint32Array(o),b:new Uint8Array(64),c:0,t:0,outlen:E};return N.h[0]^=16842752^A<<8^E,A>0&&(g(N,w),N.c=64),N}function g(E,w){for(let A=0;A<w.length;A++)E.c===64&&(E.t+=E.c,h(E,!1),E.c=0),E.b[E.c++]=w[A]}function b(E){for(E.t+=E.c;E.c<64;)E.b[E.c++]=0;h(E,!0);const w=new Uint8Array(E.outlen);for(let A=0;A<E.outlen;A++)w[A]=E.h[A>>2]>>8*(A&3)&255;return w}function m(E,w,A){A=A||32,E=t.normalizeInput(E);const N=d(A,w);return g(N,E),b(N)}function v(E,w,A){const N=m(E,w,A);return t.toHex(N)}return iy={blake2s:m,blake2sHex:v,blake2sInit:d,blake2sUpdate:g,blake2sFinal:b},iy}var ry,qE;function l9(){if(qE)return ry;qE=1;const t=c9(),e=u9();return ry={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},ry}var f9=l9(),h9={};const d9=":";function mr(t){const[e,n]=t.split(d9);return{namespace:e,reference:n}}function Jx(t,e){return t.includes(":")?[t]:e.chains||[]}var p9=Object.defineProperty,g9=Object.defineProperties,y9=Object.getOwnPropertyDescriptors,PE=Object.getOwnPropertySymbols,m9=Object.prototype.hasOwnProperty,b9=Object.prototype.propertyIsEnumerable,a0=(t,e,n)=>e in t?p9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LE=(t,e)=>{for(var n in e||(e={}))m9.call(e,n)&&a0(t,n,e[n]);if(PE)for(var n of PE(e))b9.call(e,n)&&a0(t,n,e[n]);return t},w9=(t,e)=>g9(t,y9(e)),HE=(t,e,n)=>a0(t,typeof e!="symbol"?e+"":e,n);const v9="ReactNative",Bn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},E9="js";function fh(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function gs(){return!Er.getDocument()&&!!Er.getNavigator()&&navigator.product===v9}function S9(){return gs()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function _9(){return gs()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Da(){return!fh()&&!!Er.getNavigator()&&!!Er.getDocument()}function Mu(){return gs()?Bn.reactNative:fh()?Bn.node:Da()?Bn.browser:Bn.unknown}function kE(){var t;try{return gs()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function x9(t,e){const n=new URLSearchParams(t);return Object.entries(e).sort(([r],[o])=>r.localeCompare(o)).forEach(([r,o])=>{o!=null&&n.set(r,String(o))}),n.toString()}function O9(t){var e,n;const r=Wx();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(o=>o!=="")),w9(LE(LE({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:(n=t?.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(o){return console.warn("Error populating app metadata",o),t||r}}function Wx(){return vB.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function A9(){if(Mu()===Bn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=dB();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function D9(){var t;const e=Mu();return e===Bn.browser?[e,((t=Er.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function eO(t,e,n){const r=A9(),o=D9();return[[t,e].join("-"),[E9,n].join("-"),r,o].join("/")}function T9({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:o,projectId:c,useOnCloseEvent:u,bundleId:f,packageName:h}){const d=n.split("?"),g=eO(t,e,r),b={auth:o,ua:g,projectId:c,useOnCloseEvent:u,packageName:h||void 0,bundleId:f||void 0},m=x9(d[1]||"",b);return d[0]+"?"+m}function Gs(t,e){return t.filter(n=>e.includes(n)).length===t.length}function c0(t){return Object.fromEntries(t.entries())}function u0(t){return new Map(Object.entries(t))}function Ls(t=fe.FIVE_MINUTES,e){const n=fe.toMiliseconds(t||fe.FIVE_MINUTES);let r,o,c,u;return{resolve:f=>{c&&r&&(clearTimeout(c),r(f),u=Promise.resolve(f))},reject:f=>{c&&o&&(clearTimeout(c),o(f))},done:()=>new Promise((f,h)=>{if(u)return f(u);c=setTimeout(()=>{const d=new Error(e);u=Promise.reject(d),h(d)},n),r=f,o=h})}}function Ri(t,e,n){return new Promise(async(r,o)=>{const c=setTimeout(()=>o(new Error(n)),e);try{const u=await t;r(u)}catch(u){o(u)}clearTimeout(c)})}function tO(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function C9(t){return tO("topic",t)}function $9(t){return tO("id",t)}function nO(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function pt(t,e){return fe.fromMiliseconds(Date.now()+fe.toMiliseconds(t))}function Ii(t){return Date.now()>=fe.toMiliseconds(t)}function je(t,e){return`${t}${e?`:${e}`:""}`}function Bi(t=[],e=[]){return[...new Set([...t,...e])]}async function I9({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const o=typeof n=="string"?JSON.parse(n):n,c=o?.href;if(typeof c!="string")return;const u=R9(c,t,e),f=Mu();if(f===Bn.browser){if(!((r=Er.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}B9(u)}else f===Bn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(u)}catch(o){console.error(o)}}function R9(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let o=`${t}`;if(t.startsWith("https://t.me")){const c=t.includes("?")?"&startapp=":"?startapp=";o=`${o}${c}${j9(r,!0)}`}else o=`${o}/wc?${r}`;return o}function B9(t){let e="_self";M9()?e="_top":(N9()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function U9(t,e){let n="";try{if(Da()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function FE(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function VE(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function dm(){return typeof process<"u"&&h9.IS_VITEST==="true"}function N9(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function M9(){try{return window.self!==window.top}catch{return!1}}function j9(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function iO(t){return Buffer.from(t,"base64").toString("utf-8")}function z9(t){return new Promise(e=>setTimeout(e,t))}let q9=class{constructor({limit:e}){HE(this,"limit"),HE(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const If=BigInt(2**32-1),KE=BigInt(32);function rO(t,e=!1){return e?{h:Number(t&If),l:Number(t>>KE&If)}:{h:Number(t>>KE&If)|0,l:Number(t&If)|0}}function sO(t,e=!1){const n=t.length;let r=new Uint32Array(n),o=new Uint32Array(n);for(let c=0;c<n;c++){const{h:u,l:f}=rO(t[c],e);[r[c],o[c]]=[u,f]}return[r,o]}const GE=(t,e,n)=>t>>>n,YE=(t,e,n)=>t<<32-n|e>>>n,rs=(t,e,n)=>t>>>n|e<<32-n,ss=(t,e,n)=>t<<32-n|e>>>n,Hc=(t,e,n)=>t<<64-n|e>>>n-32,kc=(t,e,n)=>t>>>n-32|e<<64-n,P9=(t,e)=>e,L9=(t,e)=>t,H9=(t,e,n)=>t<<n|e>>>32-n,k9=(t,e,n)=>e<<n|t>>>32-n,F9=(t,e,n)=>e<<n-32|t>>>64-n,V9=(t,e,n)=>t<<n-32|e>>>64-n;function hi(t,e,n,r){const o=(e>>>0)+(r>>>0);return{h:t+n+(o/2**32|0)|0,l:o|0}}const pm=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),gm=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,K9=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),G9=(t,e,n,r,o)=>e+n+r+o+(t/2**32|0)|0,Y9=(t,e,n,r,o)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(o>>>0),Q9=(t,e,n,r,o,c)=>e+n+r+o+c+(t/2**32|0)|0,ta=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Bh(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Sr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function yi(t,...e){if(!Bh(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Uh(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Sr(t.outputLen),Sr(t.blockLen)}function ps(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ym(t,e){yi(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function _u(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ni(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function sy(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function xi(t,e){return t<<32-e|t>>>e}const oO=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function aO(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const lr=oO?t=>t:t=>aO(t);function Z9(t){for(let e=0;e<t.length;e++)t[e]=aO(t[e]);return t}const os=oO?t=>t:Z9,cO=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",X9=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function pa(t){if(yi(t),cO)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=X9[t[n]];return e}const ar={_0:48,_9:57,A:65,F:70,a:97,f:102};function QE(t){if(t>=ar._0&&t<=ar._9)return t-ar._0;if(t>=ar.A&&t<=ar.F)return t-(ar.A-10);if(t>=ar.a&&t<=ar.f)return t-(ar.a-10)}function hh(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(cO)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let o=0,c=0;o<n;o++,c+=2){const u=QE(t.charCodeAt(c)),f=QE(t.charCodeAt(c+1));if(u===void 0||f===void 0){const h=t[c]+t[c+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+c)}r[o]=u*16+f}return r}function uO(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function gi(t){return typeof t=="string"&&(t=uO(t)),yi(t),t}function cs(...t){let e=0;for(let r=0;r<t.length;r++){const o=t[r];yi(o),e+=o.length}const n=new Uint8Array(e);for(let r=0,o=0;r<t.length;r++){const c=t[r];n.set(c,o),o+=c.length}return n}class Nh{}function ju(t){const e=r=>t().update(gi(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function J9(t){const e=(r,o)=>t(o).update(gi(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function ao(t=32){if(ta&&typeof ta.getRandomValues=="function")return ta.getRandomValues(new Uint8Array(t));if(ta&&typeof ta.randomBytes=="function")return Uint8Array.from(ta.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const W9=BigInt(0),Uc=BigInt(1),e7=BigInt(2),t7=BigInt(7),n7=BigInt(256),i7=BigInt(113),lO=[],fO=[],hO=[];for(let t=0,e=Uc,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],lO.push(2*(5*r+n)),fO.push((t+1)*(t+2)/2%64);let o=W9;for(let c=0;c<7;c++)e=(e<<Uc^(e>>t7)*i7)%n7,e&e7&&(o^=Uc<<(Uc<<BigInt(c))-Uc);hO.push(o)}const dO=sO(hO,!0),r7=dO[0],s7=dO[1],ZE=(t,e,n)=>n>32?F9(t,e,n):H9(t,e,n),XE=(t,e,n)=>n>32?V9(t,e,n):k9(t,e,n);function o7(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let u=0;u<10;u++)n[u]=t[u]^t[u+10]^t[u+20]^t[u+30]^t[u+40];for(let u=0;u<10;u+=2){const f=(u+8)%10,h=(u+2)%10,d=n[h],g=n[h+1],b=ZE(d,g,1)^n[f],m=XE(d,g,1)^n[f+1];for(let v=0;v<50;v+=10)t[u+v]^=b,t[u+v+1]^=m}let o=t[2],c=t[3];for(let u=0;u<24;u++){const f=fO[u],h=ZE(o,c,f),d=XE(o,c,f),g=lO[u];o=t[g],c=t[g+1],t[g]=h,t[g+1]=d}for(let u=0;u<50;u+=10){for(let f=0;f<10;f++)n[f]=t[u+f];for(let f=0;f<10;f++)t[u+f]^=~n[(f+2)%10]&n[(f+4)%10]}t[0]^=r7[r],t[1]^=s7[r]}ni(n)}let a7=class pO extends Nh{constructor(e,n,r,o=!1,c=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=o,this.rounds=c,Sr(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=_u(this.state)}clone(){return this._cloneInto()}keccak(){os(this.state32),o7(this.state32,this.rounds),os(this.state32),this.posOut=0,this.pos=0}update(e){ps(this),e=gi(e),yi(e);const{blockLen:n,state:r}=this,o=e.length;for(let c=0;c<o;){const u=Math.min(n-this.pos,o-c);for(let f=0;f<u;f++)r[this.pos++]^=e[c++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:o}=this;e[r]^=n,(n&128)!==0&&r===o-1&&this.keccak(),e[o-1]^=128,this.keccak()}writeInto(e){ps(this,!1),yi(e),this.finish();const n=this.state,{blockLen:r}=this;for(let o=0,c=e.length;o<c;){this.posOut>=r&&this.keccak();const u=Math.min(r-this.posOut,c-o);e.set(n.subarray(this.posOut,this.posOut+u),o),this.posOut+=u,o+=u}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Sr(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ym(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ni(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:o,rounds:c,enableXOF:u}=this;return e||(e=new pO(n,r,o,u,c)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=c,e.suffix=r,e.outputLen=o,e.enableXOF=u,e.destroyed=this.destroyed,e}};const c7=(t,e,n)=>ju(()=>new a7(e,t,n)),u7=c7(1,136,256/8);function l7(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const o=BigInt(32),c=BigInt(4294967295),u=Number(n>>o&c),f=Number(n&c),h=r?4:0,d=r?0:4;t.setUint32(e+h,u,r),t.setUint32(e+d,f,r)}function f7(t,e,n){return t&e^~t&n}function h7(t,e,n){return t&e^t&n^e&n}let gO=class extends Nh{constructor(e,n,r,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=o,this.buffer=new Uint8Array(e),this.view=sy(this.buffer)}update(e){ps(this),e=gi(e),yi(e);const{view:n,buffer:r,blockLen:o}=this,c=e.length;for(let u=0;u<c;){const f=Math.min(o-this.pos,c-u);if(f===o){const h=sy(e);for(;o<=c-u;u+=o)this.process(h,u);continue}r.set(e.subarray(u,u+f),this.pos),this.pos+=f,u+=f,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ps(this),ym(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:c}=this;let{pos:u}=this;n[u++]=128,ni(this.buffer.subarray(u)),this.padOffset>o-u&&(this.process(r,0),u=0);for(let b=u;b<o;b++)n[b]=0;l7(r,o-8,BigInt(this.length*8),c),this.process(r,0);const f=sy(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=h/4,g=this.get();if(d>g.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<d;b++)f.setUint32(4*b,g[b],c)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:c,destroyed:u,pos:f}=this;return e.destroyed=u,e.finished=c,e.length=o,e.pos=f,o%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Jr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ht=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),kt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),d7=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wr=new Uint32Array(64);class p7 extends gO{constructor(e=32){super(64,e,8,!1),this.A=Jr[0]|0,this.B=Jr[1]|0,this.C=Jr[2]|0,this.D=Jr[3]|0,this.E=Jr[4]|0,this.F=Jr[5]|0,this.G=Jr[6]|0,this.H=Jr[7]|0}get(){const{A:e,B:n,C:r,D:o,E:c,F:u,G:f,H:h}=this;return[e,n,r,o,c,u,f,h]}set(e,n,r,o,c,u,f,h){this.A=e|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=c|0,this.F=u|0,this.G=f|0,this.H=h|0}process(e,n){for(let b=0;b<16;b++,n+=4)Wr[b]=e.getUint32(n,!1);for(let b=16;b<64;b++){const m=Wr[b-15],v=Wr[b-2],E=xi(m,7)^xi(m,18)^m>>>3,w=xi(v,17)^xi(v,19)^v>>>10;Wr[b]=w+Wr[b-7]+E+Wr[b-16]|0}let{A:r,B:o,C:c,D:u,E:f,F:h,G:d,H:g}=this;for(let b=0;b<64;b++){const m=xi(f,6)^xi(f,11)^xi(f,25),v=g+m+f7(f,h,d)+d7[b]+Wr[b]|0,E=(xi(r,2)^xi(r,13)^xi(r,22))+h7(r,o,c)|0;g=d,d=h,h=f,f=u+v|0,u=c,c=o,o=r,r=v+E|0}r=r+this.A|0,o=o+this.B|0,c=c+this.C|0,u=u+this.D|0,f=f+this.E|0,h=h+this.F|0,d=d+this.G|0,g=g+this.H|0,this.set(r,o,c,u,f,h,d,g)}roundClean(){ni(Wr)}destroy(){this.set(0,0,0,0,0,0,0,0),ni(this.buffer)}}const yO=sO(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),g7=yO[0],y7=yO[1],es=new Uint32Array(80),ts=new Uint32Array(80);let mm=class extends gO{constructor(e=64){super(128,e,16,!1),this.Ah=kt[0]|0,this.Al=kt[1]|0,this.Bh=kt[2]|0,this.Bl=kt[3]|0,this.Ch=kt[4]|0,this.Cl=kt[5]|0,this.Dh=kt[6]|0,this.Dl=kt[7]|0,this.Eh=kt[8]|0,this.El=kt[9]|0,this.Fh=kt[10]|0,this.Fl=kt[11]|0,this.Gh=kt[12]|0,this.Gl=kt[13]|0,this.Hh=kt[14]|0,this.Hl=kt[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:o,Ch:c,Cl:u,Dh:f,Dl:h,Eh:d,El:g,Fh:b,Fl:m,Gh:v,Gl:E,Hh:w,Hl:A}=this;return[e,n,r,o,c,u,f,h,d,g,b,m,v,E,w,A]}set(e,n,r,o,c,u,f,h,d,g,b,m,v,E,w,A){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=o|0,this.Ch=c|0,this.Cl=u|0,this.Dh=f|0,this.Dl=h|0,this.Eh=d|0,this.El=g|0,this.Fh=b|0,this.Fl=m|0,this.Gh=v|0,this.Gl=E|0,this.Hh=w|0,this.Hl=A|0}process(e,n){for(let T=0;T<16;T++,n+=4)es[T]=e.getUint32(n),ts[T]=e.getUint32(n+=4);for(let T=16;T<80;T++){const $=es[T-15]|0,D=ts[T-15]|0,R=rs($,D,1)^rs($,D,8)^GE($,D,7),U=ss($,D,1)^ss($,D,8)^YE($,D,7),H=es[T-2]|0,P=ts[T-2]|0,W=rs(H,P,19)^Hc(H,P,61)^GE(H,P,6),ee=ss(H,P,19)^kc(H,P,61)^YE(H,P,6),G=K9(U,ee,ts[T-7],ts[T-16]),F=G9(G,R,W,es[T-7],es[T-16]);es[T]=F|0,ts[T]=G|0}let{Ah:r,Al:o,Bh:c,Bl:u,Ch:f,Cl:h,Dh:d,Dl:g,Eh:b,El:m,Fh:v,Fl:E,Gh:w,Gl:A,Hh:N,Hl:j}=this;for(let T=0;T<80;T++){const $=rs(b,m,14)^rs(b,m,18)^Hc(b,m,41),D=ss(b,m,14)^ss(b,m,18)^kc(b,m,41),R=b&v^~b&w,U=m&E^~m&A,H=Y9(j,D,U,y7[T],ts[T]),P=Q9(H,N,$,R,g7[T],es[T]),W=H|0,ee=rs(r,o,28)^Hc(r,o,34)^Hc(r,o,39),G=ss(r,o,28)^kc(r,o,34)^kc(r,o,39),F=r&c^r&f^c&f,Y=o&u^o&h^u&h;N=w|0,j=A|0,w=v|0,A=E|0,v=b|0,E=m|0,{h:b,l:m}=hi(d|0,g|0,P|0,W|0),d=f|0,g=h|0,f=c|0,h=u|0,c=r|0,u=o|0;const _=pm(W,G,Y);r=gm(_,P,ee,F),o=_|0}({h:r,l:o}=hi(this.Ah|0,this.Al|0,r|0,o|0)),{h:c,l:u}=hi(this.Bh|0,this.Bl|0,c|0,u|0),{h:f,l:h}=hi(this.Ch|0,this.Cl|0,f|0,h|0),{h:d,l:g}=hi(this.Dh|0,this.Dl|0,d|0,g|0),{h:b,l:m}=hi(this.Eh|0,this.El|0,b|0,m|0),{h:v,l:E}=hi(this.Fh|0,this.Fl|0,v|0,E|0),{h:w,l:A}=hi(this.Gh|0,this.Gl|0,w|0,A|0),{h:N,l:j}=hi(this.Hh|0,this.Hl|0,N|0,j|0),this.set(r,o,c,u,f,h,d,g,b,m,v,E,w,A,N,j)}roundClean(){ni(es,ts)}destroy(){ni(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class m7 extends mm{constructor(){super(48),this.Ah=Ht[0]|0,this.Al=Ht[1]|0,this.Bh=Ht[2]|0,this.Bl=Ht[3]|0,this.Ch=Ht[4]|0,this.Cl=Ht[5]|0,this.Dh=Ht[6]|0,this.Dl=Ht[7]|0,this.Eh=Ht[8]|0,this.El=Ht[9]|0,this.Fh=Ht[10]|0,this.Fl=Ht[11]|0,this.Gh=Ht[12]|0,this.Gl=Ht[13]|0,this.Hh=Ht[14]|0,this.Hl=Ht[15]|0}}const Ft=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class b7 extends mm{constructor(){super(32),this.Ah=Ft[0]|0,this.Al=Ft[1]|0,this.Bh=Ft[2]|0,this.Bl=Ft[3]|0,this.Ch=Ft[4]|0,this.Cl=Ft[5]|0,this.Dh=Ft[6]|0,this.Dl=Ft[7]|0,this.Eh=Ft[8]|0,this.El=Ft[9]|0,this.Fh=Ft[10]|0,this.Fl=Ft[11]|0,this.Gh=Ft[12]|0,this.Gl=Ft[13]|0,this.Hh=Ft[14]|0,this.Hl=Ft[15]|0}}const Mh=ju(()=>new p7),w7=ju(()=>new mm),v7=ju(()=>new m7),E7=ju(()=>new b7),S7=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),mt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),he=new Uint32Array(32);function ns(t,e,n,r,o,c){const u=o[c],f=o[c+1];let h=he[2*t],d=he[2*t+1],g=he[2*e],b=he[2*e+1],m=he[2*n],v=he[2*n+1],E=he[2*r],w=he[2*r+1],A=pm(h,g,u);d=gm(A,d,b,f),h=A|0,{Dh:w,Dl:E}={Dh:w^d,Dl:E^h},{Dh:w,Dl:E}={Dh:P9(w,E),Dl:L9(w)},{h:v,l:m}=hi(v,m,w,E),{Bh:b,Bl:g}={Bh:b^v,Bl:g^m},{Bh:b,Bl:g}={Bh:rs(b,g,24),Bl:ss(b,g,24)},he[2*t]=h,he[2*t+1]=d,he[2*e]=g,he[2*e+1]=b,he[2*n]=m,he[2*n+1]=v,he[2*r]=E,he[2*r+1]=w}function is(t,e,n,r,o,c){const u=o[c],f=o[c+1];let h=he[2*t],d=he[2*t+1],g=he[2*e],b=he[2*e+1],m=he[2*n],v=he[2*n+1],E=he[2*r],w=he[2*r+1],A=pm(h,g,u);d=gm(A,d,b,f),h=A|0,{Dh:w,Dl:E}={Dh:w^d,Dl:E^h},{Dh:w,Dl:E}={Dh:rs(w,E,16),Dl:ss(w,E,16)},{h:v,l:m}=hi(v,m,w,E),{Bh:b,Bl:g}={Bh:b^v,Bl:g^m},{Bh:b,Bl:g}={Bh:Hc(b,g,63),Bl:kc(b,g,63)},he[2*t]=h,he[2*t+1]=d,he[2*e]=g,he[2*e+1]=b,he[2*n]=m,he[2*n+1]=v,he[2*r]=E,he[2*r+1]=w}function _7(t,e={},n,r,o){if(Sr(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:c,salt:u,personalization:f}=e;if(c!==void 0&&(c.length<1||c.length>n))throw new Error("key length must be undefined or 1.."+n);if(u!==void 0&&u.length!==r)throw new Error("salt must be undefined or "+r);if(f!==void 0&&f.length!==o)throw new Error("personalization must be undefined or "+o)}class x7 extends Nh{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Sr(e),Sr(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=_u(this.buffer)}update(e){ps(this),e=gi(e),yi(e);const{blockLen:n,buffer:r,buffer32:o}=this,c=e.length,u=e.byteOffset,f=e.buffer;for(let h=0;h<c;){this.pos===n&&(os(o),this.compress(o,0,!1),os(o),this.pos=0);const d=Math.min(n-this.pos,c-h),g=u+h;if(d===n&&!(g%4)&&h+d<c){const b=new Uint32Array(f,g,Math.floor((c-h)/4));os(b);for(let m=0;h+n<c;m+=o.length,h+=n)this.length+=n,this.compress(b,m,!1);os(b);continue}r.set(e.subarray(h,h+d),this.pos),this.pos+=d,this.length+=d,h+=d}return this}digestInto(e){ps(this),ym(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,ni(this.buffer.subarray(n)),os(r),this.compress(r,0,!0),os(r);const o=_u(e);this.get().forEach((c,u)=>o[u]=lr(c))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:o,destroyed:c,outputLen:u,pos:f}=this;return e||(e=new this.constructor({dkLen:u})),e.set(...this.get()),e.buffer.set(n),e.destroyed=c,e.finished=o,e.length=r,e.pos=f,e.outputLen=u,e}clone(){return this._cloneInto()}}class O7 extends x7{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=mt[0]|0,this.v0h=mt[1]|0,this.v1l=mt[2]|0,this.v1h=mt[3]|0,this.v2l=mt[4]|0,this.v2h=mt[5]|0,this.v3l=mt[6]|0,this.v3h=mt[7]|0,this.v4l=mt[8]|0,this.v4h=mt[9]|0,this.v5l=mt[10]|0,this.v5h=mt[11]|0,this.v6l=mt[12]|0,this.v6h=mt[13]|0,this.v7l=mt[14]|0,this.v7h=mt[15]|0,_7(n,e,64,16,16);let{key:r,personalization:o,salt:c}=e,u=0;if(r!==void 0&&(r=gi(r),u=r.length),this.v0l^=this.outputLen|u<<8|65536|1<<24,c!==void 0){c=gi(c);const f=_u(c);this.v4l^=lr(f[0]),this.v4h^=lr(f[1]),this.v5l^=lr(f[2]),this.v5h^=lr(f[3])}if(o!==void 0){o=gi(o);const f=_u(o);this.v6l^=lr(f[0]),this.v6h^=lr(f[1]),this.v7l^=lr(f[2]),this.v7h^=lr(f[3])}if(r!==void 0){const f=new Uint8Array(this.blockLen);f.set(r),this.update(f)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:o,v2l:c,v2h:u,v3l:f,v3h:h,v4l:d,v4h:g,v5l:b,v5h:m,v6l:v,v6h:E,v7l:w,v7h:A}=this;return[e,n,r,o,c,u,f,h,d,g,b,m,v,E,w,A]}set(e,n,r,o,c,u,f,h,d,g,b,m,v,E,w,A){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=o|0,this.v2l=c|0,this.v2h=u|0,this.v3l=f|0,this.v3h=h|0,this.v4l=d|0,this.v4h=g|0,this.v5l=b|0,this.v5h=m|0,this.v6l=v|0,this.v6h=E|0,this.v7l=w|0,this.v7h=A|0}compress(e,n,r){this.get().forEach((h,d)=>he[d]=h),he.set(mt,16);let{h:o,l:c}=rO(BigInt(this.length));he[24]=mt[8]^c,he[25]=mt[9]^o,r&&(he[28]=~he[28],he[29]=~he[29]);let u=0;const f=S7;for(let h=0;h<12;h++)ns(0,4,8,12,e,n+2*f[u++]),is(0,4,8,12,e,n+2*f[u++]),ns(1,5,9,13,e,n+2*f[u++]),is(1,5,9,13,e,n+2*f[u++]),ns(2,6,10,14,e,n+2*f[u++]),is(2,6,10,14,e,n+2*f[u++]),ns(3,7,11,15,e,n+2*f[u++]),is(3,7,11,15,e,n+2*f[u++]),ns(0,5,10,15,e,n+2*f[u++]),is(0,5,10,15,e,n+2*f[u++]),ns(1,6,11,12,e,n+2*f[u++]),is(1,6,11,12,e,n+2*f[u++]),ns(2,7,8,13,e,n+2*f[u++]),is(2,7,8,13,e,n+2*f[u++]),ns(3,4,9,14,e,n+2*f[u++]),is(3,4,9,14,e,n+2*f[u++]);this.v0l^=he[0]^he[16],this.v0h^=he[1]^he[17],this.v1l^=he[2]^he[18],this.v1h^=he[3]^he[19],this.v2l^=he[4]^he[20],this.v2h^=he[5]^he[21],this.v3l^=he[6]^he[22],this.v3h^=he[7]^he[23],this.v4l^=he[8]^he[24],this.v4h^=he[9]^he[25],this.v5l^=he[10]^he[26],this.v5h^=he[11]^he[27],this.v6l^=he[12]^he[28],this.v6h^=he[13]^he[29],this.v7l^=he[14]^he[30],this.v7h^=he[15]^he[31],ni(he)}destroy(){this.destroyed=!0,ni(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const A7=J9(t=>new O7(t)),D7="https://rpc.walletconnect.org/v1";function mO(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(u7(n)).toString("hex")}async function T7(t,e,n,r,o,c){switch(n.t){case"eip191":return await C7(t,e,n.s);case"eip1271":return await $7(t,e,n.s,r,o,c);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}function C7(t,e,n){const r=hN(n);return ON({payload:mO(e),signature:r}).toLowerCase()===t.toLowerCase()}async function $7(t,e,n,r,o,c){const u=mr(r);if(!u.namespace||!u.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const f="0x1626ba7e",h="0000000000000000000000000000000000000000000000000000000000000040",d=n.substring(2),g=(d.length/2).toString(16).padStart(64,"0"),b=(e.startsWith("0x")?e:mO(e)).substring(2),m=f+b+h+g+d,v=await fetch(`${c||D7}/?chainId=${r}&projectId=${o}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:I7(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:m},"latest"]})}),{result:E}=await v.json();return E?E.slice(0,f.length).toLowerCase()===f.toLowerCase():!1}catch(f){return console.error("isValidEip1271Signature: ",f),!1}}function I7(){return Date.now()+Math.floor(Math.random()*1e3)}function R7(t){const e=atob(t),n=new Uint8Array(e.length);for(let u=0;u<e.length;u++)n[u]=e.charCodeAt(u);const r=n[0];if(r===0)throw new Error("No signatures found");const o=1+r*64;if(n.length<o)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const c=Buffer.from(t,"base64").slice(1,65);return Uu.encode(c)}function B7(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(c=>c.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const o=A7(r,{dkLen:32});return Uu.encode(o)}function JE(t){const e=new Uint8Array(Mh(U7(t)));return Uu.encode(e)}function U7(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function WE(t){const e=Buffer.from(t,"base64"),n=lM(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=tM(n),o=Buffer.from("TX"),c=Buffer.concat([o,Buffer.from(r)]),u=E7(c);return xN.encode(u).replace(/=+$/,"")}function oy(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function N7(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),o=[];o.push(Buffer.from([10])),o.push(oy(e.length)),o.push(e),o.push(Buffer.from([18])),o.push(oy(n.length)),o.push(n),o.push(Buffer.from([26])),o.push(oy(r.length)),o.push(r);const c=Buffer.concat(o),u=Mh(c);return Buffer.from(u).toString("hex").toUpperCase()}function M7(t){var e,n;const r=[];try{if(typeof t=="string")return r.push(t),r;if(typeof t!="object")return r;t!=null&&t.id&&r.push(t.id);const o=(n=(e=t?.capabilities)==null?void 0:e.caip345)==null?void 0:n.transactionHashes;o&&r.push(...o)}catch(o){console.warn("getWalletSendCallsHashes failed: ",o)}return r}var j7=Object.defineProperty,z7=Object.defineProperties,q7=Object.getOwnPropertyDescriptors,eS=Object.getOwnPropertySymbols,P7=Object.prototype.hasOwnProperty,L7=Object.prototype.propertyIsEnumerable,tS=(t,e,n)=>e in t?j7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H7=(t,e)=>{for(var n in e||(e={}))P7.call(e,n)&&tS(t,n,e[n]);if(eS)for(var n of eS(e))L7.call(e,n)&&tS(t,n,e[n]);return t},k7=(t,e)=>z7(t,q7(e));const F7="did:pkh:",bm=t=>t?.split(":"),V7=t=>{const e=t&&bm(t);if(e)return t.includes(F7)?e[3]:e[1]},l0=t=>{const e=t&&bm(t);if(e)return e[2]+":"+e[3]},dh=t=>{const e=t&&bm(t);if(e)return e.pop()};async function nS(t){const{cacao:e,projectId:n}=t,{s:r,p:o}=e,c=bO(o,o.iss),u=dh(o.iss);return await T7(u,c,r,l0(o.iss),n)}const bO=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=dh(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let o=t.statement||void 0;const c=`URI: ${t.aud||t.uri}`,u=`Version: ${t.version}`,f=`Chain ID: ${V7(e)}`,h=`Nonce: ${t.nonce}`,d=`Issued At: ${t.iat}`,g=t.exp?`Expiration Time: ${t.exp}`:void 0,b=t.nbf?`Not Before: ${t.nbf}`:void 0,m=t.requestId?`Request ID: ${t.requestId}`:void 0,v=t.resources?`Resources:${t.resources.map(w=>`
- ${w}`).join("")}`:void 0,E=Gf(t.resources);if(E){const w=xu(E);o=ej(o,w)}return[n,r,"",o,"",c,u,f,h,d,g,b,m,v].filter(w=>w!=null).join(`
`)};function K7(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function G7(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function no(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(o=>{const c=r[o];if(!Array.isArray(c))throw new Error(`Ability limits ${o} must be an array of objects, found: ${c}`);if(!c.length)throw new Error(`Value of ${o} is empty array, must be an array with objects`);c.forEach(u=>{if(typeof u!="object")throw new Error(`Ability limits (${o}) must be an array of objects, found: ${u}`)})})})}function Y7(t,e,n,r={}){return n?.sort((o,c)=>o.localeCompare(c)),{att:{[t]:Q7(e,n,r)}}}function Q7(t,e,n={}){e=e?.sort((o,c)=>o.localeCompare(c));const r=e.map(o=>({[`${t}/${o}`]:[n]}));return Object.assign({},...r)}function wO(t){return no(t),`urn:recap:${K7(t).replace(/=/g,"")}`}function xu(t){const e=G7(t.replace("urn:recap:",""));return no(e),e}function Z7(t,e,n){const r=Y7(t,e,n);return wO(r)}function X7(t){return t&&t.includes("urn:recap:")}function J7(t,e){const n=xu(t),r=xu(e),o=W7(n,r);return wO(o)}function W7(t,e){no(t),no(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((o,c)=>o.localeCompare(c)),r={att:{}};return n.forEach(o=>{var c,u;Object.keys(((c=t.att)==null?void 0:c[o])||{}).concat(Object.keys(((u=e.att)==null?void 0:u[o])||{})).sort((f,h)=>f.localeCompare(h)).forEach(f=>{var h,d;r.att[o]=k7(H7({},r.att[o]),{[f]:((h=t.att[o])==null?void 0:h[f])||((d=e.att[o])==null?void 0:d[f])})})}),r}function ej(t="",e){no(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let o=0;Object.keys(e.att).forEach(f=>{const h=Object.keys(e.att[f]).map(b=>({ability:b.split("/")[0],action:b.split("/")[1]}));h.sort((b,m)=>b.action.localeCompare(m.action));const d={};h.forEach(b=>{d[b.ability]||(d[b.ability]=[]),d[b.ability].push(b.action)});const g=Object.keys(d).map(b=>(o++,`(${o}) '${b}': '${d[b].join("', '")}' for '${f}'.`));r.push(g.join(", ").replace(".,","."))});const c=r.join(" "),u=`${n}${c}`;return`${t?t+" ":""}${u}`}function iS(t){var e;const n=xu(t);no(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(o=>o.split("/")[1]):[]}function rS(t){const e=xu(t);no(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(o=>{var c;(c=o?.[0])!=null&&c.chains&&n.push(o[0].chains)})}),[...new Set(n.flat())]}function Gf(t){if(!t)return;const e=t?.[t.length-1];return X7(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function vO(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function f0(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function ay(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function dn(t,...e){if(!vO(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function sS(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function tj(t,e){dn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function hs(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function _a(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function nj(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const ij=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function rj(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function h0(t){if(typeof t=="string")t=rj(t);else if(vO(t))t=d0(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function sj(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function oj(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const aj=(t,e)=>{function n(r,...o){if(dn(r),!ij)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const d=o[0];if(!d)throw new Error("nonce / iv required");t.varSizeNonce?dn(d):dn(d,t.nonceLength)}const c=t.tagLength;c&&o[1]!==void 0&&dn(o[1]);const u=e(r,...o),f=(d,g)=>{if(g!==void 0){if(d!==2)throw new Error("cipher output not supported");dn(g)}};let h=!1;return{encrypt(d,g){if(h)throw new Error("cannot encrypt() twice with same key + nonce");return h=!0,dn(d),f(u.encrypt.length,g),u.encrypt(d,g)},decrypt(d,g){if(dn(d),c&&d.length<c)throw new Error("invalid ciphertext length: smaller than tagLength="+c);return f(u.decrypt.length,g),u.decrypt(d,g)}}}return Object.assign(n,t),n};function oS(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!uj(e))throw new Error("invalid output, must be aligned");return e}function aS(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const o=BigInt(32),c=BigInt(4294967295),u=Number(n>>o&c),f=Number(n&c);t.setUint32(e+4,u,r),t.setUint32(e+0,f,r)}function cj(t,e,n){f0(n);const r=new Uint8Array(16),o=nj(r);return aS(o,0,BigInt(e),n),aS(o,8,BigInt(t),n),r}function uj(t){return t.byteOffset%4===0}function d0(t){return Uint8Array.from(t)}const EO=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),lj=EO("expand 16-byte k"),fj=EO("expand 32-byte k"),hj=hs(lj),dj=hs(fj);function Ue(t,e){return t<<e|t>>>32-e}function p0(t){return t.byteOffset%4===0}const Rf=64,pj=16,SO=2**32-1,cS=new Uint32Array;function gj(t,e,n,r,o,c,u,f){const h=o.length,d=new Uint8Array(Rf),g=hs(d),b=p0(o)&&p0(c),m=b?hs(o):cS,v=b?hs(c):cS;for(let E=0;E<h;u++){if(t(e,n,r,g,u,f),u>=SO)throw new Error("arx: counter overflow");const w=Math.min(Rf,h-E);if(b&&w===Rf){const A=E/4;if(E%4!==0)throw new Error("arx: invalid block position");for(let N=0,j;N<pj;N++)j=A+N,v[j]=m[j]^g[N];E+=Rf;continue}for(let A=0,N;A<w;A++)N=E+A,c[N]=o[N]^d[A];E+=w}}function yj(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:c,rounds:u}=sj({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return ay(o),ay(u),f0(c),f0(n),(f,h,d,g,b=0)=>{dn(f),dn(h),dn(d);const m=d.length;if(g===void 0&&(g=new Uint8Array(m)),dn(g),ay(b),b<0||b>=SO)throw new Error("arx: counter overflow");if(g.length<m)throw new Error(`arx: output (${g.length}) is shorter than data (${m})`);const v=[];let E=f.length,w,A;if(E===32)v.push(w=d0(f)),A=dj;else if(E===16&&n)w=new Uint8Array(32),w.set(f),w.set(f,16),A=hj,v.push(w);else throw new Error(`arx: invalid 32-byte key, got length=${E}`);p0(h)||v.push(h=d0(h));const N=hs(w);if(r){if(h.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(A,N,hs(h.subarray(0,16)),N),h=h.subarray(16)}const j=16-o;if(j!==h.length)throw new Error(`arx: nonce must be ${j} or 16 bytes`);if(j!==12){const $=new Uint8Array(12);$.set(h,c?0:12-h.length),h=$,v.push(h)}const T=hs(h);return gj(t,A,N,T,d,g,b,u),_a(...v),g}}const Ut=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class mj{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=h0(e),dn(e,32);const n=Ut(e,0),r=Ut(e,2),o=Ut(e,4),c=Ut(e,6),u=Ut(e,8),f=Ut(e,10),h=Ut(e,12),d=Ut(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|o<<6)&7939,this.r[3]=(o>>>7|c<<9)&8191,this.r[4]=(c>>>4|u<<12)&255,this.r[5]=u>>>1&8190,this.r[6]=(u>>>14|f<<2)&8191,this.r[7]=(f>>>11|h<<5)&8065,this.r[8]=(h>>>8|d<<8)&8191,this.r[9]=d>>>5&127;for(let g=0;g<8;g++)this.pad[g]=Ut(e,16+2*g)}process(e,n,r=!1){const o=r?0:2048,{h:c,r:u}=this,f=u[0],h=u[1],d=u[2],g=u[3],b=u[4],m=u[5],v=u[6],E=u[7],w=u[8],A=u[9],N=Ut(e,n+0),j=Ut(e,n+2),T=Ut(e,n+4),$=Ut(e,n+6),D=Ut(e,n+8),R=Ut(e,n+10),U=Ut(e,n+12),H=Ut(e,n+14);let P=c[0]+(N&8191),W=c[1]+((N>>>13|j<<3)&8191),ee=c[2]+((j>>>10|T<<6)&8191),G=c[3]+((T>>>7|$<<9)&8191),F=c[4]+(($>>>4|D<<12)&8191),Y=c[5]+(D>>>1&8191),_=c[6]+((D>>>14|R<<2)&8191),S=c[7]+((R>>>11|U<<5)&8191),C=c[8]+((U>>>8|H<<8)&8191),z=c[9]+(H>>>5|o),M=0,L=M+P*f+W*(5*A)+ee*(5*w)+G*(5*E)+F*(5*v);M=L>>>13,L&=8191,L+=Y*(5*m)+_*(5*b)+S*(5*g)+C*(5*d)+z*(5*h),M+=L>>>13,L&=8191;let x=M+P*h+W*f+ee*(5*A)+G*(5*w)+F*(5*E);M=x>>>13,x&=8191,x+=Y*(5*v)+_*(5*m)+S*(5*b)+C*(5*g)+z*(5*d),M+=x>>>13,x&=8191;let B=M+P*d+W*h+ee*f+G*(5*A)+F*(5*w);M=B>>>13,B&=8191,B+=Y*(5*E)+_*(5*v)+S*(5*m)+C*(5*b)+z*(5*g),M+=B>>>13,B&=8191;let V=M+P*g+W*d+ee*h+G*f+F*(5*A);M=V>>>13,V&=8191,V+=Y*(5*w)+_*(5*E)+S*(5*v)+C*(5*m)+z*(5*b),M+=V>>>13,V&=8191;let q=M+P*b+W*g+ee*d+G*h+F*f;M=q>>>13,q&=8191,q+=Y*(5*A)+_*(5*w)+S*(5*E)+C*(5*v)+z*(5*m),M+=q>>>13,q&=8191;let Q=M+P*m+W*b+ee*g+G*d+F*h;M=Q>>>13,Q&=8191,Q+=Y*f+_*(5*A)+S*(5*w)+C*(5*E)+z*(5*v),M+=Q>>>13,Q&=8191;let ie=M+P*v+W*m+ee*b+G*g+F*d;M=ie>>>13,ie&=8191,ie+=Y*h+_*f+S*(5*A)+C*(5*w)+z*(5*E),M+=ie>>>13,ie&=8191;let oe=M+P*E+W*v+ee*m+G*b+F*g;M=oe>>>13,oe&=8191,oe+=Y*d+_*h+S*f+C*(5*A)+z*(5*w),M+=oe>>>13,oe&=8191;let de=M+P*w+W*E+ee*v+G*m+F*b;M=de>>>13,de&=8191,de+=Y*g+_*d+S*h+C*f+z*(5*A),M+=de>>>13,de&=8191;let ue=M+P*A+W*w+ee*E+G*v+F*m;M=ue>>>13,ue&=8191,ue+=Y*b+_*g+S*d+C*h+z*f,M+=ue>>>13,ue&=8191,M=(M<<2)+M|0,M=M+L|0,L=M&8191,M=M>>>13,x+=M,c[0]=L,c[1]=x,c[2]=B,c[3]=V,c[4]=q,c[5]=Q,c[6]=ie,c[7]=oe,c[8]=de,c[9]=ue}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let o=e[1]>>>13;e[1]&=8191;for(let f=2;f<10;f++)e[f]+=o,o=e[f]>>>13,e[f]&=8191;e[0]+=o*5,o=e[0]>>>13,e[0]&=8191,e[1]+=o,o=e[1]>>>13,e[1]&=8191,e[2]+=o,r[0]=e[0]+5,o=r[0]>>>13,r[0]&=8191;for(let f=1;f<10;f++)r[f]=e[f]+o,o=r[f]>>>13,r[f]&=8191;r[9]-=8192;let c=(o^1)-1;for(let f=0;f<10;f++)r[f]&=c;c=~c;for(let f=0;f<10;f++)e[f]=e[f]&c|r[f];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let u=e[0]+n[0];e[0]=u&65535;for(let f=1;f<8;f++)u=(e[f]+n[f]|0)+(u>>>16)|0,e[f]=u&65535;_a(r)}update(e){sS(this),e=h0(e),dn(e);const{buffer:n,blockLen:r}=this,o=e.length;for(let c=0;c<o;){const u=Math.min(r-this.pos,o-c);if(u===r){for(;r<=o-c;c+=r)this.process(e,c);continue}n.set(e.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){_a(this.h,this.r,this.buffer,this.pad)}digestInto(e){sS(this),tj(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:o}=this;if(o){for(n[o++]=1;o<16;o++)n[o]=0;this.process(n,0,!0)}this.finalize();let c=0;for(let u=0;u<8;u++)e[c++]=r[u]>>>0,e[c++]=r[u]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function bj(t){const e=(r,o)=>t(o).update(h0(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const wj=bj(t=>new mj(t));function vj(t,e,n,r,o,c=20){let u=t[0],f=t[1],h=t[2],d=t[3],g=e[0],b=e[1],m=e[2],v=e[3],E=e[4],w=e[5],A=e[6],N=e[7],j=o,T=n[0],$=n[1],D=n[2],R=u,U=f,H=h,P=d,W=g,ee=b,G=m,F=v,Y=E,_=w,S=A,C=N,z=j,M=T,L=$,x=D;for(let V=0;V<c;V+=2)R=R+W|0,z=Ue(z^R,16),Y=Y+z|0,W=Ue(W^Y,12),R=R+W|0,z=Ue(z^R,8),Y=Y+z|0,W=Ue(W^Y,7),U=U+ee|0,M=Ue(M^U,16),_=_+M|0,ee=Ue(ee^_,12),U=U+ee|0,M=Ue(M^U,8),_=_+M|0,ee=Ue(ee^_,7),H=H+G|0,L=Ue(L^H,16),S=S+L|0,G=Ue(G^S,12),H=H+G|0,L=Ue(L^H,8),S=S+L|0,G=Ue(G^S,7),P=P+F|0,x=Ue(x^P,16),C=C+x|0,F=Ue(F^C,12),P=P+F|0,x=Ue(x^P,8),C=C+x|0,F=Ue(F^C,7),R=R+ee|0,x=Ue(x^R,16),S=S+x|0,ee=Ue(ee^S,12),R=R+ee|0,x=Ue(x^R,8),S=S+x|0,ee=Ue(ee^S,7),U=U+G|0,z=Ue(z^U,16),C=C+z|0,G=Ue(G^C,12),U=U+G|0,z=Ue(z^U,8),C=C+z|0,G=Ue(G^C,7),H=H+F|0,M=Ue(M^H,16),Y=Y+M|0,F=Ue(F^Y,12),H=H+F|0,M=Ue(M^H,8),Y=Y+M|0,F=Ue(F^Y,7),P=P+W|0,L=Ue(L^P,16),_=_+L|0,W=Ue(W^_,12),P=P+W|0,L=Ue(L^P,8),_=_+L|0,W=Ue(W^_,7);let B=0;r[B++]=u+R|0,r[B++]=f+U|0,r[B++]=h+H|0,r[B++]=d+P|0,r[B++]=g+W|0,r[B++]=b+ee|0,r[B++]=m+G|0,r[B++]=v+F|0,r[B++]=E+Y|0,r[B++]=w+_|0,r[B++]=A+S|0,r[B++]=N+C|0,r[B++]=j+z|0,r[B++]=T+M|0,r[B++]=$+L|0,r[B++]=D+x|0}const Ej=yj(vj,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Sj=new Uint8Array(16),uS=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Sj.subarray(n))},_j=new Uint8Array(32);function lS(t,e,n,r,o){const c=t(e,n,_j),u=wj.create(c);o&&uS(u,o),uS(u,r);const f=cj(r.length,o?o.length:0,!0);u.update(f);const h=u.digest();return _a(c,f),h}const xj=t=>(e,n,r)=>({encrypt(o,c){const u=o.length;c=oS(u+16,c,!1),c.set(o);const f=c.subarray(0,-16);t(e,n,f,f,1);const h=lS(t,e,n,f,r);return c.set(h,u),_a(h),c},decrypt(o,c){c=oS(o.length-16,c,!1);const u=o.subarray(0,-16),f=o.subarray(-16),h=lS(t,e,n,u,r);if(!oj(f,h))throw new Error("invalid tag");return c.set(o.subarray(0,-16)),t(e,n,c,c,1),_a(h),c}}),_O=aj({blockSize:64,nonceLength:12,tagLength:16},xj(Ej));let xO=class extends Nh{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Uh(e);const r=gi(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,c=new Uint8Array(o);c.set(r.length>o?e.create().update(r).digest():r);for(let u=0;u<c.length;u++)c[u]^=54;this.iHash.update(c),this.oHash=e.create();for(let u=0;u<c.length;u++)c[u]^=106;this.oHash.update(c),ni(c)}update(e){return ps(this),this.iHash.update(e),this}digestInto(e){ps(this),yi(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:c,blockLen:u,outputLen:f}=this;return e=e,e.finished=o,e.destroyed=c,e.blockLen=u,e.outputLen=f,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const jh=(t,e,n)=>new xO(t,e).update(n).digest();jh.create=(t,e)=>new xO(t,e);function Oj(t,e,n){return Uh(t),n===void 0&&(n=new Uint8Array(t.outputLen)),jh(t,gi(n),gi(e))}const cy=Uint8Array.from([0]),fS=Uint8Array.of();function Aj(t,e,n,r=32){Uh(t),Sr(r);const o=t.outputLen;if(r>255*o)throw new Error("Length should be <= 255*HashLen");const c=Math.ceil(r/o);n===void 0&&(n=fS);const u=new Uint8Array(c*o),f=jh.create(t,e),h=f._cloneInto(),d=new Uint8Array(f.outputLen);for(let g=0;g<c;g++)cy[0]=g+1,h.update(g===0?fS:d).update(n).update(cy).digestInto(d),u.set(d,o*g),f._cloneInto(h);return f.destroy(),h.destroy(),ni(d,cy),u.slice(0,r)}const Dj=(t,e,n,r,o)=>Aj(t,Oj(t,e,n),r,o),zh=Mh,wm=BigInt(0),g0=BigInt(1);function ph(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function Ys(t,e,n=""){const r=Bh(t),o=t?.length,c=e!==void 0;if(!r||c&&o!==e){const u=n&&`"${n}" `,f=c?` of length ${e}`:"",h=r?`length=${o}`:`type=${typeof t}`;throw new Error(u+"expected Uint8Array"+f+", got "+h)}return t}function Bf(t){const e=t.toString(16);return e.length&1?"0"+e:e}function OO(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?wm:BigInt("0x"+t)}function qh(t){return OO(pa(t))}function gh(t){return yi(t),OO(pa(Uint8Array.from(t).reverse()))}function vm(t,e){return hh(t.toString(16).padStart(e*2,"0"))}function Em(t,e){return vm(t,e).reverse()}function Gt(t,e,n){let r;if(typeof e=="string")try{r=hh(e)}catch(c){throw new Error(t+" must be hex string or Uint8Array, cause: "+c)}else if(Bh(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(t+" of length "+n+" expected, got "+o);return r}const uy=t=>typeof t=="bigint"&&wm<=t;function Tj(t,e,n){return uy(t)&&uy(e)&&uy(n)&&e<=t&&t<n}function y0(t,e,n,r){if(!Tj(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function AO(t){let e;for(e=0;t>wm;t>>=g0,e+=1);return e}const zu=t=>(g0<<BigInt(t))-g0;function Cj(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=m=>new Uint8Array(m),o=m=>Uint8Array.of(m);let c=r(t),u=r(t),f=0;const h=()=>{c.fill(1),u.fill(0),f=0},d=(...m)=>n(u,c,...m),g=(m=r(0))=>{u=d(o(0),m),c=d(),m.length!==0&&(u=d(o(1),m),c=d())},b=()=>{if(f++>=1e3)throw new Error("drbg: tried 1000 values");let m=0;const v=[];for(;m<e;){c=d();const E=c.slice();v.push(E),m+=c.length}return cs(...v)};return(m,v)=>{h(),g(m);let E;for(;!(E=v(b()));)g();return h(),E}}function Ph(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(o,c,u){const f=t[o];if(u&&f===void 0)return;const h=typeof f;if(h!==c||f===null)throw new Error(`param "${o}" is invalid: expected ${c}, got ${h}`)}Object.entries(e).forEach(([o,c])=>r(o,c,!1)),Object.entries(n).forEach(([o,c])=>r(o,c,!0))}function hS(t){const e=new WeakMap;return(n,...r)=>{const o=e.get(n);if(o!==void 0)return o;const c=t(n,...r);return e.set(n,c),c}}const yn=BigInt(0),Jt=BigInt(1),Qs=BigInt(2),DO=BigInt(3),TO=BigInt(4),CO=BigInt(5),$j=BigInt(7),$O=BigInt(8),Ij=BigInt(9),IO=BigInt(16);function Rn(t,e){const n=t%e;return n>=yn?n:e+n}function fi(t,e,n){let r=t;for(;e-- >yn;)r*=r,r%=n;return r}function dS(t,e){if(t===yn)throw new Error("invert: expected non-zero number");if(e<=yn)throw new Error("invert: expected positive modulus, got "+e);let n=Rn(t,e),r=e,o=yn,c=Jt;for(;n!==yn;){const u=r/n,f=r%n,h=o-c*u;r=n,n=f,o=c,c=h}if(r!==Jt)throw new Error("invert: does not exist");return Rn(o,e)}function Sm(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function RO(t,e){const n=(t.ORDER+Jt)/TO,r=t.pow(e,n);return Sm(t,r,e),r}function Rj(t,e){const n=(t.ORDER-CO)/$O,r=t.mul(e,Qs),o=t.pow(r,n),c=t.mul(e,o),u=t.mul(t.mul(c,Qs),o),f=t.mul(c,t.sub(u,t.ONE));return Sm(t,f,e),f}function Bj(t){const e=ys(t),n=BO(t),r=n(e,e.neg(e.ONE)),o=n(e,r),c=n(e,e.neg(r)),u=(t+$j)/IO;return(f,h)=>{let d=f.pow(h,u),g=f.mul(d,r);const b=f.mul(d,o),m=f.mul(d,c),v=f.eql(f.sqr(g),h),E=f.eql(f.sqr(b),h);d=f.cmov(d,g,v),g=f.cmov(m,b,E);const w=f.eql(f.sqr(g),h),A=f.cmov(d,g,w);return Sm(f,A,h),A}}function BO(t){if(t<DO)throw new Error("sqrt is not defined for small field");let e=t-Jt,n=0;for(;e%Qs===yn;)e/=Qs,n++;let r=Qs;const o=ys(t);for(;pS(o,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return RO;let c=o.pow(r,e);const u=(e+Jt)/Qs;return function(f,h){if(f.is0(h))return h;if(pS(f,h)!==1)throw new Error("Cannot find square root");let d=n,g=f.mul(f.ONE,c),b=f.pow(h,e),m=f.pow(h,u);for(;!f.eql(b,f.ONE);){if(f.is0(b))return f.ZERO;let v=1,E=f.sqr(b);for(;!f.eql(E,f.ONE);)if(v++,E=f.sqr(E),v===d)throw new Error("Cannot find square root");const w=Jt<<BigInt(d-v-1),A=f.pow(g,w);d=v,g=f.sqr(A),b=f.mul(b,g),m=f.mul(m,A)}return m}}function Uj(t){return t%TO===DO?RO:t%$O===CO?Rj:t%IO===Ij?Bj(t):BO(t)}const Nj=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Mj(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Nj.reduce((r,o)=>(r[o]="function",r),e);return Ph(t,n),t}function jj(t,e,n){if(n<yn)throw new Error("invalid exponent, negatives unsupported");if(n===yn)return t.ONE;if(n===Jt)return e;let r=t.ONE,o=e;for(;n>yn;)n&Jt&&(r=t.mul(r,o)),o=t.sqr(o),n>>=Jt;return r}function UO(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),o=e.reduce((u,f,h)=>t.is0(f)?u:(r[h]=u,t.mul(u,f)),t.ONE),c=t.inv(o);return e.reduceRight((u,f,h)=>t.is0(f)?u:(r[h]=t.mul(u,r[h]),t.mul(u,f)),c),r}function pS(t,e){const n=(t.ORDER-Jt)/Qs,r=t.pow(e,n),o=t.eql(r,t.ONE),c=t.eql(r,t.ZERO),u=t.eql(r,t.neg(t.ONE));if(!o&&!c&&!u)throw new Error("invalid Legendre symbol result");return o?1:c?0:-1}function NO(t,e){e!==void 0&&Sr(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ys(t,e,n=!1,r={}){if(t<=yn)throw new Error("invalid field: expected ORDER > 0, got "+t);let o,c,u=!1,f;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const m=e;m.BITS&&(o=m.BITS),m.sqrt&&(c=m.sqrt),typeof m.isLE=="boolean"&&(n=m.isLE),typeof m.modFromBytes=="boolean"&&(u=m.modFromBytes),f=m.allowedLengths}else typeof e=="number"&&(o=e),r.sqrt&&(c=r.sqrt);const{nBitLength:h,nByteLength:d}=NO(t,o);if(d>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let g;const b=Object.freeze({ORDER:t,isLE:n,BITS:h,BYTES:d,MASK:zu(h),ZERO:yn,ONE:Jt,allowedLengths:f,create:m=>Rn(m,t),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return yn<=m&&m<t},is0:m=>m===yn,isValidNot0:m=>!b.is0(m)&&b.isValid(m),isOdd:m=>(m&Jt)===Jt,neg:m=>Rn(-m,t),eql:(m,v)=>m===v,sqr:m=>Rn(m*m,t),add:(m,v)=>Rn(m+v,t),sub:(m,v)=>Rn(m-v,t),mul:(m,v)=>Rn(m*v,t),pow:(m,v)=>jj(b,m,v),div:(m,v)=>Rn(m*dS(v,t),t),sqrN:m=>m*m,addN:(m,v)=>m+v,subN:(m,v)=>m-v,mulN:(m,v)=>m*v,inv:m=>dS(m,t),sqrt:c||(m=>(g||(g=Uj(t)),g(b,m))),toBytes:m=>n?Em(m,d):vm(m,d),fromBytes:(m,v=!0)=>{if(f){if(!f.includes(m.length)||m.length>d)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+m.length);const w=new Uint8Array(d);w.set(m,n?0:w.length-m.length),m=w}if(m.length!==d)throw new Error("Field.fromBytes: expected "+d+" bytes, got "+m.length);let E=n?gh(m):qh(m);if(u&&(E=Rn(E,t)),!v&&!b.isValid(E))throw new Error("invalid field element: outside of range 0..ORDER");return E},invertBatch:m=>UO(b,m),cmov:(m,v,E)=>E?v:m});return Object.freeze(b)}function MO(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function jO(t){const e=MO(t);return e+Math.ceil(e/2)}function zj(t,e,n=!1){const r=t.length,o=MO(e),c=jO(e);if(r<16||r<c||r>1024)throw new Error("expected "+c+"-1024 bytes of input, got "+r);const u=n?gh(t):qh(t),f=Rn(u,e-Jt)+Jt;return n?Em(f,o):vm(f,o)}const xa=BigInt(0),Zs=BigInt(1);function yh(t,e){const n=e.negate();return t?n:e}function ly(t,e){const n=UO(t.Fp,e.map(r=>r.Z));return e.map((r,o)=>t.fromAffine(r.toAffine(n[o])))}function zO(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function fy(t,e){zO(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),o=2**t,c=zu(t),u=BigInt(t);return{windows:n,windowSize:r,mask:c,maxNumber:o,shiftBy:u}}function gS(t,e,n){const{windowSize:r,mask:o,maxNumber:c,shiftBy:u}=n;let f=Number(t&o),h=t>>u;f>r&&(f-=c,h+=Zs);const d=e*r,g=d+Math.abs(f)-1,b=f===0,m=f<0,v=e%2!==0;return{nextN:h,offset:g,isZero:b,isNeg:m,isNegF:v,offsetF:d}}function qj(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Pj(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const hy=new WeakMap,qO=new WeakMap;function dy(t){return qO.get(t)||1}function yS(t){if(t!==xa)throw new Error("invalid wNAF")}class Lj{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let o=e;for(;n>xa;)n&Zs&&(r=r.add(o)),o=o.double(),n>>=Zs;return r}precomputeWindow(e,n){const{windows:r,windowSize:o}=fy(n,this.bits),c=[];let u=e,f=u;for(let h=0;h<r;h++){f=u,c.push(f);for(let d=1;d<o;d++)f=f.add(u),c.push(f);u=f.double()}return c}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let o=this.ZERO,c=this.BASE;const u=fy(e,this.bits);for(let f=0;f<u.windows;f++){const{nextN:h,offset:d,isZero:g,isNeg:b,isNegF:m,offsetF:v}=gS(r,f,u);r=h,g?c=c.add(yh(m,n[v])):o=o.add(yh(b,n[d]))}return yS(r),{p:o,f:c}}wNAFUnsafe(e,n,r,o=this.ZERO){const c=fy(e,this.bits);for(let u=0;u<c.windows&&r!==xa;u++){const{nextN:f,offset:h,isZero:d,isNeg:g}=gS(r,u,c);if(r=f,!d){const b=n[h];o=o.add(g?b.negate():b)}}return yS(r),o}getPrecomputes(e,n,r){let o=hy.get(n);return o||(o=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(o=r(o)),hy.set(n,o))),o}cached(e,n,r){const o=dy(e);return this.wNAF(o,this.getPrecomputes(o,e,r),n)}unsafe(e,n,r,o){const c=dy(e);return c===1?this._unsafeLadder(e,n,o):this.wNAFUnsafe(c,this.getPrecomputes(c,e,r),n,o)}createCache(e,n){zO(n,this.bits),qO.set(e,n),hy.delete(e)}hasCache(e){return dy(e)!==1}}function Hj(t,e,n,r){let o=e,c=t.ZERO,u=t.ZERO;for(;n>xa||r>xa;)n&Zs&&(c=c.add(o)),r&Zs&&(u=u.add(o)),o=o.double(),n>>=Zs,r>>=Zs;return{p1:c,p2:u}}function kj(t,e,n,r){qj(n,t),Pj(r,e);const o=n.length,c=r.length;if(o!==c)throw new Error("arrays of points and scalars must have equal length");const u=t.ZERO,f=AO(BigInt(o));let h=1;f>12?h=f-3:f>4?h=f-2:f>0&&(h=2);const d=zu(h),g=new Array(Number(d)+1).fill(u),b=Math.floor((e.BITS-1)/h)*h;let m=u;for(let v=b;v>=0;v-=h){g.fill(u);for(let w=0;w<c;w++){const A=r[w],N=Number(A>>BigInt(v)&d);g[N]=g[N].add(n[w])}let E=u;for(let w=g.length-1,A=u;w>0;w--)A=A.add(g[w]),E=E.add(A);if(m=m.add(E),v!==0)for(let w=0;w<h;w++)m=m.double()}return m}function mS(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Mj(e),e}else return ys(t,{isLE:n})}function Fj(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const f of["p","n","h"]){const h=e[f];if(!(typeof h=="bigint"&&h>xa))throw new Error(`CURVE.${f} must be positive bigint`)}const o=mS(e.p,n.Fp,r),c=mS(e.n,n.Fn,r),u=["Gx","Gy","a","b"];for(const f of u)if(!o.isValid(e[f]))throw new Error(`CURVE.${f} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:o,Fn:c}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),uO("HashToScalar-");const Nc=BigInt(0),na=BigInt(1),Uf=BigInt(2);function Vj(t){return Ph(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function Kj(t){const e=Vj(t),{P:n,type:r,adjustScalarBytes:o,powPminus2:c,randomBytes:u}=e,f=r==="x25519";if(!f&&r!=="x448")throw new Error("invalid type");const h=u||ao,d=f?255:448,g=f?32:56,b=BigInt(f?9:5),m=BigInt(f?121665:39081),v=f?Uf**BigInt(254):Uf**BigInt(447),E=f?BigInt(8)*Uf**BigInt(251)-na:BigInt(4)*Uf**BigInt(445)-na,w=v+E+na,A=G=>Rn(G,n),N=j(b);function j(G){return Em(A(G),g)}function T(G){const F=Gt("u coordinate",G,g);return f&&(F[31]&=127),A(gh(F))}function $(G){return gh(o(Gt("scalar",G,g)))}function D(G,F){const Y=H(T(F),$(G));if(Y===Nc)throw new Error("invalid private or public key received");return j(Y)}function R(G){return D(G,N)}function U(G,F,Y){const _=A(G*(F-Y));return F=A(F-_),Y=A(Y+_),{x_2:F,x_3:Y}}function H(G,F){y0("u",G,Nc,n),y0("scalar",F,v,w);const Y=F,_=G;let S=na,C=Nc,z=G,M=na,L=Nc;for(let B=BigInt(d-1);B>=Nc;B--){const V=Y>>B&na;L^=V,{x_2:S,x_3:z}=U(L,S,z),{x_2:C,x_3:M}=U(L,C,M),L=V;const q=S+C,Q=A(q*q),ie=S-C,oe=A(ie*ie),de=Q-oe,ue=z+M,ye=z-M,xe=A(ye*q),ze=A(ue*ie),We=xe+ze,He=xe-ze;z=A(We*We),M=A(_*A(He*He)),S=A(Q*oe),C=A(de*(Q+A(m*de)))}({x_2:S,x_3:z}=U(L,S,z)),{x_2:C,x_3:M}=U(L,C,M);const x=c(C);return A(S*x)}const P={secretKey:g,publicKey:g,seed:g},W=(G=h(g))=>(yi(G,P.seed),G);function ee(G){const F=W(G);return{secretKey:F,publicKey:R(F)}}return{keygen:ee,getSharedSecret:(G,F)=>D(G,F),getPublicKey:G=>R(G),scalarMult:D,scalarMultBase:R,utils:{randomSecretKey:W,randomPrivateKey:W},GuBytes:N.slice(),lengths:P}}const Gj=BigInt(1),bS=BigInt(2),Yj=BigInt(3),Qj=BigInt(5);BigInt(8);const PO=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Zj={p:PO,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Xj(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),c=PO,u=t*t%c*t%c,f=fi(u,bS,c)*u%c,h=fi(f,Gj,c)*t%c,d=fi(h,Qj,c)*h%c,g=fi(d,e,c)*d%c,b=fi(g,n,c)*g%c,m=fi(b,r,c)*b%c,v=fi(m,o,c)*m%c,E=fi(v,o,c)*m%c,w=fi(E,e,c)*d%c;return{pow_p_5_8:fi(w,bS,c)*t%c,b2:u}}function Jj(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Wj=ys(Zj.p,{isLE:!0}),m0=(()=>{const t=Wj.ORDER;return Kj({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=Xj(e);return Rn(fi(n,Yj,t)*r,t)},adjustScalarBytes:Jj})})(),wS=(t,e)=>(t+(t>=0?e:-e)/LO)/e;function ez(t,e,n){const[[r,o],[c,u]]=e,f=wS(u*t,n),h=wS(-o*t,n);let d=t-f*r-h*c,g=-f*o-h*u;const b=d<yr,m=g<yr;b&&(d=-d),m&&(g=-g);const v=zu(Math.ceil(AO(n)/2))+ga;if(d<yr||d>=v||g<yr||g>=v)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:b,k1:d,k2neg:m,k2:g}}function b0(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function py(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return ph(n.lowS,"lowS"),ph(n.prehash,"prehash"),n.format!==void 0&&b0(n.format),n}class tz extends Error{constructor(e=""){super(e)}}const pr={Err:tz,_tlv:{encode:(t,e)=>{const{Err:n}=pr;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,o=Bf(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const c=r>127?Bf(o.length/2|128):"";return Bf(t)+c+o+e},decode(t,e){const{Err:n}=pr;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const o=e[r++],c=!!(o&128);let u=0;if(!c)u=o;else{const h=o&127;if(!h)throw new n("tlv.decode(long): indefinite length not supported");if(h>4)throw new n("tlv.decode(long): byte length is too big");const d=e.subarray(r,r+h);if(d.length!==h)throw new n("tlv.decode: length bytes not complete");if(d[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const g of d)u=u<<8|g;if(r+=h,u<128)throw new n("tlv.decode(long): not minimal encoding")}const f=e.subarray(r,r+u);if(f.length!==u)throw new n("tlv.decode: wrong value length");return{v:f,l:e.subarray(r+u)}}},_int:{encode(t){const{Err:e}=pr;if(t<yr)throw new e("integer: negative integers are not allowed");let n=Bf(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=pr;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return qh(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=pr,o=Gt("signature",t),{v:c,l:u}=r.decode(48,o);if(u.length)throw new e("invalid signature: left bytes after parsing");const{v:f,l:h}=r.decode(2,c),{v:d,l:g}=r.decode(2,h);if(g.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(f),s:n.decode(d)}},hexFromSig(t){const{_tlv:e,_int:n}=pr,r=e.encode(2,n.encode(t.r)),o=e.encode(2,n.encode(t.s)),c=r+o;return e.encode(48,c)}},yr=BigInt(0),ga=BigInt(1),LO=BigInt(2),Nf=BigInt(3),nz=BigInt(4);function ca(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let o=Gt("private key",e);try{r=t.fromBytes(o)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function iz(t,e={}){const n=Fj("weierstrass",t,e),{Fp:r,Fn:o}=n;let c=n.CURVE;const{h:u,n:f}=c;Ph(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:h}=e;if(h&&(!r.is0(c.a)||typeof h.beta!="bigint"||!Array.isArray(h.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const d=kO(r,o);function g(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function b(G,F,Y){const{x:_,y:S}=F.toAffine(),C=r.toBytes(_);if(ph(Y,"isCompressed"),Y){g();const z=!r.isOdd(S);return cs(HO(z),C)}else return cs(Uint8Array.of(4),C,r.toBytes(S))}function m(G){Ys(G,void 0,"Point");const{publicKey:F,publicKeyUncompressed:Y}=d,_=G.length,S=G[0],C=G.subarray(1);if(_===F&&(S===2||S===3)){const z=r.fromBytes(C);if(!r.isValid(z))throw new Error("bad point: is not on curve, wrong x");const M=w(z);let L;try{L=r.sqrt(M)}catch(B){const V=B instanceof Error?": "+B.message:"";throw new Error("bad point: is not on curve, sqrt error"+V)}g();const x=r.isOdd(L);return(S&1)===1!==x&&(L=r.neg(L)),{x:z,y:L}}else if(_===Y&&S===4){const z=r.BYTES,M=r.fromBytes(C.subarray(0,z)),L=r.fromBytes(C.subarray(z,z*2));if(!A(M,L))throw new Error("bad point: is not on curve");return{x:M,y:L}}else throw new Error(`bad point: got length ${_}, expected compressed=${F} or uncompressed=${Y}`)}const v=e.toBytes||b,E=e.fromBytes||m;function w(G){const F=r.sqr(G),Y=r.mul(F,G);return r.add(r.add(Y,r.mul(G,c.a)),c.b)}function A(G,F){const Y=r.sqr(F),_=w(G);return r.eql(Y,_)}if(!A(c.Gx,c.Gy))throw new Error("bad curve params: generator point");const N=r.mul(r.pow(c.a,Nf),nz),j=r.mul(r.sqr(c.b),BigInt(27));if(r.is0(r.add(N,j)))throw new Error("bad curve params: a or b");function T(G,F,Y=!1){if(!r.isValid(F)||Y&&r.is0(F))throw new Error(`bad point coordinate ${G}`);return F}function $(G){if(!(G instanceof P))throw new Error("ProjectivePoint expected")}function D(G){if(!h||!h.basises)throw new Error("no endo");return ez(G,h.basises,o.ORDER)}const R=hS((G,F)=>{const{X:Y,Y:_,Z:S}=G;if(r.eql(S,r.ONE))return{x:Y,y:_};const C=G.is0();F==null&&(F=C?r.ONE:r.inv(S));const z=r.mul(Y,F),M=r.mul(_,F),L=r.mul(S,F);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(L,r.ONE))throw new Error("invZ was invalid");return{x:z,y:M}}),U=hS(G=>{if(G.is0()){if(e.allowInfinityPoint&&!r.is0(G.Y))return;throw new Error("bad point: ZERO")}const{x:F,y:Y}=G.toAffine();if(!r.isValid(F)||!r.isValid(Y))throw new Error("bad point: x or y not field elements");if(!A(F,Y))throw new Error("bad point: equation left != right");if(!G.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function H(G,F,Y,_,S){return Y=new P(r.mul(Y.X,G),Y.Y,Y.Z),F=yh(_,F),Y=yh(S,Y),F.add(Y)}class P{constructor(F,Y,_){this.X=T("x",F),this.Y=T("y",Y,!0),this.Z=T("z",_),Object.freeze(this)}static CURVE(){return c}static fromAffine(F){const{x:Y,y:_}=F||{};if(!F||!r.isValid(Y)||!r.isValid(_))throw new Error("invalid affine point");if(F instanceof P)throw new Error("projective point not allowed");return r.is0(Y)&&r.is0(_)?P.ZERO:new P(Y,_,r.ONE)}static fromBytes(F){const Y=P.fromAffine(E(Ys(F,void 0,"point")));return Y.assertValidity(),Y}static fromHex(F){return P.fromBytes(Gt("pointHex",F))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(F=8,Y=!0){return ee.createCache(this,F),Y||this.multiply(Nf),this}assertValidity(){U(this)}hasEvenY(){const{y:F}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(F)}equals(F){$(F);const{X:Y,Y:_,Z:S}=this,{X:C,Y:z,Z:M}=F,L=r.eql(r.mul(Y,M),r.mul(C,S)),x=r.eql(r.mul(_,M),r.mul(z,S));return L&&x}negate(){return new P(this.X,r.neg(this.Y),this.Z)}double(){const{a:F,b:Y}=c,_=r.mul(Y,Nf),{X:S,Y:C,Z:z}=this;let M=r.ZERO,L=r.ZERO,x=r.ZERO,B=r.mul(S,S),V=r.mul(C,C),q=r.mul(z,z),Q=r.mul(S,C);return Q=r.add(Q,Q),x=r.mul(S,z),x=r.add(x,x),M=r.mul(F,x),L=r.mul(_,q),L=r.add(M,L),M=r.sub(V,L),L=r.add(V,L),L=r.mul(M,L),M=r.mul(Q,M),x=r.mul(_,x),q=r.mul(F,q),Q=r.sub(B,q),Q=r.mul(F,Q),Q=r.add(Q,x),x=r.add(B,B),B=r.add(x,B),B=r.add(B,q),B=r.mul(B,Q),L=r.add(L,B),q=r.mul(C,z),q=r.add(q,q),B=r.mul(q,Q),M=r.sub(M,B),x=r.mul(q,V),x=r.add(x,x),x=r.add(x,x),new P(M,L,x)}add(F){$(F);const{X:Y,Y:_,Z:S}=this,{X:C,Y:z,Z:M}=F;let L=r.ZERO,x=r.ZERO,B=r.ZERO;const V=c.a,q=r.mul(c.b,Nf);let Q=r.mul(Y,C),ie=r.mul(_,z),oe=r.mul(S,M),de=r.add(Y,_),ue=r.add(C,z);de=r.mul(de,ue),ue=r.add(Q,ie),de=r.sub(de,ue),ue=r.add(Y,S);let ye=r.add(C,M);return ue=r.mul(ue,ye),ye=r.add(Q,oe),ue=r.sub(ue,ye),ye=r.add(_,S),L=r.add(z,M),ye=r.mul(ye,L),L=r.add(ie,oe),ye=r.sub(ye,L),B=r.mul(V,ue),L=r.mul(q,oe),B=r.add(L,B),L=r.sub(ie,B),B=r.add(ie,B),x=r.mul(L,B),ie=r.add(Q,Q),ie=r.add(ie,Q),oe=r.mul(V,oe),ue=r.mul(q,ue),ie=r.add(ie,oe),oe=r.sub(Q,oe),oe=r.mul(V,oe),ue=r.add(ue,oe),Q=r.mul(ie,ue),x=r.add(x,Q),Q=r.mul(ye,ue),L=r.mul(de,L),L=r.sub(L,Q),Q=r.mul(de,ie),B=r.mul(ye,B),B=r.add(B,Q),new P(L,x,B)}subtract(F){return this.add(F.negate())}is0(){return this.equals(P.ZERO)}multiply(F){const{endo:Y}=e;if(!o.isValidNot0(F))throw new Error("invalid scalar: out of range");let _,S;const C=z=>ee.cached(this,z,M=>ly(P,M));if(Y){const{k1neg:z,k1:M,k2neg:L,k2:x}=D(F),{p:B,f:V}=C(M),{p:q,f:Q}=C(x);S=V.add(Q),_=H(Y.beta,B,q,z,L)}else{const{p:z,f:M}=C(F);_=z,S=M}return ly(P,[_,S])[0]}multiplyUnsafe(F){const{endo:Y}=e,_=this;if(!o.isValid(F))throw new Error("invalid scalar: out of range");if(F===yr||_.is0())return P.ZERO;if(F===ga)return _;if(ee.hasCache(this))return this.multiply(F);if(Y){const{k1neg:S,k1:C,k2neg:z,k2:M}=D(F),{p1:L,p2:x}=Hj(P,_,C,M);return H(Y.beta,L,x,S,z)}else return ee.unsafe(_,F)}multiplyAndAddUnsafe(F,Y,_){const S=this.multiplyUnsafe(Y).add(F.multiplyUnsafe(_));return S.is0()?void 0:S}toAffine(F){return R(this,F)}isTorsionFree(){const{isTorsionFree:F}=e;return u===ga?!0:F?F(P,this):ee.unsafe(this,f).is0()}clearCofactor(){const{clearCofactor:F}=e;return u===ga?this:F?F(P,this):this.multiplyUnsafe(u)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}toBytes(F=!0){return ph(F,"isCompressed"),this.assertValidity(),v(P,this,F)}toHex(F=!0){return pa(this.toBytes(F))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(F=!0){return this.toBytes(F)}_setWindowSize(F){this.precompute(F)}static normalizeZ(F){return ly(P,F)}static msm(F,Y){return kj(P,o,F,Y)}static fromPrivateKey(F){return P.BASE.multiply(ca(o,F))}}P.BASE=new P(c.Gx,c.Gy,r.ONE),P.ZERO=new P(r.ZERO,r.ONE,r.ZERO),P.Fp=r,P.Fn=o;const W=o.BITS,ee=new Lj(P,e.endo?Math.ceil(W/2):W);return P.BASE.precompute(8),P}function HO(t){return Uint8Array.of(t?2:3)}function kO(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function rz(t,e={}){const{Fn:n}=t,r=e.randomBytes||ao,o=Object.assign(kO(t.Fp,n),{seed:jO(n.ORDER)});function c(m){try{return!!ca(n,m)}catch{return!1}}function u(m,v){const{publicKey:E,publicKeyUncompressed:w}=o;try{const A=m.length;return v===!0&&A!==E||v===!1&&A!==w?!1:!!t.fromBytes(m)}catch{return!1}}function f(m=r(o.seed)){return zj(Ys(m,o.seed,"seed"),n.ORDER)}function h(m,v=!0){return t.BASE.multiply(ca(n,m)).toBytes(v)}function d(m){const v=f(m);return{secretKey:v,publicKey:h(v)}}function g(m){if(typeof m=="bigint")return!1;if(m instanceof t)return!0;const{secretKey:v,publicKey:E,publicKeyUncompressed:w}=o;if(n.allowedLengths||v===E)return;const A=Gt("key",m).length;return A===E||A===w}function b(m,v,E=!0){if(g(m)===!0)throw new Error("first arg must be private key");if(g(v)===!1)throw new Error("second arg must be public key");const w=ca(n,m);return t.fromHex(v).multiply(w).toBytes(E)}return Object.freeze({getPublicKey:h,getSharedSecret:b,keygen:d,Point:t,utils:{isValidSecretKey:c,isValidPublicKey:u,randomSecretKey:f,isValidPrivateKey:c,randomPrivateKey:f,normPrivateKeyToScalar:m=>ca(n,m),precompute(m=8,v=t.BASE){return v.precompute(m,!1)}},lengths:o})}function sz(t,e,n={}){Uh(e),Ph(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||ao,o=n.hmac||((Y,..._)=>jh(e,Y,cs(..._))),{Fp:c,Fn:u}=t,{ORDER:f,BITS:h}=u,{keygen:d,getPublicKey:g,getSharedSecret:b,utils:m,lengths:v}=rz(t,n),E={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},w="compact";function A(Y){const _=f>>ga;return Y>_}function N(Y,_){if(!u.isValidNot0(_))throw new Error(`invalid signature ${Y}: out of range 1..Point.Fn.ORDER`);return _}function j(Y,_){b0(_);const S=v.signature,C=_==="compact"?S:_==="recovered"?S+1:void 0;return Ys(Y,C,`${_} signature`)}class T{constructor(_,S,C){this.r=N("r",_),this.s=N("s",S),C!=null&&(this.recovery=C),Object.freeze(this)}static fromBytes(_,S=w){j(_,S);let C;if(S==="der"){const{r:x,s:B}=pr.toSig(Ys(_));return new T(x,B)}S==="recovered"&&(C=_[0],S="compact",_=_.subarray(1));const z=u.BYTES,M=_.subarray(0,z),L=_.subarray(z,z*2);return new T(u.fromBytes(M),u.fromBytes(L),C)}static fromHex(_,S){return this.fromBytes(hh(_),S)}addRecoveryBit(_){return new T(this.r,this.s,_)}recoverPublicKey(_){const S=c.ORDER,{r:C,s:z,recovery:M}=this;if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");if(f*LO<S&&M>1)throw new Error("recovery id is ambiguous for h>1 curve");const L=M===2||M===3?C+f:C;if(!c.isValid(L))throw new Error("recovery id 2 or 3 invalid");const x=c.toBytes(L),B=t.fromBytes(cs(HO((M&1)===0),x)),V=u.inv(L),q=D(Gt("msgHash",_)),Q=u.create(-q*V),ie=u.create(z*V),oe=t.BASE.multiplyUnsafe(Q).add(B.multiplyUnsafe(ie));if(oe.is0())throw new Error("point at infinify");return oe.assertValidity(),oe}hasHighS(){return A(this.s)}toBytes(_=w){if(b0(_),_==="der")return hh(pr.hexFromSig(this));const S=u.toBytes(this.r),C=u.toBytes(this.s);if(_==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return cs(Uint8Array.of(this.recovery),S,C)}return cs(S,C)}toHex(_){return pa(this.toBytes(_))}assertValidity(){}static fromCompact(_){return T.fromBytes(Gt("sig",_),"compact")}static fromDER(_){return T.fromBytes(Gt("sig",_),"der")}normalizeS(){return this.hasHighS()?new T(this.r,u.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return pa(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return pa(this.toBytes("compact"))}}const $=n.bits2int||function(Y){if(Y.length>8192)throw new Error("input is too large");const _=qh(Y),S=Y.length*8-h;return S>0?_>>BigInt(S):_},D=n.bits2int_modN||function(Y){return u.create($(Y))},R=zu(h);function U(Y){return y0("num < 2^"+h,Y,yr,R),u.toBytes(Y)}function H(Y,_){return Ys(Y,void 0,"message"),_?Ys(e(Y),void 0,"prehashed message"):Y}function P(Y,_,S){if(["recovered","canonical"].some(ie=>ie in S))throw new Error("sign() legacy options not supported");const{lowS:C,prehash:z,extraEntropy:M}=py(S,E);Y=H(Y,z);const L=D(Y),x=ca(u,_),B=[U(x),U(L)];if(M!=null&&M!==!1){const ie=M===!0?r(v.secretKey):M;B.push(Gt("extraEntropy",ie))}const V=cs(...B),q=L;function Q(ie){const oe=$(ie);if(!u.isValidNot0(oe))return;const de=u.inv(oe),ue=t.BASE.multiply(oe).toAffine(),ye=u.create(ue.x);if(ye===yr)return;const xe=u.create(de*u.create(q+ye*x));if(xe===yr)return;let ze=(ue.x===ye?0:2)|Number(ue.y&ga),We=xe;return C&&A(xe)&&(We=u.neg(xe),ze^=1),new T(ye,We,ze)}return{seed:V,k2sig:Q}}function W(Y,_,S={}){Y=Gt("message",Y);const{seed:C,k2sig:z}=P(Y,_,S);return Cj(e.outputLen,u.BYTES,o)(C,z)}function ee(Y){let _;const S=typeof Y=="string"||Bh(Y),C=!S&&Y!==null&&typeof Y=="object"&&typeof Y.r=="bigint"&&typeof Y.s=="bigint";if(!S&&!C)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(C)_=new T(Y.r,Y.s);else if(S){try{_=T.fromBytes(Gt("sig",Y),"der")}catch(z){if(!(z instanceof pr.Err))throw z}if(!_)try{_=T.fromBytes(Gt("sig",Y),"compact")}catch{return!1}}return _||!1}function G(Y,_,S,C={}){const{lowS:z,prehash:M,format:L}=py(C,E);if(S=Gt("publicKey",S),_=H(Gt("message",_),M),"strict"in C)throw new Error("options.strict was renamed to lowS");const x=L===void 0?ee(Y):T.fromBytes(Gt("sig",Y),L);if(x===!1)return!1;try{const B=t.fromBytes(S);if(z&&x.hasHighS())return!1;const{r:V,s:q}=x,Q=D(_),ie=u.inv(q),oe=u.create(Q*ie),de=u.create(V*ie),ue=t.BASE.multiplyUnsafe(oe).add(B.multiplyUnsafe(de));return ue.is0()?!1:u.create(ue.x)===V}catch{return!1}}function F(Y,_,S={}){const{prehash:C}=py(S,E);return _=H(_,C),T.fromBytes(Y,"recovered").recoverPublicKey(_).toBytes()}return Object.freeze({keygen:d,getPublicKey:g,getSharedSecret:b,utils:m,lengths:v,Point:t,sign:W,verify:G,recoverPublicKey:F,Signature:T,hash:e})}function oz(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(u=>Math.ceil(u/2)))):void 0;const o=ys(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),c={Fp:n,Fn:o,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:c}}function az(t){const{CURVE:e,curveOpts:n}=oz(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function cz(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,NO(n.Fn.ORDER,n.Fn.BITS))})}function uz(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:o}=az(t),c=iz(e,n),u=sz(c,r,o);return cz(t,u)}function w0(t,e){const n=r=>uz({...t,hash:r});return{...n(e),create:n}}const FO={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},VO={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},KO={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},lz=ys(FO.p),fz=ys(VO.p),hz=ys(KO.p),dz=w0({...FO,Fp:lz,lowS:!1},Mh);w0({...VO,Fp:fz,lowS:!1},v7),w0({...KO,Fp:hz,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},w7);const pz=dz,GO="base10",Wt="base16",pn="base64pad",us="base64url",qu="utf8",YO=0,br=1,Pu=2,gz=0,vS=1,Yc=12,_m=32;function yz(){const t=m0.utils.randomPrivateKey(),e=m0.getPublicKey(t);return{privateKey:mn(t,Wt),publicKey:mn(e,Wt)}}function v0(){const t=ao(_m);return mn(t,Wt)}function mz(t,e){const n=m0.getSharedSecret(ti(t,Wt),ti(e,Wt)),r=Dj(zh,n,void 0,void 0,_m);return mn(r,Wt)}function Yf(t){const e=zh(ti(t,Wt));return mn(e,Wt)}function Jn(t){const e=zh(ti(t,qu));return mn(e,Wt)}function QO(t){return ti(`${t}`,GO)}function io(t){return Number(mn(t,GO))}function ZO(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function XO(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function bz(t){const e=QO(typeof t.type<"u"?t.type:YO);if(io(e)===br&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?ti(t.senderPublicKey,Wt):void 0,r=typeof t.iv<"u"?ti(t.iv,Wt):ao(Yc),o=ti(t.symKey,Wt),c=_O(o,r).encrypt(ti(t.message,qu)),u=JO({type:e,sealed:c,iv:r,senderPublicKey:n});return t.encoding===us?ZO(u):u}function wz(t){const e=ti(t.symKey,Wt),{sealed:n,iv:r}=Ou({encoded:t.encoded,encoding:t.encoding}),o=_O(e,r).decrypt(n);if(o===null)throw new Error("Failed to decrypt");return mn(o,qu)}function vz(t,e){const n=QO(Pu),r=ao(Yc),o=ti(t,qu),c=JO({type:n,sealed:o,iv:r});return e===us?ZO(c):c}function Ez(t,e){const{sealed:n}=Ou({encoded:t,encoding:e});return mn(n,qu)}function JO(t){if(io(t.type)===Pu)return mn(Gc([t.type,t.sealed]),pn);if(io(t.type)===br){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return mn(Gc([t.type,t.senderPublicKey,t.iv,t.sealed]),pn)}return mn(Gc([t.type,t.iv,t.sealed]),pn)}function Ou(t){const e=(t.encoding||pn)===us?XO(t.encoded):t.encoded,n=ti(e,pn),r=n.slice(gz,vS),o=vS;if(io(r)===br){const h=o+_m,d=h+Yc,g=n.slice(o,h),b=n.slice(h,d),m=n.slice(d);return{type:r,sealed:m,iv:b,senderPublicKey:g}}if(io(r)===Pu){const h=n.slice(o),d=ao(Yc);return{type:r,sealed:h,iv:d}}const c=o+Yc,u=n.slice(o,c),f=n.slice(c);return{type:r,sealed:f,iv:u}}function Sz(t,e){const n=Ou({encoded:t,encoding:e?.encoding});return WO({type:io(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?mn(n.senderPublicKey,Wt):void 0,receiverPublicKey:e?.receiverPublicKey})}function WO(t){const e=t?.type||YO;if(e===br){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function ES(t){return t.type===br&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function SS(t){return t.type===Pu}function _z(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Gc([new Uint8Array([4]),e,n])}function xz(t,e){const[n,r,o]=t.split("."),c=Buffer.from(XO(o),"base64");if(c.length!==64)throw new Error("Invalid signature length");const u=c.slice(0,32),f=c.slice(32,64),h=`${n}.${r}`,d=zh(h),g=_z(e);if(!pz.verify(Gc([u,f]),d,g))throw new Error("Invalid signature");return Jy(t).payload}const Oz="irn";function mh(t){return t?.relay||{protocol:Oz}}function ua(t){const e=a9[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Az=Object.defineProperty,Dz=Object.defineProperties,Tz=Object.getOwnPropertyDescriptors,_S=Object.getOwnPropertySymbols,Cz=Object.prototype.hasOwnProperty,$z=Object.prototype.propertyIsEnumerable,xS=(t,e,n)=>e in t?Az(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gy=(t,e)=>{for(var n in e||(e={}))Cz.call(e,n)&&xS(t,n,e[n]);if(_S)for(var n of _S(e))$z.call(e,n)&&xS(t,n,e[n]);return t},Iz=(t,e)=>Dz(t,Tz(e));function Rz(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(o=>{if(o.startsWith(r)){const c=o.replace(r,""),u=t[o];n[c]=u}}),n}function OS(t){if(!t.includes("wc:")){const d=iO(t);d!=null&&d.includes("wc:")&&(t=d)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),o=t.substring(e+1,n).split("@"),c=typeof n<"u"?t.substring(n):"",u=new URLSearchParams(c),f=Object.fromEntries(u.entries()),h=typeof f.methods=="string"?f.methods.split(","):void 0;return{protocol:r,topic:Bz(o[0]),version:parseInt(o[1],10),symKey:f.symKey,relay:Rz(f),methods:h,expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}}function Bz(t){return t.startsWith("//")?t.substring(2):t}function Uz(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(o=>{const c=o,u=n+e+c;t[c]&&(r[u]=t[c])}),r}function AS(t){const e=new URLSearchParams,n=gy(gy(Iz(gy({},Uz(t.relay)),{symKey:t.symKey}),t.expiryTimestamp&&{expiryTimestamp:t.expiryTimestamp.toString()}),t.methods&&{methods:t.methods.join(",")});return Object.entries(n).sort(([r],[o])=>r.localeCompare(o)).forEach(([r,o])=>{o!==void 0&&e.append(r,String(o))}),`${t.protocol}:${t.topic}@${t.version}?${e}`}function Mf(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var Nz=Object.defineProperty,Mz=Object.defineProperties,jz=Object.getOwnPropertyDescriptors,DS=Object.getOwnPropertySymbols,zz=Object.prototype.hasOwnProperty,qz=Object.prototype.propertyIsEnumerable,TS=(t,e,n)=>e in t?Nz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pz=(t,e)=>{for(var n in e||(e={}))zz.call(e,n)&&TS(t,n,e[n]);if(DS)for(var n of DS(e))qz.call(e,n)&&TS(t,n,e[n]);return t},Lz=(t,e)=>Mz(t,jz(e));function Ta(t){const e=[];return t.forEach(n=>{const[r,o]=n.split(":");e.push(`${r}:${o}`)}),e}function Hz(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Ta(n.accounts))}),e}function kz(t,e){const n=[];return Object.values(t).forEach(r=>{Ta(r.accounts).includes(e)&&n.push(...r.methods)}),n}function Fz(t,e){const n=[];return Object.values(t).forEach(r=>{Ta(r.accounts).includes(e)&&n.push(...r.events)}),n}function Lh(t){return t.includes(":")}function la(t){return Lh(t)?t.split(":")[0]:t}function CS(t){var e,n,r;const o={};if(!Ui(t))return o;for(const[c,u]of Object.entries(t)){const f=Lh(c)?[c]:u.chains,h=u.methods||[],d=u.events||[],g=la(c);o[g]=Lz(Pz({},o[g]),{chains:Bi(f,(e=o[g])==null?void 0:e.chains),methods:Bi(h,(n=o[g])==null?void 0:n.methods),events:Bi(d,(r=o[g])==null?void 0:r.events)})}return o}function Vz(t){const e={};return t?.forEach(n=>{var r;const[o,c]=n.split(":");e[o]||(e[o]={accounts:[],chains:[],events:[],methods:[]}),e[o].accounts.push(n),(r=e[o].chains)==null||r.push(`${o}:${c}`)}),e}function $S(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=Vz(e);for(const[r,o]of Object.entries(n))o.methods?o.methods=Bi(o.methods,t):o.methods=t,o.events=["chainChanged","accountsChanged"];return n}function Kz(t,e){var n,r,o,c,u,f;const h=CS(t),d=CS(e),g={},b=Object.keys(h).concat(Object.keys(d));for(const m of b)g[m]={chains:Bi((n=h[m])==null?void 0:n.chains,(r=d[m])==null?void 0:r.chains),methods:Bi((o=h[m])==null?void 0:o.methods,(c=d[m])==null?void 0:c.methods),events:Bi((u=h[m])==null?void 0:u.events,(f=d[m])==null?void 0:f.events)};return g}const Gz={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Yz={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function le(t,e){const{message:n,code:r}=Yz[t];return{message:e?`${n} ${e}`:n,code:r}}function tt(t,e){const{message:n,code:r}=Gz[t];return{message:e?`${n} ${e}`:n,code:r}}function wr(t,e){return!!Array.isArray(t)}function Ui(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function wt(t){return typeof t>"u"}function gt(t,e){return e&&wt(t)?!0:typeof t=="string"&&!!t.trim().length}function xm(t,e){return e&&wt(t)?!0:typeof t=="number"&&!isNaN(t)}function Qz(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),o=Object.keys(n);let c=!0;return Gs(o,r)?(r.forEach(u=>{const{accounts:f,methods:h,events:d}=t.namespaces[u],g=Ta(f),b=n[u];(!Gs(Jx(u,b),g)||!Gs(b.methods,h)||!Gs(b.events,d))&&(c=!1)}),c):!1}function bh(t){return gt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Zz(t){if(gt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&bh(n)}}return!1}function Xz(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(gt(t,!1)){if(e(t))return!0;const n=iO(t);return e(n)}}catch{}return!1}function Jz(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function Wz(t){return t?.topic}function eq(t,e){let n=null;return gt(t?.publicKey,!1)||(n=le("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function IS(t){let e=!0;return wr(t)?t.length&&(e=t.every(n=>gt(n,!1))):e=!1,e}function tq(t,e,n){let r=null;return wr(e)&&e.length?e.forEach(o=>{r||bh(o)||(r=tt("UNSUPPORTED_CHAINS",`${n}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):bh(t)||(r=tt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function nq(t,e,n){let r=null;return Object.entries(t).forEach(([o,c])=>{if(r)return;const u=tq(o,Jx(o,c),`${e} ${n}`);u&&(r=u)}),r}function iq(t,e){let n=null;return wr(t)?t.forEach(r=>{n||Zz(r)||(n=tt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=tt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function rq(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const o=iq(r?.accounts,`${e} namespace`);o&&(n=o)}),n}function sq(t,e){let n=null;return IS(t?.methods)?IS(t?.events)||(n=tt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=tt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function e8(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const o=sq(r,`${e}, namespace`);o&&(n=o)}),n}function oq(t,e,n){let r=null;if(t&&Ui(t)){const o=e8(t,e);o&&(r=o);const c=nq(t,e,n);c&&(r=c)}else r=le("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function yy(t,e){let n=null;if(t&&Ui(t)){const r=e8(t,e);r&&(n=r);const o=rq(t,e);o&&(n=o)}else n=le("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function t8(t){return gt(t.protocol,!0)}function aq(t,e){let n=!1;return t?t&&wr(t)&&t.length&&t.forEach(r=>{n=t8(r)}):n=!0,n}function cq(t){return typeof t=="number"}function fn(t){return typeof t<"u"&&typeof t!==null}function uq(t){return!(!t||typeof t!="object"||!t.code||!xm(t.code,!1)||!t.message||!gt(t.message,!1))}function lq(t){return!(wt(t)||!gt(t.method,!1))}function fq(t){return!(wt(t)||wt(t.result)&&wt(t.error)||!xm(t.id,!1)||!gt(t.jsonrpc,!1))}function hq(t){return!(wt(t)||!gt(t.name,!1))}function RS(t,e){return!(!bh(e)||!Hz(t).includes(e))}function dq(t,e,n){return gt(n,!1)?kz(t,e).includes(n):!1}function pq(t,e,n){return gt(n,!1)?Fz(t,e).includes(n):!1}function BS(t,e,n){let r=null;const o=gq(t),c=yq(e),u=Object.keys(o),f=Object.keys(c),h=US(Object.keys(t)),d=US(Object.keys(e)),g=h.filter(b=>!d.includes(b));return g.length&&(r=le("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${g.toString()}
      Received: ${Object.keys(e).toString()}`)),Gs(u,f)||(r=le("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${u.toString()}
      Approved: ${f.toString()}`)),Object.keys(e).forEach(b=>{if(!b.includes(":")||r)return;const m=Ta(e[b].accounts);m.includes(b)||(r=le("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${b}
        Required: ${b}
        Approved: ${m.toString()}`))}),u.forEach(b=>{r||(Gs(o[b].methods,c[b].methods)?Gs(o[b].events,c[b].events)||(r=le("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${b}`)):r=le("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${b}`))}),r}function gq(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(o=>{e[o]={methods:t[n].methods,events:t[n].events}})}),e}function US(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function yq(t){const e={};return Object.keys(t).forEach(n=>{n.includes(":")?e[n]=t[n]:Ta(t[n].accounts)?.forEach(o=>{e[o]={accounts:t[n].accounts.filter(c=>c.includes(`${o}:`)),methods:t[n].methods,events:t[n].events}})}),e}function mq(t,e){return xm(t,!1)&&t<=e.max&&t>=e.min}function NS(){const t=Mu();return new Promise(e=>{switch(t){case Bn.browser:e(bq());break;case Bn.reactNative:e(wq());break;case Bn.node:e(vq());break;default:e(!0)}})}function bq(){return Da()&&navigator?.onLine}async function wq(){return gs()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function vq(){return!0}function Eq(t){switch(Mu()){case Bn.browser:Sq(t);break;case Bn.reactNative:_q(t);break}}function Sq(t){!gs()&&Da()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function _q(t){gs()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function xq(){var t;return Da()&&Er.getDocument()?((t=Er.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const my={};class Mc{static get(e){return my[e]}static set(e,n){my[e]=n}static delete(e){delete my[e]}}function Oq(t){const e=Uu.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Aq({publicKey:t,signature:e,payload:n}){var r;const o=E0(n.method),c=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),u=Cq(n.address),f=n.era==="00"?new Uint8Array([0]):E0(n.era);if(f.length!==1&&f.length!==2)throw new Error("Invalid era length");const h=parseInt(n.nonce,16),d=new Uint8Array([h&255,h>>8&255]),g=BigInt(`0x${Tq(n.tip)}`),b=Iq(g),m=new Uint8Array([0,...t,u,...e,...f,...d,...b,...o]),v=$q(m.length+1);return new Uint8Array([...v,c,...m])}function Dq(t){const e=E0(t),n=f9.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function E0(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Tq(t){return t.startsWith("0x")?t.slice(2):t}function Cq(t){const e=Uu.decode(t)[0];return e===42?0:e===60?2:1}function $q(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Iq(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Rq(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=Oq(t.transaction.address),r=Aq({publicKey:n,signature:e,payload:t.transaction}),o=Buffer.from(r).toString("hex");return Dq(o)}function Om({logger:t,name:e}){const n=typeof t=="string"?D_({opts:{level:t,name:e}}).logger:t;return n.level=typeof t=="string"?t:t.level,n}const Bq="PARSE_ERROR",Uq="INVALID_REQUEST",Nq="METHOD_NOT_FOUND",Mq="INVALID_PARAMS",n8="INTERNAL_ERROR",Am="SERVER_ERROR",jq=[-32700,-32600,-32601,-32602,-32603],Qc={[Bq]:{code:-32700,message:"Parse error"},[Uq]:{code:-32600,message:"Invalid Request"},[Nq]:{code:-32601,message:"Method not found"},[Mq]:{code:-32602,message:"Invalid params"},[n8]:{code:-32603,message:"Internal error"},[Am]:{code:-32e3,message:"Server error"}},i8=Am;function zq(t){return jq.includes(t)}function MS(t){return Object.keys(Qc).includes(t)?Qc[t]:Qc[i8]}function qq(t){const e=Object.values(Qc).find(n=>n.code===t);return e||Qc[i8]}function r8(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var by={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S0=function(t,e){return S0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},S0(t,e)};function Pq(t,e){S0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _0=function(){return _0=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},_0.apply(this,arguments)};function Lq(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Hq(t,e,n,r){var o=arguments.length,c=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,r);else for(var f=t.length-1;f>=0;f--)(u=t[f])&&(c=(o<3?u(c):o>3?u(e,n,c):u(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function kq(t,e){return function(n,r){e(n,r,t)}}function Fq(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Vq(t,e,n,r){function o(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function f(g){try{d(r.next(g))}catch(b){u(b)}}function h(g){try{d(r.throw(g))}catch(b){u(b)}}function d(g){g.done?c(g.value):o(g.value).then(f,h)}d((r=r.apply(t,e||[])).next())})}function Kq(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},r,o,c,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(d){return function(g){return h([d,g])}}function h(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(c=d[0]&2?o.return:d[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,d[1])).done)return c;switch(o=0,c&&(d=[d[0]&2,c.value]),d[0]){case 0:case 1:c=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,o=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!c||d[1]>c[0]&&d[1]<c[3])){n.label=d[1];break}if(d[0]===6&&n.label<c[1]){n.label=c[1],c=d;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(d);break}c[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(g){d=[6,g],o=0}finally{r=c=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Gq(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Yq(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function x0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s8(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,c=[],u;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)c.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return c}function Qq(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s8(arguments[e]));return t}function Zq(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var c=arguments[e],u=0,f=c.length;u<f;u++,o++)r[o]=c[u];return r}function Au(t){return this instanceof Au?(this.v=t,this):new Au(t)}function Xq(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,c=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(m){r[m]&&(o[m]=function(v){return new Promise(function(E,w){c.push([m,v,E,w])>1||f(m,v)})})}function f(m,v){try{h(r[m](v))}catch(E){b(c[0][3],E)}}function h(m){m.value instanceof Au?Promise.resolve(m.value.v).then(d,g):b(c[0][2],m)}function d(m){f("next",m)}function g(m){f("throw",m)}function b(m,v){m(v),c.shift(),c.length&&f(c[0][0],c[0][1])}}function Jq(t){var e,n;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,c){e[o]=t[o]?function(u){return(n=!n)?{value:Au(t[o](u)),done:o==="return"}:c?c(u):u}:c}}function Wq(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof x0=="function"?x0(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(c){n[c]=t[c]&&function(u){return new Promise(function(f,h){u=t[c](u),o(f,h,u.done,u.value)})}}function o(c,u,f,h){Promise.resolve(h).then(function(d){c({value:d,done:f})},u)}}function eP(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function tP(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function nP(t){return t&&t.__esModule?t:{default:t}}function iP(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function rP(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const sP=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return _0},__asyncDelegator:Jq,__asyncGenerator:Xq,__asyncValues:Wq,__await:Au,__awaiter:Vq,__classPrivateFieldGet:iP,__classPrivateFieldSet:rP,__createBinding:Gq,__decorate:Hq,__exportStar:Yq,__extends:Pq,__generator:Kq,__importDefault:nP,__importStar:tP,__makeTemplateObject:eP,__metadata:Fq,__param:kq,__read:s8,__rest:Lq,__spread:Qq,__spreadArrays:Zq,__values:x0},Symbol.toStringTag,{value:"Module"})),oP=F3(sP);var cr={},jS;function aP(){if(jS)return cr;jS=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.isBrowserCryptoAvailable=cr.getSubtleCrypto=cr.getBrowerCrypto=void 0;function t(){return $i?.crypto||$i?.msCrypto||{}}cr.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}cr.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return cr.isBrowserCryptoAvailable=n,cr}var ur={},zS;function cP(){if(zS)return ur;zS=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.isBrowser=ur.isNode=ur.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ur.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ur.isNode=e;function n(){return!t()&&!e()}return ur.isBrowser=n,ur}var qS;function uP(){return qS||(qS=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=oP;e.__exportStar(aP(),t),e.__exportStar(cP(),t)})(by)),by}var lP=uP();function Ti(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function ls(t=6){return BigInt(Ti(t))}function pi(t,e,n){return{id:n||Ti(),jsonrpc:"2.0",method:t,params:e}}function Du(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Hh(t,e,n){return{id:t,jsonrpc:"2.0",error:fP(e)}}function fP(t,e){return typeof t>"u"?MS(n8):(typeof t=="string"&&(t=Object.assign(Object.assign({},MS(Am)),{message:t})),zq(t.code)&&(t=qq(t.code)),t)}class hP{}class dP extends hP{constructor(){super()}}class pP extends dP{constructor(e){super()}}const gP="^https?:",yP="^wss?:";function mP(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function o8(t,e){const n=mP(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function PS(t){return o8(t,gP)}function LS(t){return o8(t,yP)}function bP(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function a8(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Dm(t){return a8(t)&&"method"in t}function kh(t){return a8(t)&&(Ci(t)||Wn(t))}function Ci(t){return"result"in t}function Wn(t){return"error"in t}let Tm=class extends pP{constructor(e){super(e),this.events=new ii.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(pi(e.method,e.params||[],e.id||ls().toString()),n)}async requestStrict(e,n){return new Promise(async(r,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Wn(c)?o(c.error):r(c.result)});try{await this.connection.send(e,n)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),kh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const wP=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),vP=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",HS=t=>t.split("?")[0],kS=10,EP=wP();let SP=class{constructor(e){if(this.url=e,this.events=new ii.EventEmitter,this.registering=!1,!LS(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(vr(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!LS(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const o=lP.isReactNative()?void 0:{rejectUnauthorized:!bP(e)},c=new EP(e,[],o);vP()?c.onerror=u=>{const f=u;r(this.emitError(f.error))}:c.on("error",u=>{r(this.emitError(u))}),c.onopen=()=>{this.onOpen(c),n(c)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?eo(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),o=r.message||r.toString(),c=Hh(e,o);this.events.emit("payload",c)}parseError(e,n=this.url){return r8(e,HS(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>kS&&this.events.setMaxListeners(kS)}emitError(e){const n=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${HS(this.url)}`));return this.events.emit("register_error",n),n}};var _P={};const c8="wc",u8=2,O0="core",Ni=`${c8}@2:${O0}:`,xP={logger:"error"},OP={database:":memory:"},AP="crypto",FS="client_ed25519_seed",DP=fe.ONE_DAY,TP="keychain",CP="0.3",$P="messages",IP="0.3",RP=fe.SIX_HOURS,BP="publisher",l8="irn",UP="error",f8="wss://relay.walletconnect.org",NP="relayer",at={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},MP="_subscription",Gn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},jP=.1,A0="2.22.4",Je={link_mode:"link_mode",relay:"relay"},Qf={inbound:"inbound",outbound:"outbound"},zP="0.3",qP="WALLETCONNECT_CLIENT_ID",VS="WALLETCONNECT_LINK_MODE_APPS",$n={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},PP="subscription",LP="0.3",HP="pairing",kP="0.3",jc={wc_pairingDelete:{req:{ttl:fe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:fe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:fe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:fe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:fe.ONE_DAY,prompt:!1,tag:0},res:{ttl:fe.ONE_DAY,prompt:!1,tag:0}}},ks={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ui={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},FP="history",VP="0.3",KP="expirer",Zn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},GP="0.3",YP="verify-api",QP="https://verify.walletconnect.com",h8="https://verify.walletconnect.org",Zc=h8,ZP=`${Zc}/v3`,XP=[QP,h8],JP="echo",WP="https://echo.walletconnect.com",Di={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},fr={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},li={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},zs={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},qs={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},zc={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},eL=.1,tL="event-client",nL=86400,iL="https://pulse.walletconnect.org/batch";function rL(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),u=c.charCodeAt(0);if(n[u]!==255)throw new TypeError(c+" is ambiguous");n[u]=o}var f=t.length,h=t.charAt(0),d=Math.log(f)/Math.log(256),g=Math.log(256)/Math.log(f);function b(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var w=0,A=0,N=0,j=E.length;N!==j&&E[N]===0;)N++,w++;for(var T=(j-N)*g+1>>>0,$=new Uint8Array(T);N!==j;){for(var D=E[N],R=0,U=T-1;(D!==0||R<A)&&U!==-1;U--,R++)D+=256*$[U]>>>0,$[U]=D%f>>>0,D=D/f>>>0;if(D!==0)throw new Error("Non-zero carry");A=R,N++}for(var H=T-A;H!==T&&$[H]===0;)H++;for(var P=h.repeat(w);H<T;++H)P+=t.charAt($[H]);return P}function m(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var w=0;if(E[w]!==" "){for(var A=0,N=0;E[w]===h;)A++,w++;for(var j=(E.length-w)*d+1>>>0,T=new Uint8Array(j);E[w];){var $=n[E.charCodeAt(w)];if($===255)return;for(var D=0,R=j-1;($!==0||D<N)&&R!==-1;R--,D++)$+=f*T[R]>>>0,T[R]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");N=D,w++}if(E[w]!==" "){for(var U=j-N;U!==j&&T[U]===0;)U++;for(var H=new Uint8Array(A+(j-U)),P=A;U!==j;)H[P++]=T[U++];return H}}}function v(E){var w=m(E);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:m,decode:v}}var sL=rL,oL=sL;const d8=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},aL=t=>new TextEncoder().encode(t),cL=t=>new TextDecoder().decode(t);class uL{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class lL{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return p8(this,e)}}class fL{constructor(e){this.decoders=e}or(e){return p8(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const p8=(t,e)=>new fL({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class hL{constructor(e,n,r,o){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=o,this.encoder=new uL(e,n,r),this.decoder=new lL(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Fh=({name:t,prefix:e,encode:n,decode:r})=>new hL(t,e,n,r),Lu=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:o}=oL(n,e);return Fh({prefix:t,name:e,encode:r,decode:c=>d8(o(c))})},dL=(t,e,n,r)=>{const o={};for(let g=0;g<e.length;++g)o[e[g]]=g;let c=t.length;for(;t[c-1]==="=";)--c;const u=new Uint8Array(c*n/8|0);let f=0,h=0,d=0;for(let g=0;g<c;++g){const b=o[t[g]];if(b===void 0)throw new SyntaxError(`Non-${r} character`);h=h<<n|b,f+=n,f>=8&&(f-=8,u[d++]=255&h>>f)}if(f>=n||255&h<<8-f)throw new SyntaxError("Unexpected end of data");return u},pL=(t,e,n)=>{const r=e[e.length-1]==="=",o=(1<<n)-1;let c="",u=0,f=0;for(let h=0;h<t.length;++h)for(f=f<<8|t[h],u+=8;u>n;)u-=n,c+=e[o&f>>u];if(u&&(c+=e[o&f<<n-u]),r)for(;c.length*n&7;)c+="=";return c},qt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Fh({prefix:e,name:t,encode(o){return pL(o,r,n)},decode(o){return dL(o,r,n,t)}}),gL=Fh({prefix:"\0",name:"identity",encode:t=>cL(t),decode:t=>aL(t)});var yL=Object.freeze({__proto__:null,identity:gL});const mL=qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var bL=Object.freeze({__proto__:null,base2:mL});const wL=qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var vL=Object.freeze({__proto__:null,base8:wL});const EL=Lu({prefix:"9",name:"base10",alphabet:"0123456789"});var SL=Object.freeze({__proto__:null,base10:EL});const _L=qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xL=qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var OL=Object.freeze({__proto__:null,base16:_L,base16upper:xL});const AL=qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),DL=qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),TL=qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),CL=qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),$L=qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),IL=qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),RL=qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),BL=qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),UL=qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var NL=Object.freeze({__proto__:null,base32:AL,base32upper:DL,base32pad:TL,base32padupper:CL,base32hex:$L,base32hexupper:IL,base32hexpad:RL,base32hexpadupper:BL,base32z:UL});const ML=Lu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jL=Lu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var zL=Object.freeze({__proto__:null,base36:ML,base36upper:jL});const qL=Lu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),PL=Lu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var LL=Object.freeze({__proto__:null,base58btc:qL,base58flickr:PL});const HL=qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),kL=qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),FL=qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),VL=qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var KL=Object.freeze({__proto__:null,base64:HL,base64pad:kL,base64url:FL,base64urlpad:VL});const g8=Array.from(""),GL=g8.reduce((t,e,n)=>(t[n]=e,t),[]),YL=g8.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function QL(t){return t.reduce((e,n)=>(e+=GL[n],e),"")}function ZL(t){const e=[];for(const n of t){const r=YL[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const XL=Fh({prefix:"",name:"base256emoji",encode:QL,decode:ZL});var JL=Object.freeze({__proto__:null,base256emoji:XL}),WL=y8,KS=128,eH=-128,tH=Math.pow(2,31);function y8(t,e,n){e=e||[],n=n||0;for(var r=n;t>=tH;)e[n++]=t&255|KS,t/=128;for(;t&eH;)e[n++]=t&255|KS,t>>>=7;return e[n]=t|0,y8.bytes=n-r+1,e}var nH=D0,iH=128,GS=127;function D0(t,r){var n=0,r=r||0,o=0,c=r,u,f=t.length;do{if(c>=f)throw D0.bytes=0,new RangeError("Could not decode varint");u=t[c++],n+=o<28?(u&GS)<<o:(u&GS)*Math.pow(2,o),o+=7}while(u>=iH);return D0.bytes=c-r,n}var rH=Math.pow(2,7),sH=Math.pow(2,14),oH=Math.pow(2,21),aH=Math.pow(2,28),cH=Math.pow(2,35),uH=Math.pow(2,42),lH=Math.pow(2,49),fH=Math.pow(2,56),hH=Math.pow(2,63),dH=function(t){return t<rH?1:t<sH?2:t<oH?3:t<aH?4:t<cH?5:t<uH?6:t<lH?7:t<fH?8:t<hH?9:10},pH={encode:WL,decode:nH,encodingLength:dH},m8=pH;const YS=(t,e,n=0)=>(m8.encode(t,e,n),e),QS=t=>m8.encodingLength(t),T0=(t,e)=>{const n=e.byteLength,r=QS(t),o=r+QS(n),c=new Uint8Array(o+n);return YS(t,c,0),YS(n,c,r),c.set(e,o),new gH(t,n,e,c)};class gH{constructor(e,n,r,o){this.code=e,this.size=n,this.digest=r,this.bytes=o}}const b8=({name:t,code:e,encode:n})=>new yH(t,e,n);class yH{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?T0(this.code,n):n.then(r=>T0(this.code,r))}else throw Error("Unknown type, must be binary type")}}const w8=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),mH=b8({name:"sha2-256",code:18,encode:w8("SHA-256")}),bH=b8({name:"sha2-512",code:19,encode:w8("SHA-512")});var wH=Object.freeze({__proto__:null,sha256:mH,sha512:bH});const v8=0,vH="identity",E8=d8,EH=t=>T0(v8,E8(t)),SH={code:v8,name:vH,encode:E8,digest:EH};var _H=Object.freeze({__proto__:null,identity:SH});new TextEncoder,new TextDecoder;const ZS={...yL,...bL,...vL,...SL,...OL,...NL,...zL,...LL,...KL,...JL};({...wH,..._H});function S8(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function xH(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?S8(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function _8(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const XS=_8("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),wy=_8("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=xH(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),OH={utf8:XS,"utf-8":XS,hex:ZS.base16,latin1:wy,ascii:wy,binary:wy,...ZS};function AH(t,e="utf8"){const n=OH[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?S8(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var DH=Object.defineProperty,TH=(t,e,n)=>e in t?DH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oi=(t,e,n)=>TH(t,typeof e!="symbol"?e+"":e,n);class CH{constructor(e,n){this.core=e,this.logger=n,Oi(this,"keychain",new Map),Oi(this,"name",TP),Oi(this,"version",CP),Oi(this,"initialized",!1),Oi(this,"storagePrefix",Ni),Oi(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Oi(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Oi(this,"set",async(r,o)=>{this.isInitialized(),this.keychain.set(r,o),await this.persist()}),Oi(this,"get",r=>{this.isInitialized();const o=this.keychain.get(r);if(typeof o>"u"){const{message:c}=le("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(c)}return o}),Oi(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Nn(n,this.name)}get context(){return wn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,c0(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?u0(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var $H=Object.defineProperty,IH=(t,e,n)=>e in t?$H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,St=(t,e,n)=>IH(t,typeof e!="symbol"?e+"":e,n);class RH{constructor(e,n,r){this.core=e,this.logger=n,St(this,"name",AP),St(this,"keychain"),St(this,"randomSessionIdentifier",v0()),St(this,"initialized",!1),St(this,"clientId"),St(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),St(this,"hasKeys",o=>(this.isInitialized(),this.keychain.has(o))),St(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const o=await this.getClientSeed(),c=aE(o),u=nx(c.publicKey);return this.clientId=u,u}),St(this,"generateKeyPair",()=>{this.isInitialized();const o=yz();return this.setPrivateKey(o.publicKey,o.privateKey)}),St(this,"signJWT",async o=>{this.isInitialized();const c=await this.getClientSeed(),u=aE(c),f=this.randomSessionIdentifier;return await rB(f,o,DP,u)}),St(this,"generateSharedKey",(o,c,u)=>{this.isInitialized();const f=this.getPrivateKey(o),h=mz(f,c);return this.setSymKey(h,u)}),St(this,"setSymKey",async(o,c)=>{this.isInitialized();const u=c||Yf(o);return await this.keychain.set(u,o),u}),St(this,"deleteKeyPair",async o=>{this.isInitialized(),await this.keychain.del(o)}),St(this,"deleteSymKey",async o=>{this.isInitialized(),await this.keychain.del(o)}),St(this,"encode",async(o,c,u)=>{this.isInitialized();const f=WO(u),h=vr(c);if(SS(f))return vz(h,u?.encoding);if(ES(f)){const m=f.senderPublicKey,v=f.receiverPublicKey;o=await this.generateSharedKey(m,v)}const d=this.getSymKey(o),{type:g,senderPublicKey:b}=f;return bz({type:g,symKey:d,message:h,senderPublicKey:b,encoding:u?.encoding})}),St(this,"decode",async(o,c,u)=>{this.isInitialized();const f=Sz(c,u);if(SS(f)){const h=Ez(c,u?.encoding);return eo(h)}if(ES(f)){const h=f.receiverPublicKey,d=f.senderPublicKey;o=await this.generateSharedKey(h,d)}try{const h=this.getSymKey(o),d=wz({symKey:h,encoded:c,encoding:u?.encoding});return eo(d)}catch(h){this.logger.error(`Failed to decode message from topic: '${o}', clientId: '${await this.getClientId()}'`),this.logger.error(h)}}),St(this,"getPayloadType",(o,c=pn)=>{const u=Ou({encoded:o,encoding:c});return io(u.type)}),St(this,"getPayloadSenderPublicKey",(o,c=pn)=>{const u=Ou({encoded:o,encoding:c});return u.senderPublicKey?mn(u.senderPublicKey,Wt):void 0}),this.core=e,this.logger=Nn(n,this.name),this.keychain=r||new CH(this.core,this.logger)}get context(){return wn(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(FS)}catch{e=v0(),await this.keychain.set(FS,e)}return AH(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var BH=Object.defineProperty,UH=Object.defineProperties,NH=Object.getOwnPropertyDescriptors,JS=Object.getOwnPropertySymbols,MH=Object.prototype.hasOwnProperty,jH=Object.prototype.propertyIsEnumerable,C0=(t,e,n)=>e in t?BH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zH=(t,e)=>{for(var n in e||(e={}))MH.call(e,n)&&C0(t,n,e[n]);if(JS)for(var n of JS(e))jH.call(e,n)&&C0(t,n,e[n]);return t},qH=(t,e)=>UH(t,NH(e)),Cn=(t,e,n)=>C0(t,typeof e!="symbol"?e+"":e,n);class PH extends n${constructor(e,n){super(e,n),this.logger=e,this.core=n,Cn(this,"messages",new Map),Cn(this,"messagesWithoutClientAck",new Map),Cn(this,"name",$P),Cn(this,"version",IP),Cn(this,"initialized",!1),Cn(this,"storagePrefix",Ni),Cn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const o=await this.getRelayerMessagesWithoutClientAck();typeof o<"u"&&(this.messagesWithoutClientAck=o),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Cn(this,"set",async(r,o,c)=>{this.isInitialized();const u=Jn(o);let f=this.messages.get(r);if(typeof f>"u"&&(f={}),typeof f[u]<"u")return u;if(f[u]=o,this.messages.set(r,f),c===Qf.inbound){const h=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,qH(zH({},h),{[u]:o}))}return await this.persist(),u}),Cn(this,"get",r=>{this.isInitialized();let o=this.messages.get(r);return typeof o>"u"&&(o={}),o}),Cn(this,"getWithoutAck",r=>{this.isInitialized();const o={};for(const c of r){const u=this.messagesWithoutClientAck.get(c)||{};o[c]=Object.values(u)}return o}),Cn(this,"has",(r,o)=>{this.isInitialized();const c=this.get(r),u=Jn(o);return typeof c[u]<"u"}),Cn(this,"ack",async(r,o)=>{this.isInitialized();const c=this.messagesWithoutClientAck.get(r);if(typeof c>"u")return;const u=Jn(o);delete c[u],Object.keys(c).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,c),await this.persist()}),Cn(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Nn(e,this.name),this.core=n}get context(){return wn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,c0(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,c0(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?u0(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?u0(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var LH=Object.defineProperty,HH=Object.defineProperties,kH=Object.getOwnPropertyDescriptors,WS=Object.getOwnPropertySymbols,FH=Object.prototype.hasOwnProperty,VH=Object.prototype.propertyIsEnumerable,$0=(t,e,n)=>e in t?LH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ia=(t,e)=>{for(var n in e||(e={}))FH.call(e,n)&&$0(t,n,e[n]);if(WS)for(var n of WS(e))VH.call(e,n)&&$0(t,n,e[n]);return t},e3=(t,e)=>HH(t,kH(e)),Yn=(t,e,n)=>$0(t,typeof e!="symbol"?e+"":e,n);class KH extends i${constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Yn(this,"events",new ii.EventEmitter),Yn(this,"name",BP),Yn(this,"queue",new Map),Yn(this,"publishTimeout",fe.toMiliseconds(fe.ONE_MINUTE)),Yn(this,"initialPublishTimeout",fe.toMiliseconds(fe.ONE_SECOND*15)),Yn(this,"needsTransportRestart",!1),Yn(this,"publish",async(r,o,c)=>{var u,f,h,d,g;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:o,opts:c}});const b=c?.ttl||RP,m=c?.prompt||!1,v=c?.tag||0,E=c?.id||ls().toString(),w=ua(mh().protocol),A={id:E,method:c?.publishMethod||w.publish,params:ia({topic:r,message:o,ttl:b,prompt:m,tag:v,attestation:c?.attestation},c?.tvf)},N=`Failed to publish payload, please try again. id:${E} tag:${v}`;try{wt((u=A.params)==null?void 0:u.prompt)&&((f=A.params)==null||delete f.prompt),wt((h=A.params)==null?void 0:h.tag)&&((d=A.params)==null||delete d.tag);const j=new Promise(async T=>{const $=({id:R})=>{var U;((U=A.id)==null?void 0:U.toString())===R.toString()&&(this.removeRequestFromQueue(R),this.relayer.events.removeListener(at.publish,$),T())};this.relayer.events.on(at.publish,$);const D=Ri(new Promise((R,U)=>{this.rpcPublish(A,c).then(R).catch(H=>{this.logger.warn(H,H?.message),U(H)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${E} tag:${v}`);try{await D,this.events.removeListener(at.publish,$)}catch(R){this.queue.set(E,{request:A,opts:c,attempt:1}),this.logger.warn(R,R?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:E,topic:r,message:o,opts:c}}),await Ri(j,this.publishTimeout,N)}catch(j){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(j),(g=c?.internal)!=null&&g.throwOnFailedPublish)throw j}finally{this.queue.delete(E)}}),Yn(this,"publishCustom",async r=>{var o,c,u,f,h;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:d,opts:g={}}=r,{attestation:b,tvf:m,publishMethod:v,prompt:E,tag:w,ttl:A=fe.FIVE_MINUTES}=g,N=g.id||ls().toString(),j=ua(mh().protocol),T=v||j.publish,$={id:N,method:T,params:ia(e3(ia({},d),{ttl:A,prompt:E,tag:w,attestation:b}),m)},D=`Failed to publish custom payload, please try again. id:${N} tag:${w}`;try{wt((o=$.params)==null?void 0:o.prompt)&&((c=$.params)==null||delete c.prompt),wt((u=$.params)==null?void 0:u.tag)&&((f=$.params)==null||delete f.tag);const R=new Promise(async U=>{const H=({id:W})=>{var ee;((ee=$.id)==null?void 0:ee.toString())===W.toString()&&(this.removeRequestFromQueue(W),this.relayer.events.removeListener(at.publish,H),U())};this.relayer.events.on(at.publish,H);const P=Ri(new Promise((W,ee)=>{this.rpcPublish($,g).then(W).catch(G=>{this.logger.warn(G,G?.message),ee(G)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${T} id:${N} tag:${w}`);try{await P,this.events.removeListener(at.publish,H)}catch(W){this.queue.set(N,{request:$,opts:g,attempt:1}),this.logger.warn(W,W?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:N,payload:d,opts:g}}),await Ri(R,this.publishTimeout,D)}catch(R){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(R),(h=g?.internal)!=null&&h.throwOnFailedPublish)throw R}finally{this.queue.delete(N)}}),Yn(this,"on",(r,o)=>{this.events.on(r,o)}),Yn(this,"once",(r,o)=>{this.events.once(r,o)}),Yn(this,"off",(r,o)=>{this.events.off(r,o)}),Yn(this,"removeListener",(r,o)=>{this.events.removeListener(r,o)}),this.relayer=e,this.logger=Nn(n,this.name),this.registerEventListeners()}get context(){return wn(this.logger)}async rpcPublish(e,n){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit(at.publish,ia(ia({},e),n)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{var r;const o=e.attempt+1;this.queue.set(n,e3(ia({},e),{attempt:o})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(r=e.request.params)==null?void 0:r.tag}, attempt: ${o}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(so.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(at.connection_stalled);return}this.checkQueue()}),this.relayer.on(at.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var GH=Object.defineProperty,YH=(t,e,n)=>e in t?GH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ra=(t,e,n)=>YH(t,typeof e!="symbol"?e+"":e,n);class QH{constructor(){ra(this,"map",new Map),ra(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),ra(this,"get",e=>this.map.get(e)||[]),ra(this,"exists",(e,n)=>this.get(e).includes(n)),ra(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const o=r.filter(c=>c!==n);if(!o.length){this.map.delete(e);return}this.map.set(e,o)}),ra(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var ZH=Object.defineProperty,XH=Object.defineProperties,JH=Object.getOwnPropertyDescriptors,t3=Object.getOwnPropertySymbols,WH=Object.prototype.hasOwnProperty,ek=Object.prototype.propertyIsEnumerable,I0=(t,e,n)=>e in t?ZH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qc=(t,e)=>{for(var n in e||(e={}))WH.call(e,n)&&I0(t,n,e[n]);if(t3)for(var n of t3(e))ek.call(e,n)&&I0(t,n,e[n]);return t},vy=(t,e)=>XH(t,JH(e)),Ye=(t,e,n)=>I0(t,typeof e!="symbol"?e+"":e,n);class tk extends o${constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ye(this,"subscriptions",new Map),Ye(this,"topicMap",new QH),Ye(this,"events",new ii.EventEmitter),Ye(this,"name",PP),Ye(this,"version",LP),Ye(this,"pending",new Map),Ye(this,"cached",[]),Ye(this,"initialized",!1),Ye(this,"storagePrefix",Ni),Ye(this,"subscribeTimeout",fe.toMiliseconds(fe.ONE_MINUTE)),Ye(this,"initialSubscribeTimeout",fe.toMiliseconds(fe.ONE_SECOND*15)),Ye(this,"clientId"),Ye(this,"batchSubscribeTopicsLimit",500),Ye(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Ye(this,"subscribe",async(r,o)=>{var c;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:o}});try{const u=mh(o),f={topic:r,relay:u,transportType:o?.transportType};(c=o?.internal)!=null&&c.skipSubscribe||this.pending.set(r,f);const h=await this.rpcSubscribe(r,u,o);return typeof h=="string"&&(this.onSubscribe(h,f),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:o}})),h}catch(u){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(u),u}}),Ye(this,"unsubscribe",async(r,o)=>{this.isInitialized(),typeof o?.id<"u"?await this.unsubscribeById(r,o.id,o):await this.unsubscribeByTopic(r,o)}),Ye(this,"isSubscribed",r=>new Promise(o=>{o(this.topicMap.topics.includes(r))})),Ye(this,"isKnownTopic",r=>new Promise(o=>{o(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(c=>c.topic===r))})),Ye(this,"on",(r,o)=>{this.events.on(r,o)}),Ye(this,"once",(r,o)=>{this.events.once(r,o)}),Ye(this,"off",(r,o)=>{this.events.off(r,o)}),Ye(this,"removeListener",(r,o)=>{this.events.removeListener(r,o)}),Ye(this,"start",async()=>{await this.onConnect()}),Ye(this,"stop",async()=>{await this.onDisconnect()}),Ye(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Ye(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(o=>{r.push(o)}),await this.batchSubscribe(r)}),Ye(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(so.pulse,async()=>{await this.checkPending()}),this.events.on($n.created,async r=>{const o=$n.created;this.logger.info(`Emitting ${o}`),this.logger.debug({type:"event",event:o,data:r}),await this.persist()}),this.events.on($n.deleted,async r=>{const o=$n.deleted;this.logger.info(`Emitting ${o}`),this.logger.debug({type:"event",event:o,data:r}),await this.persist()})}),this.relayer=e,this.logger=Nn(n,this.name),this.clientId=""}get context(){return wn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async o=>await this.unsubscribeById(e,o,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const o=mh(r);await this.restartToComplete({topic:e,id:n,relay:o}),await this.rpcUnsubscribe(e,n,o);const c=tt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,n,r){var o,c;const u=await this.getSubscriptionId(e);if((o=r?.internal)!=null&&o.skipSubscribe)return u;(!r||r?.transportType===Je.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const f={method:ua(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:f});const h=(c=r?.internal)==null?void 0:c.throwOnFailedPublish;try{if(r?.transportType===Je.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(f).catch(b=>this.logger.warn(b))},fe.toMiliseconds(fe.ONE_SECOND)),u;const d=new Promise(async b=>{const m=v=>{v.topic===e&&(this.events.removeListener($n.created,m),b(v.id))};this.events.on($n.created,m);try{const v=await Ri(new Promise((E,w)=>{this.relayer.request(f).catch(A=>{this.logger.warn(A,A?.message),w(A)}).then(E)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener($n.created,m),b(v)}catch{}}),g=await Ri(d,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!g&&h)throw new Error(`Subscribing to ${e} failed, please try again`);return g?u:null}catch(d){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(at.connection_stalled),h)throw d}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:ua(n.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Ri(new Promise(o=>{this.relayer.request(r).catch(c=>this.logger.warn(c)).then(o)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(at.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:ua(n.protocol).batchFetchMessages,params:{topics:e.map(c=>c.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let o;try{o=await await Ri(new Promise((c,u)=>{this.relayer.request(r).catch(f=>{this.logger.warn(f),u(f)}).then(c)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(at.connection_stalled)}return o}rpcUnsubscribe(e,n,r){const o={method:ua(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,n){this.setSubscription(e,vy(qc({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,qc({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,qc({},n)),this.topicMap.set(n.topic,e),this.events.emit($n.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit($n.deleted,vy(qc({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit($n.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const o=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(o)}}this.events.emit($n.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(n=>{var r;return n.topic===((r=this.subscriptions.get(n.id))==null?void 0:r.topic)})){const{message:n}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>vy(qc({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await z9(fe.toMiliseconds(fe.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Jn(e+await this.getClientId())}}var nk=Object.defineProperty,n3=Object.getOwnPropertySymbols,ik=Object.prototype.hasOwnProperty,rk=Object.prototype.propertyIsEnumerable,R0=(t,e,n)=>e in t?nk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,i3=(t,e)=>{for(var n in e||(e={}))ik.call(e,n)&&R0(t,n,e[n]);if(n3)for(var n of n3(e))rk.call(e,n)&&R0(t,n,e[n]);return t},Ne=(t,e,n)=>R0(t,typeof e!="symbol"?e+"":e,n);class sk extends r${constructor(e){var n;super(e),Ne(this,"protocol","wc"),Ne(this,"version",2),Ne(this,"core"),Ne(this,"logger"),Ne(this,"events",new ii.EventEmitter),Ne(this,"provider"),Ne(this,"messages"),Ne(this,"subscriber"),Ne(this,"publisher"),Ne(this,"name",NP),Ne(this,"transportExplicitlyClosed",!1),Ne(this,"initialized",!1),Ne(this,"connectionAttemptInProgress",!1),Ne(this,"relayUrl"),Ne(this,"projectId"),Ne(this,"packageName"),Ne(this,"bundleId"),Ne(this,"hasExperiencedNetworkDisruption",!1),Ne(this,"pingTimeout"),Ne(this,"heartBeatTimeout",fe.toMiliseconds(fe.THIRTY_SECONDS+fe.FIVE_SECONDS)),Ne(this,"reconnectTimeout"),Ne(this,"connectPromise"),Ne(this,"reconnectInProgress",!1),Ne(this,"requestsInFlight",[]),Ne(this,"connectTimeout",fe.toMiliseconds(fe.ONE_SECOND*15)),Ne(this,"request",async r=>{var o,c;this.logger.debug("Publishing Request Payload");const u=r.id||ls().toString();await this.toEstablishConnection();try{this.logger.trace({id:u,method:r.method,topic:(o=r.params)==null?void 0:o.topic},"relayer.request - publishing...");const f=`${u}:${((c=r.params)==null?void 0:c.tag)||""}`;this.requestsInFlight.push(f);const h=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(d=>d!==f),h}catch(f){throw this.logger.debug(`Failed to Publish Request: ${u}`),f}}),Ne(this,"resetPingTimeout",()=>{fh()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,o,c,u;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(u=(c=(o=(r=this.provider)==null?void 0:r.connection)==null?void 0:o.socket)==null?void 0:c.terminate)==null||u.call(c)}catch(f){this.logger.warn(f,f?.message)}},this.heartBeatTimeout))}),Ne(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Ne(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(at.connect)}),Ne(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ne(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(at.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ne(this,"registerProviderListeners",()=>{this.provider.on(Gn.payload,this.onPayloadHandler),this.provider.on(Gn.connect,this.onConnectHandler),this.provider.on(Gn.disconnect,this.onDisconnectHandler),this.provider.on(Gn.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=Om({logger:(n=e.logger)!=null?n:UP,name:this.name}),this.messages=new PH(this.logger,e.core),this.subscriber=new tk(this,this.logger),this.publisher=new KH(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||f8,S9()?this.packageName=kE():_9()&&(this.bundleId=kE()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return wn(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Je.relay},Qf.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,n){var r,o,c;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const u=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(o=n?.internal)==null?void 0:o.throwOnFailedPublish;let f=((c=this.subscriber.topicMap.get(e))==null?void 0:c[0])||"",h;const d=g=>{g.topic===e&&(this.subscriber.off($n.created,d),h())};return await Promise.all([new Promise(g=>{h=g,this.subscriber.on($n.created,d)}),new Promise(async(g,b)=>{f=await this.subscriber.subscribe(e,i3({internal:{throwOnFailedPublish:u}},n)).catch(m=>{u&&b(m)})||f,g()})]),f}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Ri(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await NS())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,o)=>r.publishedAt-o.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(o){this.logger.warn(o,"Error while processing batch message event: "+o?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const o=pt(fe.FIVE_MINUTES),c={topic:r,expiry:o,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,c)}this.events.emit(at.message,e),await this.recordMessageEvent(e,Qf.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,o)=>{const c=()=>{o(new Error("Connection interrupted while trying to connect"))};this.provider.once(Gn.disconnect,c),await Ri(new Promise((u,f)=>{this.provider.connect().then(u).catch(f)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(u=>{o(u)}).finally(()=>{this.provider.off(Gn.disconnect,c),clearTimeout(this.reconnectTimeout)}),await new Promise(async(u,f)=>{const h=()=>{o(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Gn.disconnect,h),await this.subscriber.start().then(u).catch(f).finally(()=>{this.provider.off(Gn.disconnect,h)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const o=r;this.logger.warn({},o.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,fe.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,o,c;if(fh())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((c=(o=(r=this.provider)==null?void 0:r.connection)==null?void 0:o.socket)==null||c.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(u){this.logger.warn(u,u?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Tm(new SP(T9({sdkVersion:A0,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:o}=e;await this.messages.set(r,o,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const o=this.messages.has(n,r);return o&&this.logger.warn(`Ignoring duplicate message: ${r}`),o}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Dm(e)){if(!e.method.endsWith(MP))return;const n=e.params,{topic:r,message:o,publishedAt:c,attestation:u}=n.data,f={topic:r,message:o,publishedAt:c,transportType:Je.relay,attestation:u};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(i3({type:"event",event:n.id},f)),this.events.emit(n.id,f),await this.acknowledgePayload(e),await this.onMessageEvent(f)}else kh(e)&&this.events.emit(at.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Qf.inbound),this.events.emit(at.message,e))}async acknowledgePayload(e){const n=Du(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Gn.payload,this.onPayloadHandler),this.provider.off(Gn.connect,this.onConnectHandler),this.provider.off(Gn.disconnect,this.onDisconnectHandler),this.provider.off(Gn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await NS();Eq(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(so.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&xq())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(at.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},fe.toMiliseconds(jP)))))}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function ok(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function r3(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function s3(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ak="[object RegExp]",ck="[object String]",uk="[object Number]",lk="[object Boolean]",o3="[object Arguments]",fk="[object Symbol]",hk="[object Date]",dk="[object Map]",pk="[object Set]",gk="[object Array]",yk="[object Function]",mk="[object ArrayBuffer]",Ey="[object Object]",bk="[object Error]",wk="[object DataView]",vk="[object Uint8Array]",Ek="[object Uint8ClampedArray]",Sk="[object Uint16Array]",_k="[object Uint32Array]",xk="[object BigUint64Array]",Ok="[object Int8Array]",Ak="[object Int16Array]",Dk="[object Int32Array]",Tk="[object BigInt64Array]",Ck="[object Float32Array]",$k="[object Float64Array]";function Ik(){}function a3(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Rk(t,e,n){return Fc(t,e,void 0,void 0,void 0,void 0,n)}function Fc(t,e,n,r,o,c,u){const f=u(t,e,n,r,o,c);if(f!==void 0)return f;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Xc(t,e,c,u)}return Xc(t,e,c,u)}function Xc(t,e,n,r){if(Object.is(t,e))return!0;let o=s3(t),c=s3(e);if(o===o3&&(o=Ey),c===o3&&(c=Ey),o!==c)return!1;switch(o){case ck:return t.toString()===e.toString();case uk:{const h=t.valueOf(),d=e.valueOf();return ok(h,d)}case lk:case hk:case fk:return Object.is(t.valueOf(),e.valueOf());case ak:return t.source===e.source&&t.flags===e.flags;case yk:return t===e}n=n??new Map;const u=n.get(t),f=n.get(e);if(u!=null&&f!=null)return u===e;n.set(t,e),n.set(e,t);try{switch(o){case dk:{if(t.size!==e.size)return!1;for(const[h,d]of t.entries())if(!e.has(h)||!Fc(d,e.get(h),h,t,e,n,r))return!1;return!0}case pk:{if(t.size!==e.size)return!1;const h=Array.from(t.values()),d=Array.from(e.values());for(let g=0;g<h.length;g++){const b=h[g],m=d.findIndex(v=>Fc(b,v,void 0,t,e,n,r));if(m===-1)return!1;d.splice(m,1)}return!0}case gk:case vk:case Ek:case Sk:case _k:case xk:case Ok:case Ak:case Dk:case Tk:case Ck:case $k:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let h=0;h<t.length;h++)if(!Fc(t[h],e[h],h,t,e,n,r))return!1;return!0}case mk:return t.byteLength!==e.byteLength?!1:Xc(new Uint8Array(t),new Uint8Array(e),n,r);case wk:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Xc(new Uint8Array(t),new Uint8Array(e),n,r);case bk:return t.name===e.name&&t.message===e.message;case Ey:{if(!(Xc(t.constructor,e.constructor,n,r)||a3(t)&&a3(e)))return!1;const h=[...Object.keys(t),...r3(t)],d=[...Object.keys(e),...r3(e)];if(h.length!==d.length)return!1;for(let g=0;g<h.length;g++){const b=h[g],m=t[b];if(!Object.hasOwn(e,b))return!1;const v=e[b];if(!Fc(m,v,b,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Bk(t,e){return Rk(t,e,Ik)}var Uk=Object.defineProperty,c3=Object.getOwnPropertySymbols,Nk=Object.prototype.hasOwnProperty,Mk=Object.prototype.propertyIsEnumerable,B0=(t,e,n)=>e in t?Uk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u3=(t,e)=>{for(var n in e||(e={}))Nk.call(e,n)&&B0(t,n,e[n]);if(c3)for(var n of c3(e))Mk.call(e,n)&&B0(t,n,e[n]);return t},un=(t,e,n)=>B0(t,typeof e!="symbol"?e+"":e,n);class co extends s${constructor(e,n,r,o=Ni,c=void 0){super(e,n,r,o),this.core=e,this.logger=n,this.name=r,un(this,"map",new Map),un(this,"version",zP),un(this,"cached",[]),un(this,"initialized",!1),un(this,"getKey"),un(this,"storagePrefix",Ni),un(this,"recentlyDeleted",[]),un(this,"recentlyDeletedLimit",200),un(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(u=>{this.getKey&&u!==null&&!wt(u)?this.map.set(this.getKey(u),u):Jz(u)?this.map.set(u.id,u):Wz(u)&&this.map.set(u.topic,u)}),this.cached=[],this.initialized=!0)}),un(this,"set",async(u,f)=>{this.isInitialized(),this.map.has(u)?await this.update(u,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:u,value:f}),this.map.set(u,f),await this.persist())}),un(this,"get",u=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:u}),this.getData(u))),un(this,"getAll",u=>(this.isInitialized(),u?this.values.filter(f=>Object.keys(u).every(h=>Bk(f[h],u[h]))):this.values)),un(this,"update",async(u,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:u,update:f});const h=u3(u3({},this.getData(u)),f);this.map.set(u,h),await this.persist()}),un(this,"delete",async(u,f)=>{this.isInitialized(),this.map.has(u)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:u,reason:f}),this.map.delete(u),this.addToRecentlyDeleted(u),await this.persist())}),this.logger=Nn(n,this.name),this.storagePrefix=o,this.getKey=c}get context(){return wn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:o}=le("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(o),new Error(o)}const{message:r}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var jk=Object.defineProperty,zk=(t,e,n)=>e in t?jk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$e=(t,e,n)=>zk(t,typeof e!="symbol"?e+"":e,n);class qk{constructor(e,n){this.core=e,this.logger=n,$e(this,"name",HP),$e(this,"version",kP),$e(this,"events",new G0),$e(this,"pairings"),$e(this,"initialized",!1),$e(this,"storagePrefix",Ni),$e(this,"ignoredPayloadTypes",[br]),$e(this,"registeredMethods",[]),$e(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),$e(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),$e(this,"create",async r=>{this.isInitialized();const o=v0(),c=await this.core.crypto.setSymKey(o),u=pt(fe.FIVE_MINUTES),f={protocol:l8},h={topic:c,expiry:u,relay:f,active:!1,methods:r?.methods},d=AS({protocol:this.core.protocol,version:this.core.version,topic:c,symKey:o,relay:f,expiryTimestamp:u,methods:r?.methods});return this.events.emit(ks.create,h),this.core.expirer.set(c,u),await this.pairings.set(c,h),await this.core.relayer.subscribe(c,{transportType:r?.transportType,internal:r?.internal}),{topic:c,uri:d}}),$e(this,"pair",async r=>{this.isInitialized();const o=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[Di.pairing_started]}});this.isValidPair(r,o);const{topic:c,symKey:u,relay:f,expiryTimestamp:h,methods:d}=OS(r.uri);o.props.properties.topic=c,o.addTrace(Di.pairing_uri_validation_success),o.addTrace(Di.pairing_uri_not_expired);let g;if(this.pairings.keys.includes(c)){if(g=this.pairings.get(c),o.addTrace(Di.existing_pairing),g.active)throw o.setError(fr.active_pairing_already_exists),new Error(`Pairing already exists: ${c}. Please try again with a new connection URI.`);o.addTrace(Di.pairing_not_expired)}const b=h||pt(fe.FIVE_MINUTES),m={topic:c,relay:f,expiry:b,active:!1,methods:d};this.core.expirer.set(c,b),await this.pairings.set(c,m),o.addTrace(Di.store_new_pairing),r.activatePairing&&await this.activate({topic:c}),this.events.emit(ks.create,m),o.addTrace(Di.emit_inactive_pairing),this.core.crypto.keychain.has(c)||await this.core.crypto.setSymKey(u,c),o.addTrace(Di.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{o.setError(fr.no_internet_connection)}try{await this.core.relayer.subscribe(c,{relay:f})}catch(v){throw o.setError(fr.subscribe_pairing_topic_failure),v}return o.addTrace(Di.subscribe_pairing_topic_success),m}),$e(this,"activate",async({topic:r})=>{this.isInitialized();const o=pt(fe.FIVE_MINUTES);this.core.expirer.set(r,o),await this.pairings.update(r,{active:!0,expiry:o})}),$e(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:o}=r;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:u,resolve:f,reject:h}=Ls();this.events.once(je("pairing_ping",c),({error:d})=>{d?h(d):f()}),await u()}}),$e(this,"updateExpiry",async({topic:r,expiry:o})=>{this.isInitialized(),await this.pairings.update(r,{expiry:o})}),$e(this,"updateMetadata",async({topic:r,metadata:o})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:o})}),$e(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),$e(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:o}=r;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",tt("USER_DISCONNECTED")),await this.deletePairing(o))}),$e(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:o,relay:c,expiry:u,methods:f}=r,h=this.core.crypto.keychain.get(o);return AS({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:h,relay:c,expiryTimestamp:u,methods:f})}),$e(this,"sendRequest",async(r,o,c)=>{const u=pi(o,c),f=await this.core.crypto.encode(r,u),h=jc[o].req;return this.core.history.set(r,u),this.core.relayer.publish(r,f,h),u.id}),$e(this,"sendResult",async(r,o,c)=>{const u=Du(r,c),f=await this.core.crypto.encode(o,u),h=(await this.core.history.get(o,r)).request.method,d=jc[h].res;await this.core.relayer.publish(o,f,d),await this.core.history.resolve(u)}),$e(this,"sendError",async(r,o,c)=>{const u=Hh(r,c),f=await this.core.crypto.encode(o,u),h=(await this.core.history.get(o,r)).request.method,d=jc[h]?jc[h].res:jc.unregistered_method.res;await this.core.relayer.publish(o,f,d),await this.core.history.resolve(u)}),$e(this,"deletePairing",async(r,o)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,tt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),o?Promise.resolve():this.core.expirer.del(r)])}),$e(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(o=>Ii(o.expiry));await Promise.all(r.map(o=>this.deletePairing(o.topic)))}),$e(this,"onRelayEventRequest",async r=>{const{topic:o,payload:c}=r;switch(c.method){case"wc_pairingPing":return await this.onPairingPingRequest(o,c);case"wc_pairingDelete":return await this.onPairingDeleteRequest(o,c);default:return await this.onUnknownRpcMethodRequest(o,c)}}),$e(this,"onRelayEventResponse",async r=>{const{topic:o,payload:c}=r,u=(await this.core.history.get(o,c.id)).request.method;switch(u){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(u)}}),$e(this,"onPairingPingRequest",async(r,o)=>{const{id:c}=o;try{this.isValidPing({topic:r}),await this.sendResult(c,r,!0),this.events.emit(ks.ping,{id:c,topic:r})}catch(u){await this.sendError(c,r,u),this.logger.error(u)}}),$e(this,"onPairingPingResponse",(r,o)=>{const{id:c}=o;setTimeout(()=>{Ci(o)?this.events.emit(je("pairing_ping",c),{}):Wn(o)&&this.events.emit(je("pairing_ping",c),{error:o.error})},500)}),$e(this,"onPairingDeleteRequest",async(r,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ks.delete,{id:c,topic:r})}catch(u){await this.sendError(c,r,u),this.logger.error(u)}}),$e(this,"onUnknownRpcMethodRequest",async(r,o)=>{const{id:c,method:u}=o;try{if(this.registeredMethods.includes(u))return;const f=tt("WC_METHOD_UNSUPPORTED",u);await this.sendError(c,r,f),this.logger.error(f)}catch(f){await this.sendError(c,r,f),this.logger.error(f)}}),$e(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(tt("WC_METHOD_UNSUPPORTED",r))}),$e(this,"isValidPair",(r,o)=>{var c;if(!fn(r)){const{message:f}=le("MISSING_OR_INVALID",`pair() params: ${r}`);throw o.setError(fr.malformed_pairing_uri),new Error(f)}if(!Xz(r.uri)){const{message:f}=le("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw o.setError(fr.malformed_pairing_uri),new Error(f)}const u=OS(r?.uri);if(!((c=u?.relay)!=null&&c.protocol)){const{message:f}=le("MISSING_OR_INVALID","pair() uri#relay-protocol");throw o.setError(fr.malformed_pairing_uri),new Error(f)}if(!(u!=null&&u.symKey)){const{message:f}=le("MISSING_OR_INVALID","pair() uri#symKey");throw o.setError(fr.malformed_pairing_uri),new Error(f)}if(u!=null&&u.expiryTimestamp&&fe.toMiliseconds(u?.expiryTimestamp)<Date.now()){o.setError(fr.pairing_expired);const{message:f}=le("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(f)}}),$e(this,"isValidPing",async r=>{if(!fn(r)){const{message:c}=le("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(c)}const{topic:o}=r;await this.isValidPairingTopic(o)}),$e(this,"isValidDisconnect",async r=>{if(!fn(r)){const{message:c}=le("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(c)}const{topic:o}=r;await this.isValidPairingTopic(o)}),$e(this,"isValidPairingTopic",async r=>{if(!gt(r,!1)){const{message:o}=le("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(o)}if(!this.pairings.keys.includes(r)){const{message:o}=le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(o)}if(Ii(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:o}=le("EXPIRED",`pairing topic: ${r}`);throw new Error(o)}}),this.core=e,this.logger=Nn(n,this.name),this.pairings=new co(this.core,this.logger,this.name,this.storagePrefix)}get context(){return wn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(at.message,async e=>{const{topic:n,message:r,transportType:o}=e;if(this.pairings.keys.includes(n)&&o!==Je.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const c=await this.core.crypto.decode(n,r);Dm(c)?(this.core.history.set(n,c),await this.onRelayEventRequest({topic:n,payload:c})):kh(c)&&(await this.core.history.resolve(c),await this.onRelayEventResponse({topic:n,payload:c}),this.core.history.delete(n,c.id)),await this.core.relayer.messages.ack(n,r)}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(Zn.expired,async e=>{const{topic:n}=nO(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(ks.expire,{topic:n}))})}}var Pk=Object.defineProperty,Lk=(t,e,n)=>e in t?Pk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nt=(t,e,n)=>Lk(t,typeof e!="symbol"?e+"":e,n);class Hk extends t${constructor(e,n){super(e,n),this.core=e,this.logger=n,Nt(this,"records",new Map),Nt(this,"events",new ii.EventEmitter),Nt(this,"name",FP),Nt(this,"version",VP),Nt(this,"cached",[]),Nt(this,"initialized",!1),Nt(this,"storagePrefix",Ni),Nt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Nt(this,"set",(r,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:o,chainId:c}),this.records.has(o.id))return;const u={id:o.id,topic:r,request:{method:o.method,params:o.params||null},chainId:c,expiry:pt(fe.THIRTY_DAYS)};this.records.set(u.id,u),this.persist(),this.events.emit(ui.created,u)}),Nt(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const o=await this.getRecord(r.id);typeof o.response>"u"&&(o.response=Wn(r)?{error:r.error}:{result:r.result},this.records.set(o.id,o),this.persist(),this.events.emit(ui.updated,o))}),Nt(this,"get",async(r,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:o}),await this.getRecord(o))),Nt(this,"delete",(r,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===r){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(ui.deleted,c)}}),this.persist()}),Nt(this,"exists",async(r,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===r:!1)),Nt(this,"on",(r,o)=>{this.events.on(r,o)}),Nt(this,"once",(r,o)=>{this.events.once(r,o)}),Nt(this,"off",(r,o)=>{this.events.off(r,o)}),Nt(this,"removeListener",(r,o)=>{this.events.removeListener(r,o)}),this.logger=Nn(n,this.name)}get context(){return wn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:pi(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ui.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ui.created,e=>{const n=ui.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ui.updated,e=>{const n=ui.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ui.deleted,e=>{const n=ui.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(so.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{fe.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(ui.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var kk=Object.defineProperty,Fk=(t,e,n)=>e in t?kk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vt=(t,e,n)=>Fk(t,typeof e!="symbol"?e+"":e,n);class Vk extends a${constructor(e,n){super(e,n),this.core=e,this.logger=n,Vt(this,"expirations",new Map),Vt(this,"events",new ii.EventEmitter),Vt(this,"name",KP),Vt(this,"version",GP),Vt(this,"cached",[]),Vt(this,"initialized",!1),Vt(this,"storagePrefix",Ni),Vt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Vt(this,"has",r=>{try{const o=this.formatTarget(r);return typeof this.getExpiration(o)<"u"}catch{return!1}}),Vt(this,"set",(r,o)=>{this.isInitialized();const c=this.formatTarget(r),u={target:c,expiry:o};this.expirations.set(c,u),this.checkExpiry(c,u),this.events.emit(Zn.created,{target:c,expiration:u})}),Vt(this,"get",r=>{this.isInitialized();const o=this.formatTarget(r);return this.getExpiration(o)}),Vt(this,"del",r=>{if(this.isInitialized(),this.has(r)){const o=this.formatTarget(r),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Zn.deleted,{target:o,expiration:c})}}),Vt(this,"on",(r,o)=>{this.events.on(r,o)}),Vt(this,"once",(r,o)=>{this.events.once(r,o)}),Vt(this,"off",(r,o)=>{this.events.off(r,o)}),Vt(this,"removeListener",(r,o)=>{this.events.removeListener(r,o)}),this.logger=Nn(n,this.name)}get context(){return wn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return C9(e);if(typeof e=="number")return $9(e);const{message:n}=le("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Zn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;fe.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Zn.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(so.pulse,()=>this.checkExpirations()),this.events.on(Zn.created,e=>{const n=Zn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Zn.expired,e=>{const n=Zn.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Zn.deleted,e=>{const n=Zn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Kk=Object.defineProperty,Gk=(t,e,n)=>e in t?Kk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dt=(t,e,n)=>Gk(t,typeof e!="symbol"?e+"":e,n);class Yk extends c${constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,dt(this,"name",YP),dt(this,"abortController"),dt(this,"isDevEnv"),dt(this,"verifyUrlV3",ZP),dt(this,"storagePrefix",Ni),dt(this,"version",u8),dt(this,"publicKey"),dt(this,"fetchPromise"),dt(this,"init",async()=>{var o;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&fe.toMiliseconds((o=this.publicKey)==null?void 0:o.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),dt(this,"register",async o=>{if(!Da()||this.isDevEnv)return;const c=window.location.origin,{id:u,decryptedId:f}=o,h=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${c}&id=${u}&decryptedId=${f}`;try{const d=Er.getDocument(),g=this.startAbortTimer(fe.ONE_SECOND*5),b=await new Promise((m,v)=>{const E=()=>{window.removeEventListener("message",A),d.body.removeChild(w),v("attestation aborted")};this.abortController.signal.addEventListener("abort",E);const w=d.createElement("iframe");w.src=h,w.style.display="none",w.addEventListener("error",E,{signal:this.abortController.signal});const A=N=>{if(N.data&&typeof N.data=="string")try{const j=JSON.parse(N.data);if(j.type==="verify_attestation"){if(Jy(j.attestation).payload.id!==u)return;clearInterval(g),d.body.removeChild(w),this.abortController.signal.removeEventListener("abort",E),window.removeEventListener("message",A),m(j.attestation===null?"":j.attestation)}}catch(j){this.logger.warn(j)}};d.body.appendChild(w),window.addEventListener("message",A,{signal:this.abortController.signal})});return this.logger.debug(b,"jwt attestation"),b}catch(d){this.logger.warn(d)}return""}),dt(this,"resolve",async o=>{if(this.isDevEnv)return"";const{attestationId:c,hash:u,encryptedId:f}=o;if(c===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(c){if(Jy(c).payload.id!==f)return;const d=await this.isValidJwtAttestation(c);if(d){if(!d.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return d}}if(!u)return;const h=this.getVerifyUrl(o?.verifyUrl);return this.fetchAttestation(u,h)}),dt(this,"fetchAttestation",async(o,c)=>{this.logger.debug(`resolving attestation: ${o} from url: ${c}`);const u=this.startAbortTimer(fe.ONE_SECOND*5),f=await fetch(`${c}/attestation/${o}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(u),f.status===200?await f.json():void 0}),dt(this,"getVerifyUrl",o=>{let c=o||Zc;return XP.includes(c)||(this.logger.info(`verify url: ${c}, not included in trusted list, assigning default: ${Zc}`),c=Zc),c}),dt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const o=this.startAbortTimer(fe.FIVE_SECONDS),c=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(o),await c.json()}catch(o){this.logger.warn(o)}}),dt(this,"persistPublicKey",async o=>{this.logger.debug(o,"persisting public key to local storage"),await this.store.setItem(this.storeKey,o),this.publicKey=o}),dt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),dt(this,"isValidJwtAttestation",async o=>{const c=await this.getPublicKey();try{if(c)return this.validateAttestation(o,c)}catch(f){this.logger.error(f),this.logger.warn("error validating attestation")}const u=await this.fetchAndPersistPublicKey();try{if(u)return this.validateAttestation(o,u)}catch(f){this.logger.error(f),this.logger.warn("error validating attestation")}}),dt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),dt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async c=>{const u=await this.fetchPublicKey();u&&(await this.persistPublicKey(u),c(u))});const o=await this.fetchPromise;return this.fetchPromise=void 0,o}),dt(this,"validateAttestation",(o,c)=>{const u=xz(o,c.publicKey),f={hasExpired:fe.toMiliseconds(u.exp)<Date.now(),payload:u};if(f.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:f.payload.origin,isScam:f.payload.isScam,isVerified:f.payload.isVerified}}),this.logger=Nn(n,this.name),this.abortController=new AbortController,this.isDevEnv=dm(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return wn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),fe.toMiliseconds(e))}}var Qk=Object.defineProperty,Zk=(t,e,n)=>e in t?Qk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l3=(t,e,n)=>Zk(t,typeof e!="symbol"?e+"":e,n);class Xk extends u${constructor(e,n){super(e,n),this.projectId=e,this.logger=n,l3(this,"context",JP),l3(this,"registerDeviceToken",async r=>{const{clientId:o,token:c,notificationType:u,enableEncrypted:f=!1}=r,h=`${WP}/${this.projectId}/clients`;await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:o,type:u,token:c,always_raw:f})})}),this.logger=Nn(n,this.context)}}var Jk=Object.defineProperty,f3=Object.getOwnPropertySymbols,Wk=Object.prototype.hasOwnProperty,eF=Object.prototype.propertyIsEnumerable,U0=(t,e,n)=>e in t?Jk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pc=(t,e)=>{for(var n in e||(e={}))Wk.call(e,n)&&U0(t,n,e[n]);if(f3)for(var n of f3(e))eF.call(e,n)&&U0(t,n,e[n]);return t},_t=(t,e,n)=>U0(t,typeof e!="symbol"?e+"":e,n);class tF extends l${constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,_t(this,"context",tL),_t(this,"storagePrefix",Ni),_t(this,"storageVersion",eL),_t(this,"events",new Map),_t(this,"shouldPersist",!1),_t(this,"init",async()=>{if(!dm())try{const o={eventId:VE(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:eO(this.core.relayer.protocol,this.core.relayer.version,A0)}}};await this.sendEvent([o])}catch(o){this.logger.warn(o)}}),_t(this,"createEvent",o=>{const{event:c="ERROR",type:u="",properties:{topic:f,trace:h}}=o,d=VE(),g=this.core.projectId||"",b=Date.now(),m=Pc({eventId:d,timestamp:b,props:{event:c,type:u,properties:{topic:f,trace:h}},bundleId:g,domain:this.getAppDomain()},this.setMethods(d));return this.telemetryEnabled&&(this.events.set(d,m),this.shouldPersist=!0),m}),_t(this,"getEvent",o=>{const{eventId:c,topic:u}=o;if(c)return this.events.get(c);const f=Array.from(this.events.values()).find(h=>h.props.properties.topic===u);if(f)return Pc(Pc({},f),this.setMethods(f.eventId))}),_t(this,"deleteEvent",o=>{const{eventId:c}=o;this.events.delete(c),this.shouldPersist=!0}),_t(this,"setEventListeners",()=>{this.core.heartbeat.on(so.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(o=>{fe.fromMiliseconds(Date.now())-fe.fromMiliseconds(o.timestamp)>nL&&(this.events.delete(o.eventId),this.shouldPersist=!0)})})}),_t(this,"setMethods",o=>({addTrace:c=>this.addTrace(o,c),setError:c=>this.setError(o,c)})),_t(this,"addTrace",(o,c)=>{const u=this.events.get(o);u&&(u.props.properties.trace.push(c),this.events.set(o,u),this.shouldPersist=!0)}),_t(this,"setError",(o,c)=>{const u=this.events.get(o);u&&(u.props.type=c,u.timestamp=Date.now(),this.events.set(o,u),this.shouldPersist=!0)}),_t(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),_t(this,"restore",async()=>{try{const o=await this.core.storage.getItem(this.storageKey)||[];if(!o.length)return;o.forEach(c=>{this.events.set(c.eventId,Pc(Pc({},c),this.setMethods(c.eventId)))})}catch(o){this.logger.warn(o)}}),_t(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const o=[];for(const[c,u]of this.events)u.props.type&&o.push(u);if(o.length!==0)try{if((await this.sendEvent(o)).ok)for(const c of o)this.events.delete(c.eventId),this.shouldPersist=!0}catch(c){this.logger.warn(c)}}),_t(this,"sendEvent",async o=>{const c=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${iL}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${A0}${c}`,{method:"POST",body:JSON.stringify(o)})}),_t(this,"getAppDomain",()=>Wx().url),this.logger=Nn(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var nF=Object.defineProperty,h3=Object.getOwnPropertySymbols,iF=Object.prototype.hasOwnProperty,rF=Object.prototype.propertyIsEnumerable,N0=(t,e,n)=>e in t?nF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d3=(t,e)=>{for(var n in e||(e={}))iF.call(e,n)&&N0(t,n,e[n]);if(h3)for(var n of h3(e))rF.call(e,n)&&N0(t,n,e[n]);return t},Qe=(t,e,n)=>N0(t,typeof e!="symbol"?e+"":e,n);let sF=class x8 extends XC{constructor(e){var n;super(e),Qe(this,"protocol",c8),Qe(this,"version",u8),Qe(this,"name",O0),Qe(this,"relayUrl"),Qe(this,"projectId"),Qe(this,"customStoragePrefix"),Qe(this,"events",new ii.EventEmitter),Qe(this,"logger"),Qe(this,"heartbeat"),Qe(this,"relayer"),Qe(this,"crypto"),Qe(this,"storage"),Qe(this,"history"),Qe(this,"expirer"),Qe(this,"pairing"),Qe(this,"verify"),Qe(this,"echoClient"),Qe(this,"linkModeSupportedApps"),Qe(this,"eventClient"),Qe(this,"initialized",!1),Qe(this,"logChunkController"),Qe(this,"on",(f,h)=>this.events.on(f,h)),Qe(this,"once",(f,h)=>this.events.once(f,h)),Qe(this,"off",(f,h)=>this.events.off(f,h)),Qe(this,"removeListener",(f,h)=>this.events.removeListener(f,h)),Qe(this,"dispatchEnvelope",({topic:f,message:h,sessionExists:d})=>{if(!f||!h)return;const g={topic:f,message:h,publishedAt:Date.now(),transportType:Je.link_mode};this.relayer.onLinkMessageEvent(g,{sessionExists:d})});const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(f){console.warn("Failed to copy global core",f)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||f8,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const o=FC({level:typeof e?.logger=="string"&&e.logger?e.logger:xP.logger,name:O0}),{logger:c,chunkLoggerController:u}=D_({opts:o,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=u,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var f,h;(f=this.logChunkController)!=null&&f.downloadLogsBlobInBrowser&&((h=this.logChunkController)==null||h.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Nn(c,this.name),this.heartbeat=new P5,this.crypto=new RH(this,this.logger,e?.keychain),this.history=new Hk(this,this.logger),this.expirer=new Vk(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new SC(d3(d3({},OP),e?.storageOptions)),this.relayer=new sk({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new qk(this,this.logger),this.verify=new Yk(this,this.logger,this.storage),this.echoClient=new Xk(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new tF(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new x8(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(qP,r),n}get context(){return wn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(VS,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(VS)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&_P.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const oF=sF,O8="wc",A8=2,D8="client",Cm=`${O8}@${A8}:${D8}:`,Sy={name:D8,logger:"error"},p3="WALLETCONNECT_DEEPLINK_CHOICE",aF="proposal",g3="Proposal expired",cF="session",sa=fe.SEVEN_DAYS,uF="engine",Mt={wc_sessionPropose:{req:{ttl:fe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:fe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:fe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:fe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:fe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:fe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:fe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:fe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:fe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:fe.ONE_DAY,prompt:!1,tag:1114},res:{ttl:fe.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:fe.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:fe.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1119}}},_y={min:fe.FIVE_MINUTES,max:fe.SEVEN_DAYS},Ai={idle:"IDLE",active:"ACTIVE"},lF={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},fF="request",hF=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],dF="wc",pF="auth",gF="authKeys",yF="pairingTopics",mF="requests",Vh=`${dF}@${1.5}:${pF}:`,Zf=`${Vh}:PUB_KEY`;var bF=Object.defineProperty,wF=Object.defineProperties,vF=Object.getOwnPropertyDescriptors,y3=Object.getOwnPropertySymbols,EF=Object.prototype.hasOwnProperty,SF=Object.prototype.propertyIsEnumerable,M0=(t,e,n)=>e in t?bF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Le=(t,e)=>{for(var n in e||(e={}))EF.call(e,n)&&M0(t,n,e[n]);if(y3)for(var n of y3(e))SF.call(e,n)&&M0(t,n,e[n]);return t},Kt=(t,e)=>wF(t,vF(e)),ce=(t,e,n)=>M0(t,typeof e!="symbol"?e+"":e,n);class _F extends p${constructor(e){super(e),ce(this,"name",uF),ce(this,"events",new G0),ce(this,"initialized",!1),ce(this,"requestQueue",{state:Ai.idle,queue:[]}),ce(this,"sessionRequestQueue",{state:Ai.idle,queue:[]}),ce(this,"emittedSessionRequests",new q9({limit:500})),ce(this,"requestQueueDelay",fe.ONE_SECOND),ce(this,"expectedPairingMethodMap",new Map),ce(this,"recentlyDeletedMap",new Map),ce(this,"recentlyDeletedLimit",200),ce(this,"relayMessageCache",[]),ce(this,"pendingSessions",new Map),ce(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Mt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},fe.toMiliseconds(this.requestQueueDelay)))}),ce(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Kt(Le({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=Kz(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:u,sessionProperties:f,scopedProperties:h,relays:d}=r;let g=o,b,m=!1;try{if(g){const R=this.client.core.pairing.pairings.get(g);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),m=R.active}}catch(R){throw this.client.logger.error(`connect() -> pairing.get(${g}) failed`),R}if(!g||!m){const{topic:R,uri:U}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});g=R,b=U}if(!g){const{message:R}=le("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(R)}const v=await this.client.core.crypto.generateKeyPair(),E=Mt.wc_sessionPropose.req.ttl||fe.FIVE_MINUTES,w=pt(E),A=Kt(Le(Le({requiredNamespaces:c,optionalNamespaces:u,relays:d??[{protocol:l8}],proposer:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:w,pairingTopic:g},f&&{sessionProperties:f}),h&&{scopedProperties:h}),{id:Ti()}),N=je("session_connect",A.id),{reject:j,resolve:T,done:$}=Ls(E,g3),D=({id:R})=>{R===A.id&&(this.client.events.off("proposal_expire",D),this.pendingSessions.delete(A.id),this.events.emit(N,{error:{message:g3,code:0}}))};return this.client.events.on("proposal_expire",D),this.events.once(N,({error:R,session:U})=>{this.client.events.off("proposal_expire",D),R?j(R):U&&T(U)}),await this.sendProposeSession({proposal:A,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:A.id}}}),await this.setProposal(A.id,A),{uri:b,approval:$}}),ce(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),ce(this,"approve",async n=>{var r,o,c;const u=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[li.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(P){throw u.setError(zs.no_internet_connection),P}try{await this.isValidProposalId(n?.id)}catch(P){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),u.setError(zs.proposal_not_found),P}try{await this.isValidApprove(n)}catch(P){throw this.client.logger.error("approve() -> isValidApprove() failed"),u.setError(zs.session_approve_namespace_validation_failure),P}const{id:f,relayProtocol:h,namespaces:d,sessionProperties:g,scopedProperties:b,sessionConfig:m}=n,v=this.client.proposal.get(f);this.client.core.eventClient.deleteEvent({eventId:u.eventId});const{pairingTopic:E,proposer:w,requiredNamespaces:A,optionalNamespaces:N}=v;let j=(o=this.client.core.eventClient)==null?void 0:o.getEvent({topic:E});j||(j=(c=this.client.core.eventClient)==null?void 0:c.createEvent({type:li.session_approve_started,properties:{topic:E,trace:[li.session_approve_started,li.session_namespaces_validation_success]}}));const T=await this.client.core.crypto.generateKeyPair(),$=w.publicKey,D=await this.client.core.crypto.generateSharedKey(T,$),R=Le(Le(Le({relay:{protocol:h??"irn"},namespaces:d,controller:{publicKey:T,metadata:this.client.metadata},expiry:pt(sa)},g&&{sessionProperties:g}),b&&{scopedProperties:b}),m&&{sessionConfig:m}),U=Je.relay;j.addTrace(li.subscribing_session_topic);try{await this.client.core.relayer.subscribe(D,{transportType:U,internal:{skipSubscribe:!0}})}catch(P){throw j.setError(zs.subscribe_session_topic_failure),P}j.addTrace(li.subscribe_session_topic_success);const H=Kt(Le({},R),{topic:D,requiredNamespaces:A,optionalNamespaces:N,pairingTopic:E,acknowledged:!1,self:R.controller,peer:{publicKey:w.publicKey,metadata:w.metadata},controller:T,transportType:Je.relay});await this.client.session.set(D,H),j.addTrace(li.store_session);try{await this.sendApproveSession({sessionTopic:D,proposal:v,pairingProposalResponse:{relay:{protocol:h??"irn"},responderPublicKey:T},sessionSettleRequest:R,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:f}}}),j.addTrace(li.session_approve_publish_success)}catch(P){throw this.client.logger.error(P),this.client.session.delete(D,tt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(D),P}return this.client.core.eventClient.deleteEvent({eventId:j.eventId}),await this.client.core.pairing.updateMetadata({topic:E,metadata:w.metadata}),await this.deleteProposal(f),await this.client.core.pairing.activate({topic:E}),await this.setExpiry(D,pt(sa)),{topic:D,acknowledged:()=>Promise.resolve(this.client.session.get(D))}}),ce(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(u){throw this.client.logger.error("reject() -> isValidReject() failed"),u}const{id:r,reason:o}=n;let c;try{c=this.client.proposal.get(r).pairingTopic}catch(u){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),u}c&&await this.sendError({id:r,topic:c,error:o,rpcOpts:Mt.wc_sessionPropose.reject}),await this.deleteProposal(r)}),ce(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(b){throw this.client.logger.error("update() -> isValidUpdate() failed"),b}const{topic:r,namespaces:o}=n,{done:c,resolve:u,reject:f}=Ls(),h=Ti(),d=ls().toString(),g=this.client.session.get(r).namespaces;return this.events.once(je("session_update",h),({error:b})=>{b?f(b):u()}),await this.client.session.update(r,{namespaces:o}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:o},throwOnFailedPublish:!0,clientRpcId:h,relayRpcId:d}).catch(b=>{this.client.logger.error(b),this.client.session.update(r,{namespaces:g}),f(b)}),{acknowledged:c}}),ce(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(h){throw this.client.logger.error("extend() -> isValidExtend() failed"),h}const{topic:r}=n,o=Ti(),{done:c,resolve:u,reject:f}=Ls();return this.events.once(je("session_extend",o),({error:h})=>{h?f(h):u()}),await this.setExpiry(r,pt(sa)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:o,throwOnFailedPublish:!0}).catch(h=>{f(h)}),{acknowledged:c}}),ce(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(A){throw this.client.logger.error("request() -> isValidRequest() failed"),A}const{chainId:r,request:o,topic:c,expiry:u=Mt.wc_sessionRequest.req.ttl}=n,f=this.client.session.get(c);f?.transportType===Je.relay&&await this.confirmOnlineStateOrThrow();const h=Ti(),d=ls().toString(),{done:g,resolve:b,reject:m}=Ls(u,"Request expired. Please try again.");this.events.once(je("session_request",h),({error:A,result:N})=>{A?m(A):b(N)});const v="wc_sessionRequest",E=this.getAppLinkIfEnabled(f.peer.metadata,f.transportType);if(E)return await this.sendRequest({clientRpcId:h,relayRpcId:d,topic:c,method:v,params:{request:Kt(Le({},o),{expiryTimestamp:pt(u)}),chainId:r},expiry:u,throwOnFailedPublish:!0,appLink:E}).catch(A=>m(A)),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:r,id:h}),await g();const w={request:Kt(Le({},o),{expiryTimestamp:pt(u)}),chainId:r};return await Promise.all([new Promise(async A=>{await this.sendRequest({clientRpcId:h,relayRpcId:d,topic:c,method:v,params:w,expiry:u,throwOnFailedPublish:!0,tvf:this.getTVFParams(h,w)}).catch(N=>m(N)),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:r,id:h}),A()}),new Promise(async A=>{var N;if(!((N=f.sessionConfig)!=null&&N.disableDeepLink)){const j=await U9(this.client.core.storage,p3);await I9({id:h,topic:c,wcDeepLink:j})}A()}),g()]).then(A=>A[2])}),ce(this,"respond",async n=>{var r,o;this.isInitialized();const c=this.client.core.eventClient.createEvent({properties:{topic:n?.topic||((o=(r=n?.response)==null?void 0:r.id)==null?void 0:o.toString()),trace:[li.session_request_response_started]}});try{await this.isValidRespond(n)}catch(b){throw c.addTrace(b?.message),c.setError(zs.session_request_response_validation_failure),b}c.addTrace(li.session_request_response_validation_success);const{topic:u,response:f}=n,{id:h}=f,d=this.client.session.get(u);d.transportType===Je.relay&&await this.confirmOnlineStateOrThrow();const g=this.getAppLinkIfEnabled(d.peer.metadata,d.transportType);try{c.addTrace(li.session_request_response_publish_started),Ci(f)?await this.sendResult({id:h,topic:u,result:f.result,throwOnFailedPublish:!0,appLink:g}):Wn(f)&&await this.sendError({id:h,topic:u,error:f.error,appLink:g}),this.cleanupAfterResponse(n)}catch(b){throw c.addTrace(b?.message),c.setError(zs.session_request_response_publish_failure),b}}),ce(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(o){throw this.client.logger.error("ping() -> isValidPing() failed"),o}const{topic:r}=n;if(this.client.session.keys.includes(r)){const o=Ti(),c=ls().toString(),{done:u,resolve:f,reject:h}=Ls();this.events.once(je("session_ping",o),({error:d})=>{d?h(d):f()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:c}),u()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),ce(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:o,chainId:c}=n,u=ls().toString(),f=Ti();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:o,chainId:c},throwOnFailedPublish:!0,relayRpcId:u,clientRpcId:f})}),ce(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:tt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:o}=le("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(o)}}),ce(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>Qz(r,n)))),ce(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ce(this,"authenticate",async(n,r)=>{var o;this.isInitialized(),this.isValidAuthenticate(n);const c=r&&this.client.core.linkModeSupportedApps.includes(r)&&((o=this.client.metadata.redirect)==null?void 0:o.linkMode),u=c?Je.link_mode:Je.relay;u===Je.relay&&await this.confirmOnlineStateOrThrow();const{chains:f,statement:h="",uri:d,domain:g,nonce:b,type:m,exp:v,nbf:E,methods:w=[],expiry:A}=n,N=[...n.resources||[]],{topic:j,uri:T}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:u});this.client.logger.info({message:"Generated new pairing",pairing:{topic:j,uri:T}});const $=await this.client.core.crypto.generateKeyPair(),D=Yf($);if(await Promise.all([this.client.auth.authKeys.set(Zf,{responseTopic:D,publicKey:$}),this.client.auth.pairingTopics.set(D,{topic:D,pairingTopic:j})]),await this.client.core.relayer.subscribe(D,{transportType:u}),this.client.logger.info(`sending request to new pairing topic: ${j}`),w.length>0){const{namespace:M}=mr(f[0]);let L=Z7(M,"request",w);Gf(N)&&(L=J7(L,N.pop())),N.push(L)}const R=A&&A>Mt.wc_sessionAuthenticate.req.ttl?A:Mt.wc_sessionAuthenticate.req.ttl,U={authPayload:{type:m??"caip122",chains:f,statement:h,aud:d,domain:g,version:"1",nonce:b,iat:new Date().toISOString(),exp:v,nbf:E,resources:N},requester:{publicKey:$,metadata:this.client.metadata},expiryTimestamp:pt(R)},H={eip155:{chains:f,methods:[...new Set(["personal_sign",...w])],events:["chainChanged","accountsChanged"]}},P={requiredNamespaces:{},optionalNamespaces:H,relays:[{protocol:"irn"}],pairingTopic:j,proposer:{publicKey:$,metadata:this.client.metadata},expiryTimestamp:pt(Mt.wc_sessionPropose.req.ttl),id:Ti()},{done:W,resolve:ee,reject:G}=Ls(R,"Request expired"),F=Ti(),Y=je("session_connect",P.id),_=je("session_request",F),S=async({error:M,session:L})=>{this.events.off(_,C),M?G(M):L&&ee({session:L})},C=async M=>{var L,x,B;if(await this.deletePendingAuthRequest(F,{message:"fulfilled",code:0}),M.error){const ue=tt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return M.error.code===ue.code?void 0:(this.events.off(Y,S),G(M.error.message))}await this.deleteProposal(P.id),this.events.off(Y,S);const{cacaos:V,responder:q}=M.result,Q=[],ie=[];for(const ue of V){await nS({cacao:ue,projectId:this.client.core.projectId})||(this.client.logger.error(ue,"Signature verification failed"),G(tt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ye}=ue,xe=Gf(ye.resources),ze=[l0(ye.iss)],We=dh(ye.iss);if(xe){const He=iS(xe),Tt=rS(xe);Q.push(...He),ze.push(...Tt)}for(const He of ze)ie.push(`${He}:${We}`)}const oe=await this.client.core.crypto.generateSharedKey($,q.publicKey);let de;Q.length>0&&(de={topic:oe,acknowledged:!0,self:{publicKey:$,metadata:this.client.metadata},peer:q,controller:q.publicKey,expiry:pt(sa),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:j,namespaces:$S([...new Set(Q)],[...new Set(ie)]),transportType:u},await this.client.core.relayer.subscribe(oe,{transportType:u}),await this.client.session.set(oe,de),j&&await this.client.core.pairing.updateMetadata({topic:j,metadata:q.metadata}),de=this.client.session.get(oe)),(L=this.client.metadata.redirect)!=null&&L.linkMode&&(x=q.metadata.redirect)!=null&&x.linkMode&&(B=q.metadata.redirect)!=null&&B.universal&&r&&(this.client.core.addLinkModeSupportedApp(q.metadata.redirect.universal),this.client.session.update(oe,{transportType:Je.link_mode})),ee({auths:V,session:de})};this.events.once(Y,S),this.events.once(_,C);let z;try{if(c){const M=pi("wc_sessionAuthenticate",U,F);this.client.core.history.set(j,M);const L=await this.client.core.crypto.encode("",M,{type:Pu,encoding:us});z=Mf(r,j,L)}else await Promise.all([this.sendRequest({topic:j,method:"wc_sessionAuthenticate",params:U,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:F}),this.sendRequest({topic:j,method:"wc_sessionPropose",params:P,expiry:Mt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:P.id})])}catch(M){throw this.events.off(Y,S),this.events.off(_,C),M}return await this.setProposal(P.id,P),await this.setAuthRequest(F,{request:Kt(Le({},U),{verifyContext:{}}),pairingTopic:j,transportType:u}),{uri:z??T,response:W}}),ce(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:o}=n,c=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[qs.authenticated_session_approve_started]}});try{this.isInitialized()}catch(A){throw c.setError(zc.no_internet_connection),A}const u=this.getPendingAuthRequest(r);if(!u)throw c.setError(zc.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const f=u.transportType||Je.relay;f===Je.relay&&await this.confirmOnlineStateOrThrow();const h=u.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),g=Yf(h),b={type:br,receiverPublicKey:h,senderPublicKey:d},m=[],v=[];for(const A of o){if(!await nS({cacao:A,projectId:this.client.core.projectId})){c.setError(zc.invalid_cacao);const D=tt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:g,error:D,encodeOpts:b}),new Error(D.message)}c.addTrace(qs.cacaos_verified);const{p:N}=A,j=Gf(N.resources),T=[l0(N.iss)],$=dh(N.iss);if(j){const D=iS(j),R=rS(j);m.push(...D),T.push(...R)}for(const D of T)v.push(`${D}:${$}`)}const E=await this.client.core.crypto.generateSharedKey(d,h);c.addTrace(qs.create_authenticated_session_topic);let w;if(m?.length>0){w={topic:E,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:{publicKey:h,metadata:u.requester.metadata},controller:h,expiry:pt(sa),authentication:o,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:u.pairingTopic,namespaces:$S([...new Set(m)],[...new Set(v)]),transportType:f},c.addTrace(qs.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(E,{transportType:f})}catch(A){throw c.setError(zc.subscribe_authenticated_session_topic_failure),A}c.addTrace(qs.subscribe_authenticated_session_topic_success),await this.client.session.set(E,w),c.addTrace(qs.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:u.pairingTopic,metadata:u.requester.metadata})}c.addTrace(qs.publishing_authenticated_session_approve);try{await this.sendResult({topic:g,id:r,result:{cacaos:o,responder:{publicKey:d,metadata:this.client.metadata}},encodeOpts:b,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(u.requester.metadata,f)})}catch(A){throw c.setError(zc.authenticated_session_approve_publish_failure),A}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:u.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:c.eventId}),{session:w}}),ce(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:o}=n,c=this.getPendingAuthRequest(r);if(!c)throw new Error(`Could not find pending auth request with id ${r}`);c.transportType===Je.relay&&await this.confirmOnlineStateOrThrow();const u=c.requester.publicKey,f=await this.client.core.crypto.generateKeyPair(),h=Yf(u),d={type:br,receiverPublicKey:u,senderPublicKey:f};await this.sendError({id:r,topic:h,error:o,encodeOpts:d,rpcOpts:Mt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(c.requester.metadata,c.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),ce(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:o}=n;return bO(r,o)}),ce(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),ce(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var u,f;return((u=c.peerMetadata)==null?void 0:u.url)&&((f=c.peerMetadata)==null?void 0:f.url)===n.peer.metadata.url&&c.topic&&c.topic!==r.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),ce(this,"deleteSession",async n=>{var r;const{topic:o,expirerHasDeleted:c=!1,emitEvent:u=!0,id:f=0}=n,{self:h}=this.client.session.get(o);await this.client.core.relayer.unsubscribe(o),await this.client.session.delete(o,tt("USER_DISCONNECTED")),this.addToRecentlyDeleted(o,"session"),this.client.core.crypto.keychain.has(h.publicKey)&&await this.client.core.crypto.deleteKeyPair(h.publicKey),this.client.core.crypto.keychain.has(o)&&await this.client.core.crypto.deleteSymKey(o),c||this.client.core.expirer.del(o),this.client.core.storage.removeItem(p3).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===o&&this.deletePendingSessionRequest(d.id,tt("USER_DISCONNECTED"))}),o===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Ai.idle),u&&this.client.events.emit("session_delete",{id:f,topic:o})}),ce(this,"deleteProposal",async(n,r)=>{if(r)try{const o=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:o.pairingTopic})?.setError(zs.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,tt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),ce(this,"deletePendingSessionRequest",async(n,r,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),o?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(c=>c.id!==n),o&&(this.sessionRequestQueue.state=Ai.idle,this.client.events.emit("session_request_expire",{id:n}))}),ce(this,"deletePendingAuthRequest",async(n,r,o=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),o?Promise.resolve():this.client.core.expirer.del(n)])}),ce(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),ce(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,pt(Mt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),ce(this,"setAuthRequest",async(n,r)=>{const{request:o,pairingTopic:c,transportType:u=Je.relay}=r;this.client.core.expirer.set(n,o.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:o.authPayload,requester:o.requester,expiryTimestamp:o.expiryTimestamp,id:n,pairingTopic:c,verifyContext:o.verifyContext,transportType:u})}),ce(this,"setPendingSessionRequest",async n=>{const{id:r,topic:o,params:c,verifyContext:u}=n,f=c.request.expiryTimestamp||pt(Mt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,f),await this.client.pendingRequest.set(r,{id:r,topic:o,params:c,verifyContext:u})}),ce(this,"sendRequest",async n=>{const{topic:r,method:o,params:c,expiry:u,relayRpcId:f,clientRpcId:h,throwOnFailedPublish:d,appLink:g,tvf:b,publishOpts:m={}}=n,v=pi(o,c,h);let E;const w=!!g;try{const j=w?us:pn;E=await this.client.core.crypto.encode(r,v,{encoding:j})}catch(j){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),j}let A;if(hF.includes(o)){const j=Jn(JSON.stringify(v)),T=Jn(E);A=await this.client.core.verify.register({id:T,decryptedId:j})}const N=Le(Le({},Mt[o].req),m);if(N.attestation=A,u&&(N.ttl=u),f&&(N.id=f),this.client.core.history.set(r,v),w){const j=Mf(g,r,E);await global.Linking.openURL(j,this.client.name)}else N.tvf=Kt(Le({},b),{correlationId:v.id}),d?(N.internal=Kt(Le({},N.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,E,N)):this.client.core.relayer.publish(r,E,N).catch(j=>this.client.logger.error(j));return v.id}),ce(this,"sendProposeSession",async n=>{const{proposal:r,publishOpts:o}=n,c=pi("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,c);const u=await this.client.core.crypto.encode(r.pairingTopic,c,{encoding:pn}),f=Jn(JSON.stringify(c)),h=Jn(u),d=await this.client.core.verify.register({id:h,decryptedId:f});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:u},opts:Kt(Le({},o),{publishMethod:"wc_proposeSession",attestation:d})})}),ce(this,"sendApproveSession",async n=>{const{sessionTopic:r,pairingProposalResponse:o,proposal:c,sessionSettleRequest:u,publishOpts:f}=n,h=Du(c.id,o),d=await this.client.core.crypto.encode(c.pairingTopic,h,{encoding:pn}),g=pi("wc_sessionSettle",u,f?.id),b=await this.client.core.crypto.encode(r,g,{encoding:pn});this.client.core.history.set(r,g),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:c.pairingTopic,sessionProposalResponse:d,sessionSettlementRequest:b},opts:Kt(Le({},f),{publishMethod:"wc_approveSession"})})}),ce(this,"sendResult",async n=>{const{id:r,topic:o,result:c,throwOnFailedPublish:u,encodeOpts:f,appLink:h}=n,d=Du(r,c);let g;const b=h&&typeof(global==null?void 0:global.Linking)<"u";try{const E=b?us:pn;g=await this.client.core.crypto.encode(o,d,Kt(Le({},f||{}),{encoding:E}))}catch(E){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${o} failed`),E}let m,v;try{m=await this.client.core.history.get(o,r);const E=m.request;try{v=this.getTVFParams(r,E.params,c)}catch(w){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${w?.message}`)}}catch(E){throw this.client.logger.error(`sendResult() -> history.get(${o}, ${r}) failed`),E}if(b){const E=Mf(h,o,g);await global.Linking.openURL(E,this.client.name)}else{const E=m.request.method,w=Mt[E].res;w.tvf=Kt(Le({},v),{correlationId:r}),u?(w.internal=Kt(Le({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,g,w)):this.client.core.relayer.publish(o,g,w).catch(A=>this.client.logger.error(A))}await this.client.core.history.resolve(d)}),ce(this,"sendError",async n=>{const{id:r,topic:o,error:c,encodeOpts:u,rpcOpts:f,appLink:h}=n,d=Hh(r,c);let g;const b=h&&typeof(global==null?void 0:global.Linking)<"u";try{const v=b?us:pn;g=await this.client.core.crypto.encode(o,d,Kt(Le({},u||{}),{encoding:v}))}catch(v){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${o} failed`),v}let m;try{m=await this.client.core.history.get(o,r)}catch(v){throw this.client.logger.error(`sendError() -> history.get(${o}, ${r}) failed`),v}if(b){const v=Mf(h,o,g);await global.Linking.openURL(v,this.client.name)}else{const v=m.request.method,E=f||Mt[v].res;this.client.core.relayer.publish(o,g,E)}await this.client.core.history.resolve(d)}),ce(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(o=>{let c=!1;Ii(o.expiry)&&(c=!0),this.client.core.crypto.keychain.has(o.topic)||(c=!0),c&&n.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Ii(o.expiryTimestamp)&&r.push(o.id)}),await Promise.all([...n.map(o=>this.deleteSession({topic:o})),...r.map(o=>this.deleteProposal(o))])}),ce(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),ce(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),ce(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Ai.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ai.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Ai.idle}),ce(this,"processRequest",async n=>{const{topic:r,payload:o,attestation:c,transportType:u,encryptedId:f}=n,h=o.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:h}))switch(h){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:o,attestation:c,encryptedId:f});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,o);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,o);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,o);case"wc_sessionPing":return await this.onSessionPingRequest(r,o);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,o);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:o,attestation:c,encryptedId:f,transportType:u});case"wc_sessionEvent":return await this.onSessionEventRequest(r,o);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:o,attestation:c,encryptedId:f,transportType:u});default:return this.client.logger.info(`Unsupported request method ${h}`)}}),ce(this,"onRelayEventResponse",async n=>{const{topic:r,payload:o,transportType:c}=n,u=(await this.client.core.history.get(r,o.id)).request.method;switch(u){case"wc_sessionPropose":return this.onSessionProposeResponse(r,o,c);case"wc_sessionSettle":return this.onSessionSettleResponse(r,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,o);case"wc_sessionExtend":return this.onSessionExtendResponse(r,o);case"wc_sessionPing":return this.onSessionPingResponse(r,o);case"wc_sessionRequest":return this.onSessionRequestResponse(r,o);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,o);default:return this.client.logger.info(`Unsupported response method ${u}`)}}),ce(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:o}=le("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)}),ce(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:o}=n,c=this.expectedPairingMethodMap.get(r);return!c||c.includes(o)?!1:!!(c.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ce(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:o,attestation:c,encryptedId:u}=n,{params:f,id:h}=o;try{const d=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),d?.setError(fr.proposal_listener_not_found)),this.isValidConnect(Le({},o.params));const g=f.expiryTimestamp||pt(Mt.wc_sessionPropose.req.ttl),b=Le({id:h,pairingTopic:r,expiryTimestamp:g,attestation:c,encryptedId:u},f);await this.setProposal(h,b);const m=await this.getVerifyContext({attestationId:c,hash:Jn(JSON.stringify(o)),encryptedId:u,metadata:b.proposer.metadata});d?.addTrace(Di.emit_session_proposal),this.client.events.emit("session_proposal",{id:h,params:b,verifyContext:m})}catch(d){await this.sendError({id:h,topic:r,error:d,rpcOpts:Mt.wc_sessionPropose.autoReject}),this.client.logger.error(d)}}),ce(this,"onSessionProposeResponse",async(n,r,o)=>{const{id:c}=r;if(Ci(r)){const{result:u}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:u});const f=this.client.proposal.get(c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:f});const h=f.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:h});const d=u.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});const g=await this.client.core.crypto.generateSharedKey(h,d);this.pendingSessions.set(c,{sessionTopic:g,pairingTopic:n,proposalId:c,publicKey:h});const b=await this.client.core.relayer.subscribe(g,{transportType:o});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:b}),await this.client.core.pairing.activate({topic:n})}else if(Wn(r)){await this.deleteProposal(c);const u=je("session_connect",c);if(this.events.listenerCount(u)===0)throw new Error(`emitting ${u} without any listeners, 954`);this.events.emit(u,{error:r.error})}}),ce(this,"onSessionSettleRequest",async(n,r)=>{const{id:o,params:c}=r;try{this.isValidSessionSettleRequest(c);const{relay:u,controller:f,expiry:h,namespaces:d,sessionProperties:g,scopedProperties:b,sessionConfig:m}=r.params,v=[...this.pendingSessions.values()].find(A=>A.sessionTopic===n);if(!v)return this.client.logger.error(`Pending session not found for topic ${n}`);const E=this.client.proposal.get(v.proposalId),w=Kt(Le(Le(Le({topic:n,relay:u,expiry:h,namespaces:d,acknowledged:!0,pairingTopic:v.pairingTopic,requiredNamespaces:E.requiredNamespaces,optionalNamespaces:E.optionalNamespaces,controller:f.publicKey,self:{publicKey:v.publicKey,metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},g&&{sessionProperties:g}),b&&{scopedProperties:b}),m&&{sessionConfig:m}),{transportType:Je.relay});await this.client.session.set(w.topic,w),await this.setExpiry(w.topic,w.expiry),await this.client.core.pairing.updateMetadata({topic:v.pairingTopic,metadata:w.peer.metadata}),this.client.events.emit("session_connect",{session:w}),this.events.emit(je("session_connect",v.proposalId),{session:w}),this.pendingSessions.delete(v.proposalId),this.deleteProposal(v.proposalId,!1),this.cleanupDuplicatePairings(w),await this.sendResult({id:r.id,topic:n,result:!0})}catch(u){await this.sendError({id:o,topic:n,error:u}),this.client.logger.error(u)}}),ce(this,"onSessionSettleResponse",async(n,r)=>{const{id:o}=r;Ci(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(je("session_approve",o),{})):Wn(r)&&(await this.client.session.delete(n,tt("USER_DISCONNECTED")),this.events.emit(je("session_approve",o),{error:r.error}))}),ce(this,"onSessionUpdateRequest",async(n,r)=>{const{params:o,id:c}=r;try{const u=`${n}_session_update`,f=Mc.get(u);if(f&&this.isRequestOutOfSync(f,c)){this.client.logger.warn(`Discarding out of sync request - ${c}`),this.sendError({id:c,topic:n,error:tt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Le({topic:n},o));try{Mc.set(u,c),await this.client.session.update(n,{namespaces:o.namespaces}),await this.sendResult({id:c,topic:n,result:!0})}catch(h){throw Mc.delete(u),h}this.client.events.emit("session_update",{id:c,topic:n,params:o})}catch(u){await this.sendError({id:c,topic:n,error:u}),this.client.logger.error(u)}}),ce(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),ce(this,"onSessionUpdateResponse",(n,r)=>{const{id:o}=r,c=je("session_update",o);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners`);Ci(r)?this.events.emit(je("session_update",o),{}):Wn(r)&&this.events.emit(je("session_update",o),{error:r.error})}),ce(this,"onSessionExtendRequest",async(n,r)=>{const{id:o}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,pt(sa)),await this.sendResult({id:o,topic:n,result:!0}),this.client.events.emit("session_extend",{id:o,topic:n})}catch(c){await this.sendError({id:o,topic:n,error:c}),this.client.logger.error(c)}}),ce(this,"onSessionExtendResponse",(n,r)=>{const{id:o}=r,c=je("session_extend",o);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners`);Ci(r)?this.events.emit(je("session_extend",o),{}):Wn(r)&&this.events.emit(je("session_extend",o),{error:r.error})}),ce(this,"onSessionPingRequest",async(n,r)=>{const{id:o}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:o,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:o,topic:n})}catch(c){await this.sendError({id:o,topic:n,error:c}),this.client.logger.error(c)}}),ce(this,"onSessionPingResponse",(n,r)=>{const{id:o}=r,c=je("session_ping",o);setTimeout(()=>{if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners 2176`);Ci(r)?this.events.emit(je("session_ping",o),{}):Wn(r)&&this.events.emit(je("session_ping",o),{error:r.error})},500)}),ce(this,"onSessionDeleteRequest",async(n,r)=>{const{id:o}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(at.publish,async()=>{c(await this.deleteSession({topic:n,id:o}))})}),this.sendResult({id:o,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:tt("USER_DISCONNECTED")})]).catch(c=>this.client.logger.error(c))}catch(c){this.client.logger.error(c)}}),ce(this,"onSessionRequest",async n=>{var r,o,c;const{topic:u,payload:f,attestation:h,encryptedId:d,transportType:g}=n,{id:b,params:m}=f;try{await this.isValidRequest(Le({topic:u},m));const v=this.client.session.get(u),E=await this.getVerifyContext({attestationId:h,hash:Jn(JSON.stringify(pi("wc_sessionRequest",m,b))),encryptedId:d,metadata:v.peer.metadata,transportType:g}),w={id:b,topic:u,params:m,verifyContext:E};await this.setPendingSessionRequest(w),g===Je.link_mode&&(r=v.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((o=v.peer.metadata.redirect)==null?void 0:o.universal),(c=this.client.signConfig)!=null&&c.disableRequestQueue?this.emitSessionRequest(w):(this.addSessionRequestToSessionRequestQueue(w),this.processSessionRequestQueue())}catch(v){await this.sendError({id:b,topic:u,error:v}),this.client.logger.error(v)}}),ce(this,"onSessionRequestResponse",(n,r)=>{const{id:o}=r,c=je("session_request",o);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners`);Ci(r)?this.events.emit(je("session_request",o),{result:r.result}):Wn(r)&&this.events.emit(je("session_request",o),{error:r.error})}),ce(this,"onSessionEventRequest",async(n,r)=>{const{id:o,params:c}=r;try{const u=`${n}_session_event_${c.event.name}`,f=Mc.get(u);if(f&&this.isRequestOutOfSync(f,o)){this.client.logger.info(`Discarding out of sync request - ${o}`);return}this.isValidEmit(Le({topic:n},c)),this.client.events.emit("session_event",{id:o,topic:n,params:c}),Mc.set(u,o)}catch(u){await this.sendError({id:o,topic:n,error:u}),this.client.logger.error(u)}}),ce(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:o}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Ci(r)?this.events.emit(je("session_request",o),{result:r.result}):Wn(r)&&this.events.emit(je("session_request",o),{error:r.error})}),ce(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:o,payload:c,attestation:u,encryptedId:f,transportType:h}=n;try{const{requester:d,authPayload:g,expiryTimestamp:b}=c.params,m=await this.getVerifyContext({attestationId:u,hash:Jn(JSON.stringify(c)),encryptedId:f,metadata:d.metadata,transportType:h}),v={requester:d,pairingTopic:o,id:c.id,authPayload:g,verifyContext:m,expiryTimestamp:b};await this.setAuthRequest(c.id,{request:v,pairingTopic:o,transportType:h}),h===Je.link_mode&&(r=d.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(d.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:o,params:c.params,id:c.id,verifyContext:m})}catch(d){this.client.logger.error(d);const g=c.params.requester.publicKey,b=await this.client.core.crypto.generateKeyPair(),m=this.getAppLinkIfEnabled(c.params.requester.metadata,h),v={type:br,receiverPublicKey:g,senderPublicKey:b};await this.sendError({id:c.id,topic:o,error:d,encodeOpts:v,rpcOpts:Mt.wc_sessionAuthenticate.autoReject,appLink:m})}}),ce(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),ce(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ai.idle,this.processSessionRequestQueue()},fe.toMiliseconds(this.requestQueueDelay))}),ce(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const o=this.client.core.history.pending;o.length>0&&o.filter(c=>c.topic===n&&c.request.method==="wc_sessionRequest").forEach(c=>{const u=c.request.id,f=je("session_request",u);if(this.events.listenerCount(f)===0)throw new Error(`emitting ${f} without any listeners`);this.events.emit(je("session_request",c.request.id),{error:r})})}),ce(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Ai.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),ce(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Ai.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),ce(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(o=>o.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:pi("wc_sessionPropose",Kt(Le({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),ce(this,"isValidConnect",async n=>{if(!fn(n)){const{message:d}=le("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(d)}const{pairingTopic:r,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:u,scopedProperties:f,relays:h}=n;if(wt(r)||await this.isValidPairingTopic(r),!aq(h)){const{message:d}=le("MISSING_OR_INVALID",`connect() relays: ${h}`);throw new Error(d)}if(o&&!wt(o)&&Ui(o)!==0){const d="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(d):this.client.logger.warn(d),this.validateNamespaces(o,"requiredNamespaces")}if(c&&!wt(c)&&Ui(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),u&&!wt(u)&&this.validateSessionProps(u,"sessionProperties"),f&&!wt(f)){this.validateSessionProps(f,"scopedProperties");const d=Object.keys(o||{}).concat(Object.keys(c||{}));if(!Object.keys(f).every(g=>d.includes(g.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(f)}, required/optional namespaces: ${JSON.stringify(d)}`)}}),ce(this,"validateNamespaces",(n,r)=>{const o=oq(n,"connect()",r);if(o)throw new Error(o.message)}),ce(this,"isValidApprove",async n=>{if(!fn(n))throw new Error(le("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:o,relayProtocol:c,sessionProperties:u,scopedProperties:f}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const h=this.client.proposal.get(r),d=yy(o,"approve()");if(d)throw new Error(d.message);const g=BS(h.requiredNamespaces,o,"approve()");if(g)throw new Error(g.message);if(!gt(c,!0)){const{message:b}=le("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(b)}if(u&&!wt(u)&&this.validateSessionProps(u,"sessionProperties"),f&&!wt(f)){this.validateSessionProps(f,"scopedProperties");const b=new Set(Object.keys(o));if(!Object.keys(f).every(m=>b.has(m.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(f)}, approved namespaces: ${Array.from(b).join(", ")}`)}}),ce(this,"isValidReject",async n=>{if(!fn(n)){const{message:c}=le("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(c)}const{id:r,reason:o}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!uq(o)){const{message:c}=le("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}}),ce(this,"isValidSessionSettleRequest",n=>{if(!fn(n)){const{message:d}=le("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(d)}const{relay:r,controller:o,namespaces:c,expiry:u}=n;if(!t8(r)){const{message:d}=le("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const f=eq(o,"onSessionSettleRequest()");if(f)throw new Error(f.message);const h=yy(c,"onSessionSettleRequest()");if(h)throw new Error(h.message);if(Ii(u)){const{message:d}=le("EXPIRED","onSessionSettleRequest()");throw new Error(d)}}),ce(this,"isValidUpdate",async n=>{if(!fn(n)){const{message:h}=le("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(h)}const{topic:r,namespaces:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const c=this.client.session.get(r),u=yy(o,"update()");if(u)throw new Error(u.message);const f=BS(c.requiredNamespaces,o,"update()");if(f)throw new Error(f.message)}),ce(this,"isValidExtend",async n=>{if(!fn(n)){const{message:o}=le("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(o)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),ce(this,"isValidRequest",async n=>{if(!fn(n)){const{message:h}=le("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(h)}const{topic:r,request:o,chainId:c,expiry:u}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:f}=this.client.session.get(r);if(!RS(f,c)){const{message:h}=le("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(h)}if(!lq(o)){const{message:h}=le("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(h)}if(!dq(f,c,o.method)){const{message:h}=le("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(h)}if(u&&!mq(u,_y)){const{message:h}=le("MISSING_OR_INVALID",`request() expiry: ${u}. Expiry must be a number (in seconds) between ${_y.min} and ${_y.max}`);throw new Error(h)}}),ce(this,"isValidRespond",async n=>{var r;if(!fn(n)){const{message:f}=le("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(f)}const{topic:o,response:c}=n;try{await this.isValidSessionTopic(o)}catch(f){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),f}if(!fq(c)){const{message:f}=le("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(c)}`);throw new Error(f)}const u=this.client.pendingRequest.get(c.id);if(u.topic!==o){const{message:f}=le("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${c.id}, expected topic: ${u.topic}, received topic: ${o}`);throw new Error(f)}}),ce(this,"isValidPing",async n=>{if(!fn(n)){const{message:o}=le("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(o)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ce(this,"isValidEmit",async n=>{if(!fn(n)){const{message:f}=le("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(f)}const{topic:r,event:o,chainId:c}=n;await this.isValidSessionTopic(r);const{namespaces:u}=this.client.session.get(r);if(!RS(u,c)){const{message:f}=le("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(f)}if(!hq(o)){const{message:f}=le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}if(!pq(u,c,o.name)){const{message:f}=le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}}),ce(this,"isValidDisconnect",async n=>{if(!fn(n)){const{message:o}=le("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(o)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ce(this,"isValidAuthenticate",n=>{const{chains:r,uri:o,domain:c,nonce:u}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!gt(o,!1))throw new Error("uri is required parameter");if(!gt(c,!1))throw new Error("domain is required parameter");if(!gt(u,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(h=>mr(h).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:f}=mr(r[0]);if(f!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ce(this,"getVerifyContext",async n=>{const{attestationId:r,hash:o,encryptedId:c,metadata:u,transportType:f}=n,h={verified:{verifyUrl:u.verifyUrl||Zc,validation:"UNKNOWN",origin:u.url||""}};try{if(f===Je.link_mode){const g=this.getAppLinkIfEnabled(u,f);return h.verified.validation=g&&new URL(g).origin===new URL(u.url).origin?"VALID":"INVALID",h}const d=await this.client.core.verify.resolve({attestationId:r,hash:o,encryptedId:c,verifyUrl:u.verifyUrl});d&&(h.verified.origin=d.origin,h.verified.isScam=d.isScam,h.verified.validation=d.origin===new URL(u.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.warn(d)}return this.client.logger.debug(`Verify context: ${JSON.stringify(h)}`),h}),ce(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((o,c)=>{if(o==null){const{message:u}=le("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${o} for key ${Object.keys(n)[c]}`);throw new Error(u)}})}),ce(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),ce(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let o=0;const c=this.recentlyDeletedLimit/2;for(const u of this.recentlyDeletedMap.keys()){if(o++>=c)break;this.recentlyDeletedMap.delete(u)}}}),ce(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:o}=le("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(o)}}),ce(this,"isLinkModeEnabled",(n,r)=>{var o,c,u,f,h,d,g,b,m;return!n||r!==Je.link_mode?!1:((c=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:c.linkMode)===!0&&((f=(u=this.client.metadata)==null?void 0:u.redirect)==null?void 0:f.universal)!==void 0&&((d=(h=this.client.metadata)==null?void 0:h.redirect)==null?void 0:d.universal)!==""&&((g=n?.redirect)==null?void 0:g.universal)!==void 0&&((b=n?.redirect)==null?void 0:b.universal)!==""&&((m=n?.redirect)==null?void 0:m.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ce(this,"getAppLinkIfEnabled",(n,r)=>{var o;return this.isLinkModeEnabled(n,r)?(o=n?.redirect)==null?void 0:o.universal:void 0}),ce(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=FE(n,"topic")||"",o=decodeURIComponent(FE(n,"wc_ev")||""),c=this.client.session.keys.includes(r);c&&this.client.session.update(r,{transportType:Je.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:o,sessionExists:c})}),ce(this,"registerLinkModeListeners",async()=>{var n;if(dm()||gs()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const o=await r.getInitialURL();o&&setTimeout(()=>{this.handleLinkModeMessage({url:o})},50)}}}),ce(this,"getTVFParams",(n,r,o)=>{var c,u,f;if(!((c=r.request)!=null&&c.method))return{};const h={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const d=this.extractTxHashesFromResult(r.request,o);h.txHashes=d,h.contractAddresses=this.isValidContractData(r.request.params)?[(f=(u=r.request.params)==null?void 0:u[0])==null?void 0:f.to]:[]}catch(d){this.client.logger.warn(d,"Error getting TVF params")}return h}),ce(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const o=n?.data||((r=n?.[0])==null?void 0:r.data);if(!o.startsWith("0x"))return!1;const c=o.slice(2);return/^[0-9a-fA-F]*$/.test(c)?c.length%2===0:!1}catch{}return!1}),ce(this,"extractTxHashesFromResult",(n,r)=>{var o;try{if(!r)return[];const c=n.method,u=lF[c];if(c==="sui_signTransaction")return[B7(r.transactionBytes)];if(c==="near_signTransaction")return[JE(r)];if(c==="near_signTransactions")return r.map(h=>JE(h));if(c==="xrpl_signTransactionFor"||c==="xrpl_signTransaction")return[(o=r.tx_json)==null?void 0:o.hash];if(c==="polkadot_signTransaction")return[Rq({transaction:n.params.transactionPayload,signature:r.signature})];if(c==="algo_signTxn")return wr(r)?r.map(h=>WE(h)):[WE(r)];if(c==="cosmos_signDirect")return[N7(r)];if(c==="wallet_sendCalls")return M7(r);if(typeof r=="string")return[r];const f=r[u.key];if(wr(f))return c==="solana_signAllTransactions"?f.map(h=>R7(h)):f;if(typeof f=="string")return[f]}catch(c){this.client.logger.warn(c,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,o]of Object.entries(n))for(const c of o)try{await this.onProviderMessageEvent({topic:r,message:c,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${c}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(at.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:o,transportType:c}=e,{publicKey:u}=this.client.auth.authKeys.keys.includes(Zf)?this.client.auth.authKeys.get(Zf):{publicKey:void 0};try{const f=await this.client.core.crypto.decode(n,r,{receiverPublicKey:u,encoding:c===Je.link_mode?us:pn});Dm(f)?(this.client.core.history.set(n,f),await this.onRelayEventRequest({topic:n,payload:f,attestation:o,transportType:c,encryptedId:Jn(r)})):kh(f)?(await this.client.core.history.resolve(f),await this.onRelayEventResponse({topic:n,payload:f,transportType:c}),this.client.core.history.delete(n,f.id)):await this.onRelayEventUnknownPayload({topic:n,payload:f,transportType:c}),await this.client.core.relayer.messages.ack(n,r)}catch(f){this.client.logger.error(f)}}registerExpirerEvents(){this.client.core.expirer.on(Zn.expired,async e=>{const{topic:n,id:r}=nO(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,le("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,le("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ks.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ks.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!gt(e,!1)){const{message:n}=le("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Ii(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=le("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!gt(e,!1)){const{message:n}=le("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=le("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Ii(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=le("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=le("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(gt(e,!1)){const{message:n}=le("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=le("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!cq(e)){const{message:n}=le("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=le("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Ii(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=le("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class xF extends co{constructor(e,n){super(e,n,aF,Cm),this.core=e,this.logger=n}}let OF=class extends co{constructor(e,n){super(e,n,cF,Cm),this.core=e,this.logger=n}};class AF extends co{constructor(e,n){super(e,n,fF,Cm,r=>r.id),this.core=e,this.logger=n}}class DF extends co{constructor(e,n){super(e,n,gF,Vh,()=>Zf),this.core=e,this.logger=n}}class TF extends co{constructor(e,n){super(e,n,yF,Vh),this.core=e,this.logger=n}}class CF extends co{constructor(e,n){super(e,n,mF,Vh,r=>r.id),this.core=e,this.logger=n}}var $F=Object.defineProperty,IF=(t,e,n)=>e in t?$F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xy=(t,e,n)=>IF(t,typeof e!="symbol"?e+"":e,n);class RF{constructor(e,n){this.core=e,this.logger=n,xy(this,"authKeys"),xy(this,"pairingTopics"),xy(this,"requests"),this.authKeys=new DF(this.core,this.logger),this.pairingTopics=new TF(this.core,this.logger),this.requests=new CF(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var BF=Object.defineProperty,UF=(t,e,n)=>e in t?BF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ie=(t,e,n)=>UF(t,typeof e!="symbol"?e+"":e,n);let NF=class T8 extends d${constructor(e){super(e),Ie(this,"protocol",O8),Ie(this,"version",A8),Ie(this,"name",Sy.name),Ie(this,"metadata"),Ie(this,"core"),Ie(this,"logger"),Ie(this,"events",new ii.EventEmitter),Ie(this,"engine"),Ie(this,"session"),Ie(this,"proposal"),Ie(this,"pendingRequest"),Ie(this,"auth"),Ie(this,"signConfig"),Ie(this,"on",(r,o)=>this.events.on(r,o)),Ie(this,"once",(r,o)=>this.events.once(r,o)),Ie(this,"off",(r,o)=>this.events.off(r,o)),Ie(this,"removeListener",(r,o)=>this.events.removeListener(r,o)),Ie(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Ie(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"update",async r=>{try{return await this.engine.update(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"request",async r=>{try{return await this.engine.request(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"find",r=>{try{return this.engine.find(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Ie(this,"authenticate",async(r,o)=>{try{return await this.engine.authenticate(r,o)}catch(c){throw this.logger.error(c.message),c}}),Ie(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(o){throw this.logger.error(o.message),o}}),Ie(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(o){throw this.logger.error(o.message),o}}),this.name=e?.name||Sy.name,this.metadata=O9(e?.metadata),this.signConfig=e?.signConfig;const n=Om({logger:e?.logger||Sy.logger,name:this.name});this.logger=n,this.core=e?.core||new oF(e),this.session=new OF(this.core,this.logger),this.proposal=new xF(this.core,this.logger),this.pendingRequest=new AF(this.core,this.logger),this.engine=new _F(this),this.auth=new RF(this.core,this.logger)}static async init(e){const n=new T8(e);return await n.initialize(),n}get context(){return wn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const MF=NF;var jf={exports:{}},m3;function jF(){return m3||(m3=1,(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof $i<"u"&&$i,r=(function(){function c(){this.fetch=!1,this.DOMException=n.DOMException}return c.prototype=n,new c})();(function(c){(function(u){var f=typeof c<"u"&&c||typeof self<"u"&&self||typeof $i<"u"&&$i||{},h={searchParams:"URLSearchParams"in f,iterable:"Symbol"in f&&"iterator"in Symbol,blob:"FileReader"in f&&"Blob"in f&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in f,arrayBuffer:"ArrayBuffer"in f};function d(_){return _&&DataView.prototype.isPrototypeOf(_)}if(h.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=ArrayBuffer.isView||function(_){return _&&g.indexOf(Object.prototype.toString.call(_))>-1};function m(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(_)||_==="")throw new TypeError('Invalid character in header field name: "'+_+'"');return _.toLowerCase()}function v(_){return typeof _!="string"&&(_=String(_)),_}function E(_){var S={next:function(){var C=_.shift();return{done:C===void 0,value:C}}};return h.iterable&&(S[Symbol.iterator]=function(){return S}),S}function w(_){this.map={},_ instanceof w?_.forEach(function(S,C){this.append(C,S)},this):Array.isArray(_)?_.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(S){this.append(S,_[S])},this)}w.prototype.append=function(_,S){_=m(_),S=v(S);var C=this.map[_];this.map[_]=C?C+", "+S:S},w.prototype.delete=function(_){delete this.map[m(_)]},w.prototype.get=function(_){return _=m(_),this.has(_)?this.map[_]:null},w.prototype.has=function(_){return this.map.hasOwnProperty(m(_))},w.prototype.set=function(_,S){this.map[m(_)]=v(S)},w.prototype.forEach=function(_,S){for(var C in this.map)this.map.hasOwnProperty(C)&&_.call(S,this.map[C],C,this)},w.prototype.keys=function(){var _=[];return this.forEach(function(S,C){_.push(C)}),E(_)},w.prototype.values=function(){var _=[];return this.forEach(function(S){_.push(S)}),E(_)},w.prototype.entries=function(){var _=[];return this.forEach(function(S,C){_.push([C,S])}),E(_)},h.iterable&&(w.prototype[Symbol.iterator]=w.prototype.entries);function A(_){if(!_._noBody){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}}function N(_){return new Promise(function(S,C){_.onload=function(){S(_.result)},_.onerror=function(){C(_.error)}})}function j(_){var S=new FileReader,C=N(S);return S.readAsArrayBuffer(_),C}function T(_){var S=new FileReader,C=N(S),z=/charset=([A-Za-z0-9_-]+)/.exec(_.type),M=z?z[1]:"utf-8";return S.readAsText(_,M),C}function $(_){for(var S=new Uint8Array(_),C=new Array(S.length),z=0;z<S.length;z++)C[z]=String.fromCharCode(S[z]);return C.join("")}function D(_){if(_.slice)return _.slice(0);var S=new Uint8Array(_.byteLength);return S.set(new Uint8Array(_)),S.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(_){this.bodyUsed=this.bodyUsed,this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:h.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:h.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:h.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():h.arrayBuffer&&h.blob&&d(_)?(this._bodyArrayBuffer=D(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):h.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||b(_))?this._bodyArrayBuffer=D(_):this._bodyText=_=Object.prototype.toString.call(_):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var _=A(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var _=A(this);return _||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(h.blob)return this.blob().then(j);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var _=A(this);if(_)return _;if(this._bodyBlob)return T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve($(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(W)}),this.json=function(){return this.text().then(JSON.parse)},this}var U=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function H(_){var S=_.toUpperCase();return U.indexOf(S)>-1?S:_}function P(_,S){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var C=S.body;if(_ instanceof P){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,S.headers||(this.headers=new w(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!C&&_._bodyInit!=null&&(C=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new w(S.headers)),this.method=H(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||(function(){if("AbortController"in f){var L=new AbortController;return L.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&C)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(C),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var z=/([?&])_=[^&]*/;if(z.test(this.url))this.url=this.url.replace(z,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function W(_){var S=new FormData;return _.trim().split("&").forEach(function(C){if(C){var z=C.split("="),M=z.shift().replace(/\+/g," "),L=z.join("=").replace(/\+/g," ");S.append(decodeURIComponent(M),decodeURIComponent(L))}}),S}function ee(_){var S=new w,C=_.replace(/\r?\n[\t ]+/g," ");return C.split("\r").map(function(z){return z.indexOf(`
`)===0?z.substr(1,z.length):z}).forEach(function(z){var M=z.split(":"),L=M.shift().trim();if(L){var x=M.join(":").trim();try{S.append(L,x)}catch(B){console.warn("Response "+B.message)}}}),S}R.call(P.prototype);function G(_,S){if(!(this instanceof G))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new w(S.headers),this.url=S.url||"",this._initBody(_)}R.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},G.error=function(){var _=new G(null,{status:200,statusText:""});return _.ok=!1,_.status=0,_.type="error",_};var F=[301,302,303,307,308];G.redirect=function(_,S){if(F.indexOf(S)===-1)throw new RangeError("Invalid status code");return new G(null,{status:S,headers:{location:_}})},u.DOMException=f.DOMException;try{new u.DOMException}catch{u.DOMException=function(S,C){this.message=S,this.name=C;var z=Error(S);this.stack=z.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function Y(_,S){return new Promise(function(C,z){var M=new P(_,S);if(M.signal&&M.signal.aborted)return z(new u.DOMException("Aborted","AbortError"));var L=new XMLHttpRequest;function x(){L.abort()}L.onload=function(){var q={statusText:L.statusText,headers:ee(L.getAllResponseHeaders()||"")};M.url.indexOf("file://")===0&&(L.status<200||L.status>599)?q.status=200:q.status=L.status,q.url="responseURL"in L?L.responseURL:q.headers.get("X-Request-URL");var Q="response"in L?L.response:L.responseText;setTimeout(function(){C(new G(Q,q))},0)},L.onerror=function(){setTimeout(function(){z(new TypeError("Network request failed"))},0)},L.ontimeout=function(){setTimeout(function(){z(new TypeError("Network request timed out"))},0)},L.onabort=function(){setTimeout(function(){z(new u.DOMException("Aborted","AbortError"))},0)};function B(q){try{return q===""&&f.location.href?f.location.href:q}catch{return q}}if(L.open(M.method,B(M.url),!0),M.credentials==="include"?L.withCredentials=!0:M.credentials==="omit"&&(L.withCredentials=!1),"responseType"in L&&(h.blob?L.responseType="blob":h.arrayBuffer&&(L.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof w||f.Headers&&S.headers instanceof f.Headers)){var V=[];Object.getOwnPropertyNames(S.headers).forEach(function(q){V.push(m(q)),L.setRequestHeader(q,v(S.headers[q]))}),M.headers.forEach(function(q,Q){V.indexOf(Q)===-1&&L.setRequestHeader(Q,q)})}else M.headers.forEach(function(q,Q){L.setRequestHeader(Q,q)});M.signal&&(M.signal.addEventListener("abort",x),L.onreadystatechange=function(){L.readyState===4&&M.signal.removeEventListener("abort",x)}),L.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return Y.polyfill=!0,f.fetch||(f.fetch=Y,f.Headers=w,f.Request=P,f.Response=G),u.Headers=w,u.Request=P,u.Response=G,u.fetch=Y,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=n.fetch?n:r;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e})(jf,jf.exports)),jf.exports}var zF=jF();const b3=Oa(zF);var qF=Object.defineProperty,PF=Object.defineProperties,LF=Object.getOwnPropertyDescriptors,w3=Object.getOwnPropertySymbols,HF=Object.prototype.hasOwnProperty,kF=Object.prototype.propertyIsEnumerable,v3=(t,e,n)=>e in t?qF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E3=(t,e)=>{for(var n in e||(e={}))HF.call(e,n)&&v3(t,n,e[n]);if(w3)for(var n of w3(e))kF.call(e,n)&&v3(t,n,e[n]);return t},S3=(t,e)=>PF(t,LF(e));const FF={Accept:"application/json","Content-Type":"application/json"},VF="POST",_3={headers:FF,method:VF},x3=10;class C8{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new ii.EventEmitter,this.isAvailable=!1,this.registering=!1,!PS(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=vr(e),r=await(await b3(this.url,S3(E3({},_3),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!PS(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=vr({id:1,jsonrpc:"2.0",method:"test",params:[]});await b3(e,S3(E3({},_3),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?eo(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),o=r.message||r.toString(),c=Hh(e,o);this.events.emit("payload",c)}parseError(e,n=this.url){return r8(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>x3&&this.events.setMaxListeners(x3)}}function $m(t){return t==null||typeof t!="object"&&typeof t!="function"}function $8(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function I8(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const KF="[object RegExp]",R8="[object String]",B8="[object Number]",U8="[object Boolean]",N8="[object Arguments]",GF="[object Symbol]",YF="[object Date]",QF="[object Map]",ZF="[object Set]",XF="[object Array]",JF="[object ArrayBuffer]",WF="[object Object]",eV="[object DataView]",tV="[object Uint8Array]",nV="[object Uint8ClampedArray]",iV="[object Uint16Array]",rV="[object Uint32Array]",sV="[object Int8Array]",oV="[object Int16Array]",aV="[object Int32Array]",cV="[object Float32Array]",uV="[object Float64Array]";function Im(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function lV(t,e){return fa(t,void 0,t,new Map,e)}function fa(t,e,n,r=new Map,o=void 0){const c=o?.(t,e,n,r);if(c!=null)return c;if($m(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const u=new Array(t.length);r.set(t,u);for(let f=0;f<t.length;f++)u[f]=fa(t[f],f,n,r,o);return Object.hasOwn(t,"index")&&(u.index=t.index),Object.hasOwn(t,"input")&&(u.input=t.input),u}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const u=new RegExp(t.source,t.flags);return u.lastIndex=t.lastIndex,u}if(t instanceof Map){const u=new Map;r.set(t,u);for(const[f,h]of t)u.set(f,fa(h,f,n,r,o));return u}if(t instanceof Set){const u=new Set;r.set(t,u);for(const f of t)u.add(fa(f,void 0,n,r,o));return u}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(Im(t)){const u=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,u);for(let f=0;f<t.length;f++)u[f]=fa(t[f],f,n,r,o);return u}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const u=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,u),Fs(u,t,n,r,o),u}if(typeof File<"u"&&t instanceof File){const u=new File([t],t.name,{type:t.type});return r.set(t,u),Fs(u,t,n,r,o),u}if(t instanceof Blob){const u=new Blob([t],{type:t.type});return r.set(t,u),Fs(u,t,n,r,o),u}if(t instanceof Error){const u=new t.constructor;return r.set(t,u),u.message=t.message,u.name=t.name,u.stack=t.stack,u.cause=t.cause,Fs(u,t,n,r,o),u}if(typeof t=="object"&&fV(t)){const u=Object.create(Object.getPrototypeOf(t));return r.set(t,u),Fs(u,t,n,r,o),u}return t}function Fs(t,e,n=t,r,o){const c=[...Object.keys(e),...$8(e)];for(let u=0;u<c.length;u++){const f=c[u],h=Object.getOwnPropertyDescriptor(t,f);(h==null||h.writable)&&(t[f]=fa(e[f],f,n,r,o))}}function fV(t){switch(I8(t)){case N8:case XF:case JF:case eV:case U8:case YF:case cV:case uV:case sV:case oV:case aV:case QF:case B8:case WF:case KF:case ZF:case R8:case GF:case tV:case nV:case iV:case rV:return!0;default:return!1}}function hV(t,e){return lV(t,(n,r,o,c)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case B8:case R8:case U8:{const u=new t.constructor(t?.valueOf());return Fs(u,t),u}case N8:{const u={};return Fs(u,t),u.length=t.length,u[Symbol.iterator]=t[Symbol.iterator],u}default:return}})}function O3(t){return hV(t)}function A3(t){return t!==null&&typeof t=="object"&&I8(t)==="[object Arguments]"}function D3(t){return typeof t=="object"&&t!==null}function dV(){}function pV(t){return Im(t)}function gV(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function yV(t){if($m(t))return t;if(Array.isArray(t)||Im(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function mV(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let o=t;for(let c=0;c<n.length;c++){const u=n[c];o=j0(o,u,r,new Map)}return o}function j0(t,e,n,r){if($m(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return yV(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let c=0;c<e.length;c++)e[c]=e[c]??void 0}const o=[...Object.keys(e),...$8(e)];for(let c=0;c<o.length;c++){const u=o[c];let f=e[u],h=t[u];if(A3(f)&&(f={...f}),A3(h)&&(h={...h}),typeof Buffer<"u"&&Buffer.isBuffer(f)&&(f=O3(f)),Array.isArray(f))if(typeof h=="object"&&h!=null){const g=[],b=Reflect.ownKeys(h);for(let m=0;m<b.length;m++){const v=b[m];g[v]=h[v]}h=g}else h=[];const d=n(h,f,u,t,e,r);d!=null?t[u]=d:Array.isArray(f)||D3(h)&&D3(f)?t[u]=j0(h,f,n,r):h==null&&gV(f)?t[u]=j0({},f,n,r):h==null&&pV(f)?t[u]=O3(f):(h===void 0||f!==void 0)&&(t[u]=f)}return t}function bV(t,...e){return mV(t,...e,dV)}const T3="error",wV="wss://relay.walletconnect.org",vV="wc",M8="universal_provider",zf=`${vV}@2:${M8}:`,j8="https://rpc.walletconnect.org/v1/",z8="generic",EV=`${j8}bundler`,ya="call_status",SV=86400,Rm={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var _V=Object.defineProperty,xV=Object.defineProperties,OV=Object.getOwnPropertyDescriptors,C3=Object.getOwnPropertySymbols,AV=Object.prototype.hasOwnProperty,DV=Object.prototype.propertyIsEnumerable,$3=(t,e,n)=>e in t?_V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qf=(t,e)=>{for(var n in e||(e={}))AV.call(e,n)&&$3(t,n,e[n]);if(C3)for(var n of C3(e))DV.call(e,n)&&$3(t,n,e[n]);return t},TV=(t,e)=>xV(t,OV(e));function q8(t,e,n){var r;const o=mr(t);return((r=e.rpcMap)==null?void 0:r[o.reference])||`${j8}?chainId=${o.namespace}:${o.reference}&projectId=${n}`}function CV(t){return t.includes(":")?t.split(":")[1]:t}function P8(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function $V(t,e){const n=Object.keys(e.namespaces).filter(o=>o.includes(t));if(!n.length)return[];const r=[];return n.forEach(o=>{const c=e.namespaces[o].accounts;r.push(...c)}),r}function I3(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var r,o;return((r=n?.chains)==null?void 0:r.length)&&((o=n?.chains)==null?void 0:o.length)>0}))}function Pf(t={},e={}){const n=I3(R3(t)),r=I3(R3(e));return bV(n,r)}function R3(t){var e,n,r,o,c;const u={};if(!Ui(t))return u;for(const[f,h]of Object.entries(t)){const d=Lh(f)?[f]:h.chains,g=h.methods||[],b=h.events||[],m=h.rpcMap||{},v=la(f);u[v]=TV(qf(qf({},u[v]),h),{chains:Bi(d,(e=u[v])==null?void 0:e.chains),methods:Bi(g,(n=u[v])==null?void 0:n.methods),events:Bi(b,(r=u[v])==null?void 0:r.events)}),(Ui(m)||Ui(((o=u[v])==null?void 0:o.rpcMap)||{}))&&(u[v].rpcMap=qf(qf({},m),(c=u[v])==null?void 0:c.rpcMap))}return u}function B3(t){return t.includes(":")?t.split(":")[2]:t}function U3(t){const e={};for(const[n,r]of Object.entries(t)){const o=r.methods||[],c=r.events||[],u=r.accounts||[],f=Lh(n)?[n]:r.chains?r.chains:P8(r.accounts);e[n]={chains:f,methods:o,events:c,accounts:u}}return e}function Oy(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}function IV(t){try{const e=JSON.parse(t);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const L8={},ma=t=>L8[t],Ay=(t,e)=>{L8[t]=e};var RV=Object.defineProperty,N3=Object.getOwnPropertySymbols,BV=Object.prototype.hasOwnProperty,UV=Object.prototype.propertyIsEnumerable,M3=(t,e,n)=>e in t?RV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j3=(t,e)=>{for(var n in e||(e={}))BV.call(e,n)&&M3(t,n,e[n]);if(N3)for(var n of N3(e))UV.call(e,n)&&M3(t,n,e[n]);return t};const z3="eip155",NV=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],MV=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,Dy=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,q3=t=>Object.keys(t).filter(e=>NV.includes(e)).reduce((e,n)=>(e[n]=jV(t[n]),e),{}),jV=t=>typeof t=="string"&&IV(t)?JSON.parse(t):t,zV=(t,e,n)=>{const{sessionProperties:r={},scopedProperties:o={}}=t,c={};if(!Ui(o)&&!Ui(r))return;const u=q3(r);for(const f of n){const h=MV(f);if(!h)continue;c[Dy(h)]=u;const d=o?.[`${z3}:${h}`];if(d){const g=d?.[`${z3}:${h}:${e}`];c[Dy(h)]=j3(j3({},c[Dy(h)]),q3(g||d))}}for(const[f,h]of Object.entries(c))Object.keys(h).length===0&&delete c[f];return Object.keys(c).length>0?c:void 0};var qV=Object.defineProperty,PV=(t,e,n)=>e in t?qV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LV=(t,e,n)=>PV(t,e+"",n);let Ty;class Bm{constructor(e){LV(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,n){return await this.storage.setItem(e,n)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return Ty||(Ty=new Bm(e)),Ty}}var HV=Object.defineProperty,kV=Object.defineProperties,FV=Object.getOwnPropertyDescriptors,P3=Object.getOwnPropertySymbols,VV=Object.prototype.hasOwnProperty,KV=Object.prototype.propertyIsEnumerable,L3=(t,e,n)=>e in t?HV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,GV=(t,e)=>{for(var n in e||(e={}))VV.call(e,n)&&L3(t,n,e[n]);if(P3)for(var n of P3(e))KV.call(e,n)&&L3(t,n,e[n]);return t},YV=(t,e)=>kV(t,FV(e));async function QV(t,e){const n=mr(t.result.capabilities.caip345.caip2),r=t.result.capabilities.caip345.transactionHashes,o=await Promise.allSettled(r.map(b=>ZV(n.reference,b,e))),c=o.filter(b=>b.status==="fulfilled").map(b=>b.value).filter(b=>b);o.filter(b=>b.status==="rejected").forEach(b=>console.warn("Failed to fetch transaction receipt:",b.reason));const u=!c.length||c.some(b=>!b),f=c.every(b=>b?.status==="0x1"),h=c.every(b=>b?.status==="0x0"),d=c.some(b=>b?.status==="0x0");let g;return u?g=100:f?g=200:h?g=500:d&&(g=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:c,status:g}}async function ZV(t,e,n){return await n(parseInt(t)).request(pi("eth_getTransactionReceipt",[e]))}async function XV({sendCalls:t,storage:e}){const n=await e.getItem(ya);await e.setItem(ya,YV(GV({},n),{[t.result.id]:{request:t.request,result:t.result,expiry:pt(SV)}}))}async function JV({resultId:t,storage:e}){const n=await e.getItem(ya);if(n){delete n[t],await e.setItem(ya,n);for(const r in n)Ii(n[r].expiry)&&delete n[r];await e.setItem(ya,n)}}async function WV({resultId:t,storage:e}){const n=await e.getItem(ya),r=n?.[t];if(r&&!Ii(r.expiry))return r;await JV({resultId:t,storage:e})}var eK=Object.defineProperty,tK=Object.defineProperties,nK=Object.getOwnPropertyDescriptors,H3=Object.getOwnPropertySymbols,iK=Object.prototype.hasOwnProperty,rK=Object.prototype.propertyIsEnumerable,z0=(t,e,n)=>e in t?eK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cy=(t,e)=>{for(var n in e||(e={}))iK.call(e,n)&&z0(t,n,e[n]);if(H3)for(var n of H3(e))rK.call(e,n)&&z0(t,n,e[n]);return t},$y=(t,e)=>tK(t,nK(e)),Ps=(t,e,n)=>z0(t,typeof e!="symbol"?e+"":e,n);class sK{constructor(e){Ps(this,"name","eip155"),Ps(this,"client"),Ps(this,"chainId"),Ps(this,"namespace"),Ps(this,"httpProviders"),Ps(this,"events"),Ps(this,"storage"),this.namespace=e.namespace,this.events=ma("events"),this.client=ma("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=Bm.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n);const r=this.chainId;this.chainId=parseInt(e),this.events.emit(Rm.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||q8(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Tm(new C8(r,ma("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const o=parseInt(CV(n));e[o]=this.createHttpProvider(o,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(e){const n=e||this.chainId;return this.httpProviders[n]||(this.httpProviders=$y(Cy({},this.httpProviders),{[n]:this.createHttpProvider(n)}),this.httpProviders[n])}async handleSwitchChain(e){var n,r;let o=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,o,c,u;const f=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],h=((c=(o=e.request)==null?void 0:o.params)==null?void 0:c[1])||[];if(!f)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const d=this.client.session.get(e.topic),g=((u=d?.sessionProperties)==null?void 0:u.capabilities)||{},b=`${f}${h.join(",")}`,m=g?.[b];if(m)return m;let v;try{v=zV(d,f,h)}catch(w){console.warn("Failed to extract capabilities from session",w)}if(v)return v;const E=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:$y(Cy({},d.sessionProperties||{}),{capabilities:$y(Cy({},g||{}),{[b]:E})})})}catch(w){console.warn("Failed to update session with capabilities",w)}return E}async getCallStatus(e){var n,r,o;const c=this.client.session.get(e.topic),u=(n=c.sessionProperties)==null?void 0:n.bundler_name;if(u){const d=this.getBundlerUrl(e.chainId,u);try{return await this.getUserOperationReceipt(d,e)}catch(g){console.warn("Failed to fetch call status from bundler",g,d)}}const f=(r=c.sessionProperties)==null?void 0:r.bundler_url;if(f)try{return await this.getUserOperationReceipt(f,e)}catch(d){console.warn("Failed to fetch call status from custom bundler",d,f)}const h=await WV({resultId:(o=e.request.params)==null?void 0:o[0],storage:this.storage});if(h)try{return await QV(h,this.getHttpProvider.bind(this))}catch(d){console.warn("Failed to fetch call status from stored send calls",d,h)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const o=new URL(e),c=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pi("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!c.ok)throw new Error(`Failed to fetch user operation receipt - ${c.status}`);return await c.json()}getBundlerUrl(e,n){return`${EV}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}async sendCalls(e){var n,r,o;const c=await this.client.request(e),u=(n=e.request.params)==null?void 0:n[0],f=c?.id,h=c?.capabilities||{},d=(r=h?.caip345)==null?void 0:r.caip2,g=(o=h?.caip345)==null?void 0:o.transactionHashes;return!f||!d||!(g!=null&&g.length)||await XV({sendCalls:{request:u,result:c},storage:this.storage}),c}}var oK=Object.defineProperty,aK=(t,e,n)=>e in t?oK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oa=(t,e,n)=>aK(t,typeof e!="symbol"?e+"":e,n);class cK{constructor(e){oa(this,"name",z8),oa(this,"client"),oa(this,"httpProviders"),oa(this,"events"),oa(this,"namespace"),oa(this,"chainId"),this.namespace=e.namespace,this.events=ma("events"),this.client=ma("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n);const r=this.chainId;this.chainId=e,this.events.emit(Rm.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return mr(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(o=>{var c,u;const f=mr(o),h=(u=(c=this.namespace)==null?void 0:c.rpcMap)==null?void 0:u[`${f.namespace}:${f.reference}`];r[f.reference]=this.createHttpProvider(o,h)}),r}getHttpProvider(e){const n=mr(e).reference,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||q8(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Tm(new C8(r,ma("disableProviderPing")))}}var uK=Object.defineProperty,lK=Object.defineProperties,fK=Object.getOwnPropertyDescriptors,k3=Object.getOwnPropertySymbols,hK=Object.prototype.hasOwnProperty,dK=Object.prototype.propertyIsEnumerable,q0=(t,e,n)=>e in t?uK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lc=(t,e)=>{for(var n in e||(e={}))hK.call(e,n)&&q0(t,n,e[n]);if(k3)for(var n of k3(e))dK.call(e,n)&&q0(t,n,e[n]);return t},Lf=(t,e)=>lK(t,fK(e)),Qn=(t,e,n)=>q0(t,typeof e!="symbol"?e+"":e,n);class Um{constructor(e){Qn(this,"client"),Qn(this,"namespaces"),Qn(this,"optionalNamespaces"),Qn(this,"sessionProperties"),Qn(this,"scopedProperties"),Qn(this,"events",new G0),Qn(this,"rpcProviders",{}),Qn(this,"session"),Qn(this,"providerOpts"),Qn(this,"logger"),Qn(this,"uri"),Qn(this,"disableProviderPing",!1);var n,r;this.providerOpts=e,this.logger=Om({logger:(n=e.logger)!=null?n:T3,name:(r=this.providerOpts.name)!=null?r:M8}),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const n=new Um(e);return await n.initialize(),n}async request(e,n,r){const[o,c]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(o).request({request:Lc({},e),chainId:`${o}:${c}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,o){const c=new Date().getTime();this.request(e,r,o).then(u=>n(null,Du(c,u))).catch(u=>n(u,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:tt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:o}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const c=await o();if(this.session=c.session,this.session){const u=U3(this.session.namespaces);this.namespaces=Pf(this.namespaces,u),await this.persist("namespaces",this.namespaces),this.onConnect()}return c}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const o=await r();this.session=o;const c=U3(o.namespaces);return this.namespaces=Pf(this.namespaces,c),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,o]=this.validateChain(e);this.getProvider(r).setDefaultChain(o,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(!wr(n))return;for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}catch(n){this.logger.warn(n,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await MF.init({core:this.providerOpts.core,logger:this.providerOpts.logger||T3,relayUrl:this.providerOpts.relayUrl||wV,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error(r,"Failed to get session"),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>la(n)))];Ay("client",this.client),Ay("events",this.events),Ay("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=$V(n,this.session);if(r?.length===0)return;const o=P8(r),c=Pf(this.namespaces,this.optionalNamespaces),u=Lf(Lc({},c[n]),{accounts:r,chains:o});switch(n){case"eip155":this.rpcProviders[n]=new sK({namespace:u});break;default:this.rpcProviders[n]=new cK({namespace:u})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:o}=e;if(o!==((n=this.session)==null?void 0:n.topic))return;const{event:c}=r;if(c.name==="accountsChanged"){const u=c.data;u&&wr(u)&&this.events.emit("accountsChanged",u.map(B3))}else if(c.name==="chainChanged"){const u=r.chainId,f=r.event.data,h=la(u),d=Oy(u)!==Oy(f)?`${h}:${Oy(f)}`:u;this.onChainChanged({currentCaipChainId:d})}else this.events.emit(c.name,c.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,o;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:c}=n,u=(o=this.client)==null?void 0:o.session.get(e);this.session=Lf(Lc({},u),{namespaces:c}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Lf(Lc({},tt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Rm.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(Lf(Lc({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[z8]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:o,scopedProperties:c}=e;this.optionalNamespaces=Pf(n,r),this.sessionProperties=o,this.scopedProperties=c}validateChain(e){const[n,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(u=>la(u)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const o=la(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:n,internal:r=!1}){if(!this.namespaces)return;const[o,c]=this.validateChain(e);c&&(this.updateNamespaceChain(o,c),r?(this.events.emit("chainChanged",c),this.emitAccountsChangedOnChainChange({namespace:o,currentCaipChainId:e,previousCaipChainId:n})):this.getProvider(o).setDefaultChain(c),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:n,previousCaipChainId:r}){var o,c;try{if(r===n)return;const u=(c=(o=this.session)==null?void 0:o.namespaces[e])==null?void 0:c.accounts;if(!u)return;const f=u.filter(h=>h.includes(`${n}:`)).map(B3);if(!wr(f))return;this.events.emit("accountsChanged",f)}catch(u){this.logger.warn(u,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,o={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=o}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const o=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${zf}/${e}${o}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${zf}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${zf}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(zf)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn(n,"Failed to cleanup storage")}}}function pK(t){const{projectId:e,metadata:n}=t;return r=>{let o;async function c(){return o||(o=await Um.init({projectId:e,metadata:n??{name:"Connection Test",description:"WalletConnect v2 Universal Provider",url:typeof window<"u"?window.location.origin:"http://localhost",icons:["https://avatars.githubusercontent.com/u/37784886?s=200&v=4"]}}),o.on?.("display_uri",f=>{try{RT(f)}catch{}}),o.on?.("session_update",f=>{try{const h=(f?.params?.namespaces?.eip155?.accounts??[]).map(d=>d.split(":")[2]);h?.length&&r.emitter.emit("change",{accounts:h})}catch{}}),o.on?.("session_delete",()=>{try{r.emitter.emit("disconnect")}catch{}}),o)}async function u(){try{const f=await c(),h=f?.core?.pairing?.getPairings?.()??[];for(const d of h)await f.core.pairing.delete({topic:d.topic})}catch{}}return{id:"walletConnect",name:"WalletConnect",type:"walletConnect",async getProvider(){return await c()},async connect({chainId:f}={}){const h=await c();await u();const d=f?[f]:r.chains.map(A=>A.id),g={eip155:{methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain"],chains:d.map(A=>`eip155:${A}`),events:["chainChanged","accountsChanged"]}},b=h.connect({namespaces:g,requiredNamespaces:g}),m=await Promise.race([(async()=>({ok:!0,session:await b}))(),new Promise(A=>setTimeout(()=>A({ok:!1}),6e4))]);if(!m.ok){try{await h.disconnect?.()}catch{}try{const A=h?.core?.pairing?.getPairings?.()??[];for(const N of A)await h.core.pairing.delete({topic:N.topic})}catch{}throw new Error("Connection timed out")}const v=m.session,E=(v?.namespaces?.eip155?.accounts??[]).map(A=>A.split(":")[2]),w=(()=>{const A=v?.namespaces?.eip155?.chains?.[0];return A?Number(A.split(":")[1]):f??r.chains[0].id})();return{accounts:E,chainId:w}},async disconnect(){const f=await c();try{await f.disconnect?.()}catch{}try{const h=f?.core?.pairing?.getPairings?.()??[];for(const d of h)await f.core.pairing.delete({topic:d.topic})}catch{}try{if(typeof localStorage<"u"){try{localStorage.removeItem("wagmi.store")}catch{}try{localStorage.removeItem("walletconnect")}catch{}try{localStorage.removeItem("injected.connected")}catch{}Object.keys(localStorage).forEach(h=>{if(h.toLowerCase().includes("walletconnect")||h.toLowerCase().includes("wc@"))try{localStorage.removeItem(h)}catch{}})}}catch{}},async getAccounts(){return await(await c()).request({method:"eth_accounts"})},async getChainId(){const h=await(await c()).request({method:"eth_chainId"});return typeof h=="string"?parseInt(h,16):Number(h)},async isAuthorized(){try{return(await this.getAccounts()).length>0}catch{return!1}},onAccountsChanged(f){r.emitter.emit("change",{accounts:f}),f.length===0&&r.emitter.emit("disconnect")},onChainChanged(f){const h=typeof f=="string"?parseInt(f,16):Number(f);r.emitter.emit("change",{chainId:h})},onDisconnect(){r.emitter.emit("disconnect")}}}}const gK=new o5,yK="536c04f6d8471f0b4af9cfa72213eed7",mK=Z4({chains:[w2],connectors:[Eh(),pK({projectId:yK,metadata:{name:"Connection Test",description:"WalletConnect v2 Universal Provider",url:typeof window<"u"?window.location.origin:"http://localhost",icons:["https://avatars.githubusercontent.com/u/37784886?s=200&v=4"]}})],transports:{[w2.id]:O4()}}),bK=mD.createRoot(document.getElementById("root"));bK.render(ei.jsx(uD.StrictMode,{children:ei.jsx(c5,{client:gK,children:ei.jsx(W4,{config:mK,reconnectOnMount:!1,children:ei.jsx(UT,{})})})}));
